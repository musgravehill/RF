
import javax.swing.JOptionPane; // Had to change this which meant showMessageDialog() changes
final boolean debugPort = true; 



import processing.serial.*;

long value1 = 0;
int value2 = 0;
int value3 = 0;


int graph_w = 1000;
int graph_h = 300;
int[] vswr = new int[graph_w];

//correction
int[] vswr_shortPort = new int[1000];




int graph_x_curr = 0;

Serial myPort;  // Create object from Serial class

void setup() {   
  size(1050, 350);
  background(0);
  frameRate(1); //1/24seconds

  // Allow user to choose serial port
  String COMx = "";
  try {

    if (debugPort) printArray(Serial.list());

    int numPorts = Serial.list().length;
    if (numPorts != 0) {

      COMx = (String) JOptionPane.showInputDialog(null, 
        "Select COM port", 
        "Select port", 
        JOptionPane.QUESTION_MESSAGE, 
        null, 
        Serial.list(), 
        Serial.list()[0]);

      if (COMx == null) exit();
      if (COMx.isEmpty()) exit();

      myPort = new Serial(this, COMx, 57600); // change baud rate to your liking
      myPort.bufferUntil('\n'); // buffer until CR/LF appears, but not required..
    } else {
      JOptionPane.showMessageDialog(frame, "Device is not connected to the PC");
      exit();
    }
  }          
  // Then the rest of setup() because exit() does not exit in Processing until setup() is done.         
  catch (Exception e)
  { //Print the type of error
    JOptionPane.showMessageDialog(frame, "COM port " + COMx + " is not available (maybe in use by another program)");
    println("Error:", e);
    exit();
  }
  
  
vswr_shortPort[33]=0;
vswr_shortPort[34]=0;
vswr_shortPort[35]=0;
vswr_shortPort[36]=0;
vswr_shortPort[37]=1;
vswr_shortPort[38]=1;
vswr_shortPort[39]=0;
vswr_shortPort[40]=1;
vswr_shortPort[41]=1;
vswr_shortPort[42]=1;
vswr_shortPort[43]=1;
vswr_shortPort[44]=0;
vswr_shortPort[45]=1;
vswr_shortPort[46]=1;
vswr_shortPort[47]=2;
vswr_shortPort[48]=0;
vswr_shortPort[49]=1;
vswr_shortPort[50]=1;
vswr_shortPort[51]=1;
vswr_shortPort[52]=1;
vswr_shortPort[53]=1;
vswr_shortPort[54]=0;
vswr_shortPort[55]=1;
vswr_shortPort[56]=1;
vswr_shortPort[57]=1;
vswr_shortPort[58]=1;
vswr_shortPort[59]=1;
vswr_shortPort[60]=1;
vswr_shortPort[61]=2;
vswr_shortPort[62]=1;
vswr_shortPort[63]=2;
vswr_shortPort[64]=1;
vswr_shortPort[65]=1;
vswr_shortPort[66]=1;
vswr_shortPort[67]=1;
vswr_shortPort[68]=2;
vswr_shortPort[69]=2;
vswr_shortPort[70]=2;
vswr_shortPort[71]=2;
vswr_shortPort[72]=2;
vswr_shortPort[73]=2;
vswr_shortPort[74]=1;
vswr_shortPort[75]=1;
vswr_shortPort[76]=1;
vswr_shortPort[77]=2;
vswr_shortPort[78]=2;
vswr_shortPort[79]=2;
vswr_shortPort[80]=2;
vswr_shortPort[81]=2;
vswr_shortPort[82]=2;
vswr_shortPort[83]=1;
vswr_shortPort[84]=1;
vswr_shortPort[85]=2;
vswr_shortPort[86]=1;
vswr_shortPort[87]=2;
vswr_shortPort[88]=2;
vswr_shortPort[89]=1;
vswr_shortPort[90]=2;
vswr_shortPort[91]=2;
vswr_shortPort[92]=2;
vswr_shortPort[93]=1;
vswr_shortPort[94]=2;
vswr_shortPort[95]=2;
vswr_shortPort[96]=2;
vswr_shortPort[97]=2;
vswr_shortPort[98]=2;
vswr_shortPort[99]=2;
vswr_shortPort[100]=2;
vswr_shortPort[101]=2;
vswr_shortPort[102]=2;
vswr_shortPort[103]=3;
vswr_shortPort[104]=2;
vswr_shortPort[105]=2;
vswr_shortPort[106]=3;
vswr_shortPort[107]=2;
vswr_shortPort[108]=3;
vswr_shortPort[109]=3;
vswr_shortPort[110]=2;
vswr_shortPort[111]=3;
vswr_shortPort[112]=2;
vswr_shortPort[113]=3;
vswr_shortPort[114]=2;
vswr_shortPort[115]=2;
vswr_shortPort[116]=2;
vswr_shortPort[117]=2;
vswr_shortPort[118]=2;
vswr_shortPort[119]=3;
vswr_shortPort[120]=2;
vswr_shortPort[121]=2;
vswr_shortPort[122]=2;
vswr_shortPort[123]=3;
vswr_shortPort[124]=2;
vswr_shortPort[125]=2;
vswr_shortPort[126]=2;
vswr_shortPort[127]=2;
vswr_shortPort[128]=3;
vswr_shortPort[129]=3;
vswr_shortPort[130]=2;
vswr_shortPort[131]=3;
vswr_shortPort[132]=3;
vswr_shortPort[133]=3;
vswr_shortPort[134]=3;
vswr_shortPort[135]=3;
vswr_shortPort[136]=3;
vswr_shortPort[137]=3;
vswr_shortPort[138]=4;
vswr_shortPort[139]=3;
vswr_shortPort[140]=4;
vswr_shortPort[141]=3;
vswr_shortPort[142]=3;
vswr_shortPort[143]=3;
vswr_shortPort[144]=4;
vswr_shortPort[145]=4;
vswr_shortPort[146]=3;
vswr_shortPort[147]=3;
vswr_shortPort[148]=3;
vswr_shortPort[149]=4;
vswr_shortPort[150]=4;
vswr_shortPort[151]=4;
vswr_shortPort[152]=4;
vswr_shortPort[153]=4;
vswr_shortPort[154]=3;
vswr_shortPort[155]=4;
vswr_shortPort[156]=4;
vswr_shortPort[157]=4;
vswr_shortPort[158]=3;
vswr_shortPort[159]=4;
vswr_shortPort[160]=4;
vswr_shortPort[161]=5;
vswr_shortPort[162]=4;
vswr_shortPort[163]=4;
vswr_shortPort[164]=4;
vswr_shortPort[165]=3;
vswr_shortPort[166]=4;
vswr_shortPort[167]=4;
vswr_shortPort[168]=4;
vswr_shortPort[169]=4;
vswr_shortPort[170]=4;
vswr_shortPort[171]=4;
vswr_shortPort[172]=4;
vswr_shortPort[173]=4;
vswr_shortPort[174]=4;
vswr_shortPort[175]=4;
vswr_shortPort[176]=4;
vswr_shortPort[177]=4;
vswr_shortPort[178]=4;
vswr_shortPort[179]=3;
vswr_shortPort[180]=4;
vswr_shortPort[181]=4;
vswr_shortPort[182]=3;
vswr_shortPort[183]=3;
vswr_shortPort[184]=3;
vswr_shortPort[185]=3;
vswr_shortPort[186]=4;
vswr_shortPort[187]=3;
vswr_shortPort[188]=4;
vswr_shortPort[189]=3;
vswr_shortPort[190]=4;
vswr_shortPort[191]=4;
vswr_shortPort[192]=3;
vswr_shortPort[193]=4;
vswr_shortPort[194]=4;
vswr_shortPort[195]=4;
vswr_shortPort[196]=4;
vswr_shortPort[197]=3;
vswr_shortPort[198]=4;
vswr_shortPort[199]=4;
vswr_shortPort[200]=4;
vswr_shortPort[201]=4;
vswr_shortPort[202]=4;
vswr_shortPort[203]=5;
vswr_shortPort[204]=3;
vswr_shortPort[205]=4;
vswr_shortPort[206]=3;
vswr_shortPort[207]=4;
vswr_shortPort[208]=4;
vswr_shortPort[209]=4;
vswr_shortPort[210]=4;
vswr_shortPort[211]=4;
vswr_shortPort[212]=4;
vswr_shortPort[213]=4;
vswr_shortPort[214]=3;
vswr_shortPort[215]=4;
vswr_shortPort[216]=4;
vswr_shortPort[217]=4;
vswr_shortPort[218]=4;
vswr_shortPort[219]=4;
vswr_shortPort[220]=4;
vswr_shortPort[221]=4;
vswr_shortPort[222]=4;
vswr_shortPort[223]=5;
vswr_shortPort[224]=5;
vswr_shortPort[225]=5;
vswr_shortPort[226]=5;
vswr_shortPort[227]=5;
vswr_shortPort[228]=5;
vswr_shortPort[229]=4;
vswr_shortPort[230]=4;
vswr_shortPort[231]=5;
vswr_shortPort[232]=5;
vswr_shortPort[233]=5;
vswr_shortPort[234]=5;
vswr_shortPort[235]=4;
vswr_shortPort[236]=5;
vswr_shortPort[237]=4;
vswr_shortPort[238]=4;
vswr_shortPort[239]=4;
vswr_shortPort[240]=5;
vswr_shortPort[241]=5;
vswr_shortPort[242]=4;
vswr_shortPort[243]=5;
vswr_shortPort[244]=4;
vswr_shortPort[245]=4;
vswr_shortPort[246]=4;
vswr_shortPort[247]=5;
vswr_shortPort[248]=4;
vswr_shortPort[249]=5;
vswr_shortPort[250]=5;
vswr_shortPort[251]=5;
vswr_shortPort[252]=5;
vswr_shortPort[253]=5;
vswr_shortPort[254]=4;
vswr_shortPort[255]=5;
vswr_shortPort[256]=5;
vswr_shortPort[257]=5;
vswr_shortPort[258]=5;
vswr_shortPort[259]=5;
vswr_shortPort[260]=5;
vswr_shortPort[261]=4;
vswr_shortPort[262]=5;
vswr_shortPort[263]=5;
vswr_shortPort[264]=5;
vswr_shortPort[265]=5;
vswr_shortPort[266]=6;
vswr_shortPort[267]=5;
vswr_shortPort[268]=6;
vswr_shortPort[269]=5;
vswr_shortPort[270]=5;
vswr_shortPort[271]=6;
vswr_shortPort[272]=6;
vswr_shortPort[273]=6;
vswr_shortPort[274]=5;
vswr_shortPort[275]=6;
vswr_shortPort[276]=6;
vswr_shortPort[277]=6;
vswr_shortPort[278]=6;
vswr_shortPort[279]=6;
vswr_shortPort[280]=6;
vswr_shortPort[281]=6;
vswr_shortPort[282]=6;
vswr_shortPort[283]=7;
vswr_shortPort[284]=6;
vswr_shortPort[285]=6;
vswr_shortPort[286]=6;
vswr_shortPort[287]=6;
vswr_shortPort[288]=6;
vswr_shortPort[289]=6;
vswr_shortPort[290]=6;
vswr_shortPort[291]=6;
vswr_shortPort[292]=6;
vswr_shortPort[293]=6;
vswr_shortPort[294]=6;
vswr_shortPort[295]=6;
vswr_shortPort[296]=6;
vswr_shortPort[297]=6;
vswr_shortPort[298]=6;
vswr_shortPort[299]=6;
vswr_shortPort[300]=5;
vswr_shortPort[301]=6;
vswr_shortPort[302]=6;
vswr_shortPort[303]=6;
vswr_shortPort[304]=6;
vswr_shortPort[305]=6;
vswr_shortPort[306]=6;
vswr_shortPort[307]=6;
vswr_shortPort[308]=6;
vswr_shortPort[309]=6;
vswr_shortPort[310]=6;
vswr_shortPort[311]=6;
vswr_shortPort[312]=6;
vswr_shortPort[313]=6;
vswr_shortPort[314]=6;
vswr_shortPort[315]=7;
vswr_shortPort[316]=6;
vswr_shortPort[317]=6;
vswr_shortPort[318]=7;
vswr_shortPort[319]=7;
vswr_shortPort[320]=7;
vswr_shortPort[321]=7;
vswr_shortPort[322]=6;
vswr_shortPort[323]=7;
vswr_shortPort[324]=7;
vswr_shortPort[325]=7;
vswr_shortPort[326]=7;
vswr_shortPort[327]=7;
vswr_shortPort[328]=8;
vswr_shortPort[329]=7;
vswr_shortPort[330]=7;
vswr_shortPort[331]=7;
vswr_shortPort[332]=7;
vswr_shortPort[333]=7;
vswr_shortPort[334]=7;
vswr_shortPort[335]=8;
vswr_shortPort[336]=7;
vswr_shortPort[337]=7;
vswr_shortPort[338]=8;
vswr_shortPort[339]=8;
vswr_shortPort[340]=7;
vswr_shortPort[341]=8;
vswr_shortPort[342]=8;
vswr_shortPort[343]=8;
vswr_shortPort[344]=7;
vswr_shortPort[345]=8;
vswr_shortPort[346]=7;
vswr_shortPort[347]=8;
vswr_shortPort[348]=8;
vswr_shortPort[349]=7;
vswr_shortPort[350]=8;
vswr_shortPort[351]=8;
vswr_shortPort[352]=7;
vswr_shortPort[353]=8;
vswr_shortPort[354]=8;
vswr_shortPort[355]=8;
vswr_shortPort[356]=7;
vswr_shortPort[357]=8;
vswr_shortPort[358]=7;
vswr_shortPort[359]=7;
vswr_shortPort[360]=8;
vswr_shortPort[361]=8;
vswr_shortPort[362]=8;
vswr_shortPort[363]=7;
vswr_shortPort[364]=7;
vswr_shortPort[365]=7;
vswr_shortPort[366]=8;
vswr_shortPort[367]=7;
vswr_shortPort[368]=6;
vswr_shortPort[369]=7;
vswr_shortPort[370]=8;
vswr_shortPort[371]=7;
vswr_shortPort[372]=7;
vswr_shortPort[373]=7;
vswr_shortPort[374]=7;
vswr_shortPort[375]=7;
vswr_shortPort[376]=7;
vswr_shortPort[377]=6;
vswr_shortPort[378]=7;
vswr_shortPort[379]=8;
vswr_shortPort[380]=7;
vswr_shortPort[381]=7;
vswr_shortPort[382]=7;
vswr_shortPort[383]=7;
vswr_shortPort[384]=7;
vswr_shortPort[385]=7;
vswr_shortPort[386]=7;
vswr_shortPort[387]=7;
vswr_shortPort[388]=7;
vswr_shortPort[389]=7;
vswr_shortPort[390]=7;
vswr_shortPort[391]=7;
vswr_shortPort[392]=7;
vswr_shortPort[393]=7;
vswr_shortPort[394]=7;
vswr_shortPort[395]=7;
vswr_shortPort[396]=7;
vswr_shortPort[397]=7;
vswr_shortPort[398]=7;
vswr_shortPort[399]=7;
vswr_shortPort[400]=8;
vswr_shortPort[401]=7;
vswr_shortPort[402]=8;
vswr_shortPort[403]=7;
vswr_shortPort[404]=7;
vswr_shortPort[405]=7;
vswr_shortPort[406]=7;
vswr_shortPort[407]=7;
vswr_shortPort[408]=7;
vswr_shortPort[409]=7;
vswr_shortPort[410]=6;
vswr_shortPort[411]=7;
vswr_shortPort[412]=6;
vswr_shortPort[413]=7;
vswr_shortPort[414]=7;
vswr_shortPort[415]=6;
vswr_shortPort[416]=6;
vswr_shortPort[417]=7;
vswr_shortPort[418]=6;
vswr_shortPort[419]=6;
vswr_shortPort[420]=6;
vswr_shortPort[421]=6;
vswr_shortPort[422]=7;
vswr_shortPort[423]=6;
vswr_shortPort[424]=6;
vswr_shortPort[425]=7;
vswr_shortPort[426]=6;
vswr_shortPort[427]=7;
vswr_shortPort[428]=7;
vswr_shortPort[429]=6;
vswr_shortPort[430]=7;
vswr_shortPort[431]=7;
vswr_shortPort[432]=6;
vswr_shortPort[433]=7;
vswr_shortPort[434]=6;
vswr_shortPort[435]=7;
vswr_shortPort[436]=6;
vswr_shortPort[437]=7;
vswr_shortPort[438]=8;
vswr_shortPort[439]=7;
vswr_shortPort[440]=7;
vswr_shortPort[441]=7;
vswr_shortPort[442]=7;
vswr_shortPort[443]=8;
vswr_shortPort[444]=7;
vswr_shortPort[445]=8;
vswr_shortPort[446]=7;
vswr_shortPort[447]=8;
vswr_shortPort[448]=8;
vswr_shortPort[449]=7;
vswr_shortPort[450]=8;
vswr_shortPort[451]=8;
vswr_shortPort[452]=8;
vswr_shortPort[453]=8;
vswr_shortPort[454]=9;
vswr_shortPort[455]=9;
vswr_shortPort[456]=9;
vswr_shortPort[457]=9;
vswr_shortPort[458]=9;
vswr_shortPort[459]=9;
vswr_shortPort[460]=9;
vswr_shortPort[461]=8;
vswr_shortPort[462]=8;
vswr_shortPort[463]=8;
vswr_shortPort[464]=9;
vswr_shortPort[465]=9;
vswr_shortPort[466]=9;
vswr_shortPort[467]=9;
vswr_shortPort[468]=9;
vswr_shortPort[469]=9;
vswr_shortPort[470]=10;
vswr_shortPort[471]=9;
vswr_shortPort[472]=10;
vswr_shortPort[473]=9;
vswr_shortPort[474]=10;
vswr_shortPort[475]=10;
vswr_shortPort[476]=10;
vswr_shortPort[477]=10;
vswr_shortPort[478]=10;
vswr_shortPort[479]=11;
vswr_shortPort[480]=10;
vswr_shortPort[481]=10;
vswr_shortPort[482]=11;
vswr_shortPort[483]=10;
vswr_shortPort[484]=11;
vswr_shortPort[485]=10;
vswr_shortPort[486]=11;
vswr_shortPort[487]=11;
vswr_shortPort[488]=11;
vswr_shortPort[489]=11;
vswr_shortPort[490]=12;
vswr_shortPort[491]=11;
vswr_shortPort[492]=11;
vswr_shortPort[493]=11;
vswr_shortPort[494]=11;
vswr_shortPort[495]=11;
vswr_shortPort[496]=12;
vswr_shortPort[497]=11;
vswr_shortPort[498]=11;
vswr_shortPort[499]=11;
vswr_shortPort[500]=12;
vswr_shortPort[501]=11;
vswr_shortPort[502]=11;
vswr_shortPort[503]=11;
vswr_shortPort[504]=12;
vswr_shortPort[505]=11;
vswr_shortPort[506]=12;
vswr_shortPort[507]=11;
vswr_shortPort[508]=11;
vswr_shortPort[509]=10;
vswr_shortPort[510]=11;
vswr_shortPort[511]=11;
vswr_shortPort[512]=10;
vswr_shortPort[513]=11;
vswr_shortPort[514]=10;
vswr_shortPort[515]=10;
vswr_shortPort[516]=10;
vswr_shortPort[517]=10;
vswr_shortPort[518]=10;
vswr_shortPort[519]=10;
vswr_shortPort[520]=10;
vswr_shortPort[521]=10;
vswr_shortPort[522]=10;
vswr_shortPort[523]=10;
vswr_shortPort[524]=10;
vswr_shortPort[525]=10;
vswr_shortPort[526]=10;
vswr_shortPort[527]=10;
vswr_shortPort[528]=9;
vswr_shortPort[529]=9;
vswr_shortPort[530]=10;
vswr_shortPort[531]=9;
vswr_shortPort[532]=9;
vswr_shortPort[533]=9;
vswr_shortPort[534]=9;
vswr_shortPort[535]=9;
vswr_shortPort[536]=9;
vswr_shortPort[537]=9;
vswr_shortPort[538]=9;
vswr_shortPort[539]=9;
vswr_shortPort[540]=7;
vswr_shortPort[541]=8;
vswr_shortPort[542]=8;
vswr_shortPort[543]=8;
vswr_shortPort[544]=8;
vswr_shortPort[545]=8;
vswr_shortPort[546]=8;
vswr_shortPort[547]=8;
vswr_shortPort[548]=8;
vswr_shortPort[549]=8;
vswr_shortPort[550]=8;
vswr_shortPort[551]=9;
vswr_shortPort[552]=8;
vswr_shortPort[553]=8;
vswr_shortPort[554]=8;
vswr_shortPort[555]=8;
vswr_shortPort[556]=7;
vswr_shortPort[557]=7;
vswr_shortPort[558]=8;
vswr_shortPort[559]=8;
vswr_shortPort[560]=8;
vswr_shortPort[561]=7;
vswr_shortPort[562]=8;
vswr_shortPort[563]=8;
vswr_shortPort[564]=8;
vswr_shortPort[565]=8;
vswr_shortPort[566]=8;
vswr_shortPort[567]=8;
vswr_shortPort[568]=8;
vswr_shortPort[569]=7;
vswr_shortPort[570]=7;
vswr_shortPort[571]=8;
vswr_shortPort[572]=7;
vswr_shortPort[573]=7;
vswr_shortPort[574]=7;
vswr_shortPort[575]=7;
vswr_shortPort[576]=8;
vswr_shortPort[577]=7;
vswr_shortPort[578]=7;
vswr_shortPort[579]=7;
vswr_shortPort[580]=7;
vswr_shortPort[581]=7;
vswr_shortPort[582]=7;
vswr_shortPort[583]=7;
vswr_shortPort[584]=7;
vswr_shortPort[585]=7;
vswr_shortPort[586]=6;
vswr_shortPort[587]=7;
vswr_shortPort[588]=7;
vswr_shortPort[589]=7;
vswr_shortPort[590]=6;
vswr_shortPort[591]=6;
vswr_shortPort[592]=7;
vswr_shortPort[593]=7;
vswr_shortPort[594]=7;
vswr_shortPort[595]=7;
vswr_shortPort[596]=7;
vswr_shortPort[597]=6;
vswr_shortPort[598]=7;
vswr_shortPort[599]=7;
vswr_shortPort[600]=7;
vswr_shortPort[601]=7;
vswr_shortPort[602]=6;
vswr_shortPort[603]=7;
vswr_shortPort[604]=7;
vswr_shortPort[605]=6;
vswr_shortPort[606]=7;
vswr_shortPort[607]=6;
vswr_shortPort[608]=6;
vswr_shortPort[609]=7;
vswr_shortPort[610]=7;
vswr_shortPort[611]=6;
vswr_shortPort[612]=6;
vswr_shortPort[613]=7;
vswr_shortPort[614]=7;
vswr_shortPort[615]=7;
vswr_shortPort[616]=6;
vswr_shortPort[617]=7;
vswr_shortPort[618]=7;
vswr_shortPort[619]=6;
vswr_shortPort[620]=7;
vswr_shortPort[621]=7;
vswr_shortPort[622]=6;
vswr_shortPort[623]=7;
vswr_shortPort[624]=7;
vswr_shortPort[625]=7;
vswr_shortPort[626]=7;
vswr_shortPort[627]=7;
vswr_shortPort[628]=7;
vswr_shortPort[629]=7;
vswr_shortPort[630]=7;
vswr_shortPort[631]=7;
vswr_shortPort[632]=6;
vswr_shortPort[633]=7;
vswr_shortPort[634]=7;
vswr_shortPort[635]=7;
vswr_shortPort[636]=7;
vswr_shortPort[637]=7;
vswr_shortPort[638]=7;
vswr_shortPort[639]=7;
vswr_shortPort[640]=7;
vswr_shortPort[641]=7;
vswr_shortPort[642]=7;
vswr_shortPort[643]=7;
vswr_shortPort[644]=7;
vswr_shortPort[645]=7;
vswr_shortPort[646]=7;
vswr_shortPort[647]=7;
vswr_shortPort[648]=8;
vswr_shortPort[649]=8;
vswr_shortPort[650]=8;
vswr_shortPort[651]=7;
vswr_shortPort[652]=7;
vswr_shortPort[653]=7;
vswr_shortPort[654]=7;
vswr_shortPort[655]=7;
vswr_shortPort[656]=7;
vswr_shortPort[657]=8;
vswr_shortPort[658]=8;
vswr_shortPort[659]=7;
vswr_shortPort[660]=8;
vswr_shortPort[661]=8;
vswr_shortPort[662]=7;
vswr_shortPort[663]=8;
vswr_shortPort[664]=8;
vswr_shortPort[665]=7;
vswr_shortPort[666]=8;
vswr_shortPort[667]=7;
vswr_shortPort[668]=8;
vswr_shortPort[669]=8;
vswr_shortPort[670]=8;
vswr_shortPort[671]=8;
vswr_shortPort[672]=8;
vswr_shortPort[673]=8;
vswr_shortPort[674]=8;
vswr_shortPort[675]=8;
vswr_shortPort[676]=8;
vswr_shortPort[677]=8;
vswr_shortPort[678]=7;
vswr_shortPort[679]=8;
vswr_shortPort[680]=8;
vswr_shortPort[681]=8;
vswr_shortPort[682]=8;
vswr_shortPort[683]=9;
vswr_shortPort[684]=9;
vswr_shortPort[685]=8;
vswr_shortPort[686]=9;
vswr_shortPort[687]=9;
vswr_shortPort[688]=8;
vswr_shortPort[689]=8;
vswr_shortPort[690]=8;
vswr_shortPort[691]=9;
vswr_shortPort[692]=9;
vswr_shortPort[693]=8;
vswr_shortPort[694]=9;
vswr_shortPort[695]=9;
vswr_shortPort[696]=8;
vswr_shortPort[697]=9;
vswr_shortPort[698]=9;
vswr_shortPort[699]=8;
vswr_shortPort[700]=9;
vswr_shortPort[701]=10;
vswr_shortPort[702]=9;
vswr_shortPort[703]=9;
vswr_shortPort[704]=10;
vswr_shortPort[705]=8;
vswr_shortPort[706]=9;
vswr_shortPort[707]=10;
vswr_shortPort[708]=10;
vswr_shortPort[709]=9;
vswr_shortPort[710]=9;
vswr_shortPort[711]=9;
vswr_shortPort[712]=9;
vswr_shortPort[713]=10;
vswr_shortPort[714]=10;
vswr_shortPort[715]=10;
vswr_shortPort[716]=10;
vswr_shortPort[717]=9;
vswr_shortPort[718]=10;
vswr_shortPort[719]=10;
vswr_shortPort[720]=10;
vswr_shortPort[721]=10;
vswr_shortPort[722]=11;
vswr_shortPort[723]=10;
vswr_shortPort[724]=10;
vswr_shortPort[725]=10;
vswr_shortPort[726]=10;
vswr_shortPort[727]=10;
vswr_shortPort[728]=10;
vswr_shortPort[729]=10;
vswr_shortPort[730]=10;
vswr_shortPort[731]=11;
vswr_shortPort[732]=11;
vswr_shortPort[733]=10;
vswr_shortPort[734]=11;
vswr_shortPort[735]=10;
vswr_shortPort[736]=10;
vswr_shortPort[737]=11;
vswr_shortPort[738]=11;
vswr_shortPort[739]=11;
vswr_shortPort[740]=11;
vswr_shortPort[741]=11;
vswr_shortPort[742]=11;
vswr_shortPort[743]=10;
vswr_shortPort[744]=11;
vswr_shortPort[745]=10;
vswr_shortPort[746]=11;
vswr_shortPort[747]=12;
vswr_shortPort[748]=11;
vswr_shortPort[749]=12;
vswr_shortPort[750]=11;
vswr_shortPort[751]=11;
vswr_shortPort[752]=11;
vswr_shortPort[753]=12;
vswr_shortPort[754]=12;
vswr_shortPort[755]=11;
vswr_shortPort[756]=11;
vswr_shortPort[757]=11;
vswr_shortPort[758]=12;
vswr_shortPort[759]=12;
vswr_shortPort[760]=12;
vswr_shortPort[761]=12;
vswr_shortPort[762]=12;
vswr_shortPort[763]=12;
vswr_shortPort[764]=12;
vswr_shortPort[765]=13;
vswr_shortPort[766]=13;
vswr_shortPort[767]=12;
vswr_shortPort[768]=12;
vswr_shortPort[769]=12;
vswr_shortPort[770]=13;
vswr_shortPort[771]=13;
vswr_shortPort[772]=12;
vswr_shortPort[773]=13;
vswr_shortPort[774]=13;
vswr_shortPort[775]=13;
vswr_shortPort[776]=13;
vswr_shortPort[777]=13;
vswr_shortPort[778]=14;
vswr_shortPort[779]=14;
vswr_shortPort[780]=14;
vswr_shortPort[781]=14;
vswr_shortPort[782]=13;
vswr_shortPort[783]=14;
vswr_shortPort[784]=14;
vswr_shortPort[785]=14;
vswr_shortPort[786]=14;
vswr_shortPort[787]=14;
vswr_shortPort[788]=14;
vswr_shortPort[789]=15;
vswr_shortPort[790]=15;
vswr_shortPort[791]=14;
vswr_shortPort[792]=14;
vswr_shortPort[793]=15;
vswr_shortPort[794]=14;
vswr_shortPort[795]=15;
vswr_shortPort[796]=15;
vswr_shortPort[797]=15;
vswr_shortPort[798]=15;
vswr_shortPort[799]=14;
vswr_shortPort[800]=15;
vswr_shortPort[801]=15;
vswr_shortPort[802]=14;
vswr_shortPort[803]=15;
vswr_shortPort[804]=15;
vswr_shortPort[805]=15;
vswr_shortPort[806]=15;
vswr_shortPort[807]=15;
vswr_shortPort[808]=16;
vswr_shortPort[809]=16;
vswr_shortPort[810]=15;
vswr_shortPort[811]=16;
vswr_shortPort[812]=16;
vswr_shortPort[813]=16;
vswr_shortPort[814]=16;
vswr_shortPort[815]=15;
vswr_shortPort[816]=16;
vswr_shortPort[817]=16;
vswr_shortPort[818]=16;
vswr_shortPort[819]=16;
vswr_shortPort[820]=15;
vswr_shortPort[821]=16;
vswr_shortPort[822]=16;
vswr_shortPort[823]=15;
vswr_shortPort[824]=16;
vswr_shortPort[825]=16;
vswr_shortPort[826]=16;
vswr_shortPort[827]=16;
vswr_shortPort[828]=16;
vswr_shortPort[829]=16;
vswr_shortPort[830]=16;
vswr_shortPort[831]=16;
vswr_shortPort[832]=16;
vswr_shortPort[833]=16;
vswr_shortPort[834]=15;
vswr_shortPort[835]=16;
vswr_shortPort[836]=16;
vswr_shortPort[837]=16;
vswr_shortPort[838]=16;
vswr_shortPort[839]=16;
vswr_shortPort[840]=15;
vswr_shortPort[841]=15;
vswr_shortPort[842]=15;
vswr_shortPort[843]=16;
vswr_shortPort[844]=16;
vswr_shortPort[845]=16;
vswr_shortPort[846]=16;
vswr_shortPort[847]=16;
vswr_shortPort[848]=15;
vswr_shortPort[849]=15;
vswr_shortPort[850]=16;
vswr_shortPort[851]=15;
vswr_shortPort[852]=15;
vswr_shortPort[853]=15;
vswr_shortPort[854]=15;
vswr_shortPort[855]=15;
vswr_shortPort[856]=14;
vswr_shortPort[857]=15;
vswr_shortPort[858]=15;
vswr_shortPort[859]=15;
vswr_shortPort[860]=15;
vswr_shortPort[861]=15;
vswr_shortPort[862]=15;
vswr_shortPort[863]=15;
vswr_shortPort[864]=15;
vswr_shortPort[865]=15;
vswr_shortPort[866]=14;
vswr_shortPort[867]=14;
vswr_shortPort[868]=14;
vswr_shortPort[869]=14;
vswr_shortPort[870]=14;
vswr_shortPort[871]=14;
vswr_shortPort[872]=14;
vswr_shortPort[873]=13;
vswr_shortPort[874]=14;
vswr_shortPort[875]=13;
vswr_shortPort[876]=13;
vswr_shortPort[877]=14;
vswr_shortPort[878]=13;
vswr_shortPort[879]=13;
vswr_shortPort[880]=13;
vswr_shortPort[881]=12;
vswr_shortPort[882]=13;
vswr_shortPort[883]=13;
vswr_shortPort[884]=12;
vswr_shortPort[885]=13;
vswr_shortPort[886]=13;
vswr_shortPort[887]=13;
vswr_shortPort[888]=13;
vswr_shortPort[889]=12;
vswr_shortPort[890]=13;
vswr_shortPort[891]=12;
vswr_shortPort[892]=11;
vswr_shortPort[893]=12;
vswr_shortPort[894]=12;
vswr_shortPort[895]=11;
vswr_shortPort[896]=12;
vswr_shortPort[897]=12;
vswr_shortPort[898]=11;
vswr_shortPort[899]=11;
vswr_shortPort[900]=12;
vswr_shortPort[901]=12;
vswr_shortPort[902]=12;
vswr_shortPort[903]=12;
vswr_shortPort[904]=11;
vswr_shortPort[905]=11;
vswr_shortPort[906]=11;
vswr_shortPort[907]=11;
vswr_shortPort[908]=11;
vswr_shortPort[909]=11;
vswr_shortPort[910]=11;
vswr_shortPort[911]=11;
vswr_shortPort[912]=11;
vswr_shortPort[913]=11;
vswr_shortPort[914]=11;
vswr_shortPort[915]=11;
vswr_shortPort[916]=10;
vswr_shortPort[917]=10;
vswr_shortPort[918]=11;
vswr_shortPort[919]=11;
vswr_shortPort[920]=10;
vswr_shortPort[921]=11;
vswr_shortPort[922]=11;
vswr_shortPort[923]=11;
vswr_shortPort[924]=11;
vswr_shortPort[925]=11;
vswr_shortPort[926]=10;
vswr_shortPort[927]=10;
vswr_shortPort[928]=11;
vswr_shortPort[929]=10;
vswr_shortPort[930]=11;
vswr_shortPort[931]=10;
vswr_shortPort[932]=11;
vswr_shortPort[933]=10;
vswr_shortPort[934]=10;
vswr_shortPort[935]=10;
vswr_shortPort[936]=11;
vswr_shortPort[937]=10;
vswr_shortPort[938]=10;
vswr_shortPort[939]=11;
vswr_shortPort[940]=10;
vswr_shortPort[941]=10;
vswr_shortPort[942]=10;
vswr_shortPort[943]=10;
vswr_shortPort[944]=10;
vswr_shortPort[945]=10;
vswr_shortPort[946]=10;
vswr_shortPort[947]=10;
vswr_shortPort[948]=10;
vswr_shortPort[949]=10;
vswr_shortPort[950]=10;
vswr_shortPort[951]=10;
vswr_shortPort[952]=10;
vswr_shortPort[953]=10;
vswr_shortPort[954]=10;
vswr_shortPort[955]=10;
vswr_shortPort[956]=10;
vswr_shortPort[957]=10;
vswr_shortPort[958]=10;
vswr_shortPort[959]=10;
vswr_shortPort[960]=10;
vswr_shortPort[961]=10;
vswr_shortPort[962]=10;

  
  
}

void draw() { 
  background(0);
  stroke(255, 0, 0);
  for (int i = 0; i < vswr.length; i++) {
    int y = vswr[i];
    int j = (i>0)? i-1: 0;
    int y_prev=vswr[j];
    if (y>0 && y_prev>0) {
      line(j, graph_h -y_prev, i, graph_h - y);
    }
  }
} 

void serialEvent (Serial myPort) {  
  String myString = myPort.readString();   
  if (myString != null) {    
    myString = trim(myString);   
    text(myString, 1, 60); 
    String sensors[] = split(myString, ';');
    if (sensors.length>1) {
      value1 = int(sensors[0]); 
      value2 = int(sensors[1]); 
      value3 = int(sensors[2]); 
      print(value1);
      print(';');
      print(value2);
      print(';');
      println(value3);
      
      
      //int freqMHz = (int)value1 / 1000000; 
      //print("corr=");
     // println(vswr_shortPort[freqMHz]); 

      //for draw    
      //value3 = value3 - vswr_shortPort[freqMHz];
      int graph_y = int (map(value3, 0, 1023, 0, graph_h));  
      vswr[graph_x_curr] = 1+graph_y; //0 = no line
      if (graph_x_curr>= graph_w) {
        graph_x_curr=0;
      } else {
        graph_x_curr++;
      }
    }
  }
}
