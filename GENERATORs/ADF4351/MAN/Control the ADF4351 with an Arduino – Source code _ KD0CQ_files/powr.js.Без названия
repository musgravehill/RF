!function(){function e(){return"http://localhost:3000"!=p&&"https://localhost:3000"!=p&&"http://10.0.2.2:3000"!=p&&"http://localhost:8888"!=p?function(){}:console.log.bind(window.console)}function t(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)}function n(t,n,o,r,i,a){var d=t;e()("Match:",t);var l=d.match(/powr-[^\s\]]*/i),s=d.match(/id="[^"]*"/i);null==s&&(s=d.match(/id='[^']*'/i)),null==s&&null!=(s=d.match(/id=[^\]]*/i))&&(s=s[0].replace("id=",'id="')+'"'),null==s&&(s=d.match(/label="[^"]*"/i)),null==s&&(s=d.match(/label='[^']*'/i)),null==s&&(s="");var c='<div class="'+l+'" '+s+"></div>";return e()("Result is:"+c),c}function o(e){for(var t={},n=e.search("\\?"),o=(e=e.substr(n+1)).split("&"),r=0;r<o.length;r++){var i=o[r].split("=");if(void 0===t[i[0]])t[i[0]]=i[1];else if("string"==typeof t[i[0]]){var a=[t[i[0]],i[1]];t[i[0]]=a}else t[i[0]].push(i[1])}return t}function r(){var e=navigator.userAgent.toLowerCase();return-1!=e.indexOf("msie")&&parseInt(e.split("msie")[1])}function i(e){for(var t=!1,n=e;n&&n!==document;n=n.parentNode)if(void 0!=n.classList&&n.classList.contains("powr-ignore")){t=!0;break}return t}function a(){try{return window.top.location.href}catch(t){return e()("Couldn't get page url:",t),""}}function d(t,n,o){function r(){var r={message:"loaded",data:{iframe_index:n,parent_window_width:window.innerWidth||document.documentElement.clientWidth||document.getElementsByTagName("body")[0].clientWidth,parent_window_height:window.innerHeight||document.documentElement.clientHeight||document.getElementsByTagName("body")[0].clientHeight}};e()("POWr.js sending load message to url"+o+"; iframe:",t),t.contentWindow.postMessage(JSON.stringify(r),o)}t.addEventListener?t.addEventListener("load",r):t.attachEvent("onload",r)}function l(e,t){t.addEventListener&&(t.addEventListener("powrPingListener",function(){return POWR_RECEIVERS[e].listenerConnected=!0,!0},!1),POWR_RECEIVERS[e].ping_interval=setInterval(function(){var t=document.querySelectorAll('[powrindex="'+e+'"]')[0];t&&(POWR_RECEIVERS[e].listenerConnected=!1,t.dispatchEvent(v),!1===POWR_RECEIVERS[e].listenerConnected&&(console.log("POWr Lost connection. Reconnecting"),clearInterval(POWR_RECEIVERS[e].ping_interval),POWR_RECEIVERS[e].receiver=t.contentWindow,s(e),l(e,t)))},2e3))}function s(t){var n=new XMLHttpRequest;n.open("GET",POWR_RECEIVERS[t].data_url,!0),n.withCredentials=!0,n.onreadystatechange=function(){if(e()("Async ready state change!",n),n.readyState==XMLHttpRequest.DONE||4==n.readyState)if(200==n.status){var o=JSON.parse(n.responseText);o.iframe_index=t,POWR_RECEIVERS[t].data=o;var r=setInterval(function(){POWR_RECEIVERS[t].loaded&&(POWR_RECEIVERS[t].receiver.postMessage(JSON.stringify({message:"loadView",data:o}),POWR_RECEIVERS[t].url),clearInterval(r))},10)}else e()("Error receiving POWr App Data")},n.send()}function c(e){for(var t=window.getComputedStyle(e),n=e,o=t.backgroundColor;("rgba(0, 0, 0, 0)"==o||"transparent"==o)&&n.parentElement;)n=n.parentElement,o=window.getComputedStyle(n).backgroundColor;return"&color="+encodeURIComponent(t.color)+"&backgroundColor="+encodeURIComponent(o)+"&fontFamily="+encodeURIComponent(t.fontFamily)}function u(t){e()("Settings got a message!",t);try{var n=JSON.parse(t.data);if("viewLoaded"==n.message){e()("Settings received view loaded");o=n.data.iframe_index;POWR_RECEIVERS[o].loaded=!0}else if("updateSize"==n.message){"undefined"!=typeof gadgets&&void 0!==gadgets.window&&void 0!==gadgets.window.adjustHeight&&gadgets.window.adjustHeight(n.data.height);var o=n.data.iframe_index,r=document.querySelectorAll('[powrindex="'+o+'"]')[0];if(r&&(r.height=n.data.height+"px",r.style.height=n.data.height+"px",void 0!=n.data.postCss))for(var i in n.data.postCss)r.style[i]=n.data.postCss[i];e()("Updating size of el",r)}else if("loadMe"==n.message){e()("Settings received loadMe request");o=n.data.iframe_index;void 0!=POWR_RECEIVERS[o]&&void 0!=POWR_RECEIVERS[o].data&&POWR_RECEIVERS[o].receiver.postMessage(JSON.stringify({message:"loadView",data:POWR_RECEIVERS[o].data}),POWR_RECEIVERS[o].url)}}catch(e){}}var p="https://www.powr.io";if("undefined"==typeof loadPowr){window.addEventListener?window.addEventListener("message",u):window.attachEvent("onmessage",u);var g=0;POWR_RECEIVERS=[];var v=document.createEvent("Event");v.initEvent("powrPingListener",!0,!0),loadPowr=function(){for(var u=null,v=null,E=null,m=!1,w=document.querySelectorAll("script"),f=0;f<w.length;f++){var R=w[f],h=R.getAttribute("src");if(void 0!=h){var y=R.getAttribute("powr-token"),C=R.getAttribute("external-type"),_=R.getAttribute("template-powr-token"),S=R.getAttribute("powr-load");if(void 0==S&&(S="async"),r()&&r()<=9&&(S="sync"),m=R.getAttribute("demo-mode"),void 0!=y?u=y:h.search("powr-token")>-1&&void 0!==(E=o(h))["powr-token"]&&E["powr-token"].length>0&&(u=E["powr-token"]),void 0!=C?v=C:h.search("external-type")>-1&&void 0!=(E=o(h))["external-type"]&&E["external-type"].length>0&&(v=E["external-type"]),void 0!=u||void 0!=v)break}}if(null==u||0==u.length)try{u=window.top.location.host}catch(e){u=""}for(var b=/\[powr-[^\]]*\]/gi,I=/\[powr-[^\s\]]*/gi,O=document.querySelectorAll("a"),f=0;f<O.length;f++)if(!i(A=O[f])){var P=A.previousSibling,W=A.nextSibling;if(P&&W&&A.getAttribute("href")&&A.getAttribute("href").search("tel")>-1&&3==P.nodeType&&3==W.nodeType&&P.nodeValue.match(I)&&W.nodeValue.search("]")>-1){var V=A.innerHTML,L=P.nodeValue.match(/powr-[^\s\]]*/gi)[0];(T=document.createElement("div")).innerHTML='<div class="'+L+'" label="'+V+'"></div>',P.parentNode.removeChild(P),W.parentNode.removeChild(W),A.parentNode.replaceChild(T,A)}}for(var O=document.querySelectorAll("body, body *"),f=0;f<O.length;f++){var A=O[f],x=A.childNodes;if(!i(A))for(j=0;j<x.length;j++){var k=x[j];if(3==k.nodeType){var N=k.nodeValue,M=N.replace(b,n);if(M!=N){var T=document.createElement("div");T.innerHTML=M,A.replaceChild(T,k)}}}}if(0==document.querySelectorAll("#powrIframeLoader").length){var q=document.createElement("div"),H=document.getElementsByTagName("base")[0]||document.getElementsByTagName("script")[0];q.id="powrIframeLoader",q.innerHTML="&shy;<style> .powrLoaded iframe { visibility: hidden; } </style>",H.parentNode.insertBefore(q,H)}for(var J=document.querySelectorAll("[class*=powr-]"),U=!1,f=0;f<J.length;f++){var B=J[f];if(!i(B)&&!(B instanceof SVGElement||B.className.search("powrLoaded")>-1)){for(var D=B.className.split(/\s+/),j=0;j<D.length;j++)if(0===D[j].toLowerCase().search("powr-")){var z=D[j].toLowerCase().replace("powr-","");break}if(void 0!==z){"popup"==z&&(U=!0);var F=B.getAttribute("label");if(void 0==F&&(F=""),"weebly_"!=F){B.className+=" powrLoaded",void 0==_&&(_="");var G=B.getAttribute("id");void 0==G&&(G="");var X=B.getAttribute("view-mode"),Y="true"==m||"true"==B.getAttribute("demo-mode"),K=p+"/plugins/"+z+"/cached_view?load="+S+"&index="+g+"&unique_label="+G+"&powr_token="+u+"&user_label="+encodeURIComponent(F)+"&demo_mode="+Y,Q="https://www.powr.io/plugins/"+z+"/view.json?unique_label="+G+"&powr_token="+u+"&user_label="+encodeURIComponent(F)+"&demo_mode="+Y;if(void 0!=v&&(Q+="&external_type="+v,K+="&external_type="+v),void 0!=_&&(Q+="&template_powr_token="+_,K+="&template_powr_token="+_),void 0!=X&&(Q+="&view_mode="+X,K+="&view_mode="+X),e()("page url IS "+a()),a()&&(Q+="&url="+encodeURIComponent(a())),document.location.host)Z=document.location.protocol+"//"+document.location.host;else try{Z=document.location.ancestorOrigins[0]}catch(e){var Z=""}Q+="&request_url="+encodeURIComponent(Z),K+=c(B);var $=document.createElement("iframe");$.src=K,$.setAttribute("powrindex",g),$.width="100%",$.height="0px",$.style.height="0px",$.frameBorder="0",$.style.visibility="visible",$.setAttribute("webkitallowfullscreen",""),$.setAttribute("mozallowfullscreen",""),$.setAttribute("allowfullscreen","");try{/iPhone|iPod|iPad/.test(navigator.userAgent)&&($.style.minWidth="100%",$.style.width="1px",$.setAttribute("scrolling","no"))}catch(e){console.log("Err: "+e)}d($,g,K),B.appendChild($);var ee=$.contentWindow;POWR_RECEIVERS.push({receiver:ee,url:K,data_url:Q}),"async"==S&&(s(g),l(g,$)),g++}}}}U&&(t(document,"click",function(e){var t=(e=e||window.event).relatedTarget||e.toElement||e.target;if(t&&t.classList.contains("trigger-popup"))for(var n=0;n<POWR_RECEIVERS.length;n++)POWR_RECEIVERS[n].receiver.postMessage(JSON.stringify({message:"triggerPowrPopupClick"}),POWR_RECEIVERS[n].url)}),t(document,"mouseout",function(e){if((e=e||window.event).clientY<5)for(var t=0;t<POWR_RECEIVERS.length;t++)POWR_RECEIVERS[t].receiver.postMessage(JSON.stringify({message:"exitDocument"}),POWR_RECEIVERS[t].url)}))};for(var E=0;E<10;E++)setTimeout(function(){loadPowr()},2e3*E);t(window,"load",loadPowr);var m=!1;t(window,"keydown",function(e){if(80==e.keyCode&&(m=!0,setTimeout(function(){m=!1},2e3)),38==e.keyCode&&m){for(t=0;t<POWR_RECEIVERS.length;t++)POWR_RECEIVERS[t].receiver.postMessage(JSON.stringify({message:"showEdit"}),POWR_RECEIVERS[t].url);return e.preventDefault(),!1}if(40==e.keyCode&&m){for(var t=0;t<POWR_RECEIVERS.length;t++)POWR_RECEIVERS[t].receiver.postMessage(JSON.stringify({message:"hideEdit"}),POWR_RECEIVERS[t].url);return e.preventDefault(),!1}})}else e()("Powr already loaded")}();
