(window.webpackJsonp=window.webpackJsonp||[]).push([["common"],{"+/AQ":function(e,t,n){"use strict";n.r(t),n.d(t,"getNativeOption",(function(){return o})),n.d(t,"setNativeOption",(function(){return i})),n.d(t,"createScroll",(function(){return u}));var r=n("ofcU");function o(e,t){return bodyNode[e]||document.documentElement[e]}function i(e,t,n){"scrollTop"===e&&window.scrollTo(0,t)}class a{constructor(e,t){this.el=e,this.opts=t,this.module=Object(r.createModule)({handlers:(e,t)=>{e(window,"scroll",this.onScroll.bind(this)),e(window,"resize",this.resize.bind(this))}}),this.innerHeight=window.innerHeight,this.prevScroll=this.scrollTop()}update(){}resize(){this.innerHeight=window.innerHeight}scrollTop(e){if(void 0===e)return o("scrollTop",this.el);i("scrollTop",e,this.el)}contHeight(){return o("scrollHeight")}smoothScroll(e){scrollToY(e+this.scrollTop(),300)}getContainer(){return this.el}getScroller(){return null}scrollBottom(e){if(void 0===e)return this.contHeight()-this.scrollTop()-this.getScrollHeight();var t=this.contHeight()-e-this.getScrollHeight();this.scrollTop(t)}scrollBottomFixSave(e){var t=()=>{Date.now()-n<500&&this.scrollBottom(e),window.removeEventListener("scroll",t)},n=Date.now();window.addEventListener("scroll",t),this.scrollBottom(e)}onScroll(e){var t=this.scrollTop(),n=t-this.prevScroll,r=this.contHeight();this.opts.onScroll&&this.opts.onScroll(-n,this),this.opts.scrollChange&&this.opts.scrollChange(t),this.opts.more&&r-t<2*this.innerHeight&&this.opts.more(this),this.prevScroll=t}getScrollHeight(){return this.innerHeight}destroy(){Object(r.destroyModule)(this.module)}}class s{constructor(e,t){this.prevTop=0,this.scroll=new uiScroll(e,{hidden:void 0===t.hidden||t.hidden,shadows:t.shadows,stopScrollPropagation:!1,theme:t.scrollTheme,onmore:()=>t.more&&t.more(this),onscroll:e=>{var n=this.scrollTop(),r=this.prevTop-n;this.prevTop=n,t.scrollChange&&t.scrollChange(n),t.onScroll&&t.onScroll(r,this)}})}update(){this.scroll.update("sync")}scrollTop(e){return void 0!==e?this.scroll.scrollTop(e):this.scroll.data.scrollTop}getContainer(){return this.scroll.content}getScroller(){return this.scroll.scroller}contHeight(){return this.scroll.data.scrollHeight}smoothScroll(e){this.scroll.scrollTop(this.scrollTop()+e,300)}scrollBottom(e){return void 0!==e?this.scroll.scrollBottom(e):this.scroll.data.scrollBottom}scrollBottomFixSave(e){var t=Date.now();this.scroll.emitter.addOnceListener("resize",()=>{Date.now()-t<500&&this.scroll&&this.scrollBottom(e)}),this.scrollBottom(e)}getScrollHeight(){return this.scroll.data.viewportHeight}destroy(){this.scroll.destroy()}}class c{constructor(e,t){this.el=e}update(){}getContainer(){return this.el}getScroller(){return null}scrollTop(e){return 0}contHeight(){return 0}smoothScroll(e){}scrollBottom(e){return 0}scrollBottomFixSave(e){}getScrollHeight(){return 0}destroy(){}}function u(e,t){return t.noScroll?new c(e):t.nativeScroll?new a(e,t):new s(e,t)}},"+MXk":function(__webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"emailNotConfirmed",(function(){return emailNotConfirmed})),__webpack_require__.d(__webpack_exports__,"showCaptcha",(function(){return showCaptcha})),__webpack_require__.d(__webpack_exports__,"mobileValidationRequired",(function(){return mobileValidationRequired})),__webpack_require__.d(__webpack_exports__,"passwordValidationRequired",(function(){return passwordValidationRequired})),__webpack_require__.d(__webpack_exports__,"authFailed",(function(){return authFailed})),__webpack_require__.d(__webpack_exports__,"makeRedirect",(function(){return makeRedirect})),__webpack_require__.d(__webpack_exports__,"reload",(function(){return reload})),__webpack_require__.d(__webpack_exports__,"mobileActivationRequired",(function(){return mobileActivationRequired})),__webpack_require__.d(__webpack_exports__,"showMessage",(function(){return showMessage})),__webpack_require__.d(__webpack_exports__,"showError",(function(){return showError})),__webpack_require__.d(__webpack_exports__,"votesPayment",(function(){return votesPayment})),__webpack_require__.d(__webpack_exports__,"otpBox",(function(){return otpBox})),__webpack_require__.d(__webpack_exports__,"zeroZone",(function(){return zeroZone})),__webpack_require__.d(__webpack_exports__,"evalCode",(function(){return evalCode})),__webpack_require__.d(__webpack_exports__,"defaultHandler",(function(){return defaultHandler}));var core_js_modules_es6_object_assign__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("91GP"),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("pIFo"),_shared_lib_convert__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("cGUQ"),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("t7n3"),_web_lib_message_box__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("EasH"),_web_lib_dom__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("zxIV"),_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("98sY"),_web_lib_ui_util__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("ryw6"),_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("kcIO"),_web_gifts_gifts__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("HwS1"),_modal_box__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("eQf/"),_web_lib_environment__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("wVf2");function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function resetOptionsCache(e){return e.cache?_extends({},e,{cache:-1}):e}function emailNotConfirmed(e,t){Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_4__.showFastBox)({width:520,title:t[0],onDestroy:e.onFail},t[1])}function showCaptcha(e,t,n){2===Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__.intval)(t[1])?e._captcha=Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_4__.showReCaptchaBox)(t[0],t[2],e._captcha,{onSubmit:function(t){var r=_extends({},n,{recaptcha:t,captcha_sid:null,captcha_key:null});e.resend(r,resetOptionsCache(e))},onDestroy:function(){e.onFail&&e.onFail()}}):e._captcha=Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_4__.showCaptchaBox)(t[0],Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__.intval)(t[1]),e._captcha,{onSubmit:function(t,r){var o=_extends({},n,{captcha_sid:t,captcha_key:r});e.resend(o,resetOptionsCache(e))},onDestroy:function(){e.onFail&&e.onFail()}}),e._suggest=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_5__.geByClass1)("phone_validation_link",e._captcha.bodyNode),e._suggest&&addEvent(e._suggest,"click",(function(){e._box=Object(_modal_box__WEBPACK_IMPORTED_MODULE_10__.validateMobileBox)({onDone:e._captcha.submit})}))}var mobileValidationRequired=e=>(t,n,r)=>{t._box=Object(_modal_box__WEBPACK_IMPORTED_MODULE_10__.validateMobileBox)({acceptCaptcha:11===e,onDone:function(e,n){vk.nophone=0,e&&(t._captcha=Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_8__.curBox)());var o=e?_extends({},r,{captcha_sid:e,captcha_key:n}):r;t.resend(o,resetOptionsCache(t))},onFail:t.onFail,hash:n[0],ahash:n[1]})};function passwordValidationRequired(e,t,n){e._box=Object(_modal_box__WEBPACK_IMPORTED_MODULE_10__.validatePassBox)({onDone:()=>e.resend(n,resetOptionsCache(e)),onFail:e.onFail,hash:t[0]})}function authFailed(e,t,n){window.onReLoginDone=()=>e.resend(n,resetOptionsCache(e)),window.onReLoginFailed=function(e,t){t?nav.go(t):-1===e?location.href=location.href.replace(/^http:/,"https:"):e?nav.go("/"):window.onReLoginDone()},window.utilsNode.appendChild(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_5__.ce)("iframe",{src:Object(_web_lib_environment__WEBPACK_IMPORTED_MODULE_11__.getLoginDomain)()+"?"+Object(_shared_lib_convert__WEBPACK_IMPORTED_MODULE_2__.toQueryString)({role:"al_frame",_origin:window.locProtocol+"//"+window.locHost,ip_h:t[0]||window.vk.ip_h,to:t[1]||""})}))}function makeRedirect(e,t){Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__.intval)(t[1])?nav.go(t[0],!1,{nocur:"2"===t[1],noback:!0===t[1],showProgress:e.showProgress,hideProgress:e.hideProgress}):(hab.stop(),location.href=t[0])}function reload(e,t,n,r){nav.reload({force:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__.intval)(t[0]),from:1,url:r,query:n&&Object(_shared_lib_convert__WEBPACK_IMPORTED_MODULE_2__.toQueryString)(n)})}function mobileActivationRequired(e,t,n){e._box=Object(_modal_box__WEBPACK_IMPORTED_MODULE_10__.activateMobileBox)({onDone:e.resend(n,resetOptionsCache(e)),onFail:e.onFail,hash:t[0]})}function showMessage(e,t){e.onFail&&e.onFail(),Object(_web_lib_ui_util__WEBPACK_IMPORTED_MODULE_7__.topMsg)(t[0],10)}function showError(e,t,n,r){e.onFail&&e.onFail(t[0])||Object(_web_lib_ui_util__WEBPACK_IMPORTED_MODULE_7__.topError)(t[0]+(t[2]?" #"+t[2]:""),{dt:t[1]?0:10,type:4,url:r,query:n&&Object(_shared_lib_convert__WEBPACK_IMPORTED_MODULE_2__.toQueryString)(n)})}function votesPayment(e,t,n){var r;if(!e.fromBox&&!e.forceDone||(e.onDone&&e.onDone.apply(window,t),!e.fromBox)){e._box=Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_4__.showFastBox)({title:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__.trim)(t[0])},t[1]),(null===(r=t[3])||void 0===r?void 0:r.countries)&&!cur.votesBoxOptions&&(cur.votesBoxOptions=t[3]),cur.votesBoxOptions&&(_web_gifts_gifts__WEBPACK_IMPORTED_MODULE_9__.Gifts.processBoxOptions(e._box,cur.votesBoxOptions),cur.votesBoxOptions=null);var o=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__.extend)(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__.clone)(e),{showProgress:e._box.showProgress,hideProgress:e._box.hideProgress});e.cache&&(o.cache=-1),e._box=Object(_modal_box__WEBPACK_IMPORTED_MODULE_10__.requestBox)(e._box,(function(t){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_5__.isVisible)(e._box.progress)||(t||(t={_votes_ok:1}),e.resend(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__.extend)(n,t),o))}),e.onFail),e._box.evalBox(t[2])}}function otpBox(e,t,n){e._box=Object(_modal_box__WEBPACK_IMPORTED_MODULE_10__.validateOtpBox)({onDone:()=>e.resend(n,resetOptionsCache(e)),onFail:e.onFail,hash:t[0]})}function zeroZone(e,t,n){e._box=Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_4__.showFastBox)({title:t[0]||getLang("global_charged_zone_title"),onHide:e.onFail},t[1],getLang("global_charged_zone_continue"),(function(){e.resend(_extends({},n,{charged_confirm:t[3]}),e)}),getLang("global_cancel"))}function evalCode(options,answer){var evalString=`(function(){${answer[0]};})()`;if(__debugMode)eval(evalString);else try{eval(evalString)}catch(e){Object(_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_6__.logEvalError)(e,evalString)}}var defaultHandler=e=>(t,n)=>{if(-1===e||-2===e||-3===e){var r,o=n.pop(),i=n.pop(),a=n.pop();-3===e&&(r=n.pop()),window.__adsSet&&__adsSet(a,null,i,o,null,r)}t.onDone&&t.onDone.apply(window,n)}},"+i5L":function(e,t,n){"use strict";n.r(t),n.d(t,"isUnauthorizedMediaLayerBoxAvailable",(function(){return s})),n.d(t,"Unauthorized",(function(){return u}));var r,o=n("jXbq"),i=n("W9Tc"),a=n("eH33");function s(){return!window.vk.id&&!window.layers.visible&&Object(i.partConfigEnabled)("unauthorized_media_layer_box")&&!!document.querySelector(".PageBottomBanner--unauth")}n.d(t,"UnauthorizedSourceType",(function(){return a.UnauthorizedSourceType}));var c=!1;var u={initScrollMoreBox:function(e){var t,n=function(){c=!1,window.removeEventListener("scroll",r)};n(),r=function(){var t;c||((null===(t=window.layers)||void 0===t?void 0:t.visible)||window.cur.unauthScrollMoreBox||window.pageYOffset>=2*window.innerHeight&&(c=!0,o.UnauthActionBox.show(e)))},e.showOnLoad&&(c=!0,o.UnauthActionBox.show(e)),window.addEventListener("scroll",r),null===(t=window.cur.beforeNavigateRequestHandlers)||void 0===t||t.push((function(){return n()}))},showMoreBox:function(e,t,n,r){e&&e.preventDefault(),window.ajax.post("/al_index.php?act=a_unauthorized_box",{action:"more",owner_id:t,source:n},{loader:!0,onDone:function(e){e.unauth_action_box?o.UnauthActionBox.show(e.unauth_action_box,r):r&&r()}})}}},"+lvF":function(e,t,n){e.exports=n("VTer")("native-function-to-string",Function.toString)},"+rLv":function(e,t,n){var r=n("dyZX").document;e.exports=r&&r.documentElement},"+tmx":function(e,t,n){"use strict";n.r(t),n.d(t,"MILLISECOND",(function(){return r})),n.d(t,"SECOND",(function(){return o})),n.d(t,"MINUTE",(function(){return i})),n.d(t,"HOUR",(function(){return a})),n.d(t,"DAY",(function(){return s})),n.d(t,"WEEK",(function(){return c})),n.d(t,"MONTH",(function(){return u})),n.d(t,"ruLocale",(function(){return l})),n.d(t,"EVENTS",(function(){return d}));var r=1,o=1e3*r,i=60*o,a=60*i,s=24*a,c=7*s,u=30*s,l="ru-RU",d={MOUSE_DOWN:"mousedown",KEY_DOWN:"keydown",SCROLL:"scroll",CLICK:"click"}},"+wdc":function(e,t,n){"use strict";var r,o,i,a,s;if("undefined"==typeof window||"function"!=typeof MessageChannel){var c=null,u=null,l=function(){if(null!==c)try{var e=t.unstable_now();c(!0,e),c=null}catch(e){throw setTimeout(l,0),e}},d=Date.now();t.unstable_now=function(){return Date.now()-d},r=function(e){null!==c?setTimeout(r,0,e):(c=e,setTimeout(l,0))},o=function(e,t){u=setTimeout(e,t)},i=function(){clearTimeout(u)},a=function(){return!1},s=t.unstable_forceFrameRate=function(){}}else{var _=window.performance,p=window.Date,h=window.setTimeout,f=window.clearTimeout;if("undefined"!=typeof console){var m=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof m&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"==typeof _&&"function"==typeof _.now)t.unstable_now=function(){return _.now()};else{var g=p.now();t.unstable_now=function(){return p.now()-g}}var v=!1,b=null,y=-1,E=5,w=0;a=function(){return t.unstable_now()>=w},s=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):E=0<e?Math.floor(1e3/e):5};var O=new MessageChannel,C=O.port2;O.port1.onmessage=function(){if(null!==b){var e=t.unstable_now();w=e+E;try{b(!0,e)?C.postMessage(null):(v=!1,b=null)}catch(e){throw C.postMessage(null),e}}else v=!1},r=function(e){b=e,v||(v=!0,C.postMessage(null))},o=function(e,n){y=h((function(){e(t.unstable_now())}),n)},i=function(){f(y),y=-1}}function T(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,o=e[r];if(!(void 0!==o&&0<P(o,t)))break e;e[r]=t,e[n]=o,n=r}}function S(e){return void 0===(e=e[0])?null:e}function D(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length;r<o;){var i=2*(r+1)-1,a=e[i],s=i+1,c=e[s];if(void 0!==a&&0>P(a,n))void 0!==c&&0>P(c,a)?(e[r]=c,e[s]=n,r=s):(e[r]=a,e[i]=n,r=i);else{if(!(void 0!==c&&0>P(c,n)))break e;e[r]=c,e[s]=n,r=s}}}return t}return null}function P(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var k=[],A=[],I=1,x=null,j=3,M=!1,L=!1,R=!1;function B(e){for(var t=S(A);null!==t;){if(null===t.callback)D(A);else{if(!(t.startTime<=e))break;D(A),t.sortIndex=t.expirationTime,T(k,t)}t=S(A)}}function N(e){if(R=!1,B(e),!L)if(null!==S(k))L=!0,r(U);else{var t=S(A);null!==t&&o(N,t.startTime-e)}}function U(e,n){L=!1,R&&(R=!1,i()),M=!0;var r=j;try{for(B(n),x=S(k);null!==x&&(!(x.expirationTime>n)||e&&!a());){var s=x.callback;if(null!==s){x.callback=null,j=x.priorityLevel;var c=s(x.expirationTime<=n);n=t.unstable_now(),"function"==typeof c?x.callback=c:x===S(k)&&D(k),B(n)}else D(k);x=S(k)}if(null!==x)var u=!0;else{var l=S(A);null!==l&&o(N,l.startTime-n),u=!1}return u}finally{x=null,j=r,M=!1}}function F(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var W=s;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){L||M||(L=!0,r(U))},t.unstable_getCurrentPriorityLevel=function(){return j},t.unstable_getFirstCallbackNode=function(){return S(k)},t.unstable_next=function(e){switch(j){case 1:case 2:case 3:var t=3;break;default:t=j}var n=j;j=t;try{return e()}finally{j=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=W,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=j;j=e;try{return t()}finally{j=n}},t.unstable_scheduleCallback=function(e,n,a){var s=t.unstable_now();if("object"==typeof a&&null!==a){var c=a.delay;c="number"==typeof c&&0<c?s+c:s,a="number"==typeof a.timeout?a.timeout:F(e)}else a=F(e),c=s;return e={id:I++,callback:n,priorityLevel:e,startTime:c,expirationTime:a=c+a,sortIndex:-1},c>s?(e.sortIndex=c,T(A,e),null===S(k)&&e===S(A)&&(R?i():R=!0,o(N,c-s))):(e.sortIndex=a,T(k,e),L||M||(L=!0,r(U))),e},t.unstable_shouldYield=function(){var e=t.unstable_now();B(e);var n=S(k);return n!==x&&null!==x&&null!==n&&null!==n.callback&&n.startTime<=e&&n.expirationTime<x.expirationTime||a()},t.unstable_wrapCallback=function(e){var t=j;return function(){var n=j;j=t;try{return e.apply(this,arguments)}finally{j=n}}}},"/0DE":function(e,t,n){"use strict";n.r(t),n.d(t,"QueueListener",(function(){return r}));var r=function(e){this.queueHandler=e}},"/8Fb":function(e,t,n){var r=n("XKFU"),o=n("UExd")(!0);r(r.S,"Object",{entries:function(e){return o(e)}})},"/PiP":function(e,t,n){"use strict";n.r(t),n.d(t,"initTopNotifier",(function(){return b})),n.d(t,"isPhotoeditor3Available",(function(){return y})),n.d(t,"showPhoto",(function(){return E})),n.d(t,"showManyPhoto",(function(){return w})),n.d(t,"showAlbums",(function(){return O})),n.d(t,"showAlbum",(function(){return C})),n.d(t,"showPhotoTags",(function(){return T})),n.d(t,"showVideoTags",(function(){return S})),n.d(t,"videoCallback",(function(){return D})),n.d(t,"showAttachProductBox",(function(){return P})),n.d(t,"showWiki",(function(){return k})),n.d(t,"showApp",(function(){return A})),n.d(t,"showPodcast",(function(){return I})),n.d(t,"podcastStartFrom",(function(){return x})),n.d(t,"articlePrepare",(function(){return j})),n.d(t,"isArticleEditorAvailable",(function(){return M})),n.d(t,"openArticleEditor",(function(){return L})),n.d(t,"bookmark",(function(){return R})),n.d(t,"bookmarkPost",(function(){return B})),n.d(t,"bookmarkArticle",(function(){return N})),n.d(t,"bookmarkLink",(function(){return U})),n.d(t,"bookmarkPodcast",(function(){return F})),n.d(t,"bookmarkNarrative",(function(){return W})),n.d(t,"bookmarkEvent",(function(){return H})),n.d(t,"bookmarkYoulaProduct",(function(){return K})),n.d(t,"shareAudioPlaylist",(function(){return V})),n.d(t,"getAudioPlayer",(function(){return q})),n.d(t,"deleteAudioOnClaim",(function(){return G})),n.d(t,"initTopAudioPlayer",(function(){return z})),n.d(t,"AudioMessagePlayer",(function(){return Y})),n.d(t,"mentionClick",(function(){return $})),n.d(t,"isArticleLayerOpen",(function(){return X})),n.d(t,"showDonutSubscribePopup",(function(){return Q})),n.d(t,"sendCoronaStatusStat",(function(){return J})),n.d(t,"sendImageStatusStat",(function(){return Z}));n("SRfc"),n("pIFo"),n("Vd3H"),n("91GP");var r=n("Egk5"),o=n("t7n3"),i=n("EasH"),a=n("zxIV"),s=n("gdug"),c=n("v+DW"),u=n("4+be"),l=n("cGUQ"),d=n("kcIO"),_=n("Nk8j"),p=n("DM2o"),h=n("Bj12"),f=n("aong"),m=n("+i5L"),g=n("1UEa");function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function b(){var e=["notifier.js","notifier.css"];return{preload:function(){stManager.add(e,()=>window.TopNotifier.preload())},show:function(t){if(!0!==Object(r.checkEvent)(t))return stManager.add(e,()=>window.TopNotifier.show(t)),Object(r.cancelEvent)(t)},showTooltip:function(t){stManager.add(e,()=>window.TopNotifier.showTooltip(t))},invalidate:()=>{},setCount:()=>{},createNewEventsBox:()=>{}}}function y(){return!s.browser.msie||parseInt(s.browser.version)>10}function E(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;if(i&&i.additional&&i.additional.open_pe&&i.temp&&Object(_.isImgBlurred)(i.temp)){var s=function(){E(e,t,i,a)};Page.showUnblurBox(i.temp.restrictionTitle,i.temp.restrictionText,i.temp.photoRaw,i.temp.unblurHash,s)}else{if(i&&i.additional&&i.additional.open_pe&&i.temp&&i.temp.restrictionGeo&&delete i.additional.open_pe,cur.viewAsBox)return cur.viewAsBox();if(!(Object(r.checkEvent)(a)||cur._editMode&&cur._editMode(a))){if(Object(m.isUnauthorizedMediaLayerBoxAvailable)()&&!i.forceUnauth)return window.Unauthorized.showMoreBox(null,0,m.UnauthorizedSourceType.PHOTO,()=>{E(e,t,v({},i,{forceUnauth:!0}),a)}),!1;var u=[jsc("web/photoview.js"),"photoview.css","page.js","page.css"];if(i.img&&(i.showProgress=function(){Object(c.showProgress)(i.img)},i.hideProgress=function(){Object(c.hideProgress)(i.img)}),!e)return!1;var l=1;if(((null==i||null===(n=i.additional)||void 0===n?void 0:n.open_pe)||(null==i?void 0:i.noCache))&&(l=0),window.Photoview&&!1===Photoview.showPhoto(e,t,i)&&l)return!1;var d=!0;if(cur.pvOptions||(cur.pvOptions={}),cur.pvOptions.isLightMode=i.isLightMode,i.temp&&!(cur.pvNoTemp||{})[e]&&stManager.add(u,(function(){Object(o.extend)(cur,{pvCancelLoad:function(){d=!1},pvData:cur.pvData||{},pvOptions:cur.pvOptions||{}}),cur.pvData.temp=[i.temp],cur.pvOptions.temp_final=i.temp_final,cur.pvOptions.temp_summary=i.temp_summary,cur.pvOptions.queue=i.queue,Photoview.show("temp",0)})),Object(o.extend)(i,{onDone:function(n){Photoview.list(e,t,n),i.blog_text&&arguments[3]&&arguments[3][0]&&(arguments[3][0].album=i.blog_text),Photoview.loaded.apply(window,arguments),d&&("deleted"===n?Photoview.showDeleted.apply(window,arguments):Photoview.showPhoto(e,t,i,!0))},stat:u,cache:l}),i.temp_final)return!1;var p="";return nav.objLoc.dmcah&&(p=nav.objLoc.dmcah),ajax.post("al_photos.php",Object(o.extend)({act:"show",gid:cur.gid,photo:e,list:t,dmcah:p,module:cur.module||"",list_info:i.list_info||null},i.additional),i),!1}}}function w(e,t,n,r){Page.showManyPhoto(e,t,n,r)}function O(e,t,n){return cur.viewAsBox?cur.viewAsBox():Object(r.checkEvent)(n)?void 0:(stManager.add([jsc("web/photoview.js"),"photoview.css"],(function(){Photoview.showAlbums(e,t)})),!1)}function C(e,t,n){return cur.viewAsBox?cur.viewAsBox():Object(r.checkEvent)(n)?void 0:(stManager.add([jsc("web/photoview.js"),"photoview.css"],(function(){Photoview.showAlbum(e,t)})),!1)}function T(e,t,n){return cur.viewAsBox?cur.viewAsBox():Object(r.checkEvent)(n)?void 0:(stManager.add([jsc("web/photoview.js"),"photoview.css"],(function(){Photoview.showTagged(e,t)})),!1)}function S(e,t,n){return cur.viewAsBox?cur.viewAsBox():Object(r.checkEvent)(n)?void 0:(stManager.add([jsc("web/video.js"),"video.css",jsc("web/photoview.js"),"photoview.css"],(function(){Photoview.showVideoTags(e,t)})),!1)}function D(e){var t=e.shift();if(window.Videoview&&Videoview.playerCallback[t])return Videoview.playerCallback[t].apply(Videoview,e);throw Error("Unregistered player callback: "+t)}function P(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return curBox()||Object(i.showBox)("al_market.php",{act:"show_attach_product_box"},{onDone:function(e,n){window.MarketProductBox.init(e,n,t)}}),Object(r.cancelEvent)(e)}function k(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(Object(r.checkEvent)(n))return!0;if(0!==cur.gid&&(e.gid=cur.gid),e.location_owner_id=cur.oid,window.wkcur&&wkcur.shown&&wkcur.wkRaw===e.w&&e.w&&!e.reply)return WkView.restoreLayer(i),Object(r.cancelEvent)(n);(window.wkcur&&wkcur.hideTitle||e.hide_title)&&(i.hide_title=e.hide_title=1);var a=i.stat||[jsc("web/wkview.js"),"wkview.css","wk.css",jsc("web/wk.js")];t&&a.push(jsc("web/wk_editor.js"),"wk_editor.css");var s,c,u={stat:a,loader:!i.noloader,onDone:function(e,t,r,a){WkView.show(e,t,Object(o.extend)(r,i),a,n)},onFail:function(e){return Object(o.isFunction)(i.onFail)?i.onFail(e):WkView.showError(e)}};if(nav.objLoc.claim&&(e.claim=nav.objLoc.claim),e.w&&"/query"===e.w.substr(-6)){var l=Object(o.clone)(nav.objLoc);delete l[0],delete l.w,e.query=JSON.stringify(l)}i.preload&&Object(o.extend)(u,i.preload),i.ads_params&&(s=i.ads_params,(c=nav.getPostParams(n&&n.target)).post_click_url&&(s._post_click_url=c.post_click_url));var d="";"feed"===cur.module&&window.feed?d=window.feed.getModuleRef():"public"===cur.module?d="club":"profile"===cur.module&&(d="profile"),i.customRef&&(d=i.customRef);var _="",p=Object(o.clone)(nav.objLoc);return p.dmcah&&(_=p.dmcah),ajax.post("wkview.php",Object(o.extend)({act:"show",loc:nav.objLoc[0],is_znav:i.isZnav,dmcah:_,ref:d},e,s,cur.getWkviewOpts&&cur.getWkviewOpts()),u),Object(r.cancelEvent)(n)}function A(e,t,n,r,i,a){a||(a={});var s=!1,c=Object(o.extend)({w:"app"+t},a);if(n=Object(o.intval)(n),r&&(Object(o.isObject)(r)?c=Object(o.extend)(c,r):c.ref=r),a.layer&&(s=!0),(cur.apps&&cur.apps[t]||!n)&&!s){delete c.w;var u="app"+t+(i?"_"+i:""),l=nav.objLoc&&!nav.objLoc[1]&&nav.objLoc[0]===u;return nav.go("/"+u+nav.toStr(c),e,{nocur:l})}i&&(c.mid=i);var d={stat:[jsc("web/wkview.js"),"wkview.css","apps.js","apps.css"]};if(a.queue&&(d.queue=1),a.urlHash&&(c.url_hash=a.urlHash),c["#"]){var _=c["#"];delete c["#"],d.onLoaded=()=>{nav.setLoc(Object(o.extend)(nav.objLoc,{"#":_}))}}return k(c,!1,e,d)}function I(e,t,n,o,i){if(!vk.widget)return Object(a.show)(boxLoader),Object(a.show)(boxLayerWrap),Object(d.boxRefreshCoords)(boxLoader),stManager.add([jsc("web/podcast.js")],(function(){Podcast.show(e,t,null,o,i)})),n&&Object(r.cancelEvent)(n)}function x(e,t,n,o){return stManager.add([jsc("web/podcast.js")],(function(){Podcast.goToTime(e,t,n,o)})),n&&Object(r.cancelEvent)(n)}function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e&&!vk.isBanned&&stManager.add([jsc("web/article_layer.js"),"article.css"],(function(){window.ArticleLayer.prepare(e,n,t)}))}function M(){return!(s.browser.msie&&parseInt(s.browser.version)<=11)}function L(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(cur.articleEditorLayer)cur.articleEditorLayer.openById(e,t);else{var a=[jsc("web/article_editor_layer.js"),"article.css","article_editor.css"];stManager.add(a,()=>{});var s=Object.assign({act:"open_editor",article_owner_id:e,article_id:t,from_post_convert:n?1:0,post_data_medias:n?n.medias.join(","):""},r);ajax.post("al_articles.php",s,{loader:!0,onFail:function(e){return"app"===o.from?o.errorHandler&&o.errorHandler("ServerError: Can't open article editor."):Object(i.showFastBox)(Object(u.getLang)("global_error"),e),window.SAKIntegration&&window.SAKIntegration.isIntegrated&&window.SAKIntegration.sendMessage("error",{error:e}),!0},onDone:function(e,t,r,i){window.WkView&&WkView.hide(),window.boxQueue&&boxQueue.hideAll(),n&&(i.postData=n),i.articleOwnerId?stManager.add(a,(function(){if(layers.fullhide=function(){cur.articleEditorLayer&&cur.articleEditorLayer.hide()},window.AuthorPage&&window.AuthorPage.isOpen()&&(cur.needAuthorPageHardBack=!0),cur.articleEditorLayer=new ArticleEditorLayer(e,t,r,i,()=>delete cur.articleEditorLayer),"app"===o.from){var n=e=>t=>{t.type=e,"publish"!==e&&"close"!==e||cur.articleEditorLayer&&cur.articleEditorLayer.hide(),o.eventHandler&&o.eventHandler(t)};cur.articleVkAppEditor={onSaveDraft:n("draft"),onPublish:n("publish"),onClose:n("close")}}})):nav.change({z:!1})}})}}function R(e,t,n,r){var s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"";ajax.post("al_bookmarks.php",{act:"bookmark",owner_id:e,object_id:t,type:n,state:s?1:0,hash:r,item_access_hash:c,ref:l||cur.module,track_code:d},{onDone:(n,r,s,c)=>{if(n&&!vk.widget){window.showDoneBox(n,{tooltipHandler:function(n){var l=Object(a.geByClass1)("bookmarks_tag_set",n);if(l&&!isEmpty(r)){var d=[];each(r,(e,t)=>{d.push(t)}),d.sort((e,t)=>e.order-t.order);for(var _='<div class="bookmarks_tags_list">',p=0;p<d.length;p++){var h=d[p];_+=`<div class="bookmarks_tags_list_item" data-id="${h.id}">${h.name}</div>`}_+="</div>",(_=se(_)).addEventListener("click",n=>{var r=domClosest("bookmarks_tags_list_item",n.target);if(r){var l=Object(a.domData)(r,"id"),d=toggleClass(r,"bookmarks_tags_list_item--selected");ajax.post("al_bookmarks.php",{act:"set_tag",item_type:s,item_oid:e,item_id:t,hash:c,tag_id:l,is_tagged:Object(o.intval)(!d),is_from_snackbar:!0},{onFail:e=>(Object(i.showFastBox)(Object(u.getLang)("global_error"),e),!0)})}}),cur.setBookmarksTagTooltip&&cur.setBookmarksTagTooltip.destroy(),stManager.add(["ui_common.css","ui_common.js"],()=>{});var f=new ElementTooltip(l,{content:_,appendToParent:!0,cls:"bookmarks_tag_set_tt",autoShow:!0,offset:[0,-36],onFirstTimeShow:e=>{stManager.add(["ui_common.css","ui_common.js"],()=>{cur.setBookmarksTagTooltipScrolls||(cur.setBookmarksTagTooltipScrolls=[]),cur.setBookmarksTagTooltipScrolls.push(new uiScroll(domFC(e),{theme:"dark"}))})},onShow:function(){Notifier.freezeEvents(),curNotifier.tooltipShown=!0},onHide:function(){curNotifier.tooltipShown=!1,curNotifier.unfreezeAfterTooltipHide&&Notifier.unfreezeEvents()}});cur.destroy.push(()=>{cur.setBookmarksTagTooltipScrolls&&(cur.setBookmarksTagTooltipScrolls.forEach((function(e){e.destroy()})),delete cur.setBookmarksTagTooltipScrolls),f.destroy()})}},link:"/bookmarks"})}}})}function B(e,t,n,r,i,s){var c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"";if(Object(o.isObject)(window.cur)&&Object(o.isFunction)(window.cur.viewAsBox))return window.cur.viewAsBox();var u=parseInt(Object(a.domData)(e,"state"));e.innerHTML=u?Object(a.domData)(e,"add"):Object(a.domData)(e,"remove"),Object(a.domData)(e,"state",u?0:1),R(t,n,r,i,u,s,c)}function N(e,t,n,o,i,s,c){return t&&(c=parseInt(Object(a.domData)(t,"state")),Object(a.domData)(t,"state",c?0:1)),R(n,o,i,s,c),each(geByClass(`_article_${n}_${o}`),(e,t)=>{var n=Object(a.geByClass1)("_bookmark_btn",t);Object(a.domData)(n,"state",c?0:1)}),Object(r.cancelEvent)(e)}function U(e,t,n){var o=parseInt(Object(a.domData)(t,"state"));return Object(a.domData)(t,"state",o?0:1),ajax.post("al_bookmarks.php",{act:"bookmark_link",state:o?1:0,hash:n,url:Object(a.domData)(t,"link-url"),img:Object(a.domData)(t,"link-img"),title:Object(a.domData)(t,"link-title")},{onDone:e=>{e&&!vk.widget&&window.showDoneBox(e)}}),Object(r.cancelEvent)(e)}function F(e,t,n,o,i){return stManager.add([jsc("web/podcast.js")],(function(){Podcast.toggleFave(e,t,n,i)})),o&&Object(r.cancelEvent)(o)}function W(e,t,n,o,i,s){var c=parseInt(Object(a.domData)(t,"state"));return Object(a.domData)(t,"state",c?0:1),R(n,o,i,s,c),c||Object(g.sendNarrativeAnalytic)(g.NarrativeAnalyticEventType.addToBookmarks,n,o,window.cur.module),Object(r.cancelEvent)(e)}function H(e,t,n,o){var i=parseInt(Object(a.domData)(t,"state"));return Object(a.domData)(t,"state",i?0:1),ajax.post("fave.php",{act:i?"a_delete_group":"a_add_group",gid:n,hash:o},{onDone:(e,t)=>{i||vk.widget||showDoneBox(t)}}),Object(r.cancelEvent)(e)}function K(e,t,n,o,i,s){var c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"",l=parseInt(Object(a.domData)(t,"state"));return Object(a.domData)(t,"state",l?0:1),R(n,o,i,s,l,c,"",u),Object(r.cancelEvent)(e)}function V(e,t,n,o){return Object(i.showBox)("like.php",{act:"publish_box",object:"audio_playlist"+t+"_"+n,list:o},{stat:["wide_dd.js","wide_dd.css",jsc("web/sharebox.js")]}),Object(r.cancelEvent)(e)}function q(){return window.ap=window.ap||new AudioPlayer,window.ap}function G(e,t){var n=e+"_"+t,r=Object(a.geByClass1)("_audio_row_"+n);AudioUtils.deleteAudio(r,AudioUtils.getAudioFromEl(r,!0)),cur.claimWarning&&cur.claimWarning.hide()}function z(){window.TopAudioPlayer.init()}var Y={loaded:!1,events:{on(e,t){stManager.add("voice_message_player.js",()=>{window.AudioMessagePlayer.events.on(e,t)})}},togglePlay:function(e,t){stManager.add("voice_message_player.js",()=>window.AudioMessagePlayer.togglePlay(e,t))},detachPlayer:function(e){stManager.add("voice_message_player.js",()=>window.AudioMessagePlayer.detachPlayer(e))}};function $(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e&&e.tt&&e.tt.hide&&e.tt.hide({fasthide:1});var r=e,i=!1;if(X()&&ArticleLayer.isStandalone()&&(i=!0),r.tagName&&"a"===r.tagName.toLowerCase()&&!r.getAttribute("target")&&!nav.baseBlank){var a,s=r.getAttribute("hrefparams");s&&(n.params=Object(o.extend)(n.params||{},Object(l.fromQueryString)(s))),(r=(r=r.href||"").replace(/^https?:\/\//i,"")).indexOf(location.hostname)||(r=r.replace(location.hostname,"")),((r=r.replace(/^(vkontakte\.ru\/|vk\.com\/)/,"/")).match(/#$/)||!(a=r.match(/^\/(.*?)(\?|#|$)/))||(a=a[1]).indexOf(".php")>0||a.match(/^(doc\-?\d+_\d+|graffiti\d+|reg\d+|images|utils|\.js|js\/|\.css|css\/)/))&&(i=!0)}if(i){var c=!!(n&&n.params&&n.params._post&&n.params._post_click_type);if(!c)return!0;e.setAttribute("data-change-location-with-post-away",1),r=e}return nav.go(r,t,n)}function X(){return window.ArticleLayer&&window.ArticleLayer.isShown()}function Q(e,t,n,a,s){var c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"";if(n||u){var l=()=>{p.hide()},d="donut_payment"+n,_=a,p=Object(i.showBox)("al_donut.php",v({act:"subscribe_popup",ownerId:n,ownerDomain:u,source:a,hash:s,type:c.type},c.params),{stat:["donut_subscribe_popup.css",window.jsc("web/donut_subscribe_popup.js")],params:{width:450,hideButtons:!0,containerClass:"DonutSubscribePopup",onDestroy:()=>{if(window.DonutSubscribePopup&&window.DonutSubscribePopup.onDestroy(),!c.fromSnippet){Object(r.removeEvent)(window,"popstate",l);var e=nav.objLoc,t=e.w,n=e.source;t===d&&_===n&&(delete nav.objLoc.w,delete nav.objLoc.source,nav.setLoc(nav.objLoc))}}},onDone:(e,t)=>{if(window.DonutSubscribePopup.init({ownerId:n||t.owner_id,source:a,type:c.type},e,t),!c.fromSnippet&&"subscribe"===c.type){Object(r.addEvent)(window,"popstate",l);var i=Object(o.extend)(nav.objLoc,{w:d,source:a});nav.setLoc(i)}},onFail:e=>{if(e&&"string"==typeof e)return"group_doesnt_exists"===e&&c.onFailCallback&&"function"==typeof c.onFailCallback?(c.onFailCallback(),p.hide(),!0):(p.hide(),Object(f.showErrorBox)(e),!0)}},t);Object(r.cancelEvent)(t)}}function J(){Object(p.statlogsValueEvent)("corona_status_stat","open_app")}function Z(e){e&&Object(h.saveStatlogEvents)({name:"image_status",value:e,keys:["popup_action"]})}},"/oKx":function(e,t,n){"use strict";var r=n("zMZw"),o=n("LQSR");function i(e){"number"==typeof e.mid&&(e.mid=e.mid.toString())}function a(){this.cache={mlB2UMap:{},mlU2BMap:{}}}e.exports=a,a.prototype.candidateToUnifiedPlan=function(e){var t=new RTCIceCandidate(e);return t.sdpMLineIndex=this.cache.mlB2UMap[t.sdpMLineIndex],t},a.prototype.candidateToPlanB=function(e){var t=new RTCIceCandidate(e);if(0===t.sdpMid.indexOf("audio"))t.sdpMid="audio";else{if(0!==t.sdpMid.indexOf("video"))throw new Error("candidate with "+t.sdpMid+" not allowed");t.sdpMid="video"}return t.sdpMLineIndex=this.cache.mlU2BMap[t.sdpMLineIndex],t},a.prototype.getFirstSendingIndexFromAnswer=function(e){if(!this.cache.answer)return null;var t=r.parse(this.cache.answer);if(t&&t.media&&Array.isArray(t.media))for(var n=0;n<t.media.length;n++)if(t.media[n].type==e&&(!t.media[n].direction||"sendrecv"===t.media[n].direction||"sendonly"===t.media[n].direction))return n;return null},a.prototype.toPlanB=function(e){var t=this;if("object"!=typeof e||null===e||"string"!=typeof e.sdp)return console.warn("An empty description was passed as an argument."),e;var n=r.parse(e.sdp);if(void 0===n.media||!Array.isArray(n.media)||0===n.media.length)return console.warn("The description has no media."),e;if(n.media.length<=3&&n.media.every((function(e){return-1!==["video","audio","data"].indexOf(e.mid)})))return console.warn("This description does not look like Unified Plan."),e;for(var a=e.sdp,c=!1,u=0;u<n.media.length;u++){n.media[u].rtp.forEach((function(e){if("NULL"===e.codec){c=!0;var n=r.parse(t.cache.offer);e.codec=n.media[u].rtp[0].codec}}))}c&&(a=r.write(n)),this.cache[e.type]=a;var l=n.media;n.media=[];var d={},_=[],p={};l.forEach((function(e){if(i(e),("string"!=typeof e.rtcpMux||"rtcp-mux"!==e.rtcpMux)&&"inactive"!==e.direction&&"application"!==e.type)throw new Error("Cannot convert to Plan B because m-lines without the rtcp-mux attribute were found.");void 0!==d[e.type]&&"inactive"!==d[e.type].direction||(d[e.type]=e)})),l.forEach((function(e){var t=e.type;if("application"===t)return e.mid="data",n.media.push(e),void _.push(e.mid);"object"==typeof e.sources&&Object.keys(e.sources).forEach((function(n){"object"!=typeof d[t].sources&&(d[t].sources={}),d[t].sources[n]=e.sources[n],void 0!==e.msid&&(d[t].sources[n].msid=e.msid)})),void 0!==e.ssrcGroups&&Array.isArray(e.ssrcGroups)&&(void 0!==d[t].ssrcGroups&&Array.isArray(d[t].ssrcGroups)||(d[t].ssrcGroups=[]),o.apply(d[t].ssrcGroups,[e.ssrcGroups])||(d[t].ssrcGroups=d[t].ssrcGroups.concat(e.ssrcGroups)));var r=e.direction;p[t]=(p[t]||0)|s[r||"inactive"],d[t]===e&&(e.mid=t,delete e.bundleOnly,delete e.msid,"inactive"!==r&&_.push(t),n.media.push(e))})),n.groups.some((function(e){if("BUNDLE"===e.type)return e.mids=_.join(" "),!0})),n.msidSemantic={semantic:"WMS",token:"*"};var h=r.write(n);return new RTCSessionDescription({type:e.type,sdp:h})},a.prototype.toUnifiedPlan=function(e){var t=this;if("object"!=typeof e||null===e||"string"!=typeof e.sdp)return console.warn("An empty description was passed as an argument."),e;var n=r.parse(e.sdp);if(void 0===n.media||!Array.isArray(n.media)||0===n.media.length)return console.warn("The description has no media."),e;if(n.media.length>3||!n.media.every((function(e){return-1!==["video","audio","data"].indexOf(e.mid)})))return console.warn("This description does not look like Plan B."),e;var a=[];n.media.forEach((function(e){a.push(e.mid)}));var s,c=!1;if(void 0!==n.groups&&Array.isArray(n.groups)&&(c=n.groups.every((function(e){return"BUNDLE"!==e.type||o.apply(e.mids.sort(),[a.sort()])}))),!c)throw new Error("Cannot convert to Unified Plan because m-lines that are not bundled were found.");void 0!==this.cache[e.type]&&(s=r.parse(this.cache[e.type]));var u={audio:{},video:{}},l={},d=0,_=0;if(n.media.forEach((function(n){if(("string"!=typeof n.rtcpMux||"rtcp-mux"!==n.rtcpMux)&&"inactive"!==n.direction&&"application"!==n.type)throw new Error("Cannot convert to Unified Plan because m-lines without the rtcp-mux attribute were found.");if("application"===n.type){var r=null;return s&&s.media&&(r=s.media.find((function(e){return"application"===e.type}))),void(r?l[r.mid]=r:l[n.mid]=n)}var o=n.sources,a=n.ssrcGroups,c=n.candidates,p=n.iceUfrag,h=n.icePwd,f=n.fingerprint,m=n.port;delete n.sources,delete n.ssrcGroups,delete n.candidates,delete n.iceUfrag,delete n.icePwd,delete n.fingerprint,delete n.port,delete n.mid;var g={};void 0!==a&&Array.isArray(a)&&a.forEach((function(e){"SIM"!==e.semantics&&void 0!==e.ssrcs&&Array.isArray(e.ssrcs)&&e.ssrcs.forEach((function(t){void 0===g[t]&&(g[t]=[]),g[t].push(e)}))}));var v={};"object"==typeof o&&Object.keys(o).forEach((function(r){var a;if("offer"!==e.type||o[r].msid)if(void 0!==g[r]&&Array.isArray(g[r])&&g[r].some((function(e){return e.ssrcs.some((function(e){if("object"==typeof v[e])return a=v[e],!0}))})),"object"==typeof a)a.sources[r]=o[r],delete o[r].msid;else{if(a=Object.create(n),v[r]=a,void 0!==o[r].msid&&(a.msid=o[r].msid,delete o[r].msid),a.sources={},a.sources[r]=o[r],a.ssrcGroups=g[r],void 0!==s&&void 0!==s.media&&Array.isArray(s.media)&&s.media.forEach((function(e){"object"==typeof e.sources&&Object.keys(e.sources).forEach((function(t){t===r&&(a.mid=e.mid)}))})),i(a),void 0===a.mid){if("answer"===e.type)throw new Error("An unmapped SSRC was found.");a.mid=[n.type,"-",r].join("")}a.candidates=c,a.iceUfrag=p,a.icePwd=h,a.fingerprint=f,a.port=m,l[a.mid]=a,t.cache.mlU2BMap[_]=d,void 0===t.cache.mlB2UMap[d]&&(t.cache.mlB2UMap[d]=_),_++}else u[n.type][r]=o[r]})),d++})),n.media=[],a=[],"answer"===e.type)for(var p=0;p<s.media.length;p++){var h=s.media[p];i(h),void 0===l[h.mid]&&(delete h.msid,delete h.sources,delete h.ssrcGroups,h.direction&&"sendrecv"!==h.direction?"sendonly"===h.direction&&(h.direction="inactive"):h.direction="recvonly"),n.media.push(h),"string"==typeof h.mid&&a.push(h.mid)}else void 0!==s&&void 0!==s.media&&Array.isArray(s.media)&&s.media.forEach((function(e){i(e),a.push(e.mid),void 0!==l[e.mid]?n.media.push(l[e.mid]):(delete e.msid,delete e.sources,delete e.ssrcGroups,e.direction&&"sendrecv"!==e.direction||(e.direction="recvonly"),e.direction&&"sendonly"!==e.direction||(e.direction="inactive"),n.media.push(e))})),Object.keys(l).forEach((function(e){-1===a.indexOf(e)&&(a.push(e),"recvonly"===l[e].direction?n.media.some((function(t){if(("sendrecv"===t.direction||"sendonly"===t.direction)&&t.type===l[e].type)return Object.keys(l[e].sources).forEach((function(n){t.sources[n]=l[e].sources[n]})),!0})):n.media.push(l[e]))}));["audio","video"].forEach((function(e){if(n&&n.media&&Array.isArray(n.media)){var r=null;if(Object.keys(u[e]).length>0&&null===(r=t.getFirstSendingIndexFromAnswer(e)))for(var o=0;o<n.media.length;o++)if(n.media[o].type===e){r=o;break}if(r&&n.media.length>r){var i=n.media[r];Object.keys(u[e]).forEach((function(t){i.sources&&i.sources[t]&&console.warn("Replacing an existing SSRC."),i.sources||(i.sources={}),i.sources[t]=u[e][t]}))}}})),n.groups.some((function(e){if("BUNDLE"===e.type)return e.mids=a.join(" "),!0})),n.msidSemantic={semantic:"WMS",token:"*"};var f=r.write(n);return this.cache[e.type]=f,new RTCSessionDescription({type:e.type,sdp:f})};var s={inactive:0,recvonly:1,sendonly:2,sendrecv:3}},"0/R4":function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},"12ku":function(e,t,n){"use strict";n.r(t),n.d(t,"ON_BOARDING_BG_ID",(function(){return c})),n.d(t,"ON_BOARDING_BG_HEADER_ID",(function(){return u})),n.d(t,"ON_BOARDING_BG_RECT_ID",(function(){return l})),n.d(t,"ON_BOARDING_BG_CLIP_ID",(function(){return d})),n.d(t,"default",(function(){return _}));n("HEwt"),n("a1Th"),n("Btvt"),n("rGqo"),n("rE2o"),n("ioFf");var r=n("zxIV"),o=n("lXE5"),i=n("k3PD");function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var c="onboarding_bg",u="onboarding_bg_header",l="onboarding_bg_rect",d="onboarding_bg_clip";class _{constructor(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.el=e,this.text=t,this.hideDarkness=!0,this.oldColor=!1;var r=n.class?n.class:"",o={autoShow:!1,noAutoHideOnWindowClick:!0,content:t instanceof HTMLElement?t:""+t,cls:"feature_intro_tt feature_intro_blue_tt tutorial_tip_tt "+r,appendToParent:!0,onHide:this.ttOnHide.bind(this),scrollOffset:n.scrollOffset||0};n.side&&(o.forceSide=n.side),n.offset&&(o.offset=n.offset),n.width&&(o.width=n.width),n.shift&&(o.centerShift=n.shift),n.border?this.border=n.border:this.border=[10,10,10,10],n.ttOnHide&&(o.onHide=n.ttOnHide),n.withCloseButton&&(o.withCloseButton=n.withCloseButton,o.onCloseButtonClick=n.onCloseButtonClick),n.align&&(o.align=n.align),this.ttParams=o,this.opts=n,this.initOnboardingBG()}initOnboardingBG(){if(!window.onboardingBG){var e=se('\n<div id="onboarding_layout">\n  <svg id="onboarding_bg_header" width="100%" height="49px">\n    <rect id="onboarding_bg_rect" x="0" y="0" width="100%" height="100%" fill-opacity="0.8" fill="#000"></rect>\n  </svg>\n  <svg id="onboarding_bg" width="100%" height="100%">\n  <defs>\n    <mask id="mask" x="0" y="0" width="100%" height="100%">\n      <rect x="0" y="0" width="100%" height="100%" fill="#fff"></rect>\n      <rect id="onboarding_bg_clip" x="0" y="0" width="0" height="0" fill="#000" rx="8" ry="8"></rect>\n    </mask>\n  </defs>\n  <rect id="onboarding_bg_rect" x="0" y="42" width="100%" height="100%" mask="url(#mask)" fill-opacity="0.8"></rect>\n  </svg>\n</div>\n      ');Object(r.domInsertBefore)(e,window.layerBG),window.onboardingBGHeader=ge(u),window.onboardingBG=ge(c),window.onboardingBGRect=ge(l),window.onboardingBGClip=ge(d),window.cur.destroy.push(()=>{hide(window.onboardingBG),hide(window.onboardingBGHeader),removeClass(ge("page_header_cont"),"onboarding"),this.hideDarkness=!0,this.hideTT(),delete window.onboardingBG,delete window.onboardingBGHeader,delete window.onboardingBGRect,delete window.onboardingBGClip,this.opts.onBGClick&&removeEvent(window.onboardingBG,"click",this.opts.onBGClick)}),this.opts.onBGClick&&addEvent(window.onboardingBG,"click",this.opts.onBGClick)}}showTT(){var e=a(Object(r.getXY)(this.el),2)[1];this.tt=new window.ElementTooltip(this.el,this.ttParams),this.opts.highlight&&(this.addDarkness(),this.addHighlight()),this.tt.show();var t=this.tt.getContent();Object(i.isElementInViewport)(this.el)&&Object(i.isElementInViewport)(t)||Object(o.scrollToY)(e-42-this.ttParams.scrollOffset)}hideTT(){this.tt&&(this.tt.destroy(),this.removeDarkens(),this.hideDarkness&&(removeEvent(window,"scroll"),removeEvent(window,"resize")))}addHighlight(){window.onboardingBGClip&&(this.highlightElement(),addEvent(window,"scroll",this.onScrollTT.bind(this)),addEvent(window,"resize",this.onResizeTT.bind(this)))}highlightElement(){var e=this.el.offsetWidth,t=this.el.offsetHeight,n=Object(r.getXY)(this.el);attr(window.onboardingBGClip,"width",e+this.border[1]+this.border[3]),attr(window.onboardingBGClip,"height",t+this.border[0]+this.border[2]),attr(window.onboardingBGClip,"x",n[0]-this.border[1]),attr(window.onboardingBGClip,"y",n[1]-this.border[0])}onResizeTT(){this.setDartToFullWidth(),this.highlightElement()}onScrollTT(){var e=this.getPageHeight();window.onboardingBG.height!=e&&this.setDartToFullHeight()}setDartToFullHeight(){attr(window.onboardingBG,"height",this.getPageHeight())}setDartToFullWidth(){attr(window.onboardingBG,"width",this.getPageWidth()),attr(window.onboardingBGHeader,"width",this.getPageWidth())}addDarkness(){Object(r.isVisible)(window.onboardingBG)||(this.setDartToFullHeight(),this.setDartToFullWidth(),show(window.onboardingBG),Object(r.isVisible)(window.onboardingBGHeader)||(show(window.onboardingBGHeader),addClass(ge("page_header_cont"),"onboarding")))}removeDarkens(){this.hideDarkness&&(hide(window.onboardingBG),hide(window.onboardingBGHeader),removeClass(ge("page_header_cont"),"onboarding"))}ttOnHide(){this.hideTT()}show(){setTimeout(this.showTT.bind(this),1e3)}getPageWidth(){var e=document.documentElement,t=document.body;return Math.max(t.scrollWidth,e.scrollWidth,t.offsetWidth,e.offsetWidth,t.clientWidth,e.clientWidth)}getPageHeight(){var e=document.documentElement,t=document.body;return Math.max(t.scrollHeight,e.scrollHeight,t.offsetHeight,e.offsetHeight,t.clientHeight,e.clientHeight)}}},"15HP":function(e,t,n){"use strict";var r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;function a(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,c=a(e),u=1;u<arguments.length;u++){for(var l in n=Object(arguments[u]))o.call(n,l)&&(c[l]=n[l]);if(r){s=r(n);for(var d=0;d<s.length;d++)i.call(n,s[d])&&(c[s[d]]=n[s[d]])}}return c}},"16Al":function(e,t,n){"use strict";var r=n("WbBG");function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,i,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},"17x9":function(e,t,n){e.exports=n("16Al")()},"1BRX":function(e,t,n){"use strict";n.r(t),n.d(t,"isToday",(function(){return i})),n.d(t,"isYesterday",(function(){return a})),n.d(t,"isTomorrow",(function(){return s})),n.d(t,"isSameDate",(function(){return c})),n.d(t,"leadingZero",(function(){return u})),n.d(t,"formatTime",(function(){return l})),n.d(t,"getServerTime",(function(){return d})),n.d(t,"getBeginningOfDay",(function(){return _})),n.d(t,"isLeapYear",(function(){return p})),n.d(t,"getLastDay",(function(){return h})),n.d(t,"getFormattedDiffTimeText",(function(){return f})),n.d(t,"getUnixTimestampFromDate",(function(){return m}));var r=n("4+be"),o=n("t7n3");function i(e){var t=new Date;return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}function a(e){return i(new Date(e.getTime()+864e5))}function s(e){return i(new Date(e.getTime()-864e5))}function c(e,t){var n=new Date(e),r=new Date(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()&&n.getDate()===r.getDate()}function u(e){return e>=10?e:"0"+e}function l(e,t){var n;e=Math.max(e,0);var r=Math.floor(e%60);n=r<10?"0"+r:r;var o=(e=Math.floor(e/60))%60;return n=o+":"+n,((e=Math.floor(e/60))>0||t)&&(o<10&&(n="0"+n),n=e+":"+n),n}function d(){return vk.ts+Math.floor(((new Date).getTime()-vk.started)/1e3)}function _(e){var t=e.getFullYear(),n=e.getMonth(),r=e.getDate();return new Date(t,n,r,0,0,0,0)}function p(e){return(e=parseInt(e))%4==0&&e%100!=0||e%400==0}function h(e,t){return 2==+t?p(e)?29:28:t>0&&(t<8&&t%2==0||t>7&&t%2==1)?30:31}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e<5?Object(r.getLang)("global_just_now"):e<60?Object(r.langWordNumeric)(e,Object(r.getLang)("global_word_secs_ago","raw"),Object(r.getLang)("global_secs_ago","raw")):e<3600?Object(r.langWordNumeric)(Object(o.intval)(e/60),Object(r.getLang)("global_word_mins_ago","raw"),Object(r.getLang)("global_mins_ago","raw")):e<14400?Object(r.langWordNumeric)(Object(o.intval)(e/3600),Object(r.getLang)("global_word_hours_ago","raw"),Object(r.getLang)("global_hours_ago","raw")):t}function m(e){return Math.floor(e.getTime()/1e3)}},"1MBn":function(e,t,n){var r=n("DVgA"),o=n("JiEa"),i=n("UqcF");e.exports=function(e){var t=r(e),n=o.f;if(n)for(var a,s=n(e),c=i.f,u=0;s.length>u;)c.call(e,a=s[u++])&&t.push(a);return t}},"1Ot2":function(e,t,n){"use strict";n.r(t),n.d(t,"Scroll",(function(){return d}));n("ioFf"),n("rGqo"),n("Btvt");var r=n("q1tI"),o=(n("91GP"),n("17x9"),n("xt6h"));function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=r.createContext({});class c extends r.Component{constructor(){super(...arguments),this.getWrapperRef=e=>{this.wrapper=e}}componentDidMount(){var e=this.props,t=e.isNative,n=e.isShadows,r=e.neverHide,o=e.onScroll;!this.scroller&&this.context&&this.context.createScroll&&(this.scroller=this.context.createScroll(this.wrapper,{shadows:n,nativeScroll:t,hidden:!r,onScroll:o}))}componentDidUpdate(){this.scroller&&this.scroller.update()}componentWillUnmount(){this.scroller&&(this.scroller.destroy(),this.scroller=null)}render(){var e=this.props,t=e.children,n=(e.isNative,e.isShadows,e.neverHide,e.className),s=void 0===n?"":n,c=a(e,["children","isNative","isShadows","neverHide","className"]);return r.createElement("div",i({},c,{className:Object(o.classNames)("Scroll",s),ref:this.getWrapperRef}),t)}}c.defaultProps={isNative:!1,isShadows:!1,neverHide:!1,onScroll:null},c.contextType=s;var u=n("+/AQ");function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var d=e=>{var t=e.children,n=l(e,["children"]);return r.createElement(s.Provider,{value:{createScroll:u.createScroll}},r.createElement(c,n,t))};d.defaultProps={isNative:!1,isShadows:!1,neverHide:!1,onScroll:null}},"1TsA":function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},"1UEa":function(e,t,n){"use strict";n.r(t),n.d(t,"NarrativeAnalyticEventType",(function(){return r})),n.d(t,"NarrativeAnalyticNavScreen",(function(){return o})),n.d(t,"sendNarrativeAnalytic",(function(){return s}));var r,o,i=n("DM2o"),a=n("W9Tc");function s(e,t,n,r){void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=o.other);var s={event_type:e,narrative_id:n,narrative_owner_id:t,nav_screen:r};Object(i.statlogsValueEvent)("narrative_product_analytic",s),Object(a.partConfigEnabled)("narratives_web_analytic_debug")&&console.log("-- narrative analytic",s)}!function(e){e.clickToAddToNarrative="click_to_add_to_narrative",e.addStoryToNarrative="add_story_to_narrative",e.openNarrativeList="open_narrative_list",e.close="close",e.changeSort="change_sort",e.publishNarrative="publish_narrative",e.createNarrative="create_narrative",e.deleteNarrative="delete_narrative",e.editNarrative="edit_narrative",e.addToBookmarks="add_to_bookmarks",e.shareNarrative="share_narrative",e.seeMore="see_more",e.addToNarrativeFromActionSheet="add_to_narrative_from_action_sheet"}(r||(r={})),function(e){e.storyArchive="story_archive",e.storyViewer="story_viewer",e.profile="profile",e.club="club",e.other="other"}(o||(o={}))},"2+aW":function(e,t,n){"use strict";function r(e){return document.querySelector("#privacy_edit_"+e)}function o(e){if(window.cur.privacy&&Array.isArray(window.cur.privacy[e]))return i(window.cur.privacy[e])}function i(e){if(Array.isArray(e)){var t=e[0],n=e[1],r=e[2],o=e[3];return[parseInt(t),parseInt(n),Array.isArray(r)?r.map((function(e){return parseInt(e)})):[],Array.isArray(o)?o.map((function(e){return parseInt(e)})):[]]}}function a(e){return new Promise((function(t,n){window.ajax.post("al_friends.php?act=save_privacy",{key:e.key,val:e.value,hash:e.hash},{onDone:function(e){t(e)},onFail:function(e){return n(e),!0}})}))}n.r(t),n.d(t,"selectPrivacyEditControl",(function(){return r})),n.d(t,"getPrivacyValueFromCur",(function(){return o})),n.d(t,"fixPrivacyValueTypes",(function(){return i})),n.d(t,"savePrivacySetting",(function(){return a}))},"2OiF":function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},"2QOe":function(__webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"FrameTransport",(function(){return FrameTransport}));var core_js_modules_es6_object_assign__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("91GP"),_shared_lib_convert__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("cGUQ"),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("t7n3"),_web_lib_ui_util__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("ryw6"),_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("98sY"),_web_lib_dom__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("zxIV");function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var _queueStartMarker={type:"start"},_queueEndMarker={type:"end"};class FrameTransport{constructor(){this.frameDataQueue=[],this.frameTimeout=null,this.frame=null,this.queueReady=!1,this.fulfilled=!1,this._debug=()=>{}}setHandlers(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};this._onEnd=e,this._onModuleEvaluated=t,this._debug=n}run(e,t){return this._debug("Run ",e,this.frameDataQueue),this.frameUrl=e,this.onReady=t,this.fulfilled=!1,this.queueReady=!1,this.frameDataQueue=[_queueStartMarker],clearTimeout(this.frameTimeout),this.frameTimeout=!1,this.frame&&this._cleanup(),this.frame=ce("div",{innerHTML:"<iframe></iframe>"}),utilsNode.appendChild(this.frame),this.frame.firstChild.src=this.frameUrl,this}useMeta(e){this._debug("Metainfo: ",e),this.onReady(e)}useAjaxBlock(e,t,n){this._debug("Ajax block: ",e,t,n,this.fulfilled,this.frameDataQueue),this.fulfilled||(this.frameDataQueue.push(FrameTransport._makeQueueBlock(e,t,n)),1===this.frameDataQueue.length&&this._nextQueueItem())}finalize(e,t){this._debug("Finalize: ",e),this._cleanup(),e&&this.frameDataQueue.push(FrameTransport._makeQueueBlock(!1,!1,e,t)),this.queueReady=!0,this.frameDataQueue.push(_queueEndMarker),window.cur.onFrameBlocksDone&&window.cur.onFrameBlocksDone(),this._onEnd&&this._onEnd((new Date).getTime())}_nextQueueItem(){if(this.frameTimeout&&clearTimeout(this.frameTimeout),this.queueReady)if(this._debug("Next queue item: ",this.fulfilled,this.frameDataQueue),this.fulfilled||0===this.frameDataQueue.length)this.frameTimeout=!1;else{var e=this.frameDataQueue.shift();switch(e.type){case _queueStartMarker.type:this._nextQueueItem();break;case _queueEndMarker.type:this.fulfilled=!0;break;default:this.frameTimeout=setTimeout(()=>this._onReceived(e),0)}}else this.frameTimeout=setTimeout(()=>this._nextQueueItem(),100)}_onReceived(e){var t=e.container&&ge(e.container);t&&e.html&&(t.firstChild?t.appendChild(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_5__.cf)(e.html)):val(t,e.html)),e.js&&(_runJs(e.js,(t,n)=>{Object(_web_lib_ui_util__WEBPACK_IMPORTED_MODULE_3__.topError)(t,{dt:15,type:8,url:this.frameUrl,js:n,answer:JSON.stringify(e)}),Object(_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_4__.logEvalError)(t,n)}),this._onModuleEvaluated&&this._onModuleEvaluated(cur.module)),e.params&&"leftads"in e.params&&window.__adsSet&&__adsSet(e.params.leftads,e.params.ads_section||"",e.params.ads_can_show,e.params.ads_showed),this._nextQueueItem()}_cleanup(){this._debug("Cleanup: ",this.frameDataQueue),this.frame&&(this.frame.innerHTML="",utilsNode.removeChild(this.frame),this.frame=null)}abort(){clearTimeout(this.frameTimeout),this.frameTimeout=!1,this._cleanup()}static get frame(){return FrameTransport.__frame||(FrameTransport.__frame=new FrameTransport),FrameTransport.__frame}static request(e,t,n,r){return FrameTransport.frame.run(FrameTransport.makeUrl(e,t,!(r&&r.noSort)),n)}static _makeQueueBlock(e,t,n,r){return{type:"block",container:e,html:t,js:n,params:r}}static makeUrl(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=t;return"string"==typeof t&&(r=Object(_shared_lib_convert__WEBPACK_IMPORTED_MODULE_1__.fromQueryString)(t)),e+"?"+(r=Object(_shared_lib_convert__WEBPACK_IMPORTED_MODULE_1__.toQueryString)(_extends({},r,{_rndVer:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.irand)(0,99999)}),!n))}}function _runJs(js,onError){var script="(function(){"+js+";})()";if(__debugMode)eval(script);else try{eval(script)}catch(e){onError&&onError(e,script)}}},"2W9W":function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.browser;return!(!e.mac||e.iphone||e.ipad||e.ipod||!(navigator.maxTouchPoints>1))}n.r(t),n.d(t,"isIPadOS",(function(){return r})),n.d(t,"isDarkTheme",(function(){return o})),n.d(t,"isLightTheme",(function(){return i})),n.d(t,"isCSSVariablesSupported",(function(){return a})),n.d(t,"isMatchMediaSupported",(function(){return s})),n.d(t,"isFlexboxSupported",(function(){return c})),n.d(t,"isAutoSchemesSupported",(function(){return u})),n.d(t,"isSupportsSupported",(function(){return l})),n.d(t,"isGridsSupported",(function(){return d})),n.d(t,"isSVGSupported",(function(){return _})),n.d(t,"isIntersectionObserverSupported",(function(){return p})),n.d(t,"isStickySupported",(function(){return h})),n.d(t,"isWebRTCCallsSupported",(function(){return f}));var o=()=>Boolean(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches),i=()=>Boolean(window.matchMedia&&window.matchMedia("(prefers-color-scheme: light)").matches),a=()=>Boolean(window.CSS&&CSS.supports&&CSS.supports("color","var(--custom-property)")),s=()=>Boolean(window.matchMedia),c=()=>document.documentElement.classList.contains("vk_flex_yes"),u=()=>Boolean(window.matchMedia&&window.matchMedia("(prefers-color-scheme)").matches),l=()=>Boolean(window.CSS&&CSS.supports),d=()=>Boolean("string"==typeof document.createElement("div").style.grid),_=()=>Boolean(document.createElementNS)&&Boolean(document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect),p=()=>"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype,h=()=>Boolean(CSS&&CSS.supports&&CSS.supports("position","sticky")),f=()=>{if(window.navigator.userAgent.indexOf("Edge")>-1)return!1;try{return Boolean(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&window.RTCPeerConnection&&window.RTCIceCandidate&&window.RTCSessionDescription)}catch(e){return!1}}},"36Mz":function(e,t,n){"use strict";n.r(t),n.d(t,"Settings",(function(){return q}));n("91GP"),n("Oyvg"),n("OG14"),n("hhXQ"),n("SRfc"),n("rGqo"),n("pIFo"),n("KKXr"),n("HEwt"),n("VRzm"),n("Btvt");var r,o=n("q1tI"),i=n.n(o),a=n("zxIV"),s=n("t7n3"),c=n("ryw6"),u=n("lXE5"),l=n("Egk5"),d=n("v+DW"),_=n("4+be"),p=n("4tce"),h=n("Xrg9"),f=n("98sY"),m=n("wVf2"),g=n("aong"),v=n("EasH"),b=n("FWc3"),y=n("dV62"),E=n("jmhT"),w=n("BiHW"),O=n("6krn"),C=n("WfnU"),T=n("n3cE"),S=n("ngxX"),D=n("ZxpX"),P=n("jE6c"),k=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),A=function(){return(A=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},I=function(e){function t(t){var n=e.call(this,t)||this;n.save=function(){var e=n.props,t=e.onSave,r=e.data,o=n.state,i=o.isRecognitionMeEnabled,a=o.showMyRecognizedPhotosToFriends,s=o.isRecognitionFriendsEnabled,c=o.showMyRecognizedPhotosBlock,u=o.showFriendsRecognizedPhotosBlock;n.setState({isLoad:!0}),window.ajax.post("al_settings.php",{act:"save_recognition",is_recognition_me_disabled:Object(P.intval)(!i.value),show_recognition_photos_to_friends:Object(P.intval)(a.value),is_recognition_friends_enabled:Object(P.intval)(s.value),show_my_recognized_photos_block:Object(P.intval)(c.value),show_friends_recognized_photos_block:Object(P.intval)(u.value),hash:r.hash},{onDone:function(){t&&t()},hideProgress:function(){n.setState({isLoad:!1})},onFail:function(e){return Object(v.showFastBox)(Object(O.getLang)("global_error"),e||Object(O.getLang)("global_unknown_error")),!0}})},n.onRecognitionMeChange=function(e,t){n.setState({showMyRecognizedPhotosBlock:{disabled:!t,value:!!t&&n.state.showMyRecognizedPhotosBlock.value},showMyRecognizedPhotosToFriends:{disabled:!t,value:!!t&&n.state.showMyRecognizedPhotosToFriends.value},isRecognitionMeEnabled:A(A({},n.state.isRecognitionMeEnabled),{value:t})})},n.onShowMyRecognizedPhotoToFriendsChange=function(e,t){n.setState({showMyRecognizedPhotosToFriends:A(A({},n.state.showMyRecognizedPhotosToFriends),{value:t})})},n.onRecognitionFriendsChange=function(e,t){n.setState({isRecognitionFriendsEnabled:A(A({},n.state.isRecognitionFriendsEnabled),{value:t})})},n.onShowMyRecognizedBlockChange=function(e,t){n.setState({showMyRecognizedPhotosBlock:A(A({},n.state.showMyRecognizedPhotosBlock),{value:t})})},n.onShowFriendsRecognizedBlockChange=function(e,t){n.setState({showFriendsRecognizedPhotosBlock:A(A({},n.state.showFriendsRecognizedPhotosBlock),{value:t})})};var r=t.data;return n.state={isLoad:!1,isRecognitionMeEnabled:{value:r.isRecognitionMeEnabled.value},showMyRecognizedPhotosToFriends:{value:r.showMyRecognizedPhotosToFriends.value,disabled:!r.isRecognitionMeEnabled.value},isRecognitionFriendsEnabled:{value:r.isRecognitionFriendsEnabled.value},showMyRecognizedPhotosBlock:{value:r.showMyRecognizedPhotosBlock.value,disabled:!r.isRecognitionMeEnabled.value},showFriendsRecognizedPhotosBlock:{value:r.showFriendsRecognizedPhotosBlock.value}},n}return k(t,e),t.prototype.render=function(){var e=this.props,t=e.onClose,n=e.data,r=this.state,o=r.isRecognitionMeEnabled,a=r.showMyRecognizedPhotosToFriends,s=r.isRecognitionFriendsEnabled,c=r.showMyRecognizedPhotosBlock,u=r.showFriendsRecognizedPhotosBlock;return i.a.createElement(E.BoxModal,{className:"PhotoRecognitionSettingsBox",appearance:"white",hasScroll:!1,title:Object(O.getLang)("photo_recognition_settings_box_title"),actionButtons:this.getActionModalButtons(),onClose:t},i.a.createElement("div",{className:"PhotoRecognitionSettingsBox__content"},i.a.createElement("section",{className:"PhotoRecognitionSettingsBox__section"},i.a.createElement("div",{className:"PhotoRecognitionSettingsBoxRow"},i.a.createElement("div",{className:"PhotoRecognitionSettingsBoxRow__wrapper"},i.a.createElement("div",{className:"PhotoRecognitionSettingsBoxRow__info"},i.a.createElement("div",{className:"PhotoRecognitionSettingsBoxRow__title"},Object(O.getLang)("photo_recognition_settings_is_recognize_me")),i.a.createElement("div",{className:"PhotoRecognitionSettingsBoxRow__description"},Object(O.getLang)("photo_recognition_settings_is_recognize_me_description"),i.a.createElement(T.default,{href:"/@vk-ai-photo-tags",className:"PhotoRecognitionSettingsBoxRow__learnMore",target:"_blank"},Object(O.getLang)("photo_recognition_settings_learn_more")))),i.a.createElement("div",{className:"PhotoRecognitionSettingsBoxRow__control"},i.a.createElement(S.default,{checked:o.value,onChange:this.onRecognitionMeChange})))),i.a.createElement("div",{className:Object(D.classNames)("PhotoRecognitionSettingsBoxRow",{"PhotoRecognitionSettingsBoxRow--disabled":a.disabled||n.showMyRecognizedPhotosToFriends.forceDisable})},i.a.createElement("div",{className:"PhotoRecognitionSettingsBoxRow__wrapper"},i.a.createElement("div",{className:"PhotoRecognitionSettingsBoxRow__info"},i.a.createElement("div",{className:"PhotoRecognitionSettingsBoxRow__title"},Object(O.getLang)("photo_recognition_settings_show_recognition_photos_to_friends")),i.a.createElement("div",{className:"PhotoRecognitionSettingsBoxRow__description"},Object(O.getLang)("photo_recognition_settings_show_recognition_photos_to_friends_description"))),i.a.createElement("div",{className:"PhotoRecognitionSettingsBoxRow__control"},i.a.createElement(S.default,{checked:a.value,onChange:this.onShowMyRecognizedPhotoToFriendsChange})))),i.a.createElement("div",{className:"PhotoRecognitionSettingsBoxRow"},i.a.createElement("div",{className:"PhotoRecognitionSettingsBoxRow__wrapper"},i.a.createElement("div",{className:"PhotoRecognitionSettingsBoxRow__info"},i.a.createElement("div",{className:"PhotoRecognitionSettingsBoxRow__title"},Object(O.getLang)("photo_recognition_settings_recognition_friends_enabled")),i.a.createElement("div",{className:"PhotoRecognitionSettingsBoxRow__description"},Object(O.getLang)("photo_recognition_settings_recognition_friends_enabled_description"))),i.a.createElement("div",{className:"PhotoRecognitionSettingsBoxRow__control"},i.a.createElement(S.default,{checked:s.value,onChange:this.onRecognitionFriendsChange}))))),i.a.createElement("section",{className:"PhotoRecognitionSettingsBox__section"},i.a.createElement("div",{className:Object(D.classNames)("PhotoRecognitionSettingsBoxRow",{"PhotoRecognitionSettingsBoxRow--disabled":c.disabled})},i.a.createElement("div",{className:"PhotoRecognitionSettingsBoxRow__wrapper"},i.a.createElement("div",{className:"PhotoRecognitionSettingsBoxRow__info"},i.a.createElement("div",{className:"PhotoRecognitionSettingsBoxRow__title"},Object(O.getLang)("settings_photos_user_recognition_block")),i.a.createElement("div",{className:"PhotoRecognitionSettingsBoxRow__description"},Object(O.getLang)("photo_recognition_settings_show_my_recognized_photos_block_description"))),i.a.createElement("div",{className:"PhotoRecognitionSettingsBoxRow__control"},i.a.createElement(S.default,{checked:c.value,onChange:this.onShowMyRecognizedBlockChange})))),i.a.createElement("div",{className:"PhotoRecognitionSettingsBoxRow"},i.a.createElement("div",{className:"PhotoRecognitionSettingsBoxRow__wrapper"},i.a.createElement("div",{className:"PhotoRecognitionSettingsBoxRow__info"},i.a.createElement("div",{className:"PhotoRecognitionSettingsBoxRow__title"},Object(O.getLang)("settings_photos_friends_recognition_block")),i.a.createElement("div",{className:"PhotoRecognitionSettingsBoxRow__description"},Object(O.getLang)("photo_recognition_settings_show_friends_recognized_photos_block_description"))),i.a.createElement("div",{className:"PhotoRecognitionSettingsBoxRow__control"},i.a.createElement(S.default,{checked:u.value,onChange:this.onShowFriendsRecognizedBlockChange})))))))},t.prototype.getActionModalButtons=function(){var e=this.props.onClose,t=this.state.isLoad;return[i.a.createElement(w.default,{key:"close",appearance:"tertiary",onClick:function(){return e()}},Object(O.getLang)("global_cancel")),i.a.createElement(C.default,{key:"publish",appearance:"primary",onClick:this.save,loading:t},Object(O.getLang)("global_save"))]},t}(i.a.Component),x=n("HLtZ"),j=n("MJEz"),M=n("mpRv"),L=n("821F"),R=n("3oLO");var B=n("OftT"),N=n("Fya+"),U=n("HwS1"),F=n("xt6h"),W=n("2+aW"),H=n("El3O");function K(e){var t=window.cur.onPrivacyChanged,n={};Object(v.showBox)("al_settings.php?act=a_confirm_profile_close_box",{},{onDone:function(t,r){var o=r.isSimpleControls;t.setOptions({width:o?450:550});var i=t.bodyNode,a=function(){var e=t.btns.ok[0],r=[];if(o){var i=Object.keys(n);r.push(function(e){return new Promise((function(t,n){window.ajax.post("al_settings.php?act=a_limit_simple_privacies",{keys:e.join(","),hash:window.cur.options.hash},{onDone:function(e){t(e)},onFail:function(e){return n(e),!0}})}))}(i))}else r=Object.entries(n).map((function(e){var t=e[0],n=e[1];return Object(W.savePrivacySetting)({key:t,value:n,hash:window.cur.options.hash})}));Object(d.lockButton)(e),Promise.all(r).then((function(){t.hide(),window.nav.reload({preventScroll:!0,onDone:function(){window.Settings.savePrivacyShowSaved(N.PRIVACY_KEYS.PROFILE_CLOSED),Object(H.updateNarrow)()}})})).finally((function(){Object(d.unlockButton)(e)}))},s=function(){t.removeButtons(),Object.keys(n).length>0?(t.addButton(Object(_.getLang)("settings_closed_profile_confirm_box_button_save_settings"),a),t.addButton(Object(_.getLang)("global_cancel"),t.hide,"no")):(t.addButton(Object(_.getLang)("settings_closed_profile_confirm_box_button_close_profile"),(function(){t.hide(),e()})),t.addButton(Object(_.getLang)("global_cancel"),t.hide,"no"))},c=function(){o&&(n={},i.querySelectorAll(".checkbox.on").forEach((function(e){var t=e.dataset.key;t&&(n[t]="")}))),s()};s(),o?i.querySelectorAll(".checkbox").forEach((function(e){e.addEventListener("click",(function(){Object(d.checkbox)(e),c()}))})):window.cur.onPrivacyChanged=function(e){if(r.keys.includes(e)){var t=Object(W.fixPrivacyValueTypes)(r.privacy[e]),o=Object(W.getPrivacyValueFromCur)(e);t&&o&&!Object(F.isEqual)(t,o)?n[e]=window.Privacy.getValue(e):delete n[e],c()}}},params:{onDestroy:function(){window.cur.onPrivacyChanged=t}}})}function V(){return(V=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var q={registerStartupHandlers:function(){Object(j.tq)().setStartupHandler("Settings/update_lang",e=>(window.cur.lang=V({},window.cur.lang||{},{},e.payload.data),Promise.resolve(!1))),Object(j.tq)().setStartupHandler("Settings/update_options",e=>{window.cur.options=JSON.parse(e.payload.data)}),Object(j.tq)().setStartupHandler("Settings/init_blacklist",()=>{q.initBlacklist()}),Object(j.tq)().setStartupHandler("PrivacySettings/init",e=>{q.initPrivacy(e.payload.data)})},registerInteractiveHandlers:function(){Object(j.tq)().setInteractiveHandler("Settings/add_to_blacklist_dialog",()=>{q.addToBlacklist()}),Object(j.tq)().setInteractiveHandler("Settings/add_to_blacklist",e=>{var t=e.payload.dataAttrs,n=t.id,r=t.hash;q.addToBl(parseInt(n),r,e.payload.event.target)}),Object(j.tq)().setInteractiveHandler("Settings/do_add_to_blacklist",e=>{var t=e.payload.dataAttrs.mid;q.doAddToBlacklist(parseInt(t),e.payload.event.target)}),Object(j.tq)().setInteractiveHandler("Settings/remove_from_blacklist",e=>{var t=e.payload.dataAttrs,n=t.id,r=t.hash;q.delFromBl(parseInt(n),r,e.payload.event.target)}),Object(j.tq)().setInteractiveHandler("Settings/remove_top_from_blacklist",e=>{var t=e.payload.dataAttrs,n=t.id,r=t.hash;q.delTopFromBl(parseInt(n),r,e.payload.event.target)}),Object(j.tq)().setInteractiveHandler("Settings/more_search_box",()=>{q.moreSearchBox(!1)});var e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;showBox("payments",{act:"votes_transfer_box",to:t},{onDone(t,n){n&&(n.noBalance?t.setButtons(n.getVotesButtonText,()=>{t.hide(),U.Gifts.showGetMoneyBox()},Object(_.getLang)("global_close")):new M.TransferVotesBox(n,e))}})};Object(j.tq)().setInteractiveHandler("Settings/transfer_votes_box",t=>{var n=t.payload.dataAttrs.maxTextLength;e(n)}),Object(j.tq)().setStartupHandler("Settings/transfer_votes_init",t=>{var n=t.payload.data,r=n.maxTextLength,o=n.to;e(r,o)}),Object(j.tq)().setStartupHandler("Settings/money_transfer_box",e=>{var t=e.payload.data.tab;L.MoneyTransfer.showMoneyTransferBox({tab:t,to_id:!1,amount:!1,currency:"",from:"settings"})}),Object(j.tq)().setInteractiveHandler("Settings/money_transfer_button",e=>{var t=e.payload.dataAttrs.tab;L.MoneyTransfer.showMoneyTransferBox({tab:t,to_id:!1,amount:!1,currency:"",from:"settings"})}),Object(j.tq)().setInteractiveHandler("Settings/show_money_land",e=>{showWiki({w:"moneysend"},!1,e.payload.event)}),Object(j.tq)().setInteractiveHandler("Settings/vk_sans",e=>{var t=e.payload.event.target,n=e.payload.dataAttrs.hash;!function(e,t){R.ajax.post("/al_settings.php",{act:"a_change_vk_sans",hash:t,vk_sans:e?1:0})}(t.checked,n)}),Object(j.tq)().setInteractiveHandler("PrivacySettings/open_profile",()=>{window.ajax.post("al_settings.php?act=a_save_special",{hash:cur.options.hash,key:N.PRIVACY_KEYS.PROFILE_CLOSED,val:0},{onDone:()=>{nav.reload({preventScroll:!0,onDone:()=>{q.scrollHighlightPrivacy(document.querySelector("._"+N.PRIVACY_KEYS.PROFILE_CLOSED)),q.savePrivacyShowSaved(N.PRIVACY_KEYS.PROFILE_CLOSED),updateNarrow()}})}})}),Object(j.tq)().setInteractiveHandler("Settings/fill_balance",e=>{!1===Object(l.checkEvent)(e.payload.event)?U.Gifts.showGetMoneyBox():location.href="/settings?act=payments&getvotes=1"}),Object(j.tq)().setInteractiveHandler("Settings/spasibo_promo_banner",e=>{statlogsValueEvent("payments_ps_promo_banner_event","","votes_settings","relocate"),U.Gifts.showGetMoneyBox({type:"spasibo"})}),Object(j.tq)().setInteractiveHandler("Settings/spasibo_promo_votes_done",e=>{var t;null===(t=curBox())||void 0===t||t.hide(),statlogsValueEvent("payments_ps_promo_banner_event","","votes_successpage","relocate"),U.Gifts.showGetMoneyBox({type:"spasibo"})}),Object(j.tq)().setStartupHandler("Settings/get_votes",e=>{var t=e.payload.data.type;U.Gifts.showGetMoneyBox({type:t})})},go:function(e,t){var n=q.getsect();return!1===Object(l.checkEvent)(t)&&(n.className="",e.parentNode.className="active_link"),nav.go(e,t)},getsect:function(){for(var e=Object(a.ge)("settings_filters").firstChild;!Object(a.hasClass)(e,"active_link");)e=e.nextSibling;return e},showMsg:function(e,t){t||(t=Object(a.ge)("settings_result")),e?(Object(c.showMsg)(t,e,"ok_msg",!0),Object(a.show)(t)):Object(a.hide)(t),Object(u.scrollToTop)(0)},showError:function(e,t){e=e||Object(_.getLang)("global_unknown_error");var n=t?Object(a.ge)("settings_error_"+t):Object(a.ge)("settings_result");Object(c.showMsg)(n,e,"error",!0),Object(a.show)(n),t||Object(u.scrollToTop)(0)},toggleBlock:function(e,t){var n,r;e&&e.target?(n=e.target,r=Object(a.hasClass)(n,"settings_line")?n:Object(a.gpeByClass)("settings_line",n)):(e=Object(a.ge)(e),n=Object(a.geByClass1)("settings_right_control",e),r=Object(a.hasClass)(e,"settings_line")?e:Object(a.gpeByClass)("settings_line",e)),r&&Object(a.geByClass1)("settings_change_block",r)&&(!Object(a.hasClass)(r,"unfolded")||Object(a.hasClass)(n,"settings_right_control"))&&(cur.changingSetting&&cur.changingSetting!==r&&(Object(a.removeClass)(cur.changingSetting,"unfolded"),window.tooltips&&tooltips.hideAll()),Object(a.toggleClass)(r,"unfolded"),cur.changingSetting=r,t&&Object(a.elfocus)(t))},savePrivacyKey:function(e){if("friends"!==e){var t,n={key:e,val:Privacy.getValue(e),hash:cur.options.hash};if([N.PRIVACY_KEYS.SEARCH_ACCESS,N.PRIVACY_KEYS.UPDATES,N.PRIVACY_KEYS.COMPANY_MESSAGES,N.PRIVACY_KEYS.PROFILE_CLOSED].includes(e)){if(e===N.PRIVACY_KEYS.UPDATES){var r=Privacy.getValue(e);if("0"!==r.substr(0,1))r.substr(2).length||(Object(a.ge)("privacy_header").innerHTML=Object(a.ge)("privacy_edit_updates").innerHTML=Object(_.getLang)("settings_updates_no_news"))}t="al_settings.php",n.act="a_save_special"}else t="al_friends.php",n.act="save_privacy";clearTimeout(cur["privacy_timer_"+e]),cur["privacy_timer_"+e]=setTimeout(()=>{window.ajax.post(t,n,{onDone:function(t){if(t)return nav.reload({preventScroll:!0,onDone:function(e){q.savePrivacyShowSaved(e),updateNarrow()}.pbind(e)});q.savePrivacyShowSaved(e)}})},500)}else window.uiPageBlock&&uiPageBlock.showSaved("privacy_friends_hide")},savePrivacyShowSaved:function(e){window.uiPageBlock&&uiPageBlock.showSaved("privacy_edit_"+e)},initPrivacy:function(e){var t=e.privacy,n=e.options,r=e.isClosedProfileExperimentEnabled;if(cur.privacy=t,cur.options=n,cur.isClosedProfileExperimentEnabled=r,cur.onPrivacyChanged=q.savePrivacyKey,cur.privacyNeedConfirm=function(e,t,n){if("profile_closed"===e&&Object(s.intval)(t)){if(window.cur.isClosedProfileExperimentEnabled)return void K(n);var r=new MessageBox({title:Object(_.getLang)("settings_closed_profile_confirm_title")});r.content(Object(_.getLang)("settings_closed_profile_confirm_text")),r.removeButtons().addButton(Object(_.getLang)("settings_closed_profile_confirm_btn"),(function(){n(),r.hide()})),r.addButton(Object(_.getLang)("global_cancel"),r.hide,"no"),r.show()}else n()},nav.objLoc.hl){var o=Object(a.geByClass1)("_"+nav.objLoc.hl);q.scrollHighlightPrivacy(o)}},highlightPrivacy(e){(e=Object(a.ge)(e))&&(Object(a.addClass)(e,"setting_row_selected"),Object(a.addClassDelayed)(e,"setting_row_animated",1500),Object(a.removeClassDelayed)(e,"setting_row_selected",2500),Object(a.removeClassDelayed)(e,"setting_row_animated",2500))},scrollHighlightPrivacy:function(e){(e=Object(a.ge)(e))&&setTimeout((function(){var t=Object(a.getXY)(e)[1],n=Object(a.getSize)("page_header")[1],r=Object(u.scrollGetY)(),o=Object(a.clientHeight)();t<n+r||t>r+o?(Object(u.scrollToY)(t),setTimeout(q.highlightPrivacy.pbind(e),300)):q.highlightPrivacy(e)}),0)},initSearchBox:function(e,t,n){Object(s.extend)(cur,t),n&&ajax.preload(cur.searchBoxAddress,cur.searchBoxParams,n),window.uiScrollBox&&uiScrollBox.init(e,{onShow:function(){Object(l.addEvent)(boxLayerWrap,"scroll",q.boxScrollResize),setTimeout(q.boxScrollResize,0)},onHide:function(){Object(l.removeEvent)(boxLayerWrap,"scroll",q.boxScrollResize)}}),Object(l.addEvent)(boxLayerWrap,"scroll",q.boxScrollResize),q.boxScrollResize()},boxScrollResize:function(){if(!browser.mobile){var e=lastWindowHeight,t=Object(a.ge)(cur.boxMoreLink);t&&Object(a.isVisible)(t)&&e>Object(a.getXY)(t,!0)[1]&&cur.boxShowMore()}},moreSearchBoxLoaded:function(e,t,n){cur.loading=!1,cur.searchBoxParams.offset=t;var r=cur.boxRows,o=Object(a.ce)("div",{innerHTML:e});for(Object(a.toggle)(cur.boxMoreLink,n);o.firstChild;)r.appendChild(o.firstChild)},moreSearchBox:function(e,t,n){var r=cur.boxMoreLink;!(e||Object(a.isVisible)(r)&&!Object(a.hasClass)(r,"loading"))||e&&n==cur.searchBoxParams.q||(cur.loading?cur.loading=2:(e&&(cur.oldBoxParams={q:cur.searchBoxParams.q,offset:cur.searchBoxParams.offset},Object(s.extend)(cur.searchBoxParams,{q:n,offset:0})),ajax.post(cur.searchBoxAddress,cur.searchBoxParams,{onDone:function(n,r,o,i){if(e){if(i)return Object(s.extend)(cur.searchBoxParams,cur.oldBoxParams),Object(a.val)(t,cur.oldBoxParams.q),void(cur.searchBoxFound&&cur.searchBoxFound(i));cur.boxRows.innerHTML=n?"":cur.boxNoRowsTpl,curBox().tbToTop()}q.moreSearchBoxLoaded.apply(window,arguments)},onFail:function(){return cur.loading=0,!0},showProgress:function(){Object(a.addClass)(r,"loading")},hideProgress:function(){Object(a.removeClass)(r,"loading")}})))},moreSearchBoxChange:function(e,t){t&&"paste"==t.type?q.moreSearchBox(!0,curBox().tbSearchField,e):e.length||q.moreSearchBox(!0,curBox().tbSearchField,"")},initBlacklist:function(){Object(a.ge)("settings_bl_msg")&&setTimeout(a.removeClass.pbind(Object(a.ge)("settings_bl_msg"),"msg_appear"),0),Object(a.elfocus)("settings_bl_search")},searchBlacklist:function(e){e&&(e=e.toLowerCase());var t=Object(a.ge)("settings_bl_empty"),n=Object(_.getLang)("settings_blacklist_not_found_by_query"),r=Object(a.ge)("settings_bl_list"),o=0;Array.from(Object(a.geByClass)("settings_bl_row",r)).forEach(t=>{if(e){var n=Object(a.geByClass1)("settings_bl_name",t);(Object(a.val)(Object(a.geByTag1)("a",n))||Object(a.val)(Object(a.geByClass1)("name_label"))).toLowerCase().indexOf(e)>-1?(Object(a.show)(t),o++):Object(a.hide)(t)}else Object(a.show)(t),o++}),e&&!o?(t.innerHTML=n.split("{query}").join("<b>"+e.replace(/([<>&#]*)/g,"")+"</b>"),Object(a.show)(t),Object(a.hide)("settings_bl_noempty")):(Object(a.hide)(t),Object(a.show)("settings_bl_noempty"))},doAddToBlacklist:function(e,t){ajax.post("al_settings.php",{act:"search_blacklist",query:e,hash:cur.options.blacklist_hash},{onDone:function(e,t,n){curBox().emit("success",n),curBox().hide();var r=Object(a.ge)("settings_bl_summary");e&&-1!=e&&r&&(r.innerHTML=Object(_.langNumeric)(e,"%s",!0));var o=Object(a.ce)("div",{innerHTML:t}).firstChild,i=Object(a.ge)("settings_bl_list");Object(a.re)(o.id),i&&(i.insertBefore(o,i.firstChild),Object(a.show)("settings_bl_noempty"),Object(a.hide)("settings_bl_empty"),Object(c.showMsg)("settings_bl_result",n,"ok_msg",!0))},onFail:function(e){return Object(c.showMsg)("settings_search_rows",e,"error",!0),!0},showProgress:function(){"BUTTON"===t.tagName?Object(d.lockButton)(t):uiSearch.showProgress(t)},hideProgress:function(){"BUTTON"===t.tagName?Object(d.unlockButton)(t):uiSearch.hideProgress(t)}})},addToBlacklist:function(){return showBox("al_settings.php",{act:"blacklist_box"},{params:{dark:!0}}),!1},addToBl:function(e,t,n){ajax.post("al_settings.php",{act:"a_add_to_bl",id:e,hash:t,from:"settings"},{onDone:function(t){t&&(Object(a.ge)("settings_bl_summary").innerHTML=Object(_.langNumeric)(t,"%s",!0)),Object(a.hide)("settings_bl_label"+e),n.setAttribute("data-task-click","Settings/remove_from_blacklist"),n.innerHTML=Object(_.getLang)("settings_remove")},onFail:function(e){return setTimeout(Object(v.showFastBox)({title:Object(_.getLang)("global_error"),dark:1,bodyStyle:"padding: 20px; line-height: 160%;"},e).hide,2e3),!0},showProgress:function(){Object(a.hide)(n),Object(a.show)("settings_progress"+e)},hideProgress:function(){Object(a.show)(n),Object(a.hide)("settings_progress"+e)}})},delFromBl:function(e,t,n){ajax.post("al_settings.php",{act:"a_del_from_bl",id:e,hash:t,from:"settings"},{onDone:function(t){Object(a.ge)("settings_bl_summary").innerHTML=t?Object(_.langNumeric)(t,"%s",!0):"",Object(a.setStyle)("settings_bl_label"+e,"display","inline"),n.setAttribute("data-task-click","Settings/add_to_blacklist"),n.innerHTML=Object(_.getLang)("settings_restore_blacklist")},onFail:function(e){return setTimeout(Object(v.showFastBox)({title:Object(_.getLang)("global_error"),dark:1,bodyStyle:"padding: 20px; line-height: 160%;"},e).hide,2e3),!0},showProgress:function(){Object(a.hide)(n),Object(a.show)("settings_progress"+e)},hideProgress:function(){Object(a.show)(n),Object(a.hide)("settings_progress"+e)}})},delTopFromBl:function(e,t,n){var r=Object(a.ce)("img",{src:"/images/upload.gif"});ajax.post("al_settings.php",{act:"a_del_from_bl",id:e,hash:t,from:"settings"},{onDone:function(t){t&&(Object(a.ge)("settings_bl_summary").innerHTML=t?Object(_.langNumeric)(t,"%s",!0):""),Object(a.setStyle)("settings_bl_label"+e,"display","inline");var n=Object(a.geByTag1)("a",Object(a.geByClass1)("settings_bl_action",Object(a.ge)("settings_bl_row"+e)));n.setAttribute("data-task-click","Settings/add_to_blacklist"),n.innerHTML=Object(_.getLang)("settings_restore_blacklist"),Object(a.hide)("settings_bl_result")},showProgress:function(){n.parentNode.replaceChild(r,n)},hideProgress:function(){r.parentNode.replaceChild(n,r)}})},saveSmsNotify:function(e){Object(d.lockButton)(e);var t={act:"a_save_sms_notify",hash:cur.options.notify_hash};Object(s.each)(cur.options.notify_sms_keys,(function(e,n){t[n]=Privacy.getValue(n)})),t.smsenabled=Object(d.isChecked)("smsenabled")?1:0,Object(d.isChecked)("daytime")?(t.daytime_from=Object(a.ge)("daytime_from").value,t.daytime_to=Object(a.ge)("daytime_to").value):(t.daytime_from=0,t.daytime_to=0),Object(a.val)("settings_notify_sms_result",""),ajax.post("al_settings.php",t,{onDone:function(t,n,r){Object(d.unlockButton)(e),n&&r?Object(v.showFastBox)({title:t,dark:1,bodyStyle:"padding: 20px; line-height: 160%;"},n,Object(_.getLang)("settings_subscribe_to_service_btn"),(function(){window.open(r),curBox().hide()}),Object(_.getLang)("box_cancel"),(function(){Object(d.checkbox)("smsenabled",0),q.smsNotifyCheck(),q.saveSmsNotify(),curBox().hide()})):Object(c.showMsg)("settings_notify_sms_result",t,"ok_msg",!0)},onFail:function(t){Object(d.unlockButton)(e),Object(d.checkbox)("smsenabled",0),q.smsNotifyCheck(),q.saveSmsNotify()}})},updateInstantSounds:function(e){Object(a.toggleClass)(Object(a.geByClass1)("_ui_toggler",e),"on"),h.default.set("sound_notify_off",Object(a.hasClass)(Object(a.geByClass1)("_settings_isounds"),"on")?0:1),uiPageBlock.showSaved(e)},saveSiteNotify:function(e){Object(a.toggleClass)(Object(a.geByClass1)("_ui_toggler",e),"on");var t={act:"a_save_site_notify",hash:cur.options.notify_hash,ienable:Object(a.hasClass)(Object(a.geByClass1)("_settings_ienable"),"on")?1:0,itexts:Object(a.hasClass)(Object(a.geByClass1)("_settings_itexts"),"on")?1:0};Object(s.each)(Object(a.geByClass)("_settings_nf_bt"),(function(e,n){t["nf_bt_"+n.getAttribute("data-id")]=+Object(a.hasClass)(n,"on")})),cur.options.notify_privacy_keys&&cur.options.notify_privacy_keys.forEach((function(e){t["nf_"+e]=0|Privacy.getValue(e)})),clearTimeout(cur.instantNotifyTO),clearTimeout(cur.instantNotifySaveTO),cur.instantNotifyTO=setTimeout(ajax.post.pbind("al_settings.php",t,{onDone:function(){cur.instantNotifySaveTO=setTimeout(window.uiPageBlock&&uiPageBlock.showSaved.pbind(e),1e3)}}),500),TopNotifier&&TopNotifier.invalidate()},saveBrowserNotify:function(e){var t="browser_notification",n=Object(a.ge)("privacy_edit_"+t),r=Number(Privacy.getValue(t));Object(a.addClass)(n,"privacy_link_disabled"),pushNotifier.canBeEnabled().then((function(o){o?pushNotifier.setupSubscription().then((function(){return Object(a.removeClass)(n,"privacy_link_disabled"),pushNotifier.setState(r,cur.options.push_notify_hash)})).catch((function(r){p.default.PUSH_NOTIFIER_BLOCKED_BY_BROWSER_SETTINGS===r?pushNotifier.showPopupAllowNotification():Object(v.showFastBox)(Object(_.getLang)("global_error"),Object(_.getLang)("notifications_native_common_error")),Privacy.setValue(t,e),Object(a.removeClass)(n,"privacy_link_disabled")})):(Privacy.setValue(t,e),Object(a.removeClass)(n,"privacy_link_disabled"),Object(v.showFastBox)(Object(_.getLang)("global_error"),Object(_.getLang)("notifications_native_common_error")))}))},saveGroupNotify:function(e,t){if(Object(a.hasClass)(Object(a.geByClass1)("_ui_toggler",e),"ui_toggler_disable"))return!1;Object(a.toggleClass)(Object(a.geByClass1)("_ui_toggler",e),"on");var n={act:"a_save_group_notify",hash:cur.options.notify_hash,gid:t};Object(s.each)(Object(a.geByClass)("ui_toggler",Object(a.domClosest)("wide_column",e)),(function(e,t){n[t.getAttribute("data-id")]=+Object(a.hasClass)(t,"on")})),clearTimeout(cur.instantNotifyTO),clearTimeout(cur.instantNotifySaveTO),cur.instantNotifyTO=setTimeout(ajax.post.pbind("al_settings.php",n,{onDone:function(){cur.instantNotifySaveTO=setTimeout(window.uiPageBlock&&uiPageBlock.showSaved.pbind(e),1e3)}}),500),TopNotifier&&TopNotifier.invalidate()},checkboxSiteNotify:function(e,t){t.target&&Object(a.hasClass)(t.target,"item_sel")||(Object(d.checkbox)(e),q.saveSiteNotify(e))},saveMailNotify:function(e){var t={act:"a_save_mail_notify",hash:cur.options.notify_hash,mail_period:Privacy.getValue("mail_period")};Object(s.each)(cur.options.notify_mail_keys,(function(e,n){t[n]=Object(d.isChecked)(n)?1:0})),clearTimeout(cur.mailNotifyTO),cur.mailNotifyTO=setTimeout(ajax.post.pbind("al_settings.php",t,{onDone:window.uiPageBlock&&uiPageBlock.showSaved.pbind(e)}),500)},saveNotifyPrivacyKey:function(e,t){"browser_notification"===e?q.saveBrowserNotify(t):"mail_period"===e?(q.saveMailNotify("privacy_edit_"+e),3==Privacy.getValue(e)?Object(a.hide)("mail_options"):Object(a.show)("mail_options")):cur.options.notify_privacy_keys&&~cur.options.notify_privacy_keys.indexOf(e)?q.saveSiteNotify("privacy_edit_"+e):"sms_pm_notify"===e&&(0!=Privacy.getValue(e)?Object(a.hide)("sms_pm_privacy_row"):Object(a.show)("sms_pm_privacy_row"))},initNotify:function(){cur.options.msg&&q.showMsg(cur.options.msg);var e=Object(a.geByClass1)("_settings_isounds");Object(a.toggleClass)(e,"on",!h.default.get("sound_notify_off")),Object(a.removeClassDelayed)(e,"no_transition"),cur.reloadOnMailBind=!0,cur.onPrivacyChanged=q.saveNotifyPrivacyKey;for(var t=[],n=24;n--;)t.unshift((n<10?"0":"")+n+":00");var r=Object(a.ge)("daytime_from"),o=Object(a.ge)("daytime_to");r&&o&&(void 0!==cur.options.time_from&&new Dropdown(r,t,{selectedItems:cur.options.time_from}),void 0!==cur.options.time_to&&new Dropdown(o,t,{selectedItems:cur.options.time_to}))},smsNotifyCheck:function(){Object(d.isChecked)("smsenabled")?(slideDown(Object(a.ge)("sms_options"),200),Object(a.show)("sms_options_msg")):Object(a.isVisible)("sms_options")&&(Object(a.hide)("sms_options_msg"),slideUp(Object(a.ge)("sms_options"),200))},smsDayTimeCheck:function(){Object(d.isChecked)("daytime")?slideDown(Object(a.ge)("daytime_from_to"),200):slideUp(Object(a.ge)("daytime_from_to"),200)},checkPIN:function(e){var t=e.value.replace(/[^0-9]/g,"");e.value!==t&&(e.value=t)},updatePIN:function(e){Object(d.lockButton)(Object(a.ge)("pin_btn")),Object(a.val)("settings_pin_result","");var t={act:"a_change_pin",pin:Object(a.ge)("pin").value,hash:e};ajax.post("al_settings.php",t,{onDone:function(e){Object(d.unlockButton)(Object(a.ge)("pin_btn")),Object(a.val)("settings_pin_value",t.pin),Object(c.showMsg)("settings_pin_result",e,"ok_msg",!0)},onFail:function(e){return Object(d.unlockButton)(Object(a.ge)("pin_btn")),Object(c.showMsg)("settings_pin_result",e,"error",!0),!0}})},getAdminSelectShowCt:function(e){return Object.keys(e).filter((function(t){return e[t]})).length},initMenuBox:function(e,t,n){this.initMenuEvents(e),e.setOptions({onHide:function(){cur.adminGroupsDirty&&(window.Notifier&&Notifier.resetCommConnection(),ajax.post("al_settings.php",{act:"a_get_left_menu"},{onDone:function(e){Object(a.geByTag1)("ol",Object(a.ge)("side_bar")).innerHTML=e}})),2==t&&Object(s.isFunction)(cur.settingsBoxSetLeftMenuAppCallback)&&cur.settingsBoxSetLeftMenuAppCallback(!1)}}),cur.menuSettings=n,this.updateMenuBoxCount(t)},initMenuEvents:function(e){var t=Object(a.geByClass1)("olist",e.bodyNode),n=Object(a.geByClass1)("summary_tabs",e.bodyNode);Object(a.setStyle)(n,"display","inline-block");var r=Object(a.getSize)(n)[0]+parseInt(Object(a.getStyle)(n,"marginLeft"))+parseInt(Object(a.getStyle)(n,"marginRight"));r>450&&e.setOptions({width:Math.ceil(r)}),Object(a.setStyle)(n,"display",null),Object(l.addEvent)(t,"scroll",this.onMenuBoxScroll.pbind(e,t)),this.onMenuBoxScroll(e,t)},onMenuBoxScroll:function(e,t){var n=Object(a.domPN)(e.bodyNode),r=t.scrollHeight,o=t.scrollTop,i=t.offsetHeight||t.clientHeight;Object(a.toggleClass)(n,"olist_topsh",o>0),Object(a.toggleClass)(n,"olist_botsh",o+i<r)},updateMenuBoxCount:function(e){var t=curBox(),n=cur.menuSettings[e]||{},r=q.getAdminSelectShowCt(n),o="";if(1==e||2==e){var i=cur.menuSettings.limits[e];o='<span class="settings_menu_box_counter">'+Object(_.getLang)("settings_admin_groups_left").replace("{count}",r).replace("{amt}",i)+"</span>"}t.setControlsText(o)},toggleMenuBoxRow:function(e,t,n){var r=cur.menuSettings[t]||{},o=q.getAdminSelectShowCt(r),i=r[n];if(curBox().changed=!0,1==t||2==t){var s=cur.menuSettings.limits[t];if(Object(a.toggleClass)(Object(a.gpeByClass)("olist_section",e),"settings_menu_rows_disabled",!i&&o>=s-1),!i&&o>=s)return!1}return Object(a.toggleClass)(e,"olist_item_wrap_on",!i),r[n]=i?0:1,q.updateMenuBoxCount(t),!1},switchMenuBoxSection:function(e,t){var n=curBox();Object(s.each)(Object(a.geByClass)("olist_section",n.bodyNode),(function(){Object(a.hide)(this)})),Object(a.show)("settings_menu_"+t),Object(a.geByClass1)("olist",n.bodyNode).scrollTop=0,q.updateMenuBoxCount(t)},saveMenu:function(e,t){for(var n=curBox(),r=[],o=[],i=[],c=[],u={hash:e,act:"a_change_services"},l=!1,_=function(e){var t=cur.menuSettings[e]||{};Object(s.each)(t,(function(t,n){switch(e){case 1:n&&o.push(t);break;case 2:i.push(t),n&&(cur.aid==t&&(l=!0),r.push(t));break;case 3:n||c.push(t);break;default:u[t]=n}}))},p=0;p<=3;p++)_(p);i.length&&(u.apps_all=i.join(","),u.apps_on=r.join(",")),u.groups_list=o.join(","),u.service_hidden=c.join(","),ajax.post("al_settings.php",u,{onDone:function(e){Object(a.geByTag1)("ol",Object(a.ge)("side_bar")).innerHTML=e,window.uiPageBlock&&uiPageBlock.showSaved("settings_services"),Object(s.isFunction)(cur.settingsBoxSetLeftMenuAppCallback)&&cur.settingsBoxSetLeftMenuAppCallback(l),n.hide(),window.Apps&&window.Apps.updateAddToMenuAction()},showProgress:d.lockButton.pbind(t),hideProgress:d.unlockButton.pbind(t)})},giftsCheck:function(){clearTimeout(cur.giftsUpdateTO),cur.giftsUpdateTO=setTimeout(q.giftsSubmit,200)},giftsSubmit:function(){ajax.post("/al_profile.php",{act:"hide_gifts",hash:cur.options.hide_gifts_hash,shown:Object(a.ge)("settings_hide_gifts").checked?0:1},{onDone:window.uiPageBlock&&uiPageBlock.showSaved.pbind("cposts")})},gifCheck:function(){clearTimeout(cur.gifUpdateTO),cur.gifUpdateTO=setTimeout(q.gifSubmit,200)},gifSubmit:function(){ajax.post("/al_settings.php",{act:"a_change_autoplay_gif",hash:cur.options.gif_autoplay_hash,no_autoplay:Object(a.ge)("settings_gif_autoplay").checked?0:1},{onDone:window.uiPageBlock&&uiPageBlock.showSaved.pbind("cposts")})},accessCheck:function(){clearTimeout(cur.accessUpdateTO),cur.accessUpdateTO=setTimeout(q.accessSubmit,200)},accessSubmit:function(){ajax.post("/al_settings.php",{act:"a_toggle_access_mode",hash:cur.options.a11y_hash,mode:Object(s.intval)(Object(a.ge)("settings_a11y").checked)},{onDone:window.uiPageBlock&&uiPageBlock.showSaved.pbind("settings_a11y")})},stickersHintsCheck:function(){clearTimeout(cur.stickersHintsTO),cur.stickersHintsTO=setTimeout(q.stickersHintsSubmit,200)},stickersHintsSubmit:function(){ajax.post("/al_settings.php",{act:"a_change_stickers_hints",hash:cur.options.stickers_hints_hash,hints:Object(a.ge)("settings_stickers_hints").checked?1:0},{onDone:function(){window.uiPageBlock&&uiPageBlock.showSaved("cposts"),window.Emoji&&Emoji.updateTabs.apply(window,arguments)}})},videoCheck:function(){clearTimeout(cur.videoUpdateTO),cur.videoUpdateTO=setTimeout(q.videoSubmit,200)},videoSubmit:function(){ajax.post("/al_settings.php",{act:"a_change_autoplay_video",hash:cur.options.video_autoplay_hash,video_autoplay:Object(a.ge)("settings_video_autoplay").checked?1:0},{onDone:window.uiPageBlock&&uiPageBlock.showSaved.pbind("cposts")})},videostartCheck:function(){clearTimeout(cur.videostartUpdateTO),cur.videostartUpdateTO=setTimeout(q.videostartSubmit,200)},videostartSubmit:function(){ajax.post("/al_settings.php",{act:"a_change_autostart_video",hash:cur.options.video_autostart_hash,video_autostart:Object(a.ge)("settings_video_autostart").checked?1:0},{onDone:window.uiPageBlock&&uiPageBlock.showSaved.pbind("cposts")})},hintachCheck:function(){clearTimeout(cur.hintachUpdateTO),cur.hintachUpdateTO=setTimeout(q.hintachSubmit,200)},hintachSubmit:function(){ajax.post("/al_settings.php",{act:"a_change_hintach",hash:cur.options.hintach_hash,hintach:Object(a.ge)("settings_hintach").checked?1:0},{onDone:window.uiPageBlock&&uiPageBlock.showSaved.pbind("cposts")})},drCheck:function(){clearTimeout(cur.drUpdateTO),cur.drUpdateTO=setTimeout(q.drSubmit,200)},drSubmit:function(){ajax.post("/al_settings.php",{act:"a_change_dr",hash:cur.options.dr_hash,dr:Object(a.ge)("settings_dr").checked?1:0},{onDone:nav.reload.pbind()})},externalAuthCheck:function(){clearTimeout(cur.externalAuthUpdateTO),cur.externalAuthUpdateTO=setTimeout((function(){ajax.post("al_settings.php",{act:"a_change_external_auth",hash:cur.options.external_auth_hash,state:Object(a.ge)("settings_external_auth").checked?1:0},{onDone:window.uiPageBlock&&uiPageBlock.showSaved.pbind("cposts")})}),200)},videoadsCheck:function(){clearTimeout(cur.videoadsUpdateTO),cur.videoadsUpdateTO=setTimeout(q.videoadsSubmit,200)},videoadsSubmit:function(){ajax.post("/al_settings.php",{act:"a_change_ads_video",hash:cur.options.video_ads_hash,video_ads:Object(a.ge)("settings_video_ads").checked?1:0},{onDone:window.uiPageBlock&&uiPageBlock.showSaved.pbind("cposts")})},vkPayEndpointCheck:function(){clearTimeout(cur.vkPayEndpointUpdateTO),cur.vkPayEndpointUpdateTO=setTimeout(q.vkPayEndpointSubmit,200)},vkPayEndpointSubmit:function(){ajax.post("/al_settings.php",{act:"a_change_vk_pay_endpoint",hash:cur.options.vk_pay_endpoint_hash,vk_pay_endpoint:Object(a.ge)("settings_vk_pay_endpoint").checked?1:0},{onDone:window.uiPageBlock&&uiPageBlock.showSaved.pbind("cposts")})},microblogCheck:function(e){Object(a.hasClass)(Object(a.ge)("settings_"+e),"disabled")||Object(a.ge)("settings_"+e).disabled||(clearTimeout(cur.microblogUpdateTO),cur.microblogUpdateTO=setTimeout(q.microblogSubmit,200))},microblogSubmit:function(){var e={act:"a_change_microblog",hash:cur.options.microblog_hash};Object(s.each)(["status_default","no_wall_replies"],(function(t,n){var r=Object(a.ge)("settings_"+n);r&&(e[n]=r.checked?1:0)})),ajax.post("/al_settings.php",e,{onDone:window.uiPageBlock&&uiPageBlock.showSaved.pbind("cposts")})},photoTagFriendsCheck:function(){clearTimeout(cur.photoAutoTagFriendsUpdateTO),cur.photoAutoTagFriendsUpdateTO=setTimeout(q.photoTagFriendsSubmit,200)},recognitionUserBlockCheck(){clearTimeout(cur.recognitionUserBlockUpdateTO),cur.recognitionUserBlockUpdateTO=setTimeout(q.recognitionUserBlockSubmit,200)},recognitionFriendsBlockCheck(){clearTimeout(cur.recognitionFriendsBlockUpdateTO),cur.recognitionFriendsBlockUpdateTO=setTimeout(q.recognitionFriendsBlockSubmit,200)},recognitionUserBlockSubmit(){ajax.post("/al_settings.php",{act:"toggle_user_recognition_block",hash:cur.options.recognition_user_hash,enabled:Object(a.ge)("settings_recognition_user").checked?1:0},{onDone:window.uiPageBlock&&uiPageBlock.showSaved.pbind("cposts")})},recognitionFriendsBlockSubmit(){ajax.post("/al_settings.php",{act:"toggle_friends_recognition_block",hash:cur.options.recognition_friends_hash,enabled:Object(a.ge)("settings_recognition_friends").checked?1:0},{onDone:window.uiPageBlock&&uiPageBlock.showSaved.pbind("cposts")})},photoTagFriendsSubmit:function(){ajax.post("/al_settings.php",{act:"a_change_autotag_friends",hash:cur.options.autotag_friends_hash,autotag_friends:Object(a.ge)("settings_autotag_friends").checked?1:0},{onDone:window.uiPageBlock&&uiPageBlock.showSaved.pbind("cposts")})},OTPAuthEnable:function(e){return showBox("al_settings.php",{act:"otp_auth_box",confirm:e,hash:cur.options.otp_hash},{params:{dark:!0}}),!1},OTPAuthAppSet:function(e){var t={act:"otp_auth_app_box"};return e?(curBox().hide(),t.force=1,t.hash=e):t.hash=cur.options.otp_hash,showBox("al_settings.php",t),!1},OTPAuthDisable:function(e){if(Object(d.isButtonLocked)(e))return!1;var t={type:"otp_auth",hash:cur.options.otp_hash};ajax.post("al_settings.php?act=a_otp_auth_save",t,{showProgress:()=>Object(d.lockButton)(e),hideProgress:()=>Object(d.unlockButton)(e),onFail:e=>void 0!==e&&Object(g.showErrorBox)(e)})},OTPAuthAppDisable:function(){if(Object(a.isVisible)(curBox().progress))return!1;var e={type:"otp_auth_by_app",hash:cur.options.otp_hash};ajax.post("al_settings.php?act=a_otp_auth_save",e,{showProgress:curBox().showProgress,hideProgress:curBox().hideProgress,onDone:function(){Object(a.addClass)("settings_otp_auth_app_set","settings_otp_app_disabled"),Object(a.val)("settings_otp_auth_app_set_link",Object(_.getLang)("settings_otp_auth_by_app_enable")),curBox().hide()}})},OTPAuthShowReserveCodes:function(e,t){return showBox("al_settings.php",{act:"otp_auth_reserve_codes_box",hash:e,force_new:t?1:0},{params:{dark:!0}}),!1},OTPAuthGetTrusted:function(e){var t=Object(a.ge)("settings_otp_auth_trusted");if(t&&Object(a.isVisible)(t)&&(e||Object(a.geByTag1)("img",t))){var n=vk.loginscheme!=location.protocol.substr(0,location.protocol.length-1)?1:0;ajax.post(vk.loginscheme+"://"+location.host+"/al_login.php",{act:"is_trusted_browser",_http:n},{frame:n,onDone:function(e){t.innerHTML=e}})}},OTPAuthClearTrusted:function(e,t,n){var r=!1,o=e.getAttribute("confirm");function i(){if(!t&&cur.options.otp_reset_hash)return cur.onReLoginDoneCallback=function(){var e=Object(a.ge)("settings_reset_sessions_link");e&&(e.parentNode.innerHTML='<div class="settings_labeled_notice">'+Object(_.getLang)("setting_all_sessions_reset")+"</div>")},q.reset_sessions=!1,q.resetAllSessions(e,'<input name="otp_reset_hash" value="'+cur.options.otp_reset_hash+'" type="hidden" />',e.getAttribute("complete"),cur.options.logout_hash),void(r&&r.hide());var o=Object(a.ce)("img",{src:"/images/upload"+(window.devicePixelRatio>=2?"_2x":"")+".gif"},{width:32}),i=vk.loginscheme!=location.protocol.substr(0,location.protocol.length-1)?1:0;ajax.post(vk.loginscheme+"://"+location.host+"/al_login.php",{act:"clear_trusted_browsers",only_cur:t,hash:n,_http:i},{frame:i,onDone:function(t){r&&r.hide(),e.parentNode.innerHTML='<div class="settings_labeled_notice">'+e.getAttribute("complete")+"</div>"},showProgress:function(){r?r.showProgress():e.parentNode.replaceChild(o,e)},hideProgress:function(){r?r.hideProgress():o.parentNode.replaceChild(e,o)}})}o?(o=o.split("<!!>"),r=Object(v.showFastBox)({title:o[0],dark:1,bodyStyle:"padding: 20px;"},o[1],o.length>2?o[2]:Object(_.getLang)("box_yes"),i)):i()},OTPAppPasswords:function(){return showBox("al_settings.php",{act:"otp_auth_app_passwords_box"},{params:{dark:!0}}),!1},OTPCreateAppPassword:function(e,t){if(!Object(d.isButtonLocked)(e)){var n=Object(a.val)("settings_app_password_name");n.length?(Object(a.val)("settings_app_passwords_error",""),ajax.post("al_settings.php",{act:"a_otp_auth_create_app_password",name:n,hash:t},{onDone:function(e,t,n){Object(v.showFastBox)({title:e,width:450},t),Object(a.ge)("settings_app_passwords_table_wrap").innerHTML=n,Object(a.hide)("settings_app_passwords_empty"),Object(a.val)("settings_app_password_name","")},onFail:function(e){return e&&Object(c.showMsg)("settings_app_passwords_error",e,"error",!0),!0},showProgress:d.lockButton.pbind(e),hideProgress:d.unlockButton.pbind(e)})):Object(d.notaBene)("settings_app_password_name")}},OTPRemoveAppPassword:function(e,t,n){return ajax.post("al_settings.php",{act:"a_otp_auth_remove_app_password",id:t,hash:n},{onDone:function(){Object(a.re)("settings_app_password"+t),Object(a.geByTag)("tr","settings_app_passwords_table_wrap").length<=1&&(Object(a.ge)("settings_app_passwords_table_wrap").innerHTML="",Object(a.show)("settings_app_passwords_empty"))},showProgress:function(){Object(d.showProgress)(e.parentNode),Object(a.hide)(e)},hideProgress:function(){Object(d.hideProgress)(e.parentNode),Object(a.show)(e)}}),!1},passwordDone:function(e,t){var n;Object(a.re)(cur.pwchFrame),Object(d.unlockButton)(cur.pwchDestroy),cur.pwchFrame=!1;var r="settings_new_pwd";switch(e){case 1:n="settings_cant_set_this_password";break;case-2:n="settings_oldpwd_notcorr",r="settings_old_pwd";break;case-3:n="settings_newpwd_not_good",r="settings_new_pwd";break;case 2:return Object(a.hide)("settings_error_pwd"),Object(a.val)(Object(a.geByClass1)("settings_labeled_text","chgpass"),Object(_.getLang)("settings_pass_update_just_now")),Object(a.val)("settings_old_pwd",""),Object(a.val)("settings_new_pwd",""),Object(a.val)("settings_confirm_pwd",""),q.toggleBlock("chgpass"),q.showMsg(Object(_.getLang)("settings_pass_success")),void(cur.pwchCaptchaBox&&(cur.pwchCaptchaBox.hide(),cur.pwchCaptchaBox=!1));case-1:return void(cur.pwchCaptchaBox=showCaptchaBox(t,1,cur.pwchCaptchaBox,{onSubmit:q.passwordSubmit.pbind(cur.pwchDestroy),onDestroy:function(){}}));default:n="settings_cant_change_password"}cur.pwchCaptchaBox&&(cur.pwchCaptchaBox.hide(),cur.pwchCaptchaBox=!1),q.showError(Object(_.getLang)(n),"pwd"),Object(d.notaBene)(r)},passwordSubmit:function(e,t,n){var r=Object(a.val)("settings_old_pwd"),o=Object(a.val)("settings_new_pwd"),i=Object(a.val)("settings_confirm_pwd"),s=Object(a.ge)("settings_pwd_tt_place").tt;if(!cur.pwchFrame)if(r)if(o)if(i){if(s&&s.hide({fasthide:!0}),o.match(/\s/))return q.showError(Object(_.getLang)("settings_pwd_bad"),"pwd"),Object(d.notaBene)("settings_new_pwd"),void(s&&setTimeout(s.show,10));if(o.length<6)return q.showError(Object(_.getLang)("settings_pwd_bad"),"pwd"),Object(d.notaBene)("settings_new_pwd"),void(s&&setTimeout(s.show,10));if(i!=o)return q.showError(Object(_.getLang)("settings_newpwd_notcorr"),"pwd"),Object(d.notaBene)("settings_confirm_pwd"),void(s&&setTimeout(s.show,10));cur.pwchDestroy||cur.destroy.push((function(e){Object(a.re)(e.pwchFrame)})),cur.pwchDestroy=e,curBox()||Object(d.lockButton)(cur.pwchDestroy);var c={act:"changepass",_origin:locProtocol+"//"+locHost,pass:r,new_pass:o};t&&n&&(c.captcha_sid=t,c.captcha_key=n),c.phash=cur.options.phash,cur.pwchDone=q.passwordDone,cur.pwchFrame=utilsNode.appendChild(Object(a.ce)("iframe",{src:Object(m.getLoginDomain)()+"?"+AjaxConvert.toQueryString(c)}))}else Object(d.notaBene)("settings_confirm_pwd");else Object(d.notaBene)("settings_new_pwd");else Object(d.notaBene)("settings_old_pwd")},mailSubmit:function(e,t){var n;if(t)n="",Object(a.re)(e);else{if(!(n=Object(s.trim)(Object(a.val)("settings_new_mail"))))return void Object(d.notaBene)("settings_new_mail");Object(d.lockButton)(e)}var r={act:"a_bind_mail",email:n,is_new:1,hash:cur.options.mail_hash};return Object(a.ge)("settings_new_mail").blur(),Object(a.hide)("settings_error_mail"),ajax.post("al_settings.php",r,{onDone:function(t,n){if(Object(d.unlockButton)(e),n){var r=Object(a.ge)("chgmail");r.parentNode.replaceChild(Object(a.se)(n),r)}Object(a.ge)("settings_new_mail").value="",showDoneBox(t,{out:4e3,w:400})},onFail:function(t){return Object(d.unlockButton)(e),Object(s.isUndefined)(t)||q.showError(t,"mail"),!0}}),!1},phoneSubmit:function(){showBox("activation.php",{act:"change_phone_box",hash:cur.options.phone_hash})},regionalSubmit:function(e){var t=(Object(a.ge)("timezone")||{}).value,n={act:"a_change_regional",timeoffset:t,hash:cur.options.regional_hash||cur.options.regional_hashes[t]};Object(d.lockButton)(e),ajax.post("al_settings.php",n,{onDone:function(t){Object(d.unlockButton)(e),q.showMsg(t)},onFail:function(t){return Object(d.unlockButton)(e),q.showError(t),!0}})},reset_sessions:!1,resetAllSessions:function(e,t,n,r){if(q.reset_sessions)return!1;q.reset_sessions=!0;var o=bodyNode.appendChild(Object(a.ce)("div",{innerHTML:`<form action="${Object(m.getLoginDomain)()}" method="POST" target="reset_sessions_frame">\n  <input name="_origin" value="${locProtocol+"//"+locHost}" type="hidden" />\n  <input name="role" value="al_frame" type="hidden" />\n  <input name="ip_h" value="${vk.ip_h}" type="hidden" />\n  <input name="reset_hash" value="${cur.options.reset_hash}" type="hidden" />${void 0!==t?t:""}\n</form><iframe class="upload_frame" name="reset_sessions_frame"></iframe>`})),i=o.firstChild,c=Object(a.ce)("img",{src:"/images/upload"+(window.devicePixelRatio>=2?"_2x":"")+".gif"},{width:32});return window.onReLoginDone=function(t,r,i){if(Object(a.re)(o),"object"==typeof r&&(r=i),cur.options.reset_hash=r,e)!0!==e&&c.parentNode.replaceChild(Object(a.ce)("div",{className:"settings_labeled_notice",innerHTML:n||Object(_.getLang)("setting_all_sessions_reset")}),c);else{var u=curBox();u&&(u.hideProgress(),u.setControlsText(Object(_.getLang)("setting_all_sessions_reset")));var l=0;Object(s.each)(Object(a.ge)("activity_history").childNodes,(function(e,t){1===t.nodeType&&(l>0&&!Object(a.hasClass)(t,"settings_old_session")&&(Object(a.addClass)(t,"settings_old_session"),Object(a.re)(Object(a.geByClass1)("settings_cur_session",t))),l++)}))}Object(s.isFunction)(cur.onReLoginDoneCallback)&&cur.onReLoginDoneCallback(),q.reset_sessions=!1},e?!0!==e&&e.parentNode.replaceChild(c,e):curBox().showProgress(),i.submit(),!1},resetSession:function(e,t,n){var r={reset_data:t,hash:n},o=function(t){var n=document.querySelector('.settings_history_row[data-id="'+e+'"]');Object(a.addClass)(n,"settings_old_session"),Object(a.re)(document.querySelector("._settings_reset_session"+e)),showDoneBox(t)},i=Object(_.getLang)("settings_activity_session_reset_box_title"),s=Object(_.getLang)("settings_activity_session_reset_box_text"),c=Object(_.getLang)("settings_activity_session_reset_box_button");Object(v.showFastBox)(i,s,c,(function(){ajax.post("/settings?act=a_reset_session",r,{onDone:o}),curBox().hide()}),Object(_.getLang)("global_cancel"))},ipTTClick:function(e,t){Object(l.cancelEvent)(t);var n=document.createRange();n.selectNodeContents(e);var r=getSelection();r.removeAllRanges(),r.addRange(n),document.execCommand("copy"),r.removeAllRanges()},showUserClientTT:function(e,t){var n="";Object(a.hasClass)(e.parentNode.parentNode,"settings_old_session")&&(n='<div style="font-weight:bold; margin-bottom:5px;">'+Object(_.getLang)("settings_session_terminated")+"</div>"),cur.options.ua_tooltips[t]&&(n+=cur.options.ua_tooltips[t]),n&&Object(b.showTooltip)(e,{text:n,dir:"auto",slide:15,className:"settings_user_client_tt",hasover:1})},disabledPrivacy:function(){var e=Object(a.geByClass1)("settings_privacy_add_replies_view",Object(a.ge)("content"));e&&Object(b.showTooltip)(e,{black:!0,hasover:1,className:"settings_comments_disabled_tt",shift:[0,5],text:Object(_.getLang)("settings_comments_disabled_tt").replace("{link}",'<a href="/settings?f=cposts" onclick="return nav.go(this, event, {nocur: true})">').replace("{/link}","</a>")})},checkAddress:function(e){cur.addrUnchecked=0,clearTimeout(cur.addressCheckTO),cur.lastAddress!=Object(a.val)("settings_addr")&&(cur.addressCheckTO=setTimeout(q.doCheckAddress,e||0))},doCheckAddress:function(){var e=Object(a.ge)("settings_address_submit");cur.lastAddress=Object(a.val)("settings_addr"),ajax.post("al_settings.php",{act:"a_check_address",name:cur.lastAddress},{onDone:function(t){cur.addrChecked=1,Object(d.disableButton)(e,!1),e.innerHTML=t},onFail:function(t){return cur.addrChecked=-1,e.innerHTML=t,Object(d.disableButton)(e,!0),!0},showProgress:function(){Object(d.lockButton)(e),Object(d.disableButton)(e,!1)},hideProgress:function(){Object(d.unlockButton)(e)}})},addressSubmit:function(e){1==cur.addrChecked?(Object(d.lockButton)(e),ajax.post("al_settings.php",{act:"a_change_address",hash:cur.options.address_hash,name:Object(a.val)("settings_addr")},{onDone:function(t){Object(d.unlockButton)(e),q.showMsg(t)},onFail:function(t){return Object(d.unlockButton)(e),t&&q.showError(t,"addr"),!0}})):Object(d.notaBene)("settings_addr")},init:function(){cur.checkboxResultsTOs={},cur.module="settings",cur.options.msg?q.showMsg(cur.options.msg):cur.options.err&&q.showError(cur.options.err),Object(s.each)({settings_status_default:Object(_.getLang)("settings_status_default_about"),settings_no_wall_replies:Object(_.getLang)("settings_no_wall_replies_about"),settings_video_autoplay:Object(_.getLang)("settings_video_autoplay")},(function(e,t){(e=Object(a.domQuery1)('label[for="'+e+'"]'))&&(e.onmouseover=function(){Object(b.showTooltip)(this,{shift:[-20,8,8],dir:"auto",text:t,slide:15,className:"settings_tt",hasover:1})})}));var e=Object(a.ge)("settings_pwd_tt_place");Object(s.each)([Object(a.ge)("settings_new_pwd"),Object(a.ge)("settings_confirm_pwd")],(function(){this&&(this.onfocus=function(){Object(b.showTooltip)(e,{text:Object(_.getLang)("settings_password_about"),dir:"left",slideX:15,className:"settings_pwd_tt",shift:[-12,-15,0],onCreate:function(){Object(l.removeEvent)(e,"mouseout")}})},this.onblur=function(){e.tt&&e.tt.hide&&e.tt.hide()})}));var t=Object(a.ge)("settings_addr");t.onfocus=function(){Object(b.showTooltip)(t,{text:Object(_.getLang)("settings_addr_intro"),dir:"auto",slide:15,className:"settings_toup_tt",shift:[Object(a.getSize)("prefix_input_prefix")[0],10],onCreate:function(){Object(l.removeEvent)(t,"mouseout"),t.onblur=function(){t.tt.hide()}}})},cur.lastAddress=Object(a.val)(t);var n=Object(a.ge)("settings_new_mail");n&&(n.onfocus=function(){Object(b.showTooltip)(n,{text:Object(_.getLang)("settings_email_about"),dir:"auto",slide:15,className:"settings_toup_tt",shift:[0,10],onCreate:function(){Object(l.removeEvent)(n,"mouseout"),n.onblur=function(){n.tt.hide()}}})}),Object(s.extend)(cur,{validationLastCallback:function(e){curBox()&&curBox().hide(),e?q.phoneSubmit():Object(a.elfocus)("settings_new_phone")}}),q.initRepliesOrder(),setTimeout((function(){if(nav.objLoc.f){var e=Object(a.ge)(nav.objLoc.f.split(",")[0]);e&&Object(a.hasClass)(e,"settings_line")&&q.toggleBlock(Object(a.domFC)(e))}}),100),cur.destroy.push((function(){window.onLoginDone=nav.reload}))},emailPosts:function(e,t){ajax.post("al_settings.php",{act:"send_email_post",hash:e},{onDone:function(e,n){Object(a.ge)("settings_email_post_msg").innerHTML=e,Object(a.setStyle)(Object(a.ge)("settings_email_post_msg"),{borderColor:"#D4BC4C",backgroundColor:"#F9F6E7"}),animate(Object(a.ge)("settings_email_post_msg"),{borderColor:"#B9C4DA",backgroundColor:"#FFFFFF"},3e3),t.innerHTML=n},showProgress:function(){Object(d.lockButton)(t)},hideProgress:function(){Object(d.unlockButton)(t)}})},showPaymentsMethods:function(e,t,n,r){var o={act:r?"a_payments_checkout_methods":"a_payments_methods",hash:t};return!r&&n&&(o.money_transfer=1),ajax.post("al_settings.php",o,{onDone:function(t){if(n)return cur.autoacceptCards=t.cards,cur.autoacceptCardSelected=t.cardSeleceted,void q.initAutoAcceptDD(t.cards,t.cardSeleceted);var r=Object(a.ce)("div",{innerHTML:t,className:"unshown"});e.parentNode.replaceChild(r,e),slideDown(r,100)},stat:n?["ui_controls.js","ui_controls.css"]:[]}),!1},initAutoAcceptDD:function(e,t){cur.autoacceptCardDD=new InlineDropdown("settings_p2p_receive_card",{items:e,selected:t,withArrow:!0,onSelect:function(e){if(-1==e)q.bindMoneyTransferCard();else if(e!=cur.autoacceptCardSelected){var t=cur.autoacceptCardDD.getSelected()[2];q.saveMoneyTransferCard(e,t),cur.autoacceptCardSelected=e}}})},saveMoneyTransferCard:function(e,t){ajax.post("al_payments.php",{act:"a_remember_money_transfer_accept_card",card_id:e,hash:t,from:"settings"},{onDone:window.uiPageBlock&&uiPageBlock.showSaved.pbind("settings_p2p_receive_card")})},bindMoneyTransferCard:function(){return showBox("al_payments.php",{act:"card_payment_box",type:"card_bind"},{stat:["ui_controls.js","ui_controls.css"]}),!1},deletePaymentMethod:function(e,t,n,r,o,i){if(r){var a=e.parentNode,s={act:o?"a_del_checkout_method":"a_del_instant_method",type:t,hash:n};return o&&(s.bind_id=i),ajax.post("al_payments.php",s,{onDone:function(e){a.innerHTML=e},onFail:function(e){return a.innerHTML=e,!0},showProgress:function(){cur.confirmBox.showProgress()},hideProgress:function(){cur.confirmBox.hide()}}),!1}cur.confirmBox=Object(v.showFastBox)({title:cur.lang.global_action_confirmation,dark:1,forceNoBtn:1,bodyStyle:"padding: 20px; line-height: 160%;"},cur.lang.settings_delete_payment_method_confirm,Object(_.getLang)("global_delete"),(function(){q.deletePaymentMethod(e,t,n,!0,o,i)}),Object(_.getLang)("global_cancel"))},showNextPaymentsHistory:function(e,t){var n,r;if(!Object(d.isButtonLocked)(e))return Object(d.lockButton)(e),t||(t="votes"),void 0===cur.historyOffset[t]&&(cur.historyOffset[t]=5),"transfer"===t?(n={act:"a_transfer_history"},r=Object(a.ge)("settings_transfer_history")):"subscriptions"===t?(n={act:"a_payments_subsciptions"},r=Object(a.ge)("settings_payments_subscriptions")):"games"===t?(n={act:"a_payments_games"},r=Object(a.ge)("settings_payments_games")):(n={act:"a_votes_history"},r=Object(a.ge)("settings_votes_history")),n.offset=r.rows.length,"subscriptions"===t&&(n.extra_items_count=cur.historyExtraItemsSubscriptions),ajax.post("al_settings.php",n,{onDone:function(n,o,i){var s=r.tBodies[0];if(n){if(Object(d.unlockButton)(e),browser.msie){var c=Object(a.se)("<table>"+n+"</table>");Array.from(Object(a.geByTag)("tr",c)).forEach(e=>{1===e.nodeType&&s.appendChild(e)})}else s.insertAdjacentHTML("beforeEnd",n);"subscriptions"===t&&i&&(cur.historyExtraItemsSubscriptions=i)}n&&!o||(Object(a.addClass)(s.lastChild,"settings_votes_history_last"),Object(a.hide)(e))}}),!1},switchPaymentsHistoryTab:function(e,t,n){if(Object(l.checkEvent)(n))return!0;var r=Object(s.clone)(nav.objLoc);return uiTabs.switchTab(e),q.hideMoneyLinksTooltip(),Object(a.hide)("settings_votes_history_wrap","settings_payments_subscriptions_wrap","settings_transfer_history_wrap","settings_payments_transfer_msg","settings_payments_games_wrap"),"transfer"===t?(Object(a.show)("settings_transfer_history_wrap","settings_payments_transfer_msg"),r.section=t,q.showMoneyLinksTooltip()):"subscriptions"===t?(Object(a.show)("settings_payments_subscriptions_wrap"),r.section=t):"games"===t?(Object(a.show)("settings_payments_games_wrap"),r.section=t):(Object(a.show)("settings_votes_history_wrap"),delete r.section),nav.setLoc(r),!1},moneyTransferCancel:function(e,t,n,r,o){var i,s,c=Object(a.domClosest)("_row",e),u=Object(a.geByClass1)("_status",c);if(!o)return r?(i=Object(_.getLang)("settings_transfer_decline_confirm"),s=Object(_.getLang)("settings_transfer_decline_btn")):(i=Object(_.getLang)("settings_transfer_cancel_confirm"),s=Object(_.getLang)("settings_transfer_cancel_btn")),void(cur.confirmBox=Object(v.showFastBox)(Object(_.getLang)("global_action_confirmation"),i,s,q.moneyTransferCancel.pbind(e,t,n,r,1),Object(_.getLang)("global_cancel")));2!==o&&(Object(a.addClass)(c,"settings_history_row_progress"),cur.confirmBox&&cur.confirmBox.hide()),ajax.post("al_payments.php?act=a_cancel_money_transfer",{tx_id:t,hash:n},{onDone:function(e,i){if(0===e)return 2!==o&&(Object(a.val)(u,Object(_.getLang)("settings_transfer_status_cancelling")),Object(a.removeClass)(u,"settings_transfer_receive")),void setTimeout(q.moneyTransferCancel.pbind(c,t,n,r,2),2e3);Object(a.removeClass)(c,"settings_history_row_progress"),Object(a.val)(u,Object(_.getLang)("settings_transfer_status_cancelled")),Object(a.removeClass)(u,"settings_transfer_receive"),Object(a.addClass)(u,"settings_transfer_status_cancelled"),TopNotifier.invalidate()},onFail:function(e){return Object(a.removeClass)(c,"settings_history_row_progress"),setTimeout(Object(v.showFastBox)(Object(_.getLang)("global_error"),e).hide,2e3),!0}})},moneyTransferRepeat:function(e,t){return L.MoneyTransfer.showMoneyTransferBox({repeat_id:e,hash:t}),!1},paymentsSubscriptionBox:function(e,t,n,r){if(r){var o=Object(a.domClosest)("_row",r);cur.onSubscriptionDone=function(e){var t=Object(a.geByClass1)("settings_history_amount",o);Object(a.val)(t,e.status),Object(a.removeClass)(t,"settings_history_btn"),Object(a.val)(Object(a.geByClass1)("settings_history_actions",o),e.actions)}}showBox("al_apps.php?act=show_subscription_box",{aid:e,item:t,action:"create",hash:n},{onFail:function(e){return setTimeout(Object(v.showFastBox)(Object(_.getLang)("global_error"),e).hide,2e3),!0}})},paymentsSubscriptionCancel:function(e,t,n,r,o){var i=Object(a.domClosest)("_row",e);o?(Object(a.addClass)(i,"settings_history_row_progress"),cur.confirmBox&&cur.confirmBox.hide(),ajax.post("al_apps.php?act=a_cancel_subscription",{aid:t,subscription_id:n,hash:r,from:"settings"},{onDone:function(e,t){Object(a.removeClass)(i,"settings_history_row_progress"),e?(Object(a.val)(Object(a.geByClass1)("settings_history_amount",i),e),Object(a.val)(Object(a.geByClass1)("settings_history_actions",i),t)):Object(a.addClass)(i,"settings_history_row_deleted")},onFail:function(e){return Object(a.removeClass)(i,"settings_history_row_progress"),setTimeout(Object(v.showFastBox)(Object(_.getLang)("global_error"),e).hide,2e3),!0}})):cur.confirmBox=Object(v.showFastBox)(Object(_.getLang)("global_action_confirmation"),Object(_.getLang)("settings_subscription_cancel_confirm"),Object(_.getLang)("settings_subscription_cancel_btn"),q.paymentsSubscriptionCancel.pbind(e,t,n,r,1),Object(_.getLang)("global_cancel"))},paymentsSubscriptionReactivate:function(e,t,n,r){var o=Object(a.domClosest)("_row",e);cur.onSubscriptionDone=function(e){Object(a.val)(Object(a.geByClass1)("settings_history_amount",o),e.status),Object(a.val)(Object(a.geByClass1)("settings_history_actions",o),e.actions)},showBox("al_apps.php?act=show_subscription_box",{aid:t,subscription_id:n,action:"resume",hash:r},{onFail:function(e){return setTimeout(Object(v.showFastBox)(Object(_.getLang)("global_error"),e).hide,2e3),!0}})},initAppOrdersDD:function(e,t,n){cur.appOrdersDD=new InlineDropdown("settings_app_orders",{items:e,selected:t,onShow:function(){if(cur.appOrdersDD){Object(b.showTooltip)(cur.appOrdersDD._els.popupHeader,{text:Object(_.getLang)("settings_payments_app_orders_tt"),width:250,slideX:-15,className:"pedit_tt",nohide:!0,asrtl:!0,shift:[263,-15,-15],dir:"left"})}},onHide:function(){cur.appOrdersDD&&cur.appOrdersDD._els.popupHeader.tt&&cur.appOrdersDD._els.popupHeader.tt.destroy()},onSelect:function(e){q.toggleAppOrders(e&&"0"!==e,n)}})},toggleAppOrders:function(e,t){ajax.post("al_payments.php?act=a_toggle_app_orders",{autoconfirm:e,hash:t},{onDone:window.uiPageBlock&&uiPageBlock.showSaved.pbind("settings_app_orders")})},initApps:function(e,t){Object(s.extend)(cur,{aSearch:Object(a.ge)("s_search"),lShowMoreButton:Object(a.ge)("ui_apps_load_more"),lContent:Object(a.ge)("settings_apps_list"),aEmptyCont:Object(a.ge)("settings_apps_empty"),aSummaryCounter:Object(a.geByClass1)("page_block_header_count","wide_column"),onSilentLoad:{},apps:{},deletedApps:{},appTpl:t||function(){return""}}),Object(s.extend)(cur,e),cur.defaultCount=cur.shownApps,cur.appTpl=t||function(){return""},q.scrollNode=browser.msie6?pageNode:window,Object(l.addEvent)(q.scrollNode,"scroll",q.scrollCheckApps.bind(this)),setTimeout((function(){cur.destroy.push((function(){Object(l.removeEvent)(q.scrollNode,"scroll",q.scrollCheckApps.bind(q))}))}),0),cur.silent=!0,ajax.post("/al_settings.php",{act:"load_apps_silent"},{cache:1,local:1,onDone:function(e){var t=e;try{e=JSON.parse(e)}catch(e){Object(f.logEvalError)(e,t)}if(!e)return cur.silent=!1;void 0===cur.searchOffset&&(cur.searchOffset=0),cur.curList="all",cur.appsList=e[cur.curList]?e:{all:[]},cur.appsCount=cur.appsList.all.length,this.indexApp((function(){cur.silent=!1,"object"==typeof cur.onSilentLoad&&Object.values(cur.onSilentLoad).forEach(e=>{Object(s.isFunction)(e)&&e()})}))}.bind(this)})},isDelayedOnSilentLoad:function e(t,n){if(cur.silent)return e.count=e.count||0,e.count++,cur.onSilentLoad[t||"key_"+e.count]=n,!0},indexApp:function(e){cur.appsIndex=new vkIndexer(cur.appsList.all,(function(e){try{return cur.apps[parseInt(e[0])]=e,e[3]}catch(e){return""}}),e)},scrollCheckApps:function(){this.isDelayedOnSilentLoad("scrollCheck",this.scrollCheckApps.bind(this))||!browser.mobile&&!cur.isAppsLoading&&!cur.disableAutoMore&&Object(a.isVisible)(cur.lShowMoreButton)&&(window.innerHeight||document.documentElement.clientHeight||bodyNode.clientHeight)+Object(u.scrollGetY)()+400>=cur.lShowMoreButton.offsetTop&&this.showAppsRows()},showAppsRows:function(){if(!this.isDelayedOnSilentLoad("showAppsRows",this.showAppsRows.bind(this))&&cur.defaultCount&&cur.shownApps<cur.appsCount){var e=Object(s.clean)(cur.searchStr),t="",n=cur.appsList[cur.curList]||[],r=n.length;if((n=this.filterApps(n.slice(cur.shownApps)).slice(0,cur.defaultCount)).length&&cur.appTpl){var o=[];Object(s.each)(n,(function(e,t){t=Object(s.clone)(t),cur.selection&&(t[3]=t[3].replace(cur.selection.re,cur.selection.val)),o.push(cur.appTpl(t,e==n.length-1,!1))})),t=o.join("")}if(cur.shownApps)t&&cur.lContent.appendChild(Object(a.cf)(t));else if(t)cur.lContent.innerHTML=t,cur.aSummaryCounter&&(cur.aSummaryCounter.innerHTML=Object(_.langNumeric)(r,"%s",!0)),Object(a.show)("settings_apps_noempty"),Object(a.hide)(cur.aEmptyCont);else{var i=Object(_.getLang)("settings_apps_not_found_by_query").split("{query}").join("<b>"+e.replace(/([<>&#]*)/g,"")+"</b>");cur.aEmptyCont.innerHTML=i,cur.aSummaryCounter&&(cur.aSummaryCounter.innerHTML=""),Object(a.show)(cur.aEmptyCont),Object(a.hide)("settings_apps_noempty")}cur.shownApps+=cur.defaultCount,cur.shownApps>=cur.appsCount?Object(a.hide)(cur.lShowMoreButton):(Object(a.show)(cur.lShowMoreButton),this.scrollCheckApps()),cur.aSearch&&uiSearch.hideProgress(cur.aSearch)}},filterApps:function(e){for(var t=e.length,n=[],r=0;r<t;r++){var o=e[r];cur.apps&&cur.apps[o[0]]&&!cur.apps[o[0]].deleted&&n.push(o)}return n},searchApps:function(e){if(!this.isDelayedOnSilentLoad("searchApps",this.searchApps.bind(this,e))){if(e&&" "==e[e.length-1]&&(e[e.length-1]="_"),e.length<2&&(e=""),cur.ignoreEqual||cur.searchStr!==e){if(cur.searchStr=e||"",e){var t=cur.appsIndex.search(Object(s.clean)(e));cur.curList="all_search_"+e,cur.appsList[cur.curList]=t,e+=" "+(Object(_.parseLatin)(e)||""),e=Object(s.trim)(Object(s.escapeRE)(e).split("&").join("&amp;")),cur.selection={re:new RegExp("("+e.replace(cur.appsIndex.delimiter,"|")+")","gi"),val:'<em class="highlight">$1</em>'}}else cur.curList="all",cur.selection=!1;window.tooltips&&tooltips.hideAll(),cur.aSearch&&uiSearch.showProgress(cur.aSearch),this.scrollToSearch(),Object(a.hide)(cur.lShowMoreButton),cur.loadMore=1,cur.shownApps=cur.searchOffset=0,this.showAppsRows()}delete cur.ignoreEqual}},showAppSettings:function(e){window.tooltips&&tooltips.hideAll(),showBox("/al_apps.php",{act:"settings_box_info",aid:e,from:"profile_settings"},{stat:["apps.css"],dark:1})},removeApp:function(e,t,n,r){if(r&&Object(l.cancelEvent)(r),this.removingApp)return!1;if(this.isDelayedOnSilentLoad("removeApp"+e,this.removeApp.bind(this,e,t,n)))return!1;window.tooltips&&tooltips.hideAll();var o=Object(a.ge)("app"+e),i="profile_settings";(function(){ajax.post("/al_apps.php",{act:"quit",id:e,hash:t,from:i},{onDone:function(t){window.appsListChanged=!0,cur.apps[e]&&(cur.appsIndex.remove(cur.apps[e]),cur.apps[e].deleted=!0),cur.deletedApps[e]={from:i,html:o.innerHTML},o&&o.appendChild(Object(a.cf)(t.html)),Object(a.addClass)(o,"deleted")},showProgress:function(){Object(a.addClass)(o,"loading"),this.removingApp=!0}.bind(this),hideProgress:function(){Object(a.removeClass)(o,"loading"),this.removingApp=!1}.bind(this)})}).bind(this)()},restoreApp:function(e,t){if(this.restoringApp)return!1;var n=Object(a.ge)("app"+e);return ajax.post("/al_apps.php",{act:"join",id:e,hash:t,restore:1,from:"al_apps",section:"settings"},{onDone:function(t){cur.deletedApps[e]&&(n.innerHTML=cur.deletedApps[e].html,delete cur.deletedApps[e]),cur.apps[e]&&(delete cur.apps[e].deleted,cur.appsIndex.add(cur.apps[e])),Object(a.removeClass)(n,"deleted")},showProgress:function(){this.restoringApp=!0,Object(a.addClass)(n,"loading")}.bind(this),hideProgress:function(){this.restoringApp=!1,Object(a.removeClass)(n,"loading")}.bind(this)}),!1},ttCommon:function(e,t,n,r,o){return r&&Object(l.cancelEvent)(r),n?Object(b.showTooltip)(e,{center:n,shift:o||[0,8,8],black:1,text:t}):showTitle(e,t,o)},scrollToSearch:function(){var e=Object(a.ge)("page_header_cont"),t=Object(a.ge)("settings_search_wrap");if(t&&e){var n=Object(a.getXY)(Object(a.domPN)(t))[1]-Object(a.getSize)(e)[1];scrollNode.scrollTop>n&&Object(u.scrollToY)(n,200)}},deactivateBox:function(){return showBox("al_settings.php",{act:"deactivate_box"},{params:{dark:!0}}),!1},showValidateDevices:function(e,t){return ajax.post("al_settings.php",{act:"a_validate_devices",hash:t},{onDone:function(t){tooltips.hideAll();var n=Object(a.ce)("div",{innerHTML:t,className:"unshown"});e.parentNode.replaceChild(n,e),slideDown(n,100)}}),!1},deleteValidateDevice:function(e,t,n,r){if(r){var o=e.parentNode;return ajax.post("al_settings.php",{act:"a_del_validate_device",dhash:t,hash:n},{onDone:function(e){o.innerHTML=e},showProgress:function(){cur.confirmBox.showProgress()},hideProgress:function(){cur.confirmBox.hide()}}),!1}cur.confirmBox=Object(v.showFastBox)({title:cur.lang.global_action_confirmation,dark:1,forceNoBtn:1,bodyStyle:"padding: 20px; line-height: 160%;"},cur.lang.settings_delete_validate_device_confirm,Object(_.getLang)("global_delete"),(function(){q.deleteValidateDevice(e,t,n,!0)}),Object(_.getLang)("global_cancel"))},showNotifySubscriptions:function(e){return Object(a.hasClass)(e,"settings_no_subscriptions")||showBox("al_settings.php",{act:"notify_subscriptions_box"},{stat:[jsc("web/indexer.js")]}),!1},notifySubscriptionsInit:function(e,t,n){n.onListClick=q.notifySubscriptionToggle,cur.subsOList=new OList(e,t,{},n),e.removeButtons().addButton(Object(_.getLang)("global_close"),(function(){e.hide(200)}),"yes")},notifySubscriptionToggle:function(e,t){var n=Object(a.geByClass1)("_subscriptions_count"),r=e.id.match(/-?\d+/)[0],o=!1,i=0;Object(s.each)(cur.subsOList.owners,(function(e,t){cur.subsOList.selected[t[0]]||i++,!1===o&&this[0]==r&&(o=this[4])})),n&&(Object(a.toggleClass)(n,"settings_no_subscriptions",!i),Object(a.val)(n,i?Object(_.getLang)("settings_notify_subscriptions_count",i):Object(_.getLang)("settings_notify_no_subscriptions"))),ajax.post("/al_wall.php",{act:"a_toggle_posts_subscription",subscribe:t?1:0,oid:r,hash:o},{showProgress:a.addClass.pbind(e,"olist_item_loading"),hideProgress:a.removeClass.pbind(e,"olist_item_loading")})},showGroupNotifySources:function(e,t){return Object(l.cancelEvent)(e),showBox("al_settings.php",{act:"group_notify_sources_box",source:t},{params:{dark:1,width:450,bodyStyle:"padding: 0",containerClass:"group_notify_sources_box flist_list_radio"}}),!1},initShowGroupNotifySourcesBox:function(e,t){var n=window.cur||{};Object(s.extend)(n,t),e.removeButtons(),e.addButton(t.okBtnText,this.groupNotifyPopupSubmit.bind(this)),Object(s.extend)(n,{popupSubmitBtnEl:curBox().btns.ok[0],popupSelectedGroup:0,popupGroupsWrapperEl:Object(a.geByClass1)("_add_community_app_groups"),popupContentEl:Object(a.geByClass1)("_add_community_app_content")}),Object(d.disableButton)(n.popupSubmitBtnEl,!0),n.popupGroupsEls=Object(a.geByClass)("flist_item",n.popupGroupsWrapperEl,"div"),1===n.popupGroupsEls.length&&this.groupNotifyPopup(n.popupGroupsEls[0]),Object(s.each)(n.popupGroupsEls,function(e,t){Object(l.addEvent)(t,"click",this.groupNotifyPopup.bind(this,t))}.bind(this))},groupNotifyPopup:function(e){var t=Object(s.intval)(e.getAttribute("data-id"));cur.popupSelectedGroup=t,Object(s.each)(cur.popupGroupsEls,(function(t,n){(n===e?a.addClass:a.removeClass)(n.parentNode,"flist_item_checked")})),Object(d.disableButton)(cur.popupSubmitBtnEl,0===cur.popupSelectedGroup)},groupNotifyPopupSubmit:function(){var e=cur.popupSelectedGroup;Object(a.isVisible)(cur.popupSubmitBtnEl)&&!Object(d.isButtonLocked)(cur.popupSubmitBtnEl)&&0!==e&&TopNotifier.addNewSource(e,cur.popup_hash,2)},delGroupNotifySource:function(e,t,n,r){Object(l.cancelEvent)(e);var o=Object(v.showFastBox)(Object(_.getLang)("settings_group_notify_disable_title"),Object(_.getLang)("settings_group_notify_disable_text"),Object(_.getLang)("settings_group_notify_disable_yes"),(function(){o.hide(),ajax.post("al_settings.php",{act:"a_group_notify_del_source",gid:t,hash:n},{onDone:function(e){t==r?(TopNotifier&&TopNotifier.changeSource("",null,null),nav.go("/settings?act=notify")):nav.reload()},showProgress:d.lockButton.pbind(cur.popupSubmitBtnEl),hideProgress:d.unlockButton.pbind(cur.popupSubmitBtnEl)})}),Object(_.getLang)("global_cancel"))},addSourcePopup:function(e){Object(a.hide)(Object(a.geByClass1)("notify_sources")),TopNotifier&&TopNotifier.hide(),this.showGroupNotifySources(e,"popup")},groupNotify_disabledSetting:function(e){showTitle(e,Object(_.getLang)("settings_group_notify_disable_tooltip"),null,{shift:[-17,14],className:"settings_group_notifications_disable_tooltip",needLeft:1})},initRepliesOrder:function(){var e=Object(a.ge)("settings_replies_order");e&&cur.options.replies_order_items&&(cur.repliesReorderDD=new InlineDropdown(e,{items:cur.options.replies_order_items,selected:cur.options.replies_order_cur||cur.options.replies_order_items[0][0],onSelect:function(e){ajax.post("al_settings.php",{act:"change_replies_order",order:e,hash:cur.options.replies_order_hash},{onDone:function(){window.uiPageBlock&&window.uiPageBlock.showSaved("settings_replies_order")}})}}),cur.options.order_settings_feature_tooltip&&setTimeout((function(){cur.options&&cur.options.order_settings_feature_tooltip_hash&&q.showOrderSettingsTooltip(cur.options.order_settings_feature_tooltip_hash)}),800))},showOrderSettingsTooltip:function(e){var t=Object(a.ge)("settings_replies_order");t&&(cur.orderSettingsFeatureTT=new ElementTooltip(t,{content:'<div class="feature_tooltip__close" onclick="cur.orderSettingsFeatureTT.hide();"></div>'+Object(_.getLang)("wall_order_settings_feature_text"),forceSide:"top",cls:"feature_intro_tt feature_info_tooltip order_settings_feature_tooltip",autoShow:!1,noHideOnClick:!0,noAutoHideOnWindowClick:!0,appendToParent:!0,offset:[0,-4],onHide:function(){ajax.post("al_index.php",{act:"hide_feature_tt",hash:e,type:"order_settings_web"}),cur.orderSettingsFeatureTT.destroy(),delete cur.orderSettingsFeatureTT}}),cur.orderSettingsFeatureTT.show())},showMoneyLinksTooltip:function(){var e=Object(a.geByClass1)("_money_request_btn","wide_column");cur.moneylinks_feature_tooltip&&e&&setTimeout((function(){cur.moneyLinksTooltip=new ElementTooltip(e,{content:'<div class="feature_tooltip__close" onclick="cur.moneyLinksTooltip.hide();"></div>'+Object(_.getLang)("settings_payments_moneylinks_feature_text"),cls:"feature_intro_tt feature_info_tooltip moneylinks_feature_tooltip",forceSide:"top",width:270,autoShow:!1,noHideOnClick:!0,noAutoHideOnWindowClick:!0,appendToParent:!0,offset:[0,-4],onHide:function(){ajax.post("al_index.php",{act:"hide_feature_tt",hash:cur.moneylinks_feature_tooltip_hash,type:"moneylinks"}),q.hideMoneyLinksTooltip()}}),cur.moneyLinksTooltip.show(),cur.destroy.push(q.hideMoneyLinksTooltip)}),1e3)},hideMoneyLinksTooltip:function(){cur.moneyLinksTooltip&&(cur.moneyLinksTooltip.destroy(),delete cur.moneyLinksTooltip)},cancelDonutSubscription:(e,t,n)=>{Object(B.cancelDonutSubscription)(t,n,{onApplyDone:()=>{window.nav.reload({noback:!0})}}),e&&Object(l.cancelEvent)(e)},showGroupMessagesNotifyBox:function(e,t){return Object(l.cancelEvent)(e),showBox("al_settings.php",{act:"group_notify_messages_box",source:t},{params:{dark:1,width:560,bodyStyle:"padding: 0",containerClass:"group_notify_messages_box"}}),!1},initShowGroupMessagesNotifyBox:function(e,t){var n=this,r=window.cur||{};Object(s.extend)(r,t),e.removeButtons(),e.addButton(t.okBtnText,this.submitSettingsGroupMessagesNotifyPopup.bind(this)),e.addButton(t.cancelBtnText,e.hide,"no"),Object(s.extend)(r,{popupGroupRowsWrapperToggler:Object(a.geByClass1)("settings_group_rows_wrapper_toggler"),popupGroupRowsWrapper:Object(a.geByClass1)("settings_group_rows_wrapper"),popupSubmitBtnEl:curBox().btns.ok[0]}),this.toggleSettingsGroupMessagesNotifyRows(!0),r.popupGroupsEls=Object(a.geByClass)("flist_item",r.popupGroupRowsWrapper,"div"),Object(s.each)(r.popupGroupsEls,(function(e,t){Object(l.addEvent)(t,"click",n.changeSettingsGroupMessagesNotifyRowState.bind(n,t))}))},toggleSettingsGroupMessagesNotifyRows:function(e){e||Object(a.toggleClass)(cur.popupGroupRowsWrapperToggler,"on");var t=Object(a.hasClass)(cur.popupGroupRowsWrapperToggler,"on");Object(a.toggleClass)(cur.popupGroupRowsWrapper,"hidden",!t)},changeSettingsGroupMessagesNotifyRowState:function(e){Object(a.toggleClass)(e,"flist_item_checked")},saveGroupMessagesNotifySettings:function(e){var t={is_enabled:e.is_enabled?1:0,groups_map:JSON.stringify(e.groups_map),promo_group_id:cur.gid,hash:cur.popup_hash};clearTimeout(cur.instantNotifyTO),clearTimeout(cur.instantNotifySaveTO),cur.instantNotifyTO=setTimeout(ajax.post.pbind("/settings?act=a_group_messages_notify_save",t,{onDone:e=>{curBox().hide(),cur.instantNotifySaveTO=setTimeout(window.uiPageBlock&&uiPageBlock.showSaved.pbind("settings_notify_group_messages_link"),1e3);var t=Object(a.geByClass1)("settings_separated_row_hint","settings_group_messages_row");t&&(t.innerHTML=e.hint);var n=Object(a.geByClass1)("group-messages-notify-block");n&&e.hide_promo&&slideUp(n,200,a.re.pbind(n))},showProgress:d.lockButton.pbind(cur.popupSubmitBtnEl),hideProgress:d.unlockButton.pbind(cur.popupSubmitBtnEl)}),500),TopNotifier&&TopNotifier.invalidate()},submitSettingsGroupMessagesNotifyPopup:function(){var e={is_enabled:null,groups_map:{}};Object(a.isVisible)(cur.popupSubmitBtnEl)&&!Object(d.isButtonLocked)(cur.popupSubmitBtnEl)&&(e.is_enabled=Object(a.hasClass)(cur.popupGroupRowsWrapperToggler,"on"),Object(s.each)(cur.popupGroupsEls,(function(t,n){e.groups_map[n.getAttribute("data-id")]=Object(a.hasClass)(n,"flist_item_checked")?"1":"0"})),this.saveGroupMessagesNotifySettings(e))},refreshPaymentHistory:function(){var e=document.getElementById("settings_payments_history_panel");if(e){var t={act:"payments_history"};if(nav){var n=nav.fromStr(nav.strLoc).section;n&&(t.section=n)}ajax.post("al_settings.php",t,{onDone:function(t){t&&(e.innerHTML=t)}})}},showPhotoRecognitionBoxSettings(){ajax.post("al_settings.php",{act:"get_recognition_box_data"},{loader:!0,onDone:e=>{var t=Object(y.showComponentInBox)(o.createElement(I,{data:e,onClose:n,onSave:function(){showDoneBox(Object(_.getLang)("photo_recognition_settings_saved")),n()}}),{width:450,onDestroy:e=>{Object(y.destroyComponentInBox)(e)}});function n(){t&&t.hide()}},onFail:e=>(Object(v.showFastBox)(Object(_.getLang)("global_error"),e||Object(_.getLang)("global_unknown_error")),Object(x.logError)(new Error("get RecognitionBoxSettings error"+(e?": "+e:""))),!0)})},resetSoftBounceDisclaimer(){ajax.post("al_settings.php",{act:"a_reset_email_softbounce"},{loader:!0,onDone:()=>{Object(a.ge)("email_soft_bouncing").remove()},onFail:e=>{Object(v.showFastBox)(Object(_.getLang)("global_error"),e||Object(_.getLang)("global_unknown_error")),Object(x.logError)(new Error("post resetSoftBounceDisclaimer error"+(e?": "+e:"")))}})}}},"3Lyj":function(e,t,n){var r=n("KroJ");e.exports=function(e,t,n){for(var o in t)r(e,o,t[o],n);return e}},"3blr":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return i}));n("rGqo"),n("a1Th"),n("Btvt");var r=n("q1tI"),o=(n("17x9"),n("xt6h"));class i extends r.Component{constructor(e){super(e),this.id=Math.round(1e6*Math.random()).toString(16),this.setSpinnerParams(e)}UNSAFE_componentWillReceiveProps(e){this.setSpinnerParams(e)}setSpinnerParams(e){this.offset=Math.round(Math.PI*e.size),this.c=.5*e.size,this.animation=function(e,t){if(!e||!t)return"";var n=Object.keys(t).map(e=>e+" {"+Object.keys(t[e]).map(n=>n+":"+t[e][n]).join(";")+"}").join("");return`@-webkit-keyframes ${e} {${n}} @keyframes ${e} {${n}}`}("dash"+this.id,{"0%":{"stroke-dashoffset":this.offset},"50%":{"stroke-dashoffset":Math.round(.25*this.offset),transform:"rotate(135deg)"},"100%":{"stroke-dashoffset":this.offset,transform:"rotate(360deg)"}})}render(){var e=this.props,t=e.style,n=e.color,i=e.size,a=e.duration,s=e.strokeWidth,c=e.className,u=this.id,l=this.offset,d=this.animation,_=Object(o.classNames)("Spinner",c);return r.createElement("div",{className:_,style:t},r.createElement("svg",{className:"Spinner__svg",width:i,height:i,viewBox:`0 0 ${i} ${i}`,xmlns:"http://www.w3.org/2000/svg"},r.createElement("g",{style:{width:i,height:i,transformOrigin:.5*i+"px "+.5*i+"px"}},r.createElement("style",{dangerouslySetInnerHTML:{__html:d}}),r.createElement("circle",{className:"Spinner__path",fill:"none",stroke:n,strokeDasharray:l,strokeDashoffset:l,strokeWidth:s,style:{animationName:"dash"+u,animationTimingFunction:"ease-in-out",animationDuration:a+"s",animationIterationCount:"infinite"},cx:.5*i,cy:.5*i,r:.5*i-.5*s}))))}}i.defaultProps={color:"#5181b8",size:19,strokeWidth:2,duration:1.4,className:""}},"3oLO":function(e,t,n){"use strict";n.r(t),n.d(t,"ajax",(function(){return P}));n("91GP"),n("KKXr"),n("pIFo");var r,o,i,a,s,c=n("cGUQ"),u=n("jE6c"),l=n("W9Tc"),d=n("t7n3"),_=n("zxIV"),p=n("ryw6"),h=n("2QOe"),f=n("CeZd"),m=n("Syzc"),g=n("+MXk"),v=n("MZmb"),b=n("HLtZ"),y=n("4+be"),E=n("aALx"),w=n("svpG");function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}class C{static post(e,t,n){C._protoAdapter=new v.AjaxProtoJson,e&&"/"!==e.substr(0,1)&&"http"!==e.substr(0,4)&&(e="/"+e);var r=O({},n||{},{_captcha:!1,_box:!1,no_ads_params:!1}),o=O({},t,{al:r.frame?-1:1}),i=Object(d.vkNow)(),a=vk.spentLastSendTS?Math.round((i-vk.spentLastSendTS)/1e3):0;if(vk.sampleUser>=0&&window.cur&&cur.module&&a>=1&&(window.curNotifier&&curNotifier.idle_manager&&!curNotifier.idle_manager.is_idle&&(o._smt=cur.module+":"+a),vk.spentLastSendTS=i),r.progress&&(r.showProgress||(r.showProgress=function(){var e=Object(_.ge)(r.progress);Object(_.hasClass)(e,"pr")&&Object(_.setStyle)(e,"opacity",1),Object(_.show)(e)}),r.hideProgress||(r.hideProgress=function(){var e=Object(_.ge)(r.progress);Object(_.hasClass)(e,"pr")&&Object(_.setStyle)(e,"opacity",0),Object(_.hide)(e)})),r.loader){var s=Object(_.isVisible)(window.boxLayerWrap);r.showProgress=function(){boxRefreshCoords(window.boxLoader),Object(_.show)(window.boxLoader),s||Object(_.show)(window.boxLayerWrap)},r.hideProgress=function(){Object(_.hide)(window.boxLoader),s||Object(_.hide)(window.boxLayerWrap)}}return new C(e,o,r)._post()}constructor(e,t,n){this._url=e,this._options=O({},n),this._query=t,this._additionalStaticLoader=null,this._cacheClient=null,n.local&&(this.onDone=Object(d.vkLocal)(this.onDone),this.onFail=Object(d.vkLocal)(this.onFail),this.processResponse=Object(d.vkLocal)(this.processResponse)),this._options.cache&&(this._cacheClient=f.AjaxCacheClient.getInstance(this._url,this._query)),this.onDone=this.onDone.bind(this),this.onFail=this.onFail.bind(this),this.processResponse=this.processResponse.bind(this)}_post(){if(!this._query.captcha_sid&&this._options.showProgress&&this._options.showProgress(),window.__adsGetAjaxParams&&!this._options.no_ads_params&&(this._query=O({},this._query,{},window.__adsGetAjaxParams(this._query,this._options))),this._options.stat&&(this._additionalStaticLoader=null,stManager.add(this._options.stat,()=>{this._additionalStaticLoader&&this._additionalStaticLoader(),this._options.stat=!1})),!this._cacheClient||this._cacheClient.getFromCache(this.processResponse,this._options.onDone,{cacheLevel:this._options.cache,forceGlobalCache:this._options.forceGlobalCache,onAnswerProcessed:this._options.hideProgress})){this._options.resend=(e,t)=>new C(this._url,e,t)._post(),window.debuglogSent?(this._reqid=window.debuglogSent(this._url+(this._query?": "+Object(c.toQueryString)(this._query,this._options.noSort).replace(/&/g,"&amp;"):"")),this._options.frame&&(window._lfrid=this._reqid)):this._reqid=0;var e={};return this._options.timeout&&(e.timeout=this._options.timeout),this._options.frame?h.FrameTransport.request(this._url,this._query,this.onDone,this._options):Object(m.plainpost)(this._url,this._query,this.onDone,this.onFail,!1,e,this._options,!1,Object(l.partConfigEnabled)("extended_ajax_logging")?e=>console.log("+ XHR Transport: "+e):null)}}processResponse(e,t){if(this._options.cache&&this._cacheClient&&this._cacheClient.processExistingCache(e,t),this._options.stat)return this._options.stat=!1,void(this._additionalStaticLoader=this.processResponse.pbind(e,t));this._options.cache&&!this._options.forceGlobalCache&&!e&&this._cacheClient&&this._cacheClient.cacheResponse(t),this._options.hideProgress&&this._options.hideProgress(),2!==e&&(this._options._captcha&&(this._options._suggest&&Object(_.cleanElems)(this._options._suggest),this._options._captcha=D(this._options._captcha),this._options._suggest=this._options._captcha),this._options._box=D(this._options._box)),function(e){switch(e){case 1:return g.emailNotConfirmed;case 2:return g.showCaptcha;case 3:return g.authFailed;case 4:return g.makeRedirect;case 5:return g.reload;case 6:return g.mobileActivationRequired;case 7:return g.showMessage;case 8:return g.showError;case 9:return g.votesPayment;case 10:return g.zeroZone;case 11:case 12:return Object(g.mobileValidationRequired)(e);case 13:return g.evalCode;case 14:return g.otpBox;case 15:return g.passwordValidationRequired;default:return Object(g.defaultHandler)(e)}}(e)(this._options,t,this._query,this._url),window.LazyLoad&&window.LazyLoad.scanDelayed()}onFail(e,t){this._options.hideProgress&&this._options.hideProgress(),this._options._suggest&&Object(_.cleanElems)(this._options._suggest);var n=t instanceof XMLHttpRequest?t.status:t;if(this._options._box=D(this._options._captcha,this._options._box),this._options._captcha=this._options._box,this._options._suggest=this._options._captcha,"string"==typeof e&&-1!==e.indexOf("The page is temporarily unavailable")&&__dev&&Object(d.inArray)(vk.id,[100]))this._post();else if(!this._options.onFail||!0!==this._options.onFail(e)){var r=(JSON.stringify(e)||"No error details").substr(0,300),o=this._query.act,i=this._query&&Object(c.toQueryString)(this._query,this._options.noSort),a=this._url,s={message:"Uncaught ajax error",status:n,data:{url:a,query:i}},u=["url: "+a,o&&"act: "+o,r&&"text: "+r].filter(e=>e).join(", ");Object(b.logError)(u,{environment:"uncaughtAjaxRequestError",breadcrumb:s}),__debugMode?console.error("Uncaught Ajax request error:",r,s):console.log("Uncaught Ajax request error:",r,s)}}doReload(e){nav.reload({force:!0,from:e,url:this._url,query:this._query&&Object(c.toQueryString)(this._query)})}onDone(e,t){this._options.bench&&(o=(new Date).getTime()),this._options.frame&&T("OnDone Req:",e);var n,r=t instanceof XMLHttpRequest?t.status:t;try{n=C._protoAdapter.parseResponse(e)}catch(t){return void this.onFail(e,r)}var i,a=n,s=a.navVersion,l=a.newStatic,h=a.statsMeta,f=a.langId,m=a.langVer,g=a.langKeys,v=a.templates,E=a.code,O=a.payload,D=a.debugLog,P=a.env,k=a.extra;if(s)if(vk.version&&vk.version!==s)s&&O.length>4?this.doReload(2):nav.strLoc?location.replace(u.locBase):Object(p.topError)("Server error.",{type:100});else if(vk.version=!1,this._options.frame&&(i=O),vk.lang!==f&&this._options.canReload)this.doReload(3);else{if(h&&(window.vk.statsMeta=h),g){var A=g.local,I=g.global;Object(y.addLangKeys)(A),Object(y.addLangKeys)(I,!0)}P&&P.pe&&(window.vk.pe=P.pe),v&&Object(d.addTemplates)(v),function(e,t,n,r,o){if(!window.stVersions||Object(u.isEmpty)(window.stVersions))return void o();var i=()=>{if(e===window.stVersions.nav)return function(e,t,n,r){var o=["common.css"];if(e){e=e.split(",");for(var i=0,a=e.length;i<a;++i)o.push(e[i])}if(stVersions.lang<n)for(var s in stVersions.lang=n,StaticFiles)StaticFiles.hasOwnProperty(s)&&/^lang\d/i.test(s)&&o.push(s);stManager.add(o,r,!0)}(t,0,r,o);setTimeout(i,100)};if(e!==window.stVersions.nav){var a="";window.navMapSection&&(a="?section="+window.navMapSection);var s=vk.navPostfix||"";headNode.appendChild(Object(_.ce)("script",{type:"text/javascript",src:`/js/loader_nav${s}${e}_${vk.lang}.js${a}`}))}setTimeout(i,0)}(s,l,0,m,()=>{if(!this._options.frame)try{i=C._protoAdapter.parseStaticPayload(O,this._reqid),D&&S(D,this._reqid)}catch(t){var e={message:"JSON error",data:{answer:O,url:this._url,query:this._query&&Object(c.toQueryString)(this._query)}};Object(b.logError)(t,{environment:"ajax_request",breadcrumb:e}),console.error(t)}this.processResponse(E,i),Object(w._handleResponseExtraPayloads)(k)})}else this.onFail(`<pre>${e}</pre>`,{status:-1})}}function T(){if(Object(l.partConfigEnabled)("extended_ajax_logging")){var e;try{throw new Error}catch(t){e=t.stack}var t="+ Frame transport: "+arguments[0];console.groupCollapsed(t),[].slice.call(arguments,1).forEach(e=>console.log(JSON.stringify(e))),console.log(e),console.groupEnd()}}function S(e,t){window.debuglogGot&&window.debuglogGot(t,e)}function D(){for(var e=0,t=arguments.length;e<t;++e){var n=arguments[e];n&&n.isVisible()&&(n.setOptions({onHide:!1,onDestroy:!1}),n.hide())}return!1}h.FrameTransport.frame.setHandlers(e=>s=e,e=>{Object(E.triggerSubscribersOnModuleEvaluated)(),a=e},T);var P={enabled:function(){try{return!!new XMLHttpRequest}catch(e){return!1}}(),set tStart(e){r=e},set tProcess(e){i=e},plainpost:m.plainpost,post:C.post,framepost:h.FrameTransport.request,_getreq:function(){return new XMLHttpRequest},request:m.request,preload:f.AjaxCacheClient.preload,invalidate:f.AjaxCacheClient.invalidate,tGetParam:function(){if(r&&a){var e=[o-r,i-o,void 0-i,s-r,a];for(var t in e)if(e.hasOwnProperty(t)){if(e[t]<0)return!1;if(!e[t]&&0!==e[t])return!1}return r=!1,e.join(",")}},AjaxRequest:C,AjaxCancellationToken:m.AjaxCancellationToken,frame:h.FrameTransport.frame,_framenext:()=>h.FrameTransport.frame._nextQueueItem(),framegot:(e,t,n)=>h.FrameTransport.frame.useAjaxBlock(e,t,n),_frameover:(e,t)=>h.FrameTransport.frame.finalize(e,t),_framedone:(e,t)=>h.FrameTransport.frame.onReady([e,t]),_debugLog:S}},"4+be":function(e,t,n){"use strict";n.r(t),n.d(t,"parseLatin",(function(){return s})),n.d(t,"parseCyr",(function(){return c})),n.d(t,"parseLatKeys",(function(){return u})),n.d(t,"langNumeric",(function(){return l})),n.d(t,"langSex",(function(){return d})),n.d(t,"langStr",(function(){return _})),n.d(t,"addLangKeys",(function(){return p})),n.d(t,"getLang",(function(){return h})),n.d(t,"langTag",(function(){return f})),n.d(t,"langDate",(function(){return m})),n.d(t,"getShortDate",(function(){return g})),n.d(t,"getShortDateWithTime",(function(){return v})),n.d(t,"getShortDateOrTime",(function(){return b})),n.d(t,"langWordNumeric",(function(){return y})),n.d(t,"getDateText",(function(){return E})),n.d(t,"getBigDateNew",(function(){return w})),n.d(t,"getSmDate",(function(){return O}));n("HEwt"),n("pIFo"),n("a1Th"),n("Btvt"),n("KKXr");var r=n("jE6c"),o=n("1BRX"),i=n("t7n3"),a=n("98sY");function s(e){for(var t=["yo","zh","kh","ts","ch","sch","shch","sh","eh","yu","ya","YO","ZH","KH","TS","CH","SCH","SHCH","SH","EH","YU","YA","'"],n=["ё","ж","х","ц","ч","щ","щ","ш","э","ю","я","Ё","Ж","Х","Ц","Ч","Щ","Щ","Ш","Э","Ю","Я","ь"],r=e,o=0,i=t.length;o<i;o++)r=r.split(t[o]).join(n[o]);for(var a="abvgdezijklmnoprstufhcyABVGDEZIJKLMNOPRSTUFHCYёЁ",s=0,c=a.length;s<c;s++)r=r.split(a.charAt(s)).join("абвгдезийклмнопрстуфхцыАБВГДЕЗИЙКЛМНОПРСТУФХЦЫеЕ".charAt(s));return r===e?null:r}function c(e){for(var t=["yo","zh","kh","ts","ch","sch","shch","sh","eh","yu","ya","YO","ZH","KH","TS","CH","SCH","SHCH","SH","EH","YU","YA","'"],n=["ё","ж","х","ц","ч","щ","щ","ш","э","ю","я","Ё","Ж","Х","Ц","Ч","Щ","Щ","Ш","Э","Ю","Я","ь"],r="абвгдезийклмнопрстуфхцыАБВГДЕЗИЙКЛМНОПРСТУФХЦЫеЕ",o=e,i=0;i<n.length;i++)o=o.split(n[i]).join(t[i]);for(var a=0;a<r.length;a++)o=o.split(r.charAt(a)).join("abvgdezijklmnoprstufhcyABVGDEZIJKLMNOPRSTUFHCYёЁ".charAt(a));return o===e?null:o}function u(e){for(var t="qwertyuiop[]asdfghjkl;'zxcvbnm,./`",n=e,r=0;r<t.length;r++)n=n.split(t.charAt(r)).join("йцукенгшщзхъфывапролджэячсмитьбю.ё".charAt(r));return n==e?null:n}function l(e,t,n){if(!t||!window.langConfig){if(!Object(r.isNumeric)(e)){var o=new Error("Non-numeric value passed to langNumeric");throw console.log(e,o),o}return String(e)}var a;if(Object(i.isArray)(t)?(a=t[1],e!=Math.floor(e)?a=t[langConfig.numRules.float]:Object(i.each)(langConfig.numRules.int,(function(n,r){if("*"==r[0])return a=t[r[2]],!1;var o=r[0]?e%r[0]:e;return-1!=Object(i.indexOf)(r[1],o)?(a=t[r[2]],!1):void 0}))):a=t,n){for(var s=e.toString().split("."),c=[],u=s[0].length-3;u>-3;u-=3)c.unshift(s[0].slice(u>0?u:0,u+3));s[0]=c.join(langConfig.numDel),e=s.join(langConfig.numDec)}return a=(a||"%s").replace("%s",e)}function d(e,t){if(!Object(i.isArray)(t))return t;var n=t[1];return window.langConfig?(Object(i.each)(langConfig.sexRules,(function(r,o){return"*"==o[0]||e==o[0]&&t[o[1]]?(n=t[o[1]],!1):void 0})),n):n}function _(e){for(var t=arguments,n=t.length,r=e+"",o=1;o<n;o+=2){var i="%"===t[o][0]?t[o]:"{"+t[o]+"}";r=r.replace(i,t[o+1])}return r}function p(e,t){var n=t?window:window.cur;n.lang?Object(i.extend)(n.lang,e):n.lang=e}function h(){try{var e=Array.from(arguments),t=e.shift();if(!t)return"...";var n=window.cur&&window.cur.lang&&window.cur.lang[t]||window.lang&&window.lang[t]||window.langpack&&window.langpack[t]||window[t];if(!n){var r=t.split("_");return r.shift(),r.join(" ")}return Object(i.isFunction)(n)?n.apply(null,e):void 0===e[0]&&!Object(i.isArray)(n)||"raw"===e[0]?n:l(e[0],n,e[1])}catch(e){Object(a.debugLog)("lang error:"+e.message+"("+Array.from(arguments).join(", ")+")")}}function f(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"tag",o=n;return o=(o=o.replace(`{${r}}`,e)).replace(`{/${r}}`,t)}function m(e,t,n,r,a,s){var c;if(s||(s=""),Object(i.isArray)(t)||(t=["",t,t,t,t]),"number"==typeof e||"string"==typeof e?(e>2147483646e3&&(e=0),e+=n,c=new Date(e)):c=e,a)t=t[1];else{var u="";!(u=Object(o.isToday)(c)?t[3]:Object(o.isYesterday)(c)?t[2]:Object(o.isTomorrow)(c)?t[4]:t[1])&&t[1]&&(u=t[1]),t=u}var l={hours:c.getHours(),minutes:c.getMinutes(),seconds:c.getSeconds(),day:c.getDate(),month:c.getMonth()+1,year:c.getFullYear()},d="";switch(3===vk.lang&&(d=c.getHours()>11?"pm":"am",l.hours=c.getHours()%12==0?12:c.getHours()%12),vk.lang){case 1:switch(c.getHours()){case 11:t=t.replace(" о "," об ");break;case 0:t=t.replace(" о "," в ")}break;case 3:!Object(o.isToday)(c)||Object(o.isYesterday)(c)||Object(o.isTomorrow)(c)||(t=s+t);break;case 12:case 73:1==c.getHours()&&(t=t.replace(" &#224;s "," &#224; "))}return 68===vk.lang&&(l.year=l.year+543),t.replace("{hour}",l.hours).replace("{num_hour}",Object(o.leadingZero)(l.hours)).replace("{minute}",Object(o.leadingZero)(l.minutes)).replace("{day}",l.day).replace("{num_day}",Object(o.leadingZero)(l.day)).replace("{month}",r[l.month]).replace("{year}",l.year).replace("{short_year}",l.year%100).replace("{second}",Object(o.leadingZero)(l.seconds)).replace("{am_pm}",d)}function g(e,t,n,r,o){e*=1e3,void 0===n&&(n=!0),void 0===r&&(r=h("months_of","raw")),t*=1e3;var i=Date.now(),a=new Date(i),s=new Date(e+t);return!o&&e>i&&e-i<864e5&&a.getDate()===s.getDate()?m(e,"{hour}:{minute} {am_pm}",t,[],!n):s.getYear()!==a.getYear()||e<i-157248e5?m(e,h("global_date","raw"),t,r,!n):m(e,h("global_short_date","raw"),t,r,!n)}function v(e,t,n,r){return Object(o.isToday)(new Date(1e3*e+1e3*t))?m(1e3*e,"{hour}:{minute} {am_pm}",1e3*t,[],!n):`${g(e,t,n,r)} ${m(1e3*e,"{hour}:{minute} {am_pm}",1e3*t,[],!n)}`}function b(e,t,n,r){return Object(o.isToday)(new Date(1e3*e+1e3*t))?m(1e3*e,"{hour}:{minute} {am_pm}",1e3*t,[],!n):g(e,t,n,r)}function y(e,t,n){return Object(i.isArray)(t)&&e<t.length?t[e]:l(e,n)}function E(e,t){e+=t;var n=parseInt(Date.now()/1e3)-e,r="";if(n<60)r=h("global_just_now");else if(n<3600){r=y(Object(i.intval)(n/60),h("global_word_mins_ago","raw"),h("global_mins_ago","raw"))}else if(n<14400){r=y(Object(i.intval)(n/3600),h("global_word_hours_ago","raw"),h("global_hours_ago","raw"))}else r=w(e,0,!0,"_l");return r}function w(e,t,n,r){void 0===n&&(n=!0),void 0===t&&(t=0),void 0===r&&(r=""),t*=1e3;var o=new Date(1e3*e),i=new Date;return o.getFullYear()!==i.getFullYear()&&o.getTime()<i.getTime()-1728e5||Math.abs(o.getTime()-i.getTime())>157248e5?m(1e3*e,h("global_date"+r,"raw"),t,h("months_sm_of"),!n):m(1e3*e,h("global_short_date_time"+r,"raw"),t,h("months_sm_of"),!n)}function O(e,t,n){void 0===n&&(n=!0),void 0===t&&(t=0);var r=new Date,o=r.getFullYear(),i=r.getMonth(),a=new Date(1e3*e),s=a.getFullYear(),c=a.getMonth();return m(1e3*e,h(s<o&&(i>1||c<9||o-s>=2)?"global_date":"global_short_date_time","raw"),t,h("months_sm_of","raw"),!n)}},"4O8T":function(e,t,n){var r;!function(t){"use strict";function o(){}var i=o.prototype,a=t.EventEmitter;function s(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function c(e){return function(){return this[e].apply(this,arguments)}}i.getListeners=function(e){var t,n,r=this._getEvents();if(e instanceof RegExp)for(n in t={},r)r.hasOwnProperty(n)&&e.test(n)&&(t[n]=r[n]);else t=r[e]||(r[e]=[]);return t},i.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},i.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&((t={})[e]=n),t||n},i.addListener=function(e,t){if(!function e(t){return"function"==typeof t||t instanceof RegExp||!(!t||"object"!=typeof t)&&e(t.listener)}(t))throw new TypeError("listener must be a function");var n,r=this.getListenersAsObject(e),o="object"==typeof t;for(n in r)r.hasOwnProperty(n)&&-1===s(r[n],t)&&r[n].push(o?t:{listener:t,once:!1});return this},i.on=c("addListener"),i.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},i.once=c("addOnceListener"),i.defineEvent=function(e){return this.getListeners(e),this},i.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},i.removeListener=function(e,t){var n,r,o=this.getListenersAsObject(e);for(r in o)o.hasOwnProperty(r)&&-1!==(n=s(o[r],t))&&o[r].splice(n,1);return this},i.off=c("removeListener"),i.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},i.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},i.manipulateListeners=function(e,t,n){var r,o,i=e?this.removeListener:this.addListener,a=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(r=n.length;r--;)i.call(this,t,n[r]);else for(r in t)t.hasOwnProperty(r)&&(o=t[r])&&("function"==typeof o?i.call(this,r,o):a.call(this,r,o));return this},i.removeEvent=function(e){var t,n=typeof e,r=this._getEvents();if("string"===n)delete r[e];else if(e instanceof RegExp)for(t in r)r.hasOwnProperty(t)&&e.test(t)&&delete r[t];else delete this._events;return this},i.removeAllListeners=c("removeEvent"),i.emitEvent=function(e,t){var n,r,o,i,a=this.getListenersAsObject(e);for(i in a)if(a.hasOwnProperty(i))for(n=a[i].slice(0),o=0;o<n.length;o++)!0===(r=n[o]).once&&this.removeListener(e,r.listener),r.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,r.listener);return this},i.trigger=c("emitEvent"),i.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},i.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},i._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},i._getEvents=function(){return this._events||(this._events={})},o.noConflict=function(){return t.EventEmitter=a,o},void 0===(r=function(){return o}.call(t,n,t,e))||(e.exports=r)}("undefined"!=typeof window?window:this||{})},"4PuL":function(e,t,n){"use strict";n.r(t);var r=n("lXE5"),o=n("aong"),i=n("zxIV"),a=n("t7n3"),s=n("Egk5");function c(e,t,n){if(Object(a.isObject)(t)?n=t:this._dragElClass=t,this.options=Object(a.extend)({dragThreshold:c.DRAG_THRESHOLD_DIST},n),this._contEl=Object(i.ge)(e),this._contEl){this._excludedCount=0;for(var r=0;r<this._contEl.children.length;r++)this._contEl.children[r].getAttribute("nodrag")&&this._excludedCount++;Object(s.addEvent)(this._contEl,"mousedown",this._ev_mousedown_handler=this._onMouseDown.bind(this)),Object(i.setStyle)(this._contEl,"position","relative"),this._inited=!0,this._updateScrollbar=this._initUpdaterScrollbar()}}c.AUTO_SCROLL_DY=10,c.DRAG_THRESHOLD_DIST=0,c.AUTO_SCROLL_DISTANCE_THRESHOLD=300,c.AUTO_SCROLL_GAP=300,c.prototype.destroy=function(){this._inited&&(this._inited=!1,this._deinitEvents(!0))},c.prototype._getParentDragItemEl=function(e){for(var t,n=e;n&&(t=Object(i.domPN)(n))!==this._contEl;)n=t;return n===this._curPlaceholderEl&&(n=null),n},c.prototype._onKey=function(e){e.keyCode===s.KEY.ESC&&this.isCurrentlyDragging()&&this._onMouseUp()},c.prototype._onMouseDown=function(e){if(!(this._disabled||0!=e.button||this._curDragEl||Object(i.attr)(e.target,"nodrag")||this._dragElClass&&!Object(i.domClosest)(this._dragElClass,e.target))){for(var t=e.target;t&&t!==window.document;){if(Object(a.intval)(Object(i.domData)(t,"nodrag")))return;t=Object(i.domPN)(t)}var n=this._getParentDragItemEl(e.target);if(n&&!Object(i.attr)(n,"nodrag")&&(Object(i.re)(Object(i.geByClass1)("ui_gridsorter_placeholder"),this._contEl),this._contInfo=this._contInfo||{prevSize:Object(i.getSize)(this._contEl)},this._ensureGridIsActual(),!(this._grid.length<=1))){var r=window.getComputedStyle(n),o=Object(i.getXY)(n);this._initial={candidateEl:n,x:e.clientX,y:e.clientY,itemMargin:{x:parseInt(r.marginLeft),y:parseInt(r.marginTop)},shift:{x:e.pageX-o[0],y:e.pageY-o[1]}},Object(s.addEvent)(document,"mousemove",this._ev_mousemove_handler=this._onMouseMove.bind(this)),Object(s.addEvent)(document,"mouseup",this._ev_mouseup_handler=this._onMouseUp.bind(this)),Object(s.addEvent)(document,"keydown",this._ev_keydown_handler=this._onKey.bind(this)),cur.cancelClick=!1,Object(s.cancelEvent)(e)}}},c.prototype._dist=function(e){return Math.abs(e.clientX-this._initial.x)+Math.abs(e.clientY-this._initial.y)},c.prototype._onMouseUp=function(e){var t=this._curDragEl,n=!e;if(this._curDragEl){this._curDragEl=null,Object(i.removeClass)(t,"ui_gridsorter_moveable_notrans"),this._curOverCell||(this._curOverCell={el:this._curPlaceholderEl,pos:Object(i.getXY)(this._curPlaceholderEl),size:Object(i.getSize)(this._curPlaceholderEl)});var r=this._curOverCell.pos,o=this._curOverCell.el,a=this._grid[this._curDragCellIndex],c=a&&a.size;Object(i.gpeByClass)("_ape_item_list",t)&&(r[0]+=20,r[1]+=20),c&&this._isShiftToLeft&&(r[1]-=c[1]-this._curOverCell.size[1]),setTimeout(()=>{if(n){for(var e=0,o=this._grid.length;e<o;e++){var i=this._grid[e];i.dirty&&this._setPos(i.el,{left:0,top:0})}this._setPos(t,this._initialCurDragPos)}else this._setPos(t,{left:r[0],top:r[1]})}),setTimeout(()=>{if(Object(i.re)(this._curPlaceholderEl),Object(i.removeClass)(this._contEl,"ui_gridsorter_cont"),this.options.dragCls&&Object(i.removeClass)(t,this.options.dragCls),this._inited){var e;if(n){for(var r=this._grid.length,a=0;a<r;a++){var s=this._grid[a];s.dirty&&this._setPos(s.el,{left:null,top:null})}this._setPos(t,{left:null,top:null,width:null,height:null})}else{var c;e=this._isShiftToLeft?Object(i.domNS)(o):o,this._contEl.insertBefore(t,e);var u=-1,l=this._initial.hasInlineSize;this._setPos(t,{left:null,top:null}),l||Object(i.setStyle)(t,{width:null,height:null});for(var d=this._grid.length,_=0;_<d;_++){var p=this._grid[_];(p.dirty||p.el===t)&&(this._setPos(p.el,{left:null,top:null}),l||Object(i.setStyle)(p.el,{width:null,height:null}),p.pos=this._calcElementPos(p.el),p.dirty=!1),p.el===t?c=_:p.el===o&&(u=_)}if(u>=0){var h=this._grid.splice(c,1);this._grid.splice(u,0,h[0])}}Object(i.removeClass)(t,"ui_gridsorter_moveable"),this._curOverCell=this._curPlaceholderEl=null,n&&this.update(),this.options.onDragFinish&&this.options.onDragFinish(t),o!==t&&!n&&this.options.onReorder&&this.options.onReorder(t,e,Object(i.domPS)(t))}},210),e&&this._dist(e)>5&&(Object(s.cancelEvent)(e),cur.cancelClick=!0)}this._updateScrollbar(),this._deinitEvents(),t&&this._overEl&&this.options.onDragLeave&&this.options.onDragLeave(this._overEl,t),n||t&&this._overEl&&this.options.onDragDrop&&(n=this.options.onDragDrop(this._overEl,t)),this._overEl=null},c.prototype._deinitEvents=function(e){e&&(this._onMouseUp(),Object(s.removeEvent)(this._contEl,"mousedown",this._ev_mousedown_handler)),clearTimeout(this._autoScrollTO),this._autoScrollTO=!1,this._ev_mousemove_handler&&Object(s.removeEvent)(document,"mousemove",this._ev_mousemove_handler),this._ev_mouseup_handler&&Object(s.removeEvent)(document,"mouseup",this._ev_mouseup_handler),this._ev_keydown_handler&&Object(s.removeEvent)(document,"keydown",this._ev_keydown_handler)},c.prototype._setPos=function(e,t){this.options.noPosTransform||!this._hasTranslateFeauture&&!(this._hasTranslateFeauture=window.getComputedStyle(e).getPropertyValue("transform"))?Object(i.setStyle)(e,Object(a.extend)({transform:null},t)):null===t.left||null===t.top?Object(i.setStyle)(e,{transform:null,top:null,left:null}):Object(i.setStyle)(e,{transform:"translate("+t.left+"px, "+t.top+"px)",top:null,pos:null})},c.prototype._recalc=function(){var e=this._curDragEl,t=this._curOverCell.el;if(this._initGrid(),t!==e){for(var n=0,r=!1,o=!1,i=this._grid.length,a=0;a<i;a++){var s=this._grid[a];if(s.el===e){r=!0;break}if(s.el===t){r=!1;break}}this._isShiftToLeft=r;for(var c=r?0:this._grid.length-1,u=r?this._grid.length:-1,l=r?1:-1,d=[0,0];c!==u;c+=l){var _=this._grid[c];if(2!==n)if(_.el!==e){if(_.el===t&&n++,1===n||2===n){var p=0,h=0;r?(p=o.pos[0]+d[0],h=o.pos[1]+d[1],d[0]+=_.size[0]-o.size[0],d[1]+=_.size[1]-o.size[1]):(d[0]+=o.size[0]-_.size[0],d[1]+=o.size[1]-_.size[1],p=o.pos[0]+d[0],h=o.pos[1]+d[1]),this._setPos(_.el,{left:p-_.pos[0],top:h-_.pos[1]}),_.dirty=!0}else _.dirty&&(this._setPos(_.el,{left:null,top:null}),_.dirty=!1);o=_}else n++,o=_;else _.dirty&&(this._setPos(_.el,{left:null,top:null}),_.dirty=!1),o=_}}else for(var f=this._grid.length,m=0;m<f;m++){var g=this._grid[m];g.el!==e&&g.dirty&&(g.dirty=!1,this._setPos(g.el,{left:null,top:null}))}},c.prototype.disable=function(){this._disabled=!0},c.prototype.enable=function(){this._disabled=!1,this._initGrid(!0)},c.prototype.update=function(){this._disabled||this._initGrid(!0)},c.prototype._ensureGridIsActual=function(){this._initGrid()},c.prototype._needGridUpdate=function(){if(!this._grid)return 1;this._contInfo.prevSize=this._contInfo.prevSize||Object(i.getSize)(this._contEl);var e=0,t=this._contEl.children.length-this._excludedCount-Object(a.intval)(!!this._curPlaceholderEl);if(t!==this._grid.length)e=t>this._grid.length?2:1,this._contInfo.prevSize=Object(i.getSize)(this._contEl);else{var n=Object(i.getSize)(this._contEl),r=this._contInfo.prevSize;(Math.abs(r[0]-n[0])>5||Math.abs(r[1]-n[1])>5)&&(e=1),this._contInfo.prevSize=n}return e},c.prototype._initGrid=function(e){var t=e?1:this._needGridUpdate();if(t){1===t&&(this._grid=[],this._contInfo&&(delete this._contInfo.pos,delete this._contInfo.size));var n=this._grid?this._grid[this._grid.length-1]:null;this._grid=this._grid||[];var r,o=!!n,a=this._contEl.children;if(a.length)for(var s=this._getItemMargins(),c=this._curDragEl?this._grid.length:0,u=a.length;c<u;c++){var l=a[c];n&&l===n.el?o=!1:o||l===this._curPlaceholderEl||l.getAttribute("nodrag")||((r=Object(i.getSize)(l))[0]+=s[0],r[1]+=s[1],this._grid.push({el:l,size:r,pos:this._calcElementPos(l)}))}}},c.prototype._getRelativeMousePos=function(e){var t=this._getContPos(),n=this._getContShift();return{left:e.clientX-t[0]-n[0],top:e.clientY-t[1]-n[1]}},c.prototype._updateDraggablePosition=function(e){if(this._curDragEl){var t=this._getRelativeMousePos(e),n=this._getItemShift(),r=this._getContShift(),o=this._getContSize(),a=t.top-this._initial.shift.y-n[1]+r[1];this.options.limitBottomMove&&(a=Math.min(a,o[1]+30)),Object(i.hasClass)(this._contEl,"_ape_item_list")&&(a+=this._contEl.scrollTop),this._setPos(this._curDragEl,{left:t.left-this._initial.shift.x-n[0]+r[0],top:a}),window.AudioPage&&window.AudioPage.onUpdateDraggablePosition&&window.AudioPage.onUpdateDraggablePosition()}},c.prototype._getContShift=function(){if(this._contInfo=this._contInfo||{},!this._contInfo.shift){var e=window.getComputedStyle(this._contEl);this._contInfo.shift=[parseFloat(e.paddingLeft),parseFloat(e.paddingTop)]}return this._contInfo.shift},c.prototype._getContSize=function(){return this._contInfo=this._contInfo||{},this._contInfo.size=Object(i.getSize)(this._contEl),this._contInfo.size},c.prototype._getContPos=function(){return this._contInfo=this._contInfo||{},this._contInfo.pos=Object(i.getXY)(this._contEl),this._contInfo.pos[1]-=Object(r.scrollGetY)(),this._contInfo.pos},c.prototype._getItemShift=function(){if(this._contInfo=this._contInfo||{},!this._contInfo.itemShift){var e=window.getComputedStyle(Object(i.domFC)(this._contEl));this._contInfo.itemShift=[parseFloat(e.marginLeft),parseFloat(e.marginTop)]}return this._contInfo.itemShift},c.prototype._getItemMargins=function(){if(this._contInfo=this._contInfo||{},!this._contInfo.itemMargins){var e=window.getComputedStyle(Object(i.domFC)(this._contEl));this._contInfo.itemMargins=[parseFloat(e.marginLeft)+parseFloat(e.marginRight),parseFloat(e.marginTop)+parseFloat(e.marginBottom)]}return this._contInfo.itemMargins},c.prototype._calcElementPos=function(e){var t=this._getContShift(),n=this._getItemShift();return[e.offsetLeft-t[0]-n[0],e.offsetTop-t[1]-n[1]]},c.prototype.isCurrentlyDragging=function(){return!!this._curDragEl},c.prototype._initUpdaterScrollbar=function(){return Object(o.throttle)(e=>{var t=this.options.wrapNode||e,n=Object(i.data)(t,"sb");n&&n.update(!1,!0)},500)},c.prototype._onMouseMove=function(e){var t=()=>this.options.wrapNode?this.options.wrapNode.scrollTop:Object(r.scrollGetY)(),n=e=>{this.options.wrapNode?this.options.wrapNode.scrollTop=e:Object(r.scrollToY)(e,0,!1,!0)};if(this._curDragEl){this._ensureGridIsActual(),!e&&(e={clientX:this._lastMousePos.x,clientY:this._lastMousePos.y}),this._lastMousePos={x:e.clientX,y:e.clientY},this._updateDraggablePosition(e);var o=this._getContSize(),a=this._getRelativeMousePos(e),c=!1;if(Object(i.hasClass)(this._contEl,"_ape_item_list")&&(a.top+=this._contEl.scrollTop),a.left>0&&a.left<o[0]&&a.top>0&&a.top<o[1])for(var u=0,l=this._grid.length-1,d=50;d;){var _=u+Math.floor((l-u)/2),p=this._grid[_];if(a.left>p.pos[0]&&a.top>p.pos[1]&&a.left<p.pos[0]+p.size[0]&&a.top<p.pos[1]+p.size[1]){c=p;break}if(u===l)break;a.top<p.pos[1]||a.left<p.pos[0]&&a.top<p.pos[1]+p.size[1]?l=l===_?l-1:_:u=u===_?u+1:_,d--}else{for(var h,f,m,g=this._grid.length,v=999999,b=0;b<g;b++){var y=this._grid[b],E=(f=a.left-(y.pos[0]+y.size[0]/2))*f+(m=a.top-(y.pos[1]+y.size[1]/2))*m;v>E&&(v=E,h=y)}c=h}!c||this._curOverCell&&this._curOverCell.el===c.el||(this._curOverCell=c,this._recalc());var w,O,C,T,S=0;if(this.options.wrapNode)w=T=this.options.wrapNode,O=Object(i.getSize)(w),(C=Object(i.getXY)(w))[1]-=Object(r.scrollGetY)(),S=e.clientY;else{var D=window,P=document.documentElement,k=document.getElementsByTagName("body")[0],A=D.innerWidth||P.clientWidth||k.clientWidth,I=D.innerHeight||P.clientHeight||k.clientHeight;T=D.bodyNode,O=[A,I],C=[0,0],S=e.clientY}var x=Math.max(20,O[1]/10),j=C[1]+x-S,M=x-(C[1]+O[1]-S);if(M>0||j>0){var L=Math.min(1,j/x),R=Math.min(1,M/x);this._autoScrollTO||(this._autoScrollTO=setTimeout(()=>{this._autoScrollTO=!1;var e=t();n(e+16*(L>0?-L:R)),e!==T.scrollTop&&(this._updateScrollbar(T),this._onMouseMove())},20))}if(this.options.onDragOverElClass){var B=e.target;Object(i.hasClass)(B,this.options.onDragOverElClass)||(B=Object(i.gpeByClass)(this.options.onDragOverElClass,B))?this._overEl!==B&&(this._overEl&&this.options.onDragLeave&&this.options.onDragLeave(this._overEl,this._curDragEl),this.options.onDragEnter&&this.options.onDragEnter(B,this._curDragEl),this._overEl=B):(this._overEl&&this.options.onDragLeave&&this.options.onDragLeave(this._overEl,this._curDragEl),this._overEl=null)}}else if(this._dist(e)>this.options.dragThreshold){this._curDragEl=this._initial.candidateEl;for(var N=this._grid.length,U=0;U<N;U++)if(this._grid[U].el===this._curDragEl){this._curDragCellIndex=U;break}this.options.dragCls&&Object(i.addClass)(this._curDragEl,this.options.dragCls);var F=Object(i.getSize)(this._curDragEl),W=Object(i.getXY)(this._curDragEl),H=window.getComputedStyle(this._curDragEl),K=this._getContPos();this._initial.hasInlineSize=!(!this._curDragEl.style.width&&!this._curDragEl.style.height),Object(i.setStyle)(this._curDragEl,{width:F[0],height:F[1]}),this._initialCurDragPos={left:W[0]-K[0],top:W[1]-K[1]-bodyNode.scrollTop},this._curPlaceholderEl=Object(i.ce)("div",{className:"ui_gridsorter_placeholder"}),Object(i.setStyle)(this._curPlaceholderEl,{width:F[0]+parseFloat(H.marginLeft)+parseFloat(H.marginRight),height:F[1]+parseFloat(H.marginTop)+parseFloat(H.marginBottom)}),this._contEl.insertBefore(this._curPlaceholderEl,this._curDragEl),Object(i.addClass)(this._curDragEl,"ui_gridsorter_moveable"),Object(i.addClass)(this._curDragEl,"ui_gridsorter_moveable_notrans"),Object(i.addClass)(this._contEl,"ui_gridsorter_cont"),this._onMouseMove(e),this._updateDraggablePosition(e),this.options.onDragStart&&this.options.onDragStart(this._curDragEl)}Object(s.cancelEvent)(e)},t.default=c},"4R4u":function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"4fRq":function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var o=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}},"4mg9":function(e,t,n){"use strict";n.r(t),n.d(t,"BlockController",(function(){return k}));var r,o=n("ldAL"),i=n("vDiJ"),a=n("TmuT"),s=function(){return(s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},c=function(){function e(e,t){this.element=e;var n=this.getConfig();this.dropdown=new window.InlineDropdown(e,s({onSelect:t},n))}return e.prototype.getConfig=function(){var e=this.element.querySelector("."+i.SORTER_ACTION_DATA);if(!e)return null;var t=Array.from(e.querySelectorAll("li"));if(0===t.length)return null;var n={};return n.items=t.map((function(e){var t=e.dataset.id||"";return e.dataset.selected&&(n.selected=t),[t,e.innerText]})),n.withArrow=!0,e.remove(),n},e}(),u=n("4PuL"),l=n("D1OX"),d=n("btP0"),_=n("r0fY"),p=n("FbVm"),h=function(){return(h=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},f=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r},m=function(){function e(e,t){var n=this;this.blockId=t;this.observed_items=[],this.observer=new IntersectionObserver((function(e){return n.onView(e)}),{root:null,rootMargin:"0px",threshold:.5}),this.productCollector=new p.ProductionStatCollector,this.viewCollector=new p.ViewStatCollector(this.productCollector),this.clickCollector=new p.ClickStatCollector(this.productCollector),this.elements=e,this.addHandlers()}return e.prototype.destroy=function(){var e=this;this.observer.disconnect(),this.observed_items.forEach((function(t,n){return e.sendViewStat(n)})),this.elements.forEach((function(t){return t.removeEventListener("mousedown",e.clickHandler)}))},e.prototype.addHandlers=function(){var e=this;this.clickHandler=this.onClick.bind(this),this.elements.forEach((function(t){return t.addEventListener("mousedown",e.clickHandler)})),this.elements.forEach((function(t){return e.observer.observe(t)}))},e.prototype.onClick=function(e){if(e.currentTarget&&e.currentTarget instanceof HTMLElement&&e.currentTarget.parentElement&&e.currentTarget.dataset.id){var t=parseInt(e.currentTarget.dataset.id),n={type:_.ClickProductionStatEventTypes.TYPE_CATALOG_BANNER_ITEM,position:f(e.currentTarget.parentElement.children).indexOf(e.currentTarget)+1},r={type:_.EventItemType.CATALOG_BANNER,id:t,track_code:this.blockId};this.clickCollector.logEvent(n,r)}},e.prototype.sendViewStat=function(e){if(void 0!==this.observed_items[e]){var t=h(h({},this.observed_items[e]),{end_view:this.productCollector.getCurrentTime()}),n={type:_.EventItemType.CATALOG_BANNER,id:e,track_code:this.blockId};this.viewCollector.logEvent(t,n),delete this.observed_items[e]}},e.prototype.onView=function(e){var t=this;e.forEach((function(e){var n=e.target;if(n instanceof HTMLElement&&n.parentElement&&n.dataset.id){var r=parseInt(n.dataset.id);e.isIntersecting?void 0===t.observed_items[r]&&(t.observed_items[r]={type:_.ViewProductionStatEventTypes.TYPE_CATALOG_BANNER_ITEM,start_view:t.productCollector.getCurrentTime(),end_view:"0",position:f(n.parentElement.children).indexOf(n)+1}):t.sendViewStat(r)}}))},e}();!function(e){e.Click="click",e.Close="close"}(r||(r={}));var g,v,b,y=function(){function e(e,t){this.blockContent=e,this.blockId=t;var n=this.getBanners();this.bannerStatCollector=new m(n,t)}return e.prototype.getBanners=function(){return Array.from(this.blockContent.querySelectorAll(".BannerItem"))},e.prototype.setBannersEvents=function(){var e=this;this.getBanners().forEach((function(t){if(t.dataset.id){var n=parseInt(t.dataset.id);e.addConsumableClick(t,n),e.addConsumableCloseClick(t,n)}}))},e.prototype.checkItems=function(){this.getBanners().length||this.blockContent&&this.blockContent.remove()},e.prototype.destroy=function(){this.bannerStatCollector.destroy()},e}(),E=n("3oLO"),w=(g=function(e,t){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}g(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),O=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.setBannersEvents(),r}return w(t,e),t.prototype.consumeBanner=function(e,t){E.ajax.post("/al_audio.php?act=consume_banner",{id:e,ref:this.blockId,reason:t},{onFail:function(){return!0}})},t.prototype.addConsumableClick=function(e,t){var n=this;e.classList.contains("BannerItem--consumable")&&e.dataset.id&&e.addEventListener("click",(function(){return n.consumeBanner(t,r.Click)}))},t.prototype.addConsumableCloseClick=function(e,t){var n=this,o=e.querySelector(".BannerItem__close");o instanceof HTMLElement&&(o.onclick=function(o){n.consumeBanner(t,r.Close),e.remove(),n.checkItems(),o.stopPropagation(),o.preventDefault()})},t.prototype.checkItems=function(){var e=this.getBanners();if(e.length){if(1===e.length){var t=this.blockContent.querySelectorAll(".audio_promo__control");t&&t.forEach((function(e){return e.remove()}))}}else this.blockContent&&this.blockContent.remove()},t}(y),C=n("zxIV"),T=n("D33C");!function(e){e.MusicAudios="music_audios",e.MusicPlaylists="music_playlists"}(v||(v={})),function(e){e.LargeSlider="large_slider",e.List="list"}(b||(b={}));var S=function(){function e(e,t,n){this.container=e,this.dataType=t,this.layoutName=n}return e.prototype.replaceItems=function(e){switch(this.dataType){case v.MusicAudios:this.replaceItemsBase(e);break;case v.MusicPlaylists:this.replaceMusicPlaylists(e);break;default:this.replaceItemsBase(e)}},e.prototype.replaceMusicPlaylists=function(e){var t=e;this.layoutName===b.LargeSlider&&(t=e.slice(0,5)),this.replaceItemsBase(t)},e.prototype.replaceItemsBase=function(e){var t;this.container.innerHTML="",(t=this.container).append.apply(t,e)},e}(),D=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),P=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r},k=function(e){function t(t,n){var r=e.call(this)||this;return r.section=t,r.block=n,r.listenEvents=[],r.setFromBlockContent(),r.blockItemsContainer=n.querySelector("."+i.BLOCK_ITEMS_CONTAINER),r.blockItemsContainer&&(r.initialItems=P(r.blockItemsContainer.children)),r.blockContent&&"catalog_banners"==r.blockContent.dataset.type&&(r.bannersController=new O(r.blockContent,r.getId())),r.initGallery(),r.loader=n.getElementsByClassName(i.AUTO_LIST_LOADER)[0],r.initSearch(),r.initSortSelector(),r.initHints(),r.initListenEvents(),r}return D(t,e),t.prototype.enable=function(){this.reorderer&&this.reorderer.enable()},t.prototype.disable=function(){this.blockAutoList&&this.blockAutoList.destroy(),this.reorderer&&this.reorderer.disable()},t.prototype.emitEvent=function(e){this.listenEvents.includes(e)&&this.reloadData()},t.prototype.initSearch=function(){var e=this.block.getElementsByClassName("ui_search");e.length&&Array.prototype.forEach.call(e,(function(e){return d.default.init(e)}))},t.prototype.initListenEvents=function(){var e,t;if(null===(e=this.blockContent)||void 0===e?void 0:e.dataset.listenEvents)try{this.listenEvents=JSON.parse(null===(t=this.blockContent)||void 0===t?void 0:t.dataset.listenEvents)}catch(e){}},t.prototype.onSectionInit=function(){this.blockItemsContainer&&this.blockItemsContainer.classList.contains(i.BLOCK_ITEMS_REORDERABLE)&&this.initListReorder(!!this.section.getId())},t.prototype.hasBlockName=function(e){return this.blockContent&&this.blockContent.classList.contains(i.BLOCK_ELEMENT+"__"+e)},t.prototype.reloadData=function(){var e=this;this.fetchSection(this.id,"").then((function(n){var r=n.blockItems,o=n.data;if(e.clearItems(),e.setItems(t.createNodesFromItems(r)),o.playlists&&o.playlists.length){var i=window.getAudioPlayer();i&&i.addWithReplacePlaylists(o.playlists.map((function(e){return new T.AudioPlaylist(e)})))}})).catch((function(){return!0}))},t.prototype.setFromBlockContent=function(){if(this.blockContent=this.block.classList.contains(i.BLOCK_CONTENT)?this.block:this.block.querySelector("."+i.BLOCK_CONTENT),this.blockContent){this.id=this.blockContent.dataset.id||"",this.nextFrom=this.blockContent.dataset.next||"",this.dataType=this.blockContent.dataset.type||null;var e=this.blockContent.classList.toString().match(/CatalogBlock__layout--(.*)/);this.layoutName=e&&e[1]}},t.prototype.clearList=function(){this.blockItemsContainer&&(this.blockItemsContainer.innerHTML="")},t.prototype.destroy=function(){this.blockAutoList&&this.blockAutoList.destroy(),this.reorderer&&this.reorderer.destroy(),this.bannersController&&this.bannersController.destroy()},t.prototype.hideLoader=function(){this.loader&&(this.loader.style.display="none")},t.prototype.showLoader=function(){this.loader&&(this.loader.style.display="")},t.prototype.setNextFrom=function(e){this.nextFrom=e,this.blockContent&&(this.blockContent.dataset.next=this.nextFrom)},t.prototype.setId=function(e){this.id=e,this.blockContent&&(this.blockContent.dataset.id=this.id),this.blockItemsContainer&&this.blockItemsContainer.dataset.playlistId&&(this.blockItemsContainer.dataset.playlistId=this.id)},t.prototype.setItems=function(e){this.blockItemsContainer&&this.dataType&&this.layoutName&&new S(this.blockItemsContainer,this.dataType,this.layoutName).replaceItems(e)},t.prototype.resetItems=function(){var e;this.blockItemsContainer&&(this.clearItems(),(e=this.blockItemsContainer).append.apply(e,this.initialItems))},t.prototype.clearItems=function(){this.blockItemsContainer&&(this.blockItemsContainer.innerHTML="")},t.prototype.initAutoList=function(e){var t=this;void 0===e&&(e=[]);var n=e;this.blockItemsContainer&&(this.blockAutoList&&this.blockAutoList.destroy(),this.blockAutoList=new o.default(this.blockItemsContainer,{scrollNode:!1,onRendered:function(){return window.getAudioPlayer().updateCurrentPlaying()},onNoMore:function(){return t.hideLoader()},onNeedRows:function(e){if(t.showLoader(),n.length){var r=n;return n=[],void e(r)}t.nextFrom?t.fetchNext().then((function(n){var r=n.blockItems,o=n.data;t.setNextFrom(o.nextFrom),e(r)})).catch((function(){})):e(null)}}))},t.prototype.updateListReorder=function(){this.reorderer&&this.reorderer.update()},t.prototype.initListReorder=function(e){var t,n=this;switch(void 0===e&&(e=!0),this.dataType){case v.MusicAudios:t=function(t,r,o){return n.onAudioBlockReorder(t,r,o,e)};break;case v.MusicPlaylists:t=this.onPlaylistsBlockReorder.bind(this);break;default:t=function(){}}this.reorderer=new u.default(this.blockItemsContainer,"",{onReorder:t.bind(this)})},t.prototype.onAudioBlockReorder=function(e,t,n,r){window.currentAudioPage(this.block).onAudioRowsReorder(!r,e,t,n)},t.prototype.onPlaylistsBlockReorder=function(e,t,n){window.currentAudioPage(this.block).onPlaylistsReorder(e,t,n)},t.prototype.initSortSelector=function(){var e=this,t=this.block.querySelector("."+i.SORTER_ACTION);t&&(this.sortSelector=new c(t,(function(t){E.ajax.post("/al_audio.php?act=replace_blocks",{replacement_ids:t},{onDone:function(t){return e.section.replaceBlocks(t.replacements,t.nextFrom,t.playlists)}})})))},t.prototype.initGallery=function(){this.blockItemsContainer&&this.blockItemsContainer.classList.contains(i.GALLERY)&&(this.gallery=new l.UIGallery(this.blockItemsContainer,{scrollY:!1}))},t.search=function(e,n,r,o){var i=t.findBlockById(e,o.target);i&&!i.fetchInProgress&&(r?i.fetchSection(n,"",{search_query:r}).then((function(e){var n=e.blockItems;i.setItems(t.createNodesFromItems(n))})).catch((function(){return!0})):i.resetItems())},t.showMore=function(e,n){var r=t.findBlockById(e,n);r&&!r.fetchInProgress&&r.fetchNext().then((function(e){var n=e.blockItems,o=e.data;r.setItems(t.createNodesFromItems(n)),r.nextFrom=o.nextFrom})).catch((function(){return!0}))},t.findBlockById=function(e,t){var n=window.currentAudioPage(t).catalogController.currentSection;return n?n.getBlockById(e):null},t.findBlockByElement=function(e){var t=Object(C.gpeByClass)("CatalogBlock__content",e);return(null==t?void 0:t.dataset.id)||null},t.createNodesFromItems=function(e){return e.map((function(e){var t=document.createElement("template");return t.innerHTML=e,t.content.firstChild}))},t.prototype.initHints=function(){var e=this;if(this.block.dataset.catalogHintId){var t=this.section.getHintById(this.block.dataset.catalogHintId);if(t){var n=a.BaseController.getHint(this.block,t);n&&this.section.hintsToShow.push(n),delete this.block.dataset.catalogHintId}}var r=this.block.querySelectorAll("[data-catalog-hint-id]");if(r.length){var o={};r.forEach((function(e){e.dataset.catalogHintId&&(Array.isArray(o[e.dataset.catalogHintId])?o[e.dataset.catalogHintId].push(e):o[e.dataset.catalogHintId]=[e],delete e.dataset.catalogHintId)})),Object.entries(o).forEach((function(t){var n=t[0],r=t[1],o=e.section.getHintById(n);if(o){var i;i=1===r.length?r[0]:e.block;var s=a.BaseController.getHint(i,o);s&&e.section.hintsToShow.push(s)}}))}},t}(a.BaseController)},"4tce":function(e,t,n){"use strict";n.r(t);n("VRzm"),n("Btvt"),n("/8Fb"),n("rGqo"),n("NO8f");var r=n("W9Tc");n("pIFo");function o(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(t),r=new Uint8Array(n.length),o=0;o<n.length;++o)r[o]=n.charCodeAt(o);return r}var i=n("W0P9"),a=n("Xrg9");class s{constructor(e,t){this.sw=e,this.SWClient=t,vk.id&&this.canBeEnabled().then(e=>{e&&(this.listenPermission(),this.loadEndpoint()&&this.update().then(this.checkMessageState.bind(this)))})}static getPermission(){return Notification.permission}cleanNotification(){this.sw.action("cleanNotification")}canBeEnabled(){return Promise.resolve(this.isSupported())}isSupported(){return"PushManager"in window&&"Notification"in window&&this.SWClient.isSupported()}loadEndpoint(){return a.default.get("push_notifier_endpoint"+vk.id)||!1}saveEndpoint(e){a.default.set("push_notifier_endpoint"+vk.id,e||!1)}action(e,t){return this.sw.action(e,t)}_needupdate(e){var t=Date.now(),n=this.loadEndpoint(),r=a.default.get("push_notifier_subscribed_ts"+vk.id),o=!1;return(n!==e.endpoint||!r||t-r>6e4)&&(a.default.set("push_notifier_subscribed_ts"+vk.id,t),o=!0),o}listenPermission(){Object(r.partConfigEnabled)("push_notifier")&&navigator.permissions&&navigator.permissions.query&&navigator.permissions.query({name:"notifications"}).then(e=>{e.onchange=()=>this.update()})}update(){return this.updatePermission().then(e=>e===s.PUSH_NOTIFIER_PERMISSION_GRANTED?this.subscribe().catch(e=>{e!==s.SUBSCRIBE_ERROR_NETWORK&&Object(i.error)("can not update subscribe")}):Promise.reject("premession_not_granted")).catch(i.error)}updatePermission(){var e=s.getPermission();if(e!==s.PUSH_NOTIFIER_PERMISSION_GRANTED){var t=this.loadEndpoint();if(t)return this.unsubscribe(t).then(()=>e)}return Promise.resolve(e)}processSubscribe(e){return e.subscribe({userVisibleOnly:!0,applicationServerKey:o(s.SERVER_KEY)})}setupSubscription(){return new Promise((e,t)=>{var n=s.getPermission(),r=()=>{this.subscribe(!0).then(()=>{e()}).catch(()=>{t()})};n!==s.PUSH_NOTIFIER_PERMISSION_DENIED?n!==s.PUSH_NOTIFIER_PERMISSION_GRANTED?n===s.PUSH_NOTIFIER_PERMISSION_DEFAULT&&this.requestPermission().then(e=>{e===s.PUSH_NOTIFIER_PERMISSION_GRANTED?r():t()}):r():t(s.PUSH_NOTIFIER_BLOCKED_BY_BROWSER_SETTINGS)})}subscribe(e){return this.sw.register().then(e=>{var t=e.pushManager;return t.getSubscription().then(e=>{if(e){var n=e.expirationTime;return n&&Date.now()>n-432e6?this.unsubscribe(this.loadEndpoint()).then(()=>this.processSubscribe(t)):e}return this.processSubscribe(t)})}).then(t=>new Promise((n,r)=>{if(e||this._needupdate(t)){var o=t.getKey("p256dh"),i=t.getKey("auth");window.ajax.post(s.SERVER_URL,{act:"a_subscribe",hash:this.sw.getPushHash(),endpoint:t.endpoint,key:o?btoa(String.fromCharCode.apply(null,new Uint8Array(t.getKey("p256dh")))):null,token:i?btoa(String.fromCharCode.apply(null,new Uint8Array(t.getKey("auth")))):null},{onDone:e=>{e?(this.saveEndpoint(t.endpoint),n()):r()},onFail:()=>(r(s.SUBSCRIBE_ERROR_NETWORK),!0)})}else n()}))}unsubscribe(e){return this.sw.register().then(t=>t.pushManager.getSubscription().then(t=>t?t.unsubscribe().then(t=>t?new Promise((t,n)=>{ajax.post(s.SERVER_URL,{act:"a_unsubscribe",endpoint:e},{onDone:e=>{e?(this.saveEndpoint(!1),t()):n()}})}):Promise.reject("ERROR: can not unsubscribe")):(this.saveEndpoint(!1),Promise.reject("ERROR: no subscription"))))}requestPermission(){var e=s.getPermission();return e===s.PUSH_NOTIFIER_PERMISSION_DEFAULT?new Promise((function(e,t){var n=Notification.requestPermission((function(t){e(t)}));n instanceof Promise&&n.then(e,t)})):Promise.resolve(e)}checkMessageState(){return new Promise(e=>setTimeout(e,5e3)).then(()=>this.action("getMessagesMetaData")).then(e=>"object"==typeof e&&Object.keys(e).length?new Promise((t,n)=>{window.ajax.post(s.SERVER_URL,{act:"a_update_messages_state",data:Object.entries(e)},{onDone:e=>{e?t(e):n("ERROR: act error")},onFail:()=>(n("ERROR: network error"),!0)})}):Promise.resolve({})).then(e=>{try{return JSON.parse(e)}catch(e){return{}}}).then(e=>this.action("updateMessageNotifications",e)).catch(e=>Object(i.error)(e))}}s.SERVER_KEY="BPrntRk2W1_ISFwlgY-vz9tQDg9i1oSQ3-N8xyjdbNAbIOdZIGFdh5FlO7zn730UwU9Sayoec-Fpqq4JZFTyv60",s.SERVER_URL="push_notifier",s.PUSH_NOTIFIER_PERMISSION_GRANTED="granted",s.PUSH_NOTIFIER_PERMISSION_DEFAULT="default",s.PUSH_NOTIFIER_PERMISSION_DENIED="denied",s.PUSH_NOTIFIER_BLOCKED_BY_BROWSER_SETTINGS="BLOCKED_BY_BROWSER_SETTINGS",s.SUBSCRIBE_ERROR_NETWORK="SUBSCRIBE_ERROR_NETWORK";var c=s,u=n("EasH"),l=n("kcIO"),d=n("zxIV");t.default=class extends c{constructor(e,t){super(e,t),this.canBeEnabled().then(e=>{e&&(addClass(document.head,"push_notifier_supported"),this.handlerMessagesLP=this.handlerMessagesLP.bind(this))})}isSupported(){return super.isSupported()&&(browser.chrome||browser.mozilla)}handlerMessagesLP(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,n=e.peerId,r=e.upToId;"event_read_inbound"===t&&this.sw.action("removeMessageNotification",{peerId:n,msgId:r})}handlerPopup(e,t){var n=Object(l.curBox)();n&&Object(d.hide)(n.bodyNode),this.setupSubscription().then(()=>this.setState(e,t,"popup")).then(()=>{n&&n.hide()}).catch(e=>{c.PUSH_NOTIFIER_BLOCKED_BY_BROWSER_SETTINGS===e?(Object(d.show)(n().bodyNode),this.showPopupAllowNotification()):Object(u.showFastBox)(getLang("global_error"),getLang("notifications_native_common_error"))})}showPopupAllowNotification(){Object(u.showBox)(c.SERVER_URL,{act:"popup_allow_notification"},{params:{hideButtons:!0},containerClass:"PushNotifierPopup__popup-box_type--allow-notification"})}showPopupSuggestion(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"feed";Object(u.showBox)(c.SERVER_URL,{act:"popup_suggestion",old:Number(ls.get("im_notify_flag")),module:e},{params:{hideButtons:!0,width:400},containerClass:"PushNotifierPopup__popup-box_type--suggest",onDone:()=>{ajax.post(c.SERVER_URL,{act:"open_popup"},{onFail:()=>!0})}})}_removeLongPollListener(){this.lp&&this.lp.offData(this.handlerMessagesLP),this.lp=null}_addLongPollListener(){!this.lp&&window.Notifier&&(this.lp=Notifier.getLpInstance(),this.lp&&this.lp.onData(this.handlerMessagesLP))}setState(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"settings";return new Promise((r,o)=>{ajax.post(c.SERVER_URL,{act:"a_toggle_state",state:e,hash:t,from:n},{onDone:e=>e?r():o(),onFail:o})})}update(){return super.update().then(()=>this._addLongPollListener())}unsubscribe(e){return super.unsubscribe(e).then(()=>this._removeLongPollListener())}}},"5PZO":function(e,t,n){"use strict";n.r(t),n.d(t,"ModalFooter",(function(){return i}));var r=n("q1tI"),o=n.n(r),i=function(e){var t=e.actionButtons,n=e.hint,r=e.children;return o.a.createElement("div",{className:"ModalFooter"},o.a.createElement("div",{className:"ModalFooter__inner"},n&&o.a.createElement("div",{className:"ModalFooter__hint"},n),r&&o.a.createElement("div",{className:"ModalFooter__content"},r),t))}},"69bn":function(e,t,n){var r=n("y3w9"),o=n("2OiF"),i=n("K0xU")("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||null==(n=r(a)[i])?t:o(n)}},"6FMO":function(e,t,n){var r=n("0/R4"),o=n("EWmC"),i=n("K0xU")("species");e.exports=function(e){var t;return o(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!o(t.prototype)||(t=void 0),r(t)&&null===(t=t[i])&&(t=void 0)),void 0===t?Array:t}},"6b4t":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return o}));n("KKXr");var r=n("q1tI");n("17x9");class o extends r.Component{static mapFilterOptionsToDropdownOptions(e){return e?e.map(e=>[e.constant,e.name]):[]}constructor(e){super(e),this.state={filterWrapElementId:this.props.config.id+"_filter_wrap",filterElementId:this.props.config.id+"_filter"}}componentDidMount(){var e=this.props.config.placeholder||"",t=this.onChange.bind(this);this.state.input=new Dropdown(ge(this.state.filterElementId),o.mapFilterOptionsToDropdownOptions(this.props.config.options),{selectedItems:this.props.config.selected,onChange:t,placeholder:e,multiselect:!this.props.singleSelectCrutch,autocomplete:!0,width:this.props.width,big:!0,maxItems:this.props.maxItems})}componentDidUpdate(e,t,n){if(this.props.config.selected!==e.config.selected&&Array.isArray(this.props.config.selected)&&0===this.props.config.selected.length)this.state.input.clear();else if(this.props.singleSelectCrutch){var r=this.state.input.selectedItems(),o=r&&r[0]&&r[0][0]?r[0][0]:null;if(!o)return;this.props.config.selected!==e.config.selected&&o!=this.props.config.selected&&this.state.input.selectItem(this.props.config.selected[0])}}onChange(e){var t=o.convertOldValueToJson(e);this.props.onFilterChange(this.props.config.id,t)}static convertOldValueToJson(e){return e?e.split(","):null}render(){var e=this.props.config.header?r.createElement("div",{className:"search_filter_main"},this.props.config.header):"";return r.createElement("div",{className:"filter"},e,r.createElement("div",{id:this.state.filterWrapElementId,className:"search_control"},r.createElement("input",{id:this.state.filterElementId,type:"text",className:"dark"})))}}o.defaultProps={width:200,maxItems:50,singleSelectCrutch:!1}},"6krn":function(e,t,n){"use strict";n.r(t),n.d(t,"getLang",(function(){return a}));var r=n("nAFc"),o=n("4+be"),i={};function a(e,t,n){void 0===t&&(t=!1);var a="number"==typeof t,s=t||a,c=e+(s?".raw":"");if(void 0===i[c]){var u=s?Object(o.getLang)(e,"raw"):Object(o.getLang)(e);"string"==typeof u?i[c]=Object(r.decodeHTMLEntities)(u):Array.isArray(u)?i[c]=u.map(r.decodeHTMLEntities):i[c]="object"==typeof u&&null!==u?Object.keys(u).reduce((function(e,t){return e[t]=Object(r.decodeHTMLEntities)(u[t]),e}),{}):u}if(a){var l=t;return Object(o.langNumeric)(l,i[c],n)}return i[c]||""}t.default={getLang:a}},"6ng+":function(e,t,n){"use strict";n.r(t),n.d(t,"TYPE_ADDED",(function(){return d})),n.d(t,"TYPE_REMOVED",(function(){return _})),n.d(t,"TYPE_RECOMMENDATION_REMOVED",(function(){return p})),n.d(t,"TYPE_SHOW_ALBUM",(function(){return h})),n.d(t,"TYPE_SHARE_AUDIO",(function(){return f})),n.d(t,"TYPE_START",(function(){return m})),n.d(t,"TYPE_STOP",(function(){return g})),n.d(t,"TYPE_VOLUME",(function(){return v})),n.d(t,"TYPE_REWIND",(function(){return b})),n.d(t,"TYPE_PLAY_FURTHER",(function(){return y})),n.d(t,"TYPE_BROADCASTING",(function(){return E})),n.d(t,"TYPE_CURATOR",(function(){return w})),n.d(t,"SUBTYPE_DEFAULT",(function(){return O})),n.d(t,"SUBTYPE_NEXT_TRACK",(function(){return C})),n.d(t,"SUBTYPE_PREV_TRACK",(function(){return T})),n.d(t,"SUBTYPE_AUTO",(function(){return S})),n.d(t,"SUBTYPE_INTERRUPTION",(function(){return D})),n.d(t,"SUBTYPE_CONTINUE_FROM_PAUSE",(function(){return P})),n.d(t,"SUBTYPE_NEW",(function(){return k})),n.d(t,"SUBTYPE_CLOSE_APP",(function(){return A})),n.d(t,"SUBTYPE_QUEUE",(function(){return I})),n.d(t,"SUBTYPE_PAUSE",(function(){return x})),n.d(t,"SUBTYPE_UPLOAD",(function(){return j})),n.d(t,"SUBTYPE_ON",(function(){return M})),n.d(t,"SUBTYPE_OFF",(function(){return L})),n.d(t,"SUBTYPE_FOLLOW",(function(){return R})),n.d(t,"SUBTYPE_UNFOLLOW",(function(){return B})),n.d(t,"AudioStats",(function(){return F}));n("91GP"),n("HEwt"),n("a1Th"),n("Btvt"),n("rGqo"),n("rE2o"),n("ioFf"),n("KKXr");var r=n("XLUH"),o=n("BJj/"),i=n("DM2o"),a=n("xk4V"),s=n("Xrg9");function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d="added",_="removed",p="recommendation_removed",h="show_album",f="share_audio",m="start",g="stop",v="volume",b="rewind",y="play_further",E="broadcast",w="curator",O="default",C="next_track",T="prev_track",S="auto",D="interruption",P="pause",k="new",A="close_app",I="queue",x="pause",j="upload",M="on",L="off",R="follow",B="unfollow",N={[m]:1,[g]:2,[v]:3,[b]:4,[y]:5,[d]:6,[_]:7,[p]:8,[h]:9,[f]:10,[E]:11,[w]:12},U={[O]:1,[C]:2,[T]:3,[S]:4,[D]:5,[P]:6,[k]:7,[A]:8,[I]:9,[x]:10,[j]:11,[M]:12,[L]:13,[R]:14,[B]:15};class F{constructor(e){if(this.playerAdapter=e,this.listenedData=null,this.sendTimeout=null,this.currentAudioId=null,this.currentAudio=null,this.currentAudioTrackCode=null,this.pausedAudioId=null,this.playlistChanged=!1,this.currentPosition=0,this.currentListened=0,this.playedTime=0,this.adsCompleted=!1,this.wasEnded=!1,vk.id)this.uniqueUserId=null;else{var t=s.default.get("audio_unique_unauth_id");t?this.uniqueUserId=t:(this.uniqueUserId=a(),s.default.set("audio_unique_unauth_id",this.uniqueUserId))}this.debug=e.isDebug(),this.onVolume=Object(o.debounce)(this.onVolume.bind(this),300),this.playerAdapter.listenPlay(this.onPlay,this),this.playerAdapter.listenPause(this.onPause,this),this.playerAdapter.listenStop(this.onPause,this),this.playerAdapter.listenProgress(this.onProgress,this),this.playerAdapter.listenVolume(this.onVolume,this),this.playerAdapter.listenSeek(this.onSeek,this),this.playerAdapter.listenPlaylistChanged(this.onPlaylistChanged,this),this.playerAdapter.listenEnded(this.onEnded,this),this.playerAdapter.listenPlayNext(this.onPlayNext,this),this.playerAdapter.listenAdCompleted(this.onAdCompleted,this),this.onPageClose=this.onPageClose.bind(this),addEvent(window,"beforeunload",this.onPageClose)}canOperate(){return!this.playerAdapter.isPodcast()&&!this.playerAdapter.isAdPlaying()}getCurrentAudioParams(){var e=this.currentAudioId||this.playerAdapter.getAudioId();if(e){var t=u(e.split("_"),2);return{ownerId:t[0],audioId:t[1],trackCode:this.currentAudioTrackCode||this.playerAdapter.getAudioTrackCode()}}return{}}getEnvParams(){return{state:this.playerAdapter.getState(),context:this.playerAdapter.getContext(),ref:window.cur&&vk.widget?String(cur.widgetReferrer||"").substring(0,20):""}}getListenedTime(){return Math.round(this.playerAdapter.getListenedTime())||0}getPlaySubtype(){if(this.playerAdapter.isAutoPlayed())return S;var e=this.playerAdapter.getSequence();if(e)return e>0?C:T;var t=this.pausedAudioId,n=this.playerAdapter.getAudioId();return t&&n===t?P:k}onPlay(){if(this.canOperate()){var e=this.playerAdapter.getAudio(),t=e.fullId,n=this.currentAudioId===t||!this.currentAudioId,r=this.currentAudioId!==this.pausedAudioId,o=this.playerAdapter.getListenedTime();!n&&r&&this.onTrackSwitch(this.currentAudio,this.currentPlaylistId),this.playedTime=vkNow(),this.currentAudioId=t,this.currentAudio=e,this.currentAudioTrackCode=this.playerAdapter.getAudioTrackCode(),this.currentPlaylistId=this.playerAdapter.getPlaylistId(),this.wasEnded||this.playerAdapter.hasPrevAudio()&&(!this.pausedAudioId||this.playerAdapter.isAutoPlayed())?(this.currentPosition=0,o=0):this.currentPosition=this.playerAdapter.getProgressInSeconds(),this.currentListened=o,this.sendCurrentAudioEvent({type:m,subtype:this.getPlaySubtype(),position:this.currentPosition,listened:o}),this.pausedAudioId=null,this.playlistChanged=!1,this.wasEnded=!1}}onPause(){var e=this.playerAdapter.getAudioId();if(this.canOperate()&&e){var t=this.collectListenedData();this.sendListenedDataDelayed(1e3,t),setTimeout(()=>{if(!(this.currentAudio&&e!==this.currentAudio.fullId||vkNow()-this.playedTime<150)){this.pausedAudioId=e;var t=this.playerAdapter.getPausedBy(this.playedTime);this.sendCurrentAudioEvent({type:g,subtype:t?t===I?I:D:x})}},100)}}onProgress(){this.playerAdapter.getProgress()<.01||!this.playerAdapter.isPlaying()||(this.currentPosition=this.playerAdapter.getProgressInSeconds(),this.currentListened=this.playerAdapter.getListenedTime(),!this.pausedAudioId&&vkNow()-this.playedTime>150&&this.collectListenedData(),this.adsCompleted&&(this.sendCurrentAudioEvent({type:m,subtype:this.getPlaySubtype(),position:this.currentPosition}),this.adsCompleted=!1))}onVolume(){this.canOperate()&&this.sendCurrentAudioEvent({type:v,subtype:O})}onSeek(){if(this.canOperate()){var e={position:this.currentPosition,positionTo:this.playerAdapter.getProgressInSeconds()};e.position!==e.positionTo&&this.sendCurrentAudioEvent(c({type:b,subtype:O},e))}}onPlaylistChanged(){this.canOperate()&&(this.playlistChanged=!0)}onEnded(){this.listenedData&&this.playerAdapter.isLastTrack()&&(this.listenedData.end_stream_reason="session_end"),this.wasEnded=!0,this.playerAdapter.isRepeatCurrentAudio()?(this.sendCurrentAudioEvent({type:g,subtype:S}),this.collectListenedData(),this.sendListenedData()):this.sendListenedDataDelayed(150)}onPlayNext(e,t){if(this.canOperate()){var n=u(t.split("_"),2),r=n[0],o=n[1];this.sendAudioEvent({type:y,subtype:O,ownerId:r,audioId:o})}}onAdCompleted(){this.adsCompleted=!0}onTrackSwitch(e,t){if(e){var n=k,r=this.playerAdapter.getSequence(),o=u(e.fullId.split("_"),2),i=o[0],a=o[1];this.playerAdapter.isAutoPlayed()?n=S:r&&(n=r>0?C:T),this.sendCurrentAudioEvent({type:g,subtype:n,position:this.currentPosition,listened:this.currentListened,trackCode:e.trackCode,playlistId:t,ownerId:i,audioId:a}),this.wasEnded=!0,this.collectListenedData(e),this.collectListenedDataSwitch();var s=this.listenedData;this.listenedData=null,this.sendListenedData(s)}}onPageClose(){this.playerAdapter.isPlaying()&&(this.sendCurrentAudioEvent({type:g,subtype:A}),this.sendListenedData())}collectListenedDataSwitch(){if(this.listenedData){if("session_end"===this.listenedData.end_stream_reason)return;var e=this.playerAdapter.isAutoPlayed(),t=this.getListenedTime(),n=this.playerAdapter.getSequence(),r=null;n&&!e?r=n>0?"next_btn":"prev":this.playlistChanged&&(r="playlist_change"),!r&&e&&(r="playlist_next"),this.listenedData.end_stream_reason=r||"new",t&&(this.listenedData.listened=t)}}collectListenedData(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||this.currentAudio;if(this.canOperate()&&e){var t=e.fullId,n=e.trackCode||this.playerAdapter.getAudioTrackCode(),r=this.getListenedTime(),o=e.urlHash;if(o||console.log("no url hash"),r&&o){var i={audio_id:t,listened:r,context:this.playerAdapter.getContext(),hash:o};return window.cur&&vk.widget&&(i.ref=cur.widgetReferrer||""),this.playerAdapter.hasSearchParams()&&(i.search_params=JSON.stringify(this.playerAdapter.getSearchParams())),this.playerAdapter.hasPlaylist()&&(this.playerAdapter.isRealPlaylist()&&(i.playlist_id=this.playerAdapter.getPlaylistId()),this.playerAdapter.isShuffledPlaylist()&&(i.shuffled=1)),n&&(i.track_code=n),this.playerAdapter.isRepeatCurrentAudio()?i.repeat="one":this.playerAdapter.isRepeatAll()&&(i.repeat="all"),this.playerAdapter.isAutoPlayed()&&(i.auto=1),this.playerAdapter.hasPrevAudio()&&(i.prev_audio_id=this.playerAdapter.getPrevAudioId()),this.playerAdapter.hasPrevPlaylist()&&this.playerAdapter.isRealPrevPlaylist()&&(i.prev_playlist_id=this.playerAdapter.getPrevPlaylistId()),this.playerAdapter.isPlaying()||(i.end_stream_reason="stop_btn"),i.state=document.hidden?"background":"app",this.listenedData=i,this.sendListenedDataDelayed(1e4,i),i}}}sendListenedData(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;clearTimeout(this.sendTimeout);var t=e||this.listenedData;this.listenedData=null,t&&t.listened&&(this.uniqueUserId&&(t.unique_id=this.uniqueUserId),this.playerAdapter.sendListenedData(t))}sendListenedDataDelayed(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;clearTimeout(this.sendTimeout),this.sendTimeout=setTimeout(()=>this.sendListenedData(t),e)}serializeEvent(e){var t=[N[e.type],U[e.subtype],1];return e.audioId?t.push(e.ownerId+"_"+e.audioId):t.push(0),e.trackCode?t.push(e.trackCode):t.push(0),e.state?t.push(e.state):t.push(r.UNKNOWN_STATE),e.ref?t.push(e.ref):t.push(""),e.context?t.push(e.context):t.push("other"),e.volume||0===e.volume?t.push(e.volume):t.push(this.playerAdapter.getVolume()),e.position||0===e.position?t.push(e.position):t.push(this.playerAdapter.getProgressInSeconds()),e.shuffle?t.push(e.shuffle?1:0):t.push(0),e.repeat?t.push(e.repeat):t.push(0),e.listened?t.push(Math.max(e.listened,0)):t.push(0),e.playlistId?t.push(e.playlistId):t.push(""),e.targetOwnerId?t.push(e.targetOwnerId):t.push(0),this.uniqueUserId?t.push(this.uniqueUserId):t.push(""),e.positionTo?t.push(e.positionTo):t.push(null),t}sendEvent(e){this.debug&&(console.log("audio stats event",e.type,e.subtype,e),window._statForTest||(window._statForTest=[]),window._statForTest.push(e)),Object(i.statlogsValueEvent)("audio_sts",...this.serializeEvent(e))}sendCurrentAudioEvent(e){this.sendEvent(c({shuffle:this.playerAdapter.isShuffledPlaylist(),repeat:this.playerAdapter.isRepeatCurrentAudio()?1:this.playerAdapter.isRepeatAll()?2:0,volume:this.playerAdapter.getVolume(),position:this.playerAdapter.getProgressInSeconds(),listened:this.getListenedTime(),playlistId:this.playerAdapter.getPlaylistId()},this.getEnvParams(),{},this.getCurrentAudioParams(),{},e))}sendAudioEvent(e){var t=c({},e,{},this.getEnvParams());!vk.id&&this.uniqueUserId&&(t.uniqueUnauthId=this.uniqueUserId),this.sendEvent(t)}destroy(){this.playerAdapter.unListenAll(),removeEvent(window,"beforeunload",this.onPageClose),this.playerAdapter=null,this.listenedData=null,clearTimeout(this.sendTimeout)}}},"7DDg":function(e,t,n){"use strict";if(n("nh4g")){var r=n("LQAc"),o=n("dyZX"),i=n("eeVq"),a=n("XKFU"),s=n("D4iV"),c=n("7Qtz"),u=n("m0Pp"),l=n("9gX7"),d=n("RjD/"),_=n("Mukb"),p=n("3Lyj"),h=n("RYi7"),f=n("ne8i"),m=n("Cfrj"),g=n("d/Gc"),v=n("apmT"),b=n("aagx"),y=n("I8a+"),E=n("0/R4"),w=n("S/j/"),O=n("M6Qj"),C=n("Kuth"),T=n("OP3Y"),S=n("kJMx").f,D=n("J+6e"),P=n("ylqs"),k=n("K0xU"),A=n("CkkT"),I=n("w2a5"),x=n("69bn"),j=n("yt8O"),M=n("hPIQ"),L=n("XMVh"),R=n("elZq"),B=n("Nr18"),N=n("upKx"),U=n("hswa"),F=n("EemH"),W=U.f,H=F.f,K=o.RangeError,V=o.TypeError,q=o.Uint8Array,G=Array.prototype,z=c.ArrayBuffer,Y=c.DataView,$=A(0),X=A(2),Q=A(3),J=A(4),Z=A(5),ee=A(6),te=I(!0),ne=I(!1),re=j.values,oe=j.keys,ie=j.entries,ae=G.lastIndexOf,se=G.reduce,ce=G.reduceRight,ue=G.join,le=G.sort,de=G.slice,_e=G.toString,pe=G.toLocaleString,he=k("iterator"),fe=k("toStringTag"),me=P("typed_constructor"),ge=P("def_constructor"),ve=s.CONSTR,be=s.TYPED,ye=s.VIEW,Ee=A(1,(function(e,t){return Se(x(e,e[ge]),t)})),we=i((function(){return 1===new q(new Uint16Array([1]).buffer)[0]})),Oe=!!q&&!!q.prototype.set&&i((function(){new q(1).set({})})),Ce=function(e,t){var n=h(e);if(n<0||n%t)throw K("Wrong offset!");return n},Te=function(e){if(E(e)&&be in e)return e;throw V(e+" is not a typed array!")},Se=function(e,t){if(!E(e)||!(me in e))throw V("It is not a typed array constructor!");return new e(t)},De=function(e,t){return Pe(x(e,e[ge]),t)},Pe=function(e,t){for(var n=0,r=t.length,o=Se(e,r);r>n;)o[n]=t[n++];return o},ke=function(e,t,n){W(e,t,{get:function(){return this._d[n]}})},Ae=function(e){var t,n,r,o,i,a,s=w(e),c=arguments.length,l=c>1?arguments[1]:void 0,d=void 0!==l,_=D(s);if(null!=_&&!O(_)){for(a=_.call(s),r=[],t=0;!(i=a.next()).done;t++)r.push(i.value);s=r}for(d&&c>2&&(l=u(l,arguments[2],2)),t=0,n=f(s.length),o=Se(this,n);n>t;t++)o[t]=d?l(s[t],t):s[t];return o},Ie=function(){for(var e=0,t=arguments.length,n=Se(this,t);t>e;)n[e]=arguments[e++];return n},xe=!!q&&i((function(){pe.call(new q(1))})),je=function(){return pe.apply(xe?de.call(Te(this)):Te(this),arguments)},Me={copyWithin:function(e,t){return N.call(Te(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return J(Te(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return B.apply(Te(this),arguments)},filter:function(e){return De(this,X(Te(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return Z(Te(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return ee(Te(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){$(Te(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return ne(Te(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return te(Te(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return ue.apply(Te(this),arguments)},lastIndexOf:function(e){return ae.apply(Te(this),arguments)},map:function(e){return Ee(Te(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return se.apply(Te(this),arguments)},reduceRight:function(e){return ce.apply(Te(this),arguments)},reverse:function(){for(var e,t=Te(this).length,n=Math.floor(t/2),r=0;r<n;)e=this[r],this[r++]=this[--t],this[t]=e;return this},some:function(e){return Q(Te(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return le.call(Te(this),e)},subarray:function(e,t){var n=Te(this),r=n.length,o=g(e,r);return new(x(n,n[ge]))(n.buffer,n.byteOffset+o*n.BYTES_PER_ELEMENT,f((void 0===t?r:g(t,r))-o))}},Le=function(e,t){return De(this,de.call(Te(this),e,t))},Re=function(e){Te(this);var t=Ce(arguments[1],1),n=this.length,r=w(e),o=f(r.length),i=0;if(o+t>n)throw K("Wrong length!");for(;i<o;)this[t+i]=r[i++]},Be={entries:function(){return ie.call(Te(this))},keys:function(){return oe.call(Te(this))},values:function(){return re.call(Te(this))}},Ne=function(e,t){return E(e)&&e[be]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},Ue=function(e,t){return Ne(e,t=v(t,!0))?d(2,e[t]):H(e,t)},Fe=function(e,t,n){return!(Ne(e,t=v(t,!0))&&E(n)&&b(n,"value"))||b(n,"get")||b(n,"set")||n.configurable||b(n,"writable")&&!n.writable||b(n,"enumerable")&&!n.enumerable?W(e,t,n):(e[t]=n.value,e)};ve||(F.f=Ue,U.f=Fe),a(a.S+a.F*!ve,"Object",{getOwnPropertyDescriptor:Ue,defineProperty:Fe}),i((function(){_e.call({})}))&&(_e=pe=function(){return ue.call(this)});var We=p({},Me);p(We,Be),_(We,he,Be.values),p(We,{slice:Le,set:Re,constructor:function(){},toString:_e,toLocaleString:je}),ke(We,"buffer","b"),ke(We,"byteOffset","o"),ke(We,"byteLength","l"),ke(We,"length","e"),W(We,fe,{get:function(){return this[be]}}),e.exports=function(e,t,n,c){var u=e+((c=!!c)?"Clamped":"")+"Array",d="get"+e,p="set"+e,h=o[u],g=h||{},v=h&&T(h),b=!h||!s.ABV,w={},O=h&&h.prototype,D=function(e,n){W(e,n,{get:function(){return function(e,n){var r=e._d;return r.v[d](n*t+r.o,we)}(this,n)},set:function(e){return function(e,n,r){var o=e._d;c&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),o.v[p](n*t+o.o,r,we)}(this,n,e)},enumerable:!0})};b?(h=n((function(e,n,r,o){l(e,h,u,"_d");var i,a,s,c,d=0,p=0;if(E(n)){if(!(n instanceof z||"ArrayBuffer"==(c=y(n))||"SharedArrayBuffer"==c))return be in n?Pe(h,n):Ae.call(h,n);i=n,p=Ce(r,t);var g=n.byteLength;if(void 0===o){if(g%t)throw K("Wrong length!");if((a=g-p)<0)throw K("Wrong length!")}else if((a=f(o)*t)+p>g)throw K("Wrong length!");s=a/t}else s=m(n),i=new z(a=s*t);for(_(e,"_d",{b:i,o:p,l:a,e:s,v:new Y(i)});d<s;)D(e,d++)})),O=h.prototype=C(We),_(O,"constructor",h)):i((function(){h(1)}))&&i((function(){new h(-1)}))&&L((function(e){new h,new h(null),new h(1.5),new h(e)}),!0)||(h=n((function(e,n,r,o){var i;return l(e,h,u),E(n)?n instanceof z||"ArrayBuffer"==(i=y(n))||"SharedArrayBuffer"==i?void 0!==o?new g(n,Ce(r,t),o):void 0!==r?new g(n,Ce(r,t)):new g(n):be in n?Pe(h,n):Ae.call(h,n):new g(m(n))})),$(v!==Function.prototype?S(g).concat(S(v)):S(g),(function(e){e in h||_(h,e,g[e])})),h.prototype=O,r||(O.constructor=h));var P=O[he],k=!!P&&("values"==P.name||null==P.name),A=Be.values;_(h,me,!0),_(O,be,u),_(O,ye,!0),_(O,ge,h),(c?new h(1)[fe]==u:fe in O)||W(O,fe,{get:function(){return u}}),w[u]=h,a(a.G+a.W+a.F*(h!=g),w),a(a.S,u,{BYTES_PER_ELEMENT:t}),a(a.S+a.F*i((function(){g.of.call(h,1)})),u,{from:Ae,of:Ie}),"BYTES_PER_ELEMENT"in O||_(O,"BYTES_PER_ELEMENT",t),a(a.P,u,Me),R(u),a(a.P+a.F*Oe,u,{set:Re}),a(a.P+a.F*!k,u,Be),r||O.toString==_e||(O.toString=_e),a(a.P+a.F*i((function(){new h(1).slice()})),u,{slice:Le}),a(a.P+a.F*(i((function(){return[1,2].toLocaleString()!=new h([1,2]).toLocaleString()}))||!i((function(){O.toLocaleString.call([1,2])}))),u,{toLocaleString:je}),M[u]=k?P:A,r||k||_(O,he,A)}}else e.exports=function(){}},"7Qtz":function(e,t,n){"use strict";var r=n("dyZX"),o=n("nh4g"),i=n("LQAc"),a=n("D4iV"),s=n("Mukb"),c=n("3Lyj"),u=n("eeVq"),l=n("9gX7"),d=n("RYi7"),_=n("ne8i"),p=n("Cfrj"),h=n("kJMx").f,f=n("hswa").f,m=n("Nr18"),g=n("fyDq"),v=r.ArrayBuffer,b=r.DataView,y=r.Math,E=r.RangeError,w=r.Infinity,O=v,C=y.abs,T=y.pow,S=y.floor,D=y.log,P=y.LN2,k=o?"_b":"buffer",A=o?"_l":"byteLength",I=o?"_o":"byteOffset";function x(e,t,n){var r,o,i,a=new Array(n),s=8*n-t-1,c=(1<<s)-1,u=c>>1,l=23===t?T(2,-24)-T(2,-77):0,d=0,_=e<0||0===e&&1/e<0?1:0;for((e=C(e))!=e||e===w?(o=e!=e?1:0,r=c):(r=S(D(e)/P),e*(i=T(2,-r))<1&&(r--,i*=2),(e+=r+u>=1?l/i:l*T(2,1-u))*i>=2&&(r++,i/=2),r+u>=c?(o=0,r=c):r+u>=1?(o=(e*i-1)*T(2,t),r+=u):(o=e*T(2,u-1)*T(2,t),r=0));t>=8;a[d++]=255&o,o/=256,t-=8);for(r=r<<t|o,s+=t;s>0;a[d++]=255&r,r/=256,s-=8);return a[--d]|=128*_,a}function j(e,t,n){var r,o=8*n-t-1,i=(1<<o)-1,a=i>>1,s=o-7,c=n-1,u=e[c--],l=127&u;for(u>>=7;s>0;l=256*l+e[c],c--,s-=8);for(r=l&(1<<-s)-1,l>>=-s,s+=t;s>0;r=256*r+e[c],c--,s-=8);if(0===l)l=1-a;else{if(l===i)return r?NaN:u?-w:w;r+=T(2,t),l-=a}return(u?-1:1)*r*T(2,l-t)}function M(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function L(e){return[255&e]}function R(e){return[255&e,e>>8&255]}function B(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function N(e){return x(e,52,8)}function U(e){return x(e,23,4)}function F(e,t,n){f(e.prototype,t,{get:function(){return this[n]}})}function W(e,t,n,r){var o=p(+n);if(o+t>e[A])throw E("Wrong index!");var i=e[k]._b,a=o+e[I],s=i.slice(a,a+t);return r?s:s.reverse()}function H(e,t,n,r,o,i){var a=p(+n);if(a+t>e[A])throw E("Wrong index!");for(var s=e[k]._b,c=a+e[I],u=r(+o),l=0;l<t;l++)s[c+l]=u[i?l:t-l-1]}if(a.ABV){if(!u((function(){v(1)}))||!u((function(){new v(-1)}))||u((function(){return new v,new v(1.5),new v(NaN),"ArrayBuffer"!=v.name}))){for(var K,V=(v=function(e){return l(this,v),new O(p(e))}).prototype=O.prototype,q=h(O),G=0;q.length>G;)(K=q[G++])in v||s(v,K,O[K]);i||(V.constructor=v)}var z=new b(new v(2)),Y=b.prototype.setInt8;z.setInt8(0,2147483648),z.setInt8(1,2147483649),!z.getInt8(0)&&z.getInt8(1)||c(b.prototype,{setInt8:function(e,t){Y.call(this,e,t<<24>>24)},setUint8:function(e,t){Y.call(this,e,t<<24>>24)}},!0)}else v=function(e){l(this,v,"ArrayBuffer");var t=p(e);this._b=m.call(new Array(t),0),this[A]=t},b=function(e,t,n){l(this,b,"DataView"),l(e,v,"DataView");var r=e[A],o=d(t);if(o<0||o>r)throw E("Wrong offset!");if(o+(n=void 0===n?r-o:_(n))>r)throw E("Wrong length!");this[k]=e,this[I]=o,this[A]=n},o&&(F(v,"byteLength","_l"),F(b,"buffer","_b"),F(b,"byteLength","_l"),F(b,"byteOffset","_o")),c(b.prototype,{getInt8:function(e){return W(this,1,e)[0]<<24>>24},getUint8:function(e){return W(this,1,e)[0]},getInt16:function(e){var t=W(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=W(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return M(W(this,4,e,arguments[1]))},getUint32:function(e){return M(W(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return j(W(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return j(W(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){H(this,1,e,L,t)},setUint8:function(e,t){H(this,1,e,L,t)},setInt16:function(e,t){H(this,2,e,R,t,arguments[2])},setUint16:function(e,t){H(this,2,e,R,t,arguments[2])},setInt32:function(e,t){H(this,4,e,B,t,arguments[2])},setUint32:function(e,t){H(this,4,e,B,t,arguments[2])},setFloat32:function(e,t){H(this,4,e,U,t,arguments[2])},setFloat64:function(e,t){H(this,8,e,N,t,arguments[2])}});g(v,"ArrayBuffer"),g(b,"DataView"),s(b.prototype,a.VIEW,!0),t.ArrayBuffer=v,t.DataView=b},"7jxN":function(e,t,n){"use strict";n.r(t),n.d(t,"animate",(function(){return a})),n.d(t,"cubicBezier",(function(){return s})),n.d(t,"fadeTo",(function(){return c})),n.d(t,"FxBase",(function(){return u})),n.d(t,"Fx",(function(){return l})),n.d(t,"genFx",(function(){return d})),n.d(t,"slideDown",(function(){return _})),n.d(t,"slideUp",(function(){return p})),n.d(t,"slideToggle",(function(){return h})),n.d(t,"fadeIn",(function(){return f})),n.d(t,"fadeOut",(function(){return m})),n.d(t,"fadeToggle",(function(){return g})),n.d(t,"getRGB",(function(){return v})),n.d(t,"getColor",(function(){return b})),n.d(t,"animateCount",(function(){return y}));n("pIFo"),n("a1Th"),n("Btvt"),n("SRfc");var r=n("t7n3"),o=n("zxIV"),i=n("gdug");function a(e,t,n,a){if(e=Object(o.ge)(e)){var s,c=Object(r.isFunction)(a)?a:()=>{},l=Object(r.extend)({},"object"==typeof n?n:{duration:n,onComplete:c}),d={},_={},p=Object(o.isVisible)(e);l.orig={},(t=Object(r.clone)(t)).discrete&&(l.discrete=1,delete t.discrete),i.browser.iphone&&(l.duration=0);var h=Object(o.data)(e,"tween"),f=p?"hide":"show";for(var m in h&&h.isTweening&&(l.orig=Object(r.extend)(l.orig,h.options.orig),h.stop(!1),h.options.show?f="hide":h.options.hide&&(f="show")),t)if(t.hasOwnProperty(m)){if(!h&&("show"===t[m]&&p||"hide"===t[m]&&!p))return l.onComplete.call(this,e);if("height"!==m&&"width"!==m||!e.style||(t.overflow||(void 0===l.orig.overflow&&(l.orig.overflow=Object(o.getStyle)(e,"overflow")),e.style.overflow="hidden"),Object(o.hasClass)(e,"inl_bl")||"TD"===e.tagName||(e.style.display="block")),/show|hide|toggle/.test(t[m]))if("toggle"===t[m]&&(t[m]=f),"show"===t[m]){s=0,l.show=!0,void 0===l.orig[m]&&(l.orig[m]=Object(o.getStyle)(e,m,!1)||"",Object(o.setStyle)(e,m,0));var g=e.style[m];e.style[m]=l.orig[m],t[m]=parseFloat(Object(o.getStyle)(e,m,!0)),e.style[m]=g,"height"===m&&i.browser.msie&&!t.overflow&&(e.style.overflow="hidden")}else void 0===l.orig[m]&&(l.orig[m]=Object(o.getStyle)(e,m,!1)||""),l.hide=!0,t[m]=0}return l.show&&!p&&Object(o.show)(e),h=new u(e,l),Object(r.each)(t,(function(t,n){if(/backgroundColor|borderBottomColor|borderLeftColor|borderRightColor|borderTopColor|color|borderColor|outlineColor/.test(t)){if(s=b(e,"borderColor"===t?"borderTopColor":t),n=v(n),void 0===s)return}else{var i=n.toString().match(/^([+-]=)?([\d+-.]+)(.*)$/);i&&(n=parseFloat(i[2]),i[1]&&(n=("-="==i[1]?-1:1)*n+n)),0!=(s=h.cur(t,!0))||"width"!==t&&"height"!==t||(s=1),"opacity"===t&&n>0&&!p&&(Object(o.setStyle)(e,"opacity",0),s=0,Object(o.show)(e))}(s!=n||Object(r.isArray)(s)&&s.join(",")===n.join(","))&&(d[t]=s,_[t]=n)})),h.start(d,_),Object(o.data)(e,"tween",h),h}}function s(e,t,n,r,o,i){var a,s,c=function(t){var r=1-t;return 3*r*r*t*e+3*r*t*t*n+t*t*t},u=function(e){var n=1-e;return 3*n*n*e*t+3*n*e*e*r+e*e*e},l=function(t){var r=1-t;return 3*(2*(t-1)*t+r*r)*e+3*(-t*t*t+2*r*t)*n},d=o;for(a=d,s=0;s<8;s++){var _=c(a)-d;if(Math.abs(_)<i)return u(a);var p=l(a);if(Math.abs(p)<1e-6)break;a-=_/p}var h=0,f=1;if((a=d)<h)return u(h);if(a>f)return u(f);for(;h<f;){var m=c(a);if(Math.abs(m-d)<i)return u(a);d>m?h=a:f=a,a=.5*(f-h)+h}return u(a)}function c(e,t,n,r){return a(e,{opacity:n},t,r)}class u{constructor(e,t,n){this.el=Object(o.ge)(e),this.name=n,this.options=Object(r.extend)({onStep:()=>{},onComplete:()=>{},transition:t.transition||l.Transitions.sineInOut,duration:500},t||{})}start(e,t){this.from=e,this.to=t,this.time=Object(r.vkNow)(),this.isTweening=!0;var n=e=>this.step(e);return n.el=this.el,n()&&l.Timers.push(n)&&!l.TimerId&&(l.TimerId=setInterval((function(){for(var e=l.Timers,t=e.length,n=0;n<t;n++)e[n]()||(e.splice(n--,1),t--);t||(clearInterval(l.TimerId),l.TimerId=null)}),13)),this}stop(e){for(var t=l.Timers,n=t.length-1;n>=0;n--)t[n].el===this.el&&(e&&t[n](!0),t.splice(n,1));this.isTweening=!1}step(e){var t=Object(r.vkNow)();if(!e&&t<this.time+this.options.duration){for(var n in this.cTime=t-this.time,this.now={},this.to)if(Object(r.isArray)(this.to[n])){for(var i=[],a=0;a<3;a++){if(void 0===this.from[n]||void 0===this.to[n])return!1;i.push(Math.min(parseInt(this.compute(this.from[n][a],this.to[n][a])),255))}this.now[n]=i}else this.now[n]=this.compute(this.from[n],this.to[n]),this.options.discrete&&(this.now[n]=Object(r.intval)(this.now[n]));return this.update(),!0}return setTimeout(this.options.onComplete.bind(this,this.el),10),this.now=Object(r.extend)(this.to,this.options.orig),this.update(),this.options.hide&&Object(o.hide)(this.el),this.isTweening=!1,!1}compute(e,t){var n=t-e;return this.options.transition(this.cTime,e,n,this.options.duration)}update(){for(var e in this.options.onStep(this.now),this.now)Object(r.isArray)(this.now[e])?Object(o.setStyle)(this.el,e,"rgb("+this.now[e].join(",")+")"):void 0!==this.el[e]?this.el[e]=this.now[e]:Object(o.setStyle)(this.el,e,this.now[e])}cur(e,t){return null==this.el[e]||this.el.style&&null!=this.el.style[e]?parseFloat(Object(o.getStyle)(this.el,e,t))||0:this.el[e]}}var l={Base:u,Transitions:{linear:(e,t,n,r)=>n*e/r+t,sineInOut:(e,t,n,r)=>-n/2*(Math.cos(Math.PI*e/r)-1)+t,halfSine:(e,t,n,r)=>n*Math.sin(Math.PI*(e/r)/2)+t,easeOutBack:function(e,t,n,r){var o=1.70158;return n*((e=e/r-1)*e*((o+1)*e+o)+1)+t},easeInCirc:(e,t,n,r)=>-n*(Math.sqrt(1-(e/=r)*e)-1)+t,easeOutCirc:(e,t,n,r)=>n*Math.sqrt(1-(e=e/r-1)*e)+t,easeInQuint:(e,t,n,r)=>n*(e/=r)*e*e*e*e+t,easeOutQuint:(e,t,n,r)=>n*((e=e/r-1)*e*e*e*e+1)+t,easeOutCubic:(e,t,n,r)=>n*((e=e/r-1)*e*e+1)+t,swiftOut:(e,t,n,r)=>n*s(.4,0,.22,1,e/r,4/r)+t},Attrs:[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity","left","top"]],Timers:[],TimerId:null};function d(e,t){var n={};return Object(r.each)(l.Attrs.concat.apply([],l.Attrs.slice(0,t)),(function(){n[this]=e})),n}var _=(e,t,n)=>a(e,d("show",1),t,n),p=(e,t,n)=>a(e,d("hide",1),t,n),h=(e,t,n)=>a(e,d("toggle",1),t,n),f=(e,t,n)=>a(e,{opacity:"show"},t,n),m=(e,t,n)=>a(e,{opacity:"hide"},t,n),g=(e,t,n)=>a(e,{opacity:"toggle"},t,n);function v(e){var t;return e&&Object(r.isArray)(e)&&3==e.length?e:(t=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(e))?[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]:(t=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(e))?[2.55*parseFloat(t[1]),2.55*parseFloat(t[2]),2.55*parseFloat(t[3])]:(t=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(e))?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:(t=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(e))?[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]:void 0}function b(e,t){var n;do{if(0===(n=Object(o.getStyle)(e,t)).indexOf("rgba")&&(n=""),""!=n&&"transparent"!==n||"body"===e.nodeName.toLowerCase())break;t="backgroundColor",e=e.parentNode}while(e);return v(n)}function y(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e=Object(o.ge)(e),t=n.str?Object(r.trim)(t.toString())||"":Object(r.positive)(t),e)if(!i.browser.mobile||i.browser.safari_mobile||i.browser.android){var s=Object(o.data)(e,"curCount"),c=Object(o.data)(e,"nextCount");if("number"==typeof c||n.str&&"string"==typeof c)t!=c&&Object(o.data)(e,"nextCount",t);else if("number"==typeof s||n.str&&"string"==typeof s)t!==s&&Object(o.data)(e,"nextCount",t);else if(s=n.str?Object(r.trim)(Object(o.val)(e).toString())||"":Object(r.positive)(Object(o.val)(e)),"auto"===n.str&&(n.str=!s.match(/^\d+$/)||!t.match(/^\d+$/),n.str||(s=Object(r.positive)(s),t=Object(r.positive)(t))),s!==t){Object(o.data)(e,"curCount",t);var u,d,_=n.str?s.length===t.length?s<t:s.length<t.length:s<t,p=(_?t:s).toString(),h=(_?s:t).toString(),f=[],m=[];for(n.str||(h=new Array(p.length-h.length+1).join("0")+h),u=0,d=p.length;u<d;u++){var g=p.charAt(u);if(g!==h.charAt(u))break;f.push(g)}var v=p.substr(u),b=h.substr(u);if(n.str){for(u=v.length;u>0;u--){var E=v.charAt(u);if(E!==b.charAt(u))break;m.unshift(E)}m.length&&(v=v.substr(0,u+1),b=b.substr(0,u+1))}f=f.join("").replace(/\s$/,"&nbsp;"),m=m.join("").replace(/^\s/,"&nbsp;"),Object(r.trim)(Object(o.val)(e))||n.noSpaceIfEmpty||Object(o.val)(e,"&nbsp;");var w=e.clientHeight||e.offsetHeight;Object(o.val)(e,'<div class="counter_wrap inl_bl"></div>');var O,C,T,S,D=e.firstChild,P=!0;f.length&&D.appendChild(O=Object(o.ce)("div",{className:"counter_const inl_bl",innerHTML:f})),f.length||n.allowZero||(b=b.replace(/^0+/,"")),b&&("0"!==b||n.allowZero||f.length)||(b=n.noSpaceIfEmpty?"":"&nbsp;",P=!!f.length),D.appendChild(T=Object(o.ce)("div",{className:"counter_anim_wrap inl_bl"})),T.appendChild(S=Object(o.ce)("div",{className:"counter_anim "+(_?"counter_anim_inc":"counter_anim_dec"),innerHTML:`<div class="counter_anim_big"><span class="counter_anim_big_c">${v}</span></div>`+(P?`<div class="counter_anim_small"><span class="counter_anim_small_c">${b}</span></div>`:"")},P?{marginTop:_?-w:0}:{right:0})),n.str&&Object(o.setStyle)(S,{textAlign:"right",right:0});var k=Object(o.getSize)(Object(o.geByClass1)("counter_anim_big_c",S,"span"))[0],A=P?"&nbsp;"===b?k:Object(o.getSize)(Object(o.geByClass1)("counter_anim_small_c",S,"span"))[0]:0;!b&&n.noSpaceIfEmpty&&(A=0),m.length&&D.appendChild(C=Object(o.ce)("div",{className:"counter_const inl_bl",innerHTML:m})),n.noWrapWidth||Object(o.setStyle)(D,{width:(O&&Object(o.getSize)(O)[0]||0)+(C&&Object(o.getSize)(C)[0]||0)+k+0}),void 0===i.browser.csstransitions&&(i.browser.csstransitions=i.browser.chrome&&i.browser.version>=9||i.browser.mozilla&&i.browser.version>=4||i.browser.opera&&i.browser.version>=10.5||i.browser.safari&&i.browser.version>=3.2||i.browser.safari_mobile||i.browser.android);var I=i.browser.csstransitions;Object(o.setStyle)(T,{width:_?A:k});var x=function(){Object(o.val)(e,t||(n.noSpaceIfEmpty?"":" "));var r=Object(o.data)(e,"nextCount");Object(o.data)(e,"curCount",!1),Object(o.data)(e,"nextCount",!1),("number"==typeof r||n.str&&"string"==typeof r)&&setTimeout(y.pbind(e,r,n),0),n.onDone&&n.onDone()},j=P?{marginTop:_?0:-w}:{marginRight:_?-A:0};I?(Object(o.getStyle)(T,"width"),Object(o.addClass)(T,"counter_css_anim_wrap"),k!==A&&Object(o.setStyle)(T,{width:_?k:A}),P&&Object(o.setStyle)(S,j),setTimeout(x,300),n.fadeMode&&(Object(o.setStyle)(Object(o.geByClass1)("counter_anim_big",e),"opacity",1),Object(o.setStyle)(Object(o.geByClass1)("counter_anim_small",e),"opacity",0))):(k!==A&&a(T,{width:_?k:A},{duration:100}),P?a(S,j,{duration:300,transition:l.Transitions.easeOutCirc,onComplete:x}):setTimeout(x,300))}}else Object(o.val)(e,t||"")}},"821F":function(e,t,n){"use strict";n.r(t),n.d(t,"MoneyTransfer",(function(){return C}));n("91GP"),n("rGqo"),n("rE2o"),n("ioFf"),n("HEwt"),n("a1Th"),n("Btvt"),n("pIFo"),n("SRfc");var r=n("v+DW"),o=n("EasH"),i=n("zxIV"),a=n("ryw6"),s=n("aong"),c=n("t7n3"),u=n("98sY"),l=n("XzvV"),d=n("36Mz"),_=n("4+be"),p=n("wZQE"),h=n("XHRy"),f=n("ldAL"),m=n("MJEz"),g=n("FWc3");function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){if(e){if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(e,t):void 0}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var w=1,O=2,C={initHandlers(){Object(m.tq)().setInteractiveHandler("MoneyTransfer/receive_method_change",e=>{var t=e.payload.event.target;if(!hasClass(t,"disabled")){var n=e.payload.dataAttrs,r=n.value,o=n.name;C.onReceiveMethodChange(t,r,o)}}),Object(m.tq)().setInteractiveHandler("MoneyTransfer/in_chat_focus_amount",()=>{Object(i.elfocus)("transfer_amount")}),Object(m.tq)().setInteractiveHandler("MoneyTransfer/check_user_message",()=>{C.checkUserMessage()}),Object(m.tq)().setInteractiveHandler("MoneyTransfer/show_hint",e=>{Object(g.showHint)(e.payload.event.target)}),Object(m.tq)().setInteractiveHandler("MoneyTransfer/send",e=>{C.send(Boolean(e.payload.dataAttrs.newWindow))}),Object(m.tq)().setInteractiveHandler("MoneyTransfer/check_participate",e=>{Object(r.checkbox)(e.payload.event.target),C.checkRequestParticipate()}),Object(m.tq)().setInteractiveHandler("MoneyTransfer/check",e=>{Object(r.checkbox)(e.payload.event.target)}),Object(m.tq)().setInteractiveHandler("MoneyTransfer/check_auto_accept",e=>{Object(r.checkbox)(e.payload.event.target),C.checkAutoAccept()}),Object(m.tq)().setInteractiveHandler("MoneyTransfer/about",e=>{C.aboutBox(e.payload.dataAttrs.aboutKey)}),Object(m.tq)().setInteractiveHandler("MoneyTransfer/history",()=>{C.historyBox()}),Object(m.tq)().setInteractiveHandler("MoneyTransfer/hide_pin_box",()=>{C.hidePinBox()}),Object(m.tq)().setInteractiveHandler("MoneyTransfer/clean_amount",e=>{C.cleanAmount(e.payload.event.target,e.payload.event,Boolean(e.payload.dataAttrs.onlyClean))}),Object(m.tq)().setInteractiveHandler("MoneyTransfer/send_amount_on_enter",e=>{13===e.payload.event.keyCode&&C.send(),C.autosizeAmount()}),Object(m.tq)().setInteractiveHandler("MoneyTransfer/focus_from_to",e=>{Object(i.elfocus)(e.payload.event,0,1e4)}),Object(m.tq)().setInteractiveHandler("MoneyTransfer/focus_and_hide_link",e=>{Object(i.elfocus)(e.payload.event,0,1e4),C.hideLinkCopied()}),Object(m.tq)().setInteractiveHandler("MoneyTransfer/copy_link",e=>{C.copyLinkToClipboard(ge(e.payload.dataAttrs.element))}),Object(m.tq)().setInteractiveHandler("MoneyTransfer/share_qr",()=>{C.shareQRCode()}),Object(m.tq)().setInteractiveHandler("MoneyTransfer/download_qr",()=>{C.downloadQRCode()}),Object(m.tq)().setInteractiveHandler("MoneyTransfer/switch_to_transfer_box",e=>{C.switchBoxSection(e.payload.event.target,"transfer")}),Object(m.tq)().setInteractiveHandler("MoneyTransfer/switch_to_request_box",e=>{C.switchBoxSection(e.payload.event.target,"request")}),Object(m.tq)().setInteractiveHandler("MoneyTransfer/switch_to_link_box",e=>{C.switchBoxSection(e.payload.event.target,"link")})},init(){this.initHandlers();var e=curBox();if(ge("payments_box")!=geByClass1("payments_money_transfer_box",e.bodyNode)&&_message_boxes.length>1){var t=!0;_message_boxes.forEach((function(e,n){t&&ge("payments_box")==geByClass1("payments_money_transfer_box",e.bodyNode)&&(boxLayer.removeChild(gpeByClass("popup_box_container",e.bodyNode)),boxQueue._boxes.splice(n,1),delete _message_boxes[n],t=!1)}))}if(d.Settings&&d.Settings.hideMoneyLinksTooltip(),e.setOptions({grey:!0}),cur.paymentsOptions.requestId&&!cur.paymentsOptions.vkpayAvailable&&(e.changed=!0,e.setOptions({width:510}),C.send()),placeholderInit("transfer_amount"),placeholderInit("transfer_comment"),cur.paymentsOptions.isChat){if(placeholderInit("transfer_chunk_amount"),cur.autoacceptCardDD=new InlineDropdown("transfer_autoaccept_card",{items:cur.paymentsOptions.cards,selected:cur.paymentsOptions.cardSeleceted,withArrow:!0,onShow:C.enableAutoaccept,onSelect:e=>{-1==e?C.sendBind():cur.paymentsOptions.vkpayAvailable&&C.checkAmount(val("transfer_amount"))}}),cur.autoacceptCardEl=ge("transfer_autoaccept_card"),Object(i.toggleClass)("transfer_autoaccept_card","disabled",!cur.paymentsOptions.autoAcceptEnabled),cur.paymentsOptions.autoAcceptEnabled&&Object(r.checkbox)("transfer_autoaccept",!0),cur.paymentsOptions.cards.length<2){var n=Object(i.ce)("a",{id:"payments_money_transfer_new_card_lnk",innerHTML:Object(_.getLang)("payments_money_transfer_new_card")});addEvent(n,"mousedown",C.sendBind),hide(cur.autoacceptCardEl),cur.autoacceptCardEl.parentNode.appendChild(n)}}else if(ge("transfer_to")){hide("payments_money_transfer_user");var o="transfer"===cur.paymentsOptions.boxTab;cur.uiTransferTo=new Dropdown(ge("transfer_to"),cur.paymentsOptions.friends.filter((function(e){return o||!0===e[7]})),{big:!0,introText:Object(_.getLang)("votes_transfer_start_typing_recipient"),noResult:"",placeholder:Object(_.getLang)("votes_transfer_choose_recipients"),placeholderColored:!0,multiselect:!1,enableCustom:!0,autocomplete:!0,imageId:"transfer_to_photo",indexkeys:[1,4],noImageSrc:"/images/blank.gif",onChange:e=>{if(e&&-1!=e){var t=cur.uiTransferTo.val_full();cur.paymentsOptions.toId=t[0],cur.paymentsOptions.hash=t[5],val("payments_money_transfer_summary",t[6]),setTimeout(i.elfocus.pbind("transfer_amount"),100),cur.paymentsOptions.vkpayAvailable&&C.updateMethods()}}})}else ge("transfer_method")&&C.initMethods();setTimeout(i.elfocus.pbind("transfer_amount"),100),shortCurrency(),"link"===cur.paymentsOptions.boxTab&&C.genQRCode();var a=val("transfer_amount");a&&C.checkAmount(a,!1,!0),C.autosizeAmount(),C.showMoneyLinksTooltip(),cur.transferPageLoaded=!1,cur.destroy.push(C.destroy)},destroy:function(){this.stopCheckFrameLoad(),cur.uiTransferTo&&cur.uiTransferTo.destroy(cur.uiTransferTo),cur.qrFrame&&Object(i.re)(cur.qrFrame)},initMethods:function(){cur.paymentsOptions.onlyCards=!Object(i.isVisible)("payments_money_transfer_receive_methods");var e=cur.paymentsOptions.cardSelected;if([O,w].includes(parseInt(cur.paymentsOptions.forceType))){var t,n=function(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=y(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,i=!0,a=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(a)throw o}}}}(cur.paymentsOptions.cards);try{for(n.s();!(t=n.n()).done;){-1===b(t.value,1)[0]&&(e=-1)}}catch(e){n.e(e)}finally{n.f()}}(cur.uiTransferCard=new Dropdown(ge("transfer_method"),cur.paymentsOptions.cards,{big:!0,selectedItems:e,onChange:(e,t)=>{if(-2===parseInt(e)){var n=Object(i.se)(t);return nav.go(n.getAttribute("data-url")),Object(r.lockButton)("payments_money_transfer_send"),!1}C.updateTransferType(),C.updateCardFee(!0),val("transfer_amount")||setTimeout(i.elfocus.pbind("transfer_amount"),100)}}),cur.paymentsOptions.onlyCards)||geByClass1("payments_money_transfer_receive_options","payments_money_transfer_receive_methods")&&(window.radioBtns.receiveOptions={els:Array.prototype.slice.apply(Object(i.geByClass)("radiobtn"))});if(void 0!==cur.paymentsOptions.vkpayBalance&&(Object(c.each)(Object(i.geByClass)("_code","payments_money_transfer_code_wrap"),(function(){addEvent(this,"mousedown",C.onPinClick),addEvent(this,"keyup",C.onPinKeyUp),addEvent(this,"keypress",C.onPinEnter)})),C.isVKPayFillUpEnabled())){var o=C.getBindCards();o.length>0&&(cur.uiFillUpCard=new Dropdown(ge("fill_up_card"),o,{big:!0,selectedItems:cur.paymentsOptions.fillUpCardSelected}))}var a=!cur.paymentsOptions.transferType||cur.paymentsOptions.forceType;a&&C.updateTransferType(),C.updateCardFee(!a)},updateMethods:function(){var e=cur.paymentsOptions.toId;if(e&&cur.paymentsOptions.vkpayAvailable){var t=ge("payments_money_transfer_send");val("payments_box_error",""),cur.moneyTranferMethodsReq&&(cur.moneyTranferMethodsReq.abort(),cur.moneyTranferMethodsReq=null),cur.moneyTranferMethodsReq=ajax.post("al_payments.php?act=a_get_money_transfer_methods",{to_id:e},{onDone:(e,n)=>{Object(r.unlockButton)(t),val("payments_money_transfer_methods",e),cur.paymentsOptions=extend(cur.paymentsOptions,n),cur.paymentsOptions.transferType=n.transferType,C.initMethods()},onFail:e=>(e&&isString(e)&&(Object(r.unlockButton)(t),C.showError(e)),!0),showProgress:r.lockButton.pbind(t)})}},send:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=curBox(),o=ge("payments_money_transfer_send");if(!Object(r.isButtonLocked)(o))if(cur.paymentsOptions.toId||!cur.uiTransferTo){var a=0;if(!Object(i.isVisible)("payments_money_transfer_no_amount_wrap")){if(!(a=val("transfer_amount"))||a<=0)return Object(i.addClass)("payments_money_transfer_amount_wrap","money_error"),setTimeout(i.removeClass.pbind("payments_money_transfer_amount_wrap","money_error"),500),void Object(i.elfocus)("transfer_amount");if(!C.checkAmount(a,!0))return;if(Object(r.isChecked)("transfer_participate")){var s=C.getChunkAmount(a,!0);a-=s}}if(C.hideMoneyLinksTooltip(),cur.paymentsOptions.onSendStart&&cur.paymentsOptions.onSendStart(),"request"!==cur.paymentsOptions.boxTab){C.createFrame();var c={act:"a_init_money_transfer",to_id:cur.paymentsOptions.toId,owner_id:cur.paymentsOptions.ownerId,amount:a,currency:cur.paymentsOptions.currency,comment:val("transfer_comment"),from:cur.paymentsOptions.from,hash:cur.paymentsOptions.hash};if(cur.paymentsOptions.vkpayAvailable&&(c.card_id=cur.uiTransferCard.val(),cur.paymentsOptions.onlyCards||(c.receive_method=radioval("receiveOptions")),"-1"===c.card_id)){if(!t)return void C.showPinBox();c.vkpay_pin=t}if(C.isVKPayTransfer()&&C.isVKPayFillUpEnabled()&&C.isFillUpCardSelectionVisible()&&(c.fill_up_card_id=cur.uiFillUpCard.val()),cur.paymentsOptions.requestId&&(c.request_id=cur.paymentsOptions.requestId),cur.paymentsOptions.statSessionId&&(c.stat_session_id=cur.paymentsOptions.statSessionId),val("payments_box_error",""),e||!localStorage||this.isVKPayTransfer()||"vkpay"===c.receive_method||(e=localStorage.getItem("money_transfer_new_window")),e){cur.paymentsOptions.qid&&(c.act="a_continue_money_transfer",c.qid=cur.paymentsOptions.qid),cur.transferWindow=window.open("","Money Transfer");var u=h.PaymentsBox.popupHtml(Object(_.getLang)("payments_cards_redirect"),"");cur.transferWindow.document.write(u)}ajax.post("al_payments.php",c,{onDone:(t,o)=>{var a;if(o)if(cur.paymentsOptions.qid=t.qid,e)if(cur.transferWindow){var s=cur.transferWindow.document.getElementById("wait_text_container");s&&(s.innerHTML=""),cur.transferWindow.document.write(o),window.addEventListener("message",C.frameMessage,!1),hide("payments_money_transfer_wrap","payments_money_transfer_buttons","payments_box_error","payments_iframe_safari_trouble_div","payments_iframe_container"),val("payments_transfer_box_progress_msg",Object(_.getLang)("payments_waiting_transfer_complete")),show("payments_money_transfer_iframe","payments_money_transfer_prg")}else C.showError(Object(_.getLang)("payments_payment_cancelled"),"info_msg");else cur._popup_text=o,cur._popup_callback=function(){hide("payments_money_transfer_wrap","payments_money_transfer_buttons","payments_box_error","payments_money_transfer_prg","payments_iframe_cookie_disabled_div"),show("payments_money_transfer_iframe","payments_iframe_container"),cur.uiTransferTo&&(hide("payments_money_transfer_user_select"),show("payments_money_transfer_user")),ge("payments_iframe_container").scrollTop=0,window.addEventListener("message",C.frameMessage,!1),n.changed=!0,n.setOptions({width:510}),!cur.paymentsOptions.requestId&&Object(i.isVisible)(n.titleWrap)&&n.setBackTitle(C.resetSendBox),setStyle(a,{width:ge("payments_iframe_container").parentNode.offsetWidth-Object(r.sbWidth)()+"px"})},(a=ge("transfer_iframe")).contentWindow.document.open("text/html","replace"),a.contentWindow.document.write(o),a.contentWindow.document.close(),cur._popup_callback(),C.startCheckFrameLoad(+new Date);else hide("payments_money_transfer_wrap","payments_money_transfer_buttons","payments_box_error","payments_iframe_container",geByClass1("payments_money_transfer_mc_info_msg","payments_money_transfer_iframe")),cur.uiTransferTo&&(hide("payments_money_transfer_user_select"),show("payments_money_transfer_user")),show("payments_money_transfer_iframe","payments_money_transfer_prg");C.startCheckStatus(t)},onFail:e=>(C.resetTransferWindow(),C.showError(e),!0),showProgress:r.lockButton.pbind(o),hideProgress:r.unlockButton.pbind(o)})}else C.sendRequest(a)}else Object(r.notaBene)(cur.uiTransferTo.container)},sendRequest:function(e){var t=ge("payments_money_transfer_send"),n={to_id:cur.paymentsOptions.toId,owner_id:cur.paymentsOptions.ownerId,amount:e,currency:cur.paymentsOptions.currency,comment:val("transfer_comment"),from:cur.paymentsOptions.from,hash:cur.paymentsOptions.hash};if(cur.paymentsOptions.statSessionId&&(n.stat_session_id=cur.paymentsOptions.statSessionId),cur.paymentsOptions.isChat){if(n.total_amount=parseInt(e),n.amount=parseInt(val("transfer_chunk_amount")),n.pin_message=Object(r.isChecked)("transfer_pin_message")?1:0,Object(r.isChecked)("transfer_autoaccept")&&(cur.autoacceptCardDD&&(n.accept_card=cur.autoacceptCardDD.val()),!n.accept_card||-1==n.accept_card))return C.showError(Object(_.getLang)("payments_money_request_error_no_accept_card")),!1;var o=!1,i=C.getTransferLimit("minAmount"),a=C.getTransferLimit("maxAmount");if(i&&n.amount<i?o=Object(_.getLang)("payments_money_request_error_min_chunk_amount_currency"):a&&n.amount>a?o=Object(_.getLang)("payments_money_request_error_max_chunk_amount_currency"):n.total_amount&&n.amount>n.total_amount&&(o=Object(_.getLang)("payments_money_request_error_chunk_amount_too_big")),o)return C.showError(o),Object(r.notaBene)("transfer_chunk_amount"),!1}val("payments_box_error",""),ajax.post("al_payments.php?act=a_send_money_request",n,{onDone:e=>{curBox().hide(),showDoneBox(e,{out:6e3})},onFail:e=>(C.showError(e),!0),showProgress:r.lockButton.pbind(t),hideProgress:r.unlockButton.pbind(t)})},sendBind:function(){var e=curBox();C.createFrame(),hide("payments_money_transfer_wrap","payments_money_transfer_buttons","payments_box_error","payments_money_transfer_summary_wrap","payments_iframe_container",geByClass1("msg","payments_money_transfer_iframe"),geByClass1("tb_tabs_wrap",e.bodyNode)),show("payments_money_transfer_iframe","payments_money_transfer_prg"),e.setBackTitle(C.resetSendBox),e.setOptions({width:510});var t={type:"card",only_auth:1,hash:cur.paymentsOptions.bindHash};val("payments_box_error",""),ajax.post("al_payments.php?act=a_getvotes_charge",t,{onDone:(t,n)=>{var o;cur._popup_text=n,cur._popup_callback=function(){hide("payments_money_transfer_prg"),show("payments_iframe_container"),ge("payments_iframe_container").scrollTop=0,window.addEventListener("message",C.frameMessage,!1),cur.autoacceptCardDD&&Object(i.isVisible)(cur.autoacceptCardEl)&&cur.autoacceptCardDD.select(cur.paymentsOptions.cards[0][0]),e.changed=!0,setStyle(o,{width:ge("payments_iframe_container").parentNode.offsetWidth-Object(r.sbWidth)()+"px"})},(o=ge("transfer_iframe")).contentWindow.document.open("text/html","replace"),o.contentWindow.document.write(n),o.contentWindow.document.close(),cur._popup_callback(),cur.isPaymentCanceled=cur.isPaymentFailed=!1,cur.moneyTranferCheckInt=setInterval((function(){C.checkBindStatus(t),(cur.isPaymentCanceled||cur.isPaymentFailed)&&(clearInterval(cur.moneyTranferCheckInt),cur.isPaymentFailed?C.showError(Object(_.getLang)("payments_landing_cancelled")):C.showError(Object(_.getLang)("payments_payment_cancelled"),"info_msg"))}),2e3)},onFail:e=>(C.showError(e),!0)})},createFrame:function(){var e=ge("payments_iframe_container"),t=Object(i.ce)("iframe",{id:"transfer_iframe",name:"transfer_iframe"},{border:0,height:"445px",width:510-Object(r.sbWidth)()+"px",overflowX:"hidden",overflowY:"hidden"});t.frameBorder=0,e.innerHTML="",e.appendChild(t)},popupWrite:function(e){if(e.document.innerHTML!==cur._popup_text){e.document.write(cur._popup_text),e.document.close();try{e.document.charset="windows-1251"}catch(e){}e.blur(),e.focus(),cur._popup_callback&&cur._popup_callback()}},resetSendBox:function(){var e=curBox();if(e){var t=geByClass1("tb_tabs_wrap",e.bodyNode);hide("payments_money_transfer_iframe"),show("payments_money_transfer_wrap","payments_money_transfer_buttons","payments_money_transfer_summary_wrap",t,geByClass1("payments_money_transfer_mc_info_msg","payments_money_transfer_iframe")),cur.uiTransferTo&&(hide("payments_money_transfer_user"),show("payments_money_transfer_user_select")),t&&e.setOptions({title:""}),e.changed=!1,e.setOptions({width:510}),Object(i.isVisible)(e.titleWrap)&&e.setBackTitle(!1)}},resetTransferWindow:function(){cur.transferWindow&&(show("payments_money_transfer_wrap","payments_money_transfer_buttons"),hide("payments_money_transfer_prg","payments_money_transfer_iframe"),cur.transferWindow.location=window.location,cur.transferWindow.close()),cur.transferWindow=void 0},startCheckStatus:function(e){cur.isPaymentCanceled=cur.isPaymentFailed=!1,cur.moneyTransferRedirected=!1,cur.moneyTranferCheckInt&&clearInterval(cur.moneyTranferCheckInt),cur.moneyTranferCheckInt=setInterval((function(){if(C.checkStatus(e),cur.isPaymentCanceled||cur.isPaymentFailed){var t=C.resetTransferWindow();if(t&&t(),clearInterval(cur.moneyTranferCheckInt),e.accept)return void curBox().hide();cur.isPaymentFailed?C.showError(Object(_.getLang)("payments_landing_cancelled")):C.showError(Object(_.getLang)("payments_payment_cancelled"),"info_msg")}}),2e3)},hideBoxQueue:function(){for(;boxQueue.count();)boxQueue.hideLast(!1)},checkStatus:function(e){var t={act:"a_check_money_transfer",qid:e.qid,hash:e.hash};e.accept&&(t.accept=e.accept),ajax.post("al_payments.php",t,{onDone:(t,n,a,s)=>{if(t&&(4!=t||!cur.moneyTransferRedirected)){if(1==t||3==t){0===cur.paymentsOptions.transferType?cur.transferWindow&&!cur.transferWindow.closed&&C.hideBoxQueue():(C.resetTransferWindow(),C.hideBoxQueue()),s||showDoneBox(n,{out:6e3});var c=nav.objLoc;e.accept||"settings"!==c[0]||"payments"!==c.act||"transfer"!==c.section||(cur.historyOffset||(cur.historyOffset={}),cur.historyOffset.transfer=0,d.Settings.showNextPaymentsHistory(!1,c.section)),3==t&&(s&&s.title&&Object(o.showFastBox)({title:s.title},n,Object(_.getLang)("payments_remember_card_btn"),C.rememberAcceptCard.pbind(s),Object(_.getLang)("payments_dont_remember_card_btn")),TopNotifier.invalidate(),cur.acceptMoneyBtn&&hasClass(Object(i.domPN)(cur.acceptMoneyBtn),"feedback_buttons")?(Object(i.re)(Object(i.domPN)(cur.acceptMoneyBtn)),cur.acceptMoneyBtn=!1):cur.acceptMoneyBtn&&(Object(i.re)(geByClass1("_decline_btn",Object(i.domPN)(cur.acceptMoneyBtn))),domReplaceEl(cur.acceptMoneyBtn,a),cur.acceptMoneyBtn=!1))}else if(2==t||5==t)C.showError(n),window.removeEventListener("message",C.frameMessage,!1),cur.isPaymentFailed=cur.isPaymentCanceled=!1;else{var u;if(4==t)return cur.moneyTransferRedirected=!0,cur._popup_text=a,cur._popup_callback=function(){hide("payments_money_transfer_prg"),show("payments_iframe_container"),ge("payments_iframe_container").scrollTop=0,window.addEventListener("message",C.frameMessage,!1),curBox().changed=!0,setStyle(u,{width:ge("payments_iframe_container").parentNode.offsetWidth-Object(r.sbWidth)()+"px"})},(u=ge("transfer_iframe")).contentWindow.document.open("text/html","replace"),u.contentWindow.document.write(a),u.contentWindow.document.close(),void cur._popup_callback();if(6==t)return void(Object(i.isVisible)("payments_money_transfer_prg")||(hide("payments_iframe_container"),show("payments_money_transfer_iframe","payments_money_transfer_prg")))}clearInterval(cur.moneyTranferCheckInt)}},onFail:e=>(clearInterval(cur.moneyTranferCheckInt),C.resetTransferWindow()(),C.showError(e),!0)})},checkBindStatus:function(e){var t={act:"a_getvotes_check",type:"card"};e&&(e.oid||e.qid)&&(t.oid=e.oid,t.qid=e.qid,t.hash=e.hash),ajax.post("al_payments.php",t,{onDone:(e,t,n)=>{e&&(1==e?(C.resetSendBox(),C.enableAutoaccept(),n&&cur.autoacceptCardDD&&(Object(i.isVisible)(cur.autoacceptCardEl)||(hide(geByTag("A",cur.autoacceptCardEl.parentNode)[0]),show(cur.autoacceptCardEl)),cur.paymentsOptions.cards.unshift([n.bindingId,n.bin]),cur.autoacceptCardDD.setItems(cur.paymentsOptions.cards),cur.autoacceptCardDD.select(n.bindingId))):2!=e&&10!=e||C.showError(t),clearInterval(cur.moneyTranferCheckInt))},onFail:e=>(clearInterval(cur.moneyTranferCheckInt),C.showError(e),!0)})},paymentCanceled:function(e){e?cur.isPaymentFailed=!0:cur.isPaymentCanceled=!0,C.frameHeight()},frameHeight:function(e,t){var n=ge("transfer_iframe");e?(e=Math.max(e,250),cur.prevFrameHeight=n.style.height,n.style.height=e+"px"):(n.style.height=cur.prevFrameHeight,Object(i.removeClass)("payments_iframe_container","payments_threeds_frame")),t||(ge("payments_iframe_container").style.height=(e||cur.prevFrameHeight)+15+"px"),ge("payments_iframe_container").scrollTop=0},frameMessage:function(e){if(!e.origin.match(/^https?:\/\/([a-zA-Z0-9\-\.]+\.)?money\.mail\.ru$/))return!1;var t={};if(!e.data||"{"!==e.data.substr(0,1)||"billing"===(t=Object(s.parseJSON)(e.data)).type){vk.dev&&Object(u.debugLog)(t);var n=geByClass1("payments_iframe_container",curBox().bodyNode)||ge("payments_iframe_container");cur.transferPageLoaded=!0,"resizeFrame"===t.action?setTimeout(C.frameHeight.pbind(t.action_params.height),200):"submit"===e.data||"3dsPage"===t.action?(setTimeout(C.frameHeight.pbind(600,!0),200),Object(i.addClass)(n,"payments_threeds_frame")):"3dsFinish"===t.action?(C.frameHeight(),Object(i.removeClass)(n,"payments_threeds_frame")):"session_fail"===t.action?(hide(n),C.resetTransferWindow(),show("payments_iframe_safari_trouble_div"),window.localStorage&&localStorage.setItem("money_transfer_new_window",1)):"putPixel"===t.action&&"page_load"===t.action_params.alias?(h.PaymentsBox.finishFormMeasure("dmr_transfer"),Object(l.statlogsValueEvent)("money_transfers",0,"iframe_loaded")):"paySuccess"===t.action&&setTimeout(C.frameHeight.pbind(500),300)}},startCheckFrameLoad:function(e){cur.frameLoadChecker=setInterval((function(){cur.transferPageLoaded?C.stopCheckFrameLoad():+new Date-e>5e3&&(C.stopCheckFrameLoad(),C.resetTransferWindow(),hide("payments_iframe_container"),show("payments_iframe_safari_trouble_div"),window.localStorage&&localStorage.setItem("money_transfer_new_window",1))}),1e3)},stopCheckFrameLoad:function(){clearInterval(cur.frameLoadChecker)},initAccept:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(n)cur.transferWindow=window.open("/","Money transfer"),cur.transferWindow.document.write(t),hide("payments_box_error","payments_iframe_container","payments_iframe_safari_trouble_div","payments_iframe_container"),val("payments_transfer_box_progress_msg",Object(_.getLang)("payments_waiting_transfer_complete")),show("payments_money_transfer_iframe","payments_money_transfer_prg");else{var r=geByClass1("payments_iframe_container",curBox().bodyNode)||ge("payments_iframe_container");show(r);var o=Object(i.ce)("iframe",{id:"transfer_iframe",name:"transfer_iframe"},{border:0,height:"445px",width:"510px",overflowX:"hidden",overflowY:"hidden"});o.frameBorder=0,r.innerHTML="",r.appendChild(o),o.contentWindow.document.open("text/html","replace"),o.contentWindow.document.write(t),o.contentWindow.document.close(),C.startCheckFrameLoad(+new Date)}window.addEventListener("message",C.frameMessage,!1),C.startCheckStatus(e)},rememberAcceptCard:function(e){var t=curBox()||{},n=t.btns.ok[0];ajax.post("al_payments.php?act=a_remember_money_transfer_accept_card",{card_id:e.card_id,hash:e.hash},{onDone:t.hide,showProgress:r.lockButton.pbind(n),hideProgress:r.unlockButton.pbind(n)})},cleanAmount:function(e,t,n){if(13!==t.keyCode){var r=e.value.replace(/[^0-9]/g,"");r=r.replace(/^0+/,""),e.value!=r&&(e.value=r),n||(C.checkAmount(r),C.autosizeAmount(),C.updateCardFee(!0))}},getTransferLimit:function(e){var t="request"===cur.paymentsOptions.boxTab?0:cur.paymentsOptions.transferType;return"balance"===e&&parseInt(t)===O?cur.paymentsOptions.vkpayBalance:(cur.paymentsOptions.isChat&&"request"===cur.paymentsOptions.boxTab&&"maxAmount"===e&&cur.autoacceptCardDD&&-2===cur.autoacceptCardDD.val()&&(t=2),cur.paymentsOptions.limits[t][e])},checkAmount:function(e,t,n){var a,s=!1,c=hasClass("payments_money_transfer_amount_wrap","money_error"),u=-1===parseInt(null===(a=cur.uiTransferCard)||void 0===a?void 0:a.val()),l=C.isVKPayTransfer(),d=C.isVKPayFillUpEnabled();if(t&&c)return l&&e>C.getTransferLimit("balance")&&!d&&Object(o.showFastBox)({title:Object(_.getLang)("payments_vkpay_low_balance_title"),width:420},Object(_.getLang)("payments_vkpay_low_balance_text"),Object(_.getLang)("payments_vkpay_topup_button"),nav.go.pbind("/vkpay#action=refill"),Object(_.getLang)("global_close")),!1;var p=cur.paymentsOptions.isChat&&"request"===cur.paymentsOptions.boxTab,h=p&&Object(r.isChecked)("transfer_participate"),f=C.getTransferLimit("minAmount")*(h?2:1),m=C.getTransferLimit("maxAmount"),g=C.getTransferLimit("balance"),v=langNumeric(f,cur.paymentsOptions.currencyStr,!0),b=Object(_.getLang)("payments_money_transfer_amount_limits").replace("{min_amount}",v),y=!p;if(p&&cur.autoacceptCardDD&&-2===cur.autoacceptCardDD.val()&&(y=!0),u&&l&&d&&!(void 0!==g&&e<=g)||C.hideFillUpCardSelection(),t&&f&&e<f)s=Object(_.getLang)("payments_money_transfer_error_min_amount_currency").replace("{min_amount}",v);else if(m&&y&&e>m){var E=langNumeric(m,cur.paymentsOptions.currencyStr,!0);s=Object(_.getLang)("payments_money_transfer_error_max_amount_currency").replace("{max_amount}",E)}else if(u&&void 0!==g&&e>g){if(l&&d)C.getBindCards().length>0?C.showFillUpCardSelection():s=Object(_.getLang)("payments_money_transfer_low_balance");else s=Object(_.getLang)("payments_money_transfer_low_balance")}var w=ge("payments_money_transfer_notice");if(0!=s)return val(w,s),Object(i.addClass)("payments_money_transfer_amount_wrap","money_error"),!1;if((c||n||e<f)&&((e<f||"request"===cur.paymentsOptions.boxTab)&&val(w,b),Object(i.removeClass)("payments_money_transfer_amount_wrap","money_error")),!t&&p){var O=C.getChunkAmount(e,h);if(val("transfer_chunk_amount",O),f&&e<f)val(w,b);else{var T=langNumeric(h?e-O:e,cur.paymentsOptions.currencyStr,!0);val(w,Object(_.getLang)("payments_money_transfer_will_be_requested").replace("{amount}",T))}}return!0},getChunkAmount:function(e,t){var n=C.getTransferLimit("minAmount"),r=C.getTransferLimit("maxAmount"),o=Math.max(n||100,Math.ceil(e/Math.max(1,cur.paymentsOptions.chatCount-(t?0:1))));return r&&(o=Math.min(o,r)),o},autosizeAmount:function(){var e=ge("transfer_amount"),t=Object(i.ce)("span",{innerHTML:e.value||"0"},{fontFamily:getStyle(e,"fontFamily"),fontSize:getStyle(e,"fontSize"),fontWeight:getStyle(e,"fontWeight")});ge("utils").appendChild(t);var n=Math.floor(getSize(t)[0])+50;Object(i.re)(t),cur.amountMinSize||(cur.amountMinSize=80),n<cur.amountMinSize&&(n=cur.amountMinSize),setStyle(e,{width:n})},checkUserMessage:function(){checkTextLength(cur.paymentsOptions.maxTextLength,ge("transfer_comment"),ge("transfer_comment_limit_message"),!1,!0),(val("transfer_comment_limit_message")&&Object(i.isVisible)("transfer_comment_limit_message")?hide:show)("payments_money_transfer_fee_link")},checkRequestParticipate:function(){C.checkAmount(val("transfer_amount"))},checkRequestNoAmount:function(e,t){e&&uiTabs.switchTab(e),t?(hide("payments_money_transfer_amount_wrap","transfer_participate"),show("payments_money_transfer_no_amount_wrap")):(hide("payments_money_transfer_no_amount_wrap"),show("payments_money_transfer_amount_wrap","transfer_participate"),Object(i.elfocus)("transfer_amount"))},checkAutoAccept:function(){Object(i.toggleClass)("transfer_autoaccept_card","disabled",!Object(r.isChecked)("transfer_autoaccept"))},enableAutoaccept:function(){Object(r.isChecked)("transfer_autoaccept")||(Object(r.checkbox)("transfer_autoaccept",!0),Object(i.removeClass)("transfer_autoaccept_card","disabled"))},showMoneyTransferBox(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return showBox("al_payments.php",v({},e,{act:"money_transfer_box"}),v({},t,{onDone(e,t){null==r||r(),cur.paymentsOptions=t,e.setOptions({width:510,bodyStyle:"padding: 0;",hideButtons:!0,onClean(){cur.moneyTranferCheckInt&&clearInterval(cur.moneyTranferCheckInt),nav.objLoc.z&&"moneysend"===nav.objLoc.z.substr(0,9)&&(delete nav.objLoc.z,nav.setLoc(nav.objLoc))}}),C.init()},onFail:n}))},aboutBox:function(e){return!Object(o.showFastBox)({title:Object(_.getLang)("payments_money_transfer_about_title"),width:560},Object(_.getLang)(e))},showError:function(e,t){e&&(ge("payments_box_error").innerHTML="",Object(a.showMsg)("payments_box_error",e,t||"error"),show("payments_box_error")),ge("payments_money_transfer_wrap")&&(C.resetSendBox(),cur.moneyTranferCheckInt&&(clearInterval(cur.moneyTranferCheckInt),cur.moneyTranferCheckInt=!1))},switchBoxSection:function(e,t){cur.paymentsOptions.boxTab!==t&&(e&&uiTabs.switchTab(e),"transfer"===cur.paymentsOptions.boxTab&&Object(i.isVisible)("payments_money_transfer_iframe")&&(C.resetSendBox(),cur.moneyTranferCheckInt&&(clearInterval(cur.moneyTranferCheckInt),cur.moneyTranferCheckInt=!1)),"transfer"===cur.paymentsOptions.boxTab&&cur.paymentsMoneyBoxTTHide&&cur.paymentsMoneyBoxTTHide(),"link"===cur.paymentsOptions.boxTab&&(hide("payments_money_link_box"),show("payments_money_transfer_request_box"),C.hideMoneyLinksTooltip()),cur.paymentsOptions.boxTab=t,"link"===t?(hide("payments_money_transfer_request_box"),show("payments_money_link_box"),C.hideMoneyLinksTooltip(),C.genQRCode(),C.showMoneyLinksTooltip()):(val("payments_money_transfer_summary",cur.paymentsOptions.boxSections[t].summary),val("payments_money_transfer_send",cur.paymentsOptions.boxSections[t].btn),val("payments_money_transfer_user_select_label",cur.paymentsOptions.boxSections[t].user_select_label),C.checkAmount(val("transfer_amount"),!1,!0),"transfer"===t&&C.updateCardFee(!0)),toggle("payments_money_transfer_nf_warning","transfer"===t),toggle("payments_money_transfer_methods","transfer"===t),C.renderSelectBox(),setTimeout(i.elfocus.pbind("transfer_amount"),100))},genQRCode:function(){var e=ge("payments_money_transfer_qr");if(!e.childNodes.length){val(e,p.createQR(cur.paymentsOptions.transferLink,115,"qr-code",{isShowLogo:!0,isShowBackground:!1}))}},shareQRCode:function(){C.hideMoneyLinksTooltip(!0),showBox("like.php",{act:"publish_box",object:"moneysend"+vk.id+"_0",list:""})},downloadQRCode:function(){if(!cur.paymentsOptions.qrUrl)return!1;var e=Object(i.ce)("iframe",{src:cur.paymentsOptions.qrUrl});return utilsNode.appendChild(e),cur.qrFrame&&Object(i.re)(cur.qrFrame),cur.qrFrame=e,!1},hideLinkCopied(){Object(c.each)(Object(i.geByClass)("_link_copied","payments_money_link_box"),hide.pbind(this))},copyLinkToClipboard:function(e){C.hideLinkCopied(),C.hideMoneyLinksTooltip(!0),e.select(),document.execCommand("copy");var t=geByClass1("_link_copied",gpeByClass("_link_wrap",e));show(t)},renderSelectBox:function(){if(cur.uiTransferTo){var e="transfer"===cur.paymentsOptions.boxTab;cur.uiTransferTo.setData([]),cur.uiTransferTo.setOptions({autocomplete:!1}),cur.uiTransferTo.setData(cur.paymentsOptions.friends.filter((function(t){return e||!0===t[7]}))),cur.uiTransferTo.setOptions({autocomplete:!0}),cur.paymentsOptions.toId=null,cur.paymentsOptions.hash=null,cur.uiTransferTo.clear(),cur.uiTransferTo.deselectTokens(),val("payments_money_transfer_methods","")}},updateImHistory:function(e,t,n){var r=geByClass1("_money_transfer"+t,e);if(r){var o=geByClass1("_accept_btn",r);o&&(Object(i.re)(geByClass1("_decline_btn",Object(i.domPN)(o))),domReplaceEl(o,n))}},initHistoryBox:function(e,t,n,o){var a=ge("ui_money_transfer_load_more");if(a){var s=ge("settings_transfer_history").tBodies[0];cur.userAutoScroll=new f.default(s,{offset:n,onNoMore:i.re.pbind(a),onNeedRows:(n,r)=>{var i={act:"money_transfer_history_box",offset:r,owner_id:e};t&&(i.request_id=t),o&&(i.hash=o),ajax.post("al_payments.php",i,{onDone:n})},drawRows:(e,t)=>{if(browser.msie){var n=Object(i.se)("<table>"+r+"</table>"),r=geByTag("tr",n);for(var o in r)1==r[o].nodeType&&e.appendChild(r[o])}else e.insertAdjacentHTML("beforeEnd",t)},showProgress:r.lockButton.pbind(a),hideProgress:r.unlockButton.pbind(a),rowClass:"settings_history_row"})}},historyBox:function(){showBox("al_payments.php?act=money_transfer_history_box")},showMoneyLinksTooltip:function(){var e,t,n;cur.paymentsOptions.moneylinks_feature_tooltip&&!cur.moneyLinksTooltip&&(Object(i.isVisible)("payments_money_link_box")?(e=geByClass1("payments_money_transfer_link_copy_btn","payments_money_link_box"),t=Object(_.getLang)("payments_money_link_btn_feature_text"),n={forceSide:"right",width:320,offset:[6,0]}):(e=geByClass1("ui_tab",geByClass1("_moneylink_tab","box_layer")))&&(t=Object(_.getLang)("payments_money_link_tab_feature_text"),n={forceSide:"bottom",width:250,offset:[0,4]}),e&&setTimeout((function(){cur.moneyLinksTooltip=new ElementTooltip(e,extend({content:'<div class="feature_tooltip__close" onclick="cur.moneyLinksTooltip.hide();"></div>'+t,cls:"feature_intro_tt feature_info_tooltip moneylinks_feature_tooltip",autoShow:!1,noHideOnClick:!0,noAutoHideOnWindowClick:!0,appendTo:geByClass1("ui_tabs","box_layer"),onHide:C.hideMoneyLinksTooltip.pbind(!0)},n)),cur.moneyLinksTooltip.show(),cur.destroy.push(C.hideMoneyLinksTooltip)}),500))},hideMoneyLinksTooltip:function(e){e&&ajax.post("al_index.php",{act:"hide_feature_tt",hash:cur.paymentsOptions.moneylinks_feature_tooltip_hash,type:"moneylinks"}),cur.moneyLinksTooltip&&(cur.moneyLinksTooltip.destroy(),delete cur.moneyLinksTooltip)},showPinBox(){Object(i.addClass)(curBox().bodyNode,"payments_box_code_showed"),show("payments_money_transfer_layer_bg","payments_money_transfer_code_box"),Object(c.each)(Object(i.geByClass)("_code","payments_money_transfer_code_wrap"),(function(){val(this,"")})),Object(i.elfocus)("payments_code1"),curBox().changed=!0;var e=document.getElementById("payments_money_transfer_send");e&&(e.style.pointerEvents="none",setTimeout(()=>{e.style.pointerEvents="auto"},0))},hidePinBox(){hide("payments_money_transfer_layer_bg","payments_money_transfer_code_box"),Object(i.removeClass)(curBox().bodyNode,"payments_box_code_showed"),curBox().changed=!1},onPinKeyUp(e){var t=e.target;if(8==e.keyCode){var n=domPS(t);if(n){var r=n.getAttribute("data-index");val(n,""),cur.paymentsOptions.vkpcode[r]="",cur.paymentsOptions.vkpcode[r-1]="",Object(i.elfocus)(n)}}},onPinEnter(e){var t=e.target;if(!(e.keyCode>=47&&e.keyCode<=57))return cancelEvent(e);var n=t.getAttribute("data-index");cur.paymentsOptions.vkpcode||(cur.paymentsOptions.vkpcode=[]),cur.paymentsOptions.vkpcode[n-1]=e.key,val(t,String.fromCharCode(9679));var r=domNS(t);r?setTimeout(i.elfocus.pbind(r),10):setTimeout((function(){t.blur(),C.checkPin()}),10)},onPinClick(e){var t=e.target,n=domPS(t);if(n&&!val(n))return cancelEvent(e)},checkPin(){var e=cur.paymentsOptions.vkpcode.join("");delete cur.paymentsOptions.vkpcode,val("payments_money_transfer_code_error",""),ajax.post("al_payments.php?act=a_check_vkpay_pin",{code:e,hash:cur.paymentsOptions.pinHash},{onDone:t=>{if(1==t)return hide(geByClass1("_code_enter","payments_money_transfer_code_box")),void show(geByClass1("_code_recover","payments_money_transfer_code_box"));C.hidePinBox(),C.send(!1,e)},onFail:e=>(e&&val("payments_money_transfer_code_error",e),Object(c.each)(Object(i.geByClass)("_code","payments_money_transfer_code_wrap"),(function(){val(this,""),Object(r.notaBene)(this)})),Object(i.elfocus)("payments_code1"),!0),showProgress:function(){hide("payments_money_transfer_code_wrap"),show("payments_money_transfer_spinner")},hideProgress:function(){hide("payments_money_transfer_spinner"),show("payments_money_transfer_code_wrap")}})},onReceiveMethodChange:function(e,t,n){Object(r.radiobtn)(e,t,n),C.updateTransferType(e),C.updateCardFee(!0)},updateTransferType:function(e){void 0!==cur.paymentsOptions.forceType?cur.paymentsOptions.transferType=cur.paymentsOptions.forceType:-1===parseInt(cur.uiTransferCard.val())?cur.paymentsOptions.transferType=O:cur.paymentsOptions.onlyCards?cur.paymentsOptions.transferType=0:(void 0===e&&Object(c.each)(radioBtns.receiveOptions.els,(function(){hasClass(this,"on")&&(e=this)})),void 0!==e&&(cur.paymentsOptions.transferType=intval(attr(e,"data-type")))),C.checkAmount(val("transfer_amount"),!1,!0)},updateCardFee:function(e){if(cur.uiTransferCard&&"request"!==cur.paymentsOptions.boxTab){var t=intval(val("transfer_amount")),n=C.getTransferLimit("minAmount"),r=ge("payments_money_transfer_to_card"),o=cur.uiTransferCard.val(),a=cur.paymentsOptions.cardsFee[o],s=0===cur.paymentsOptions.transferType,c=-1===parseInt(o)||cur.paymentsOptions.forceType===w||cur.paymentsOptions.forceType===O,u=-1!==parseInt(o)&&!cur.paymentsOptions.receiverVkpay||0===cur.paymentsOptions.forceType,l=Object(_.getLang)("payments_transfer_without_fee"),d=Object(_.getLang)("payments_money_transfer_btn"),p=c?"payments_money_transfer_to_vkpay":"payments_money_transfer_to_card",h=u,f=0;if(Object(i.toggleClass)(r,"disabled",c),Object(i.toggleClass)("payments_money_transfer_to_vkpay","disabled",u),0===parseInt(o))s&&(l=cur.paymentsOptions.mastercardPromoEnabled?Object(_.getLang)("payments_transfer_method_without_fee_for_mastercard"):Object(_.getLang)("payments_money_transfer_commission_undefined"));else if(-1===parseInt(o))h=!0;else if(s&&a&&(a.percent||a.vkPay&&a.vkPay.percent)){var m=a.free_amount_rest||0,g=a.free_amount_min||0;if(!m||t>m||g&&t<g){var v=t;t>m&&(v=t-m,p="payments_money_transfer_to_vkpay");var b=a.percent||0,y=a.min||0,E=a.add||0;(f=v*b)<y?f=y:f+=E,f=+(Math.round(f+"e+2")+"e-2"),l=langNumeric(f,cur.paymentsOptions.cardsFeeStr,!0)}if(a.vkPay){var T=t+f,S=a.vkPay.percent||0,D=a.vkPay.min||0,P=a.vkPay.add||0,k=T*S;k<D?k=D:k+=P,f=+(Math.round(f+k+"e+2")+"e-2"),k=+(Math.round(k+"e+2")+"e-2"),l=langNumeric(f,cur.paymentsOptions.cardsFeeStr,!0),l+=langNumeric(k,cur.paymentsOptions.cardsFeeVkPayStr,!0)}}!p||e&&!h||ge(p).classList.contains("on")||ge(p).click(),t>=n&&!hasClass("payments_money_transfer_amount_wrap","money_error")&&(val("payments_money_transfer_notice",l),0===parseInt(o)&&s||(d=langNumeric(+(Math.round(t+f+"e+2")+"e-2"),cur.paymentsOptions.buttonAmountStr,!0))),val("payments_money_transfer_send",d)}},isVKPayFillUpEnabled:function(){return 1==cur.paymentsOptions.vkpayFillUpEnabled},isVKPayTransfer:function(){return parseInt(cur.paymentsOptions.transferType)===O},getBindCards:function(){return cur.paymentsOptions.cards.filter(e=>{var t=parseInt(e[0]);return 0!==t&&-1!==t})},hideFillUpCardSelection:function(){hide("payments_money_transfer_fill_up_cards")},showFillUpCardSelection:function(){show("payments_money_transfer_fill_up_cards")},isFillUpCardSelectionVisible:function(){return Object(i.isVisible)("payments_money_transfer_fill_up_cards")}}},"8D0k":function(e,t,n){"use strict";var r=n("KCt4");function o(e,t,n,o,i){var a=r.writeRtpDescription(e.kind,t);if(a+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),a+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":i||"active"),a+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?a+="a=sendrecv\r\n":e.rtpSender?a+="a=sendonly\r\n":e.rtpReceiver?a+="a=recvonly\r\n":a+="a=inactive\r\n",e.rtpSender){var s=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=s;var c="msid:"+(o?o.id:"-")+" "+s+"\r\n";a+="a="+c,a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+c,e.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+c,a+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),a}function i(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},r=function(e,t){e=parseInt(e,10);for(var n=0;n<t.length;n++)if(t[n].payloadType===e||t[n].preferredPayloadType===e)return t[n]},o=function(e,t,n,o){var i=r(e.parameters.apt,n),a=r(t.parameters.apt,o);return i&&a&&i.name.toLowerCase()===a.name.toLowerCase()};return e.codecs.forEach((function(r){for(var i=0;i<t.codecs.length;i++){var a=t.codecs[i];if(r.name.toLowerCase()===a.name.toLowerCase()&&r.clockRate===a.clockRate){if("rtx"===r.name.toLowerCase()&&r.parameters&&a.parameters.apt&&!o(r,a,e.codecs,t.codecs))continue;(a=JSON.parse(JSON.stringify(a))).numChannels=Math.min(r.numChannels,a.numChannels),n.codecs.push(a),a.rtcpFeedback=a.rtcpFeedback.filter((function(e){for(var t=0;t<r.rtcpFeedback.length;t++)if(r.rtcpFeedback[t].type===e.type&&r.rtcpFeedback[t].parameter===e.parameter)return!0;return!1}));break}}})),e.headerExtensions.forEach((function(e){for(var r=0;r<t.headerExtensions.length;r++){var o=t.headerExtensions[r];if(e.uri===o.uri){n.headerExtensions.push(o);break}}})),n}function a(e,t,n){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(n)}function s(e,t){var n=e.getRemoteCandidates().find((function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type}));return n||e.addRemoteCandidate(t),!n}function c(e,t){var n=new Error(t);return n.name=e,n.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],n}e.exports=function(e,t){function n(t,n){n.addTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function u(t,n,r,o){var i=new Event("track");i.track=n,i.receiver=r,i.transceiver={receiver:r},i.streams=o,e.setTimeout((function(){t._dispatchEvent("track",i)}))}var l=function(n){var o=this,i=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach((function(e){o[e]=i[e].bind(i)})),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",n=JSON.parse(JSON.stringify(n||{})),this.usingBundle="max-bundle"===n.bundlePolicy,"negotiate"===n.rtcpMuxPolicy)throw c("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(n.rtcpMuxPolicy||(n.rtcpMuxPolicy="require"),n.iceTransportPolicy){case"all":case"relay":break;default:n.iceTransportPolicy="all"}switch(n.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:n.bundlePolicy="balanced"}if(n.iceServers=function(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var r=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var o="string"==typeof r;return o&&(r=[r]),r=r.filter((function(e){return 0===e.indexOf("turn:")&&-1!==e.indexOf("transport=udp")&&-1===e.indexOf("turn:[")&&!n?(n=!0,!0):0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp")})),delete e.url,e.urls=o?r[0]:r,!!r.length}}))}(n.iceServers||[],t),this._iceGatherers=[],n.iceCandidatePoolSize)for(var a=n.iceCandidatePoolSize;a>0;a--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:n.iceServers,gatherPolicy:n.iceTransportPolicy}));else n.iceCandidatePoolSize=0;this._config=n,this.transceivers=[],this._sdpSessionId=r.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(l.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(l.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),l.prototype.onicecandidate=null,l.prototype.onaddstream=null,l.prototype.ontrack=null,l.prototype.onremovestream=null,l.prototype.onsignalingstatechange=null,l.prototype.oniceconnectionstatechange=null,l.prototype.onconnectionstatechange=null,l.prototype.onicegatheringstatechange=null,l.prototype.onnegotiationneeded=null,l.prototype.ondatachannel=null,l.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},l.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},l.prototype.getConfiguration=function(){return this._config},l.prototype.getLocalStreams=function(){return this.localStreams},l.prototype.getRemoteStreams=function(){return this.remoteStreams},l.prototype._createTransceiver=function(e,t){var n=this.transceivers.length>0,r={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&n)r.iceTransport=this.transceivers[0].iceTransport,r.dtlsTransport=this.transceivers[0].dtlsTransport;else{var o=this._createIceAndDtlsTransports();r.iceTransport=o.iceTransport,r.dtlsTransport=o.dtlsTransport}return t||this.transceivers.push(r),r},l.prototype.addTrack=function(t,n){if(this._isClosed)throw c("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var r;if(this.transceivers.find((function(e){return e.track===t})))throw c("InvalidAccessError","Track already exists.");for(var o=0;o<this.transceivers.length;o++)this.transceivers[o].track||this.transceivers[o].kind!==t.kind||(r=this.transceivers[o]);return r||(r=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(n)&&this.localStreams.push(n),r.track=t,r.stream=n,r.rtpSender=new e.RTCRtpSender(t,r.dtlsTransport),r.rtpSender},l.prototype.addStream=function(e){var n=this;if(t>=15025)e.getTracks().forEach((function(t){n.addTrack(t,e)}));else{var r=e.clone();e.getTracks().forEach((function(e,t){var n=r.getTracks()[t];e.addEventListener("enabled",(function(e){n.enabled=e.enabled}))})),r.getTracks().forEach((function(e){n.addTrack(e,r)}))}},l.prototype.removeTrack=function(t){if(this._isClosed)throw c("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var n=this.transceivers.find((function(e){return e.rtpSender===t}));if(!n)throw c("InvalidAccessError","Sender was not created by this connection.");var r=n.stream;n.rtpSender.stop(),n.rtpSender=null,n.track=null,n.stream=null,-1===this.transceivers.map((function(e){return e.stream})).indexOf(r)&&this.localStreams.indexOf(r)>-1&&this.localStreams.splice(this.localStreams.indexOf(r),1),this._maybeFireNegotiationNeeded()},l.prototype.removeStream=function(e){var t=this;e.getTracks().forEach((function(e){var n=t.getSenders().find((function(t){return t.track===e}));n&&t.removeTrack(n)}))},l.prototype.getSenders=function(){return this.transceivers.filter((function(e){return!!e.rtpSender})).map((function(e){return e.rtpSender}))},l.prototype.getReceivers=function(){return this.transceivers.filter((function(e){return!!e.rtpReceiver})).map((function(e){return e.rtpReceiver}))},l.prototype._createIceGatherer=function(t,n){var r=this;if(n&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var o=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(o,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var n=!e.candidate||0===Object.keys(e.candidate).length;o.state=n?"completed":"gathering",null!==r.transceivers[t].bufferedCandidateEvents&&r.transceivers[t].bufferedCandidateEvents.push(e)},o.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),o},l.prototype._gather=function(t,n){var o=this,i=this.transceivers[n].iceGatherer;if(!i.onlocalcandidate){var a=this.transceivers[n].bufferedCandidateEvents;this.transceivers[n].bufferedCandidateEvents=null,i.removeEventListener("localcandidate",this.transceivers[n].bufferCandidates),i.onlocalcandidate=function(e){if(!(o.usingBundle&&n>0)){var a=new Event("icecandidate");a.candidate={sdpMid:t,sdpMLineIndex:n};var s=e.candidate,c=!s||0===Object.keys(s).length;if(c)"new"!==i.state&&"gathering"!==i.state||(i.state="completed");else{"new"===i.state&&(i.state="gathering"),s.component=1,s.ufrag=i.getLocalParameters().usernameFragment;var u=r.writeCandidate(s);a.candidate=Object.assign(a.candidate,r.parseCandidate(u)),a.candidate.candidate=u,a.candidate.toJSON=function(){return{candidate:a.candidate.candidate,sdpMid:a.candidate.sdpMid,sdpMLineIndex:a.candidate.sdpMLineIndex,usernameFragment:a.candidate.usernameFragment}}}var l=r.getMediaSections(o._localDescription.sdp);l[a.candidate.sdpMLineIndex]+=c?"a=end-of-candidates\r\n":"a="+a.candidate.candidate+"\r\n",o._localDescription.sdp=r.getDescription(o._localDescription.sdp)+l.join("");var d=o.transceivers.every((function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state}));"gathering"!==o.iceGatheringState&&(o.iceGatheringState="gathering",o._emitGatheringStateChange()),c||o._dispatchEvent("icecandidate",a),d&&(o._dispatchEvent("icecandidate",new Event("icecandidate")),o.iceGatheringState="complete",o._emitGatheringStateChange())}},e.setTimeout((function(){a.forEach((function(e){i.onlocalcandidate(e)}))}),0)}},l.prototype._createIceAndDtlsTransports=function(){var t=this,n=new e.RTCIceTransport(null);n.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var r=new e.RTCDtlsTransport(n);return r.ondtlsstatechange=function(){t._updateConnectionState()},r.onerror=function(){Object.defineProperty(r,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:n,dtlsTransport:r}},l.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var n=this.transceivers[e].iceTransport;n&&(delete n.onicestatechange,delete this.transceivers[e].iceTransport);var r=this.transceivers[e].dtlsTransport;r&&(delete r.ondtlsstatechange,delete r.onerror,delete this.transceivers[e].dtlsTransport)},l.prototype._transceive=function(e,n,o){var a=i(e.localCapabilities,e.remoteCapabilities);n&&e.rtpSender&&(a.encodings=e.sendEncodingParameters,a.rtcp={cname:r.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(a.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(a)),o&&e.rtpReceiver&&a.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach((function(e){delete e.rtx})),e.recvEncodingParameters.length?a.encodings=e.recvEncodingParameters:a.encodings=[{}],a.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(a.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(a.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(a))},l.prototype.setLocalDescription=function(e){var t,n,o=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(c("TypeError",'Unsupported type "'+e.type+'"'));if(!a("setLocalDescription",e.type,o.signalingState)||o._isClosed)return Promise.reject(c("InvalidStateError","Can not set local "+e.type+" in state "+o.signalingState));if("offer"===e.type)t=r.splitSections(e.sdp),n=t.shift(),t.forEach((function(e,t){var n=r.parseRtpParameters(e);o.transceivers[t].localCapabilities=n})),o.transceivers.forEach((function(e,t){o._gather(e.mid,t)}));else if("answer"===e.type){t=r.splitSections(o._remoteDescription.sdp),n=t.shift();var s=r.matchPrefix(n,"a=ice-lite").length>0;t.forEach((function(e,t){var a=o.transceivers[t],c=a.iceGatherer,u=a.iceTransport,l=a.dtlsTransport,d=a.localCapabilities,_=a.remoteCapabilities;if(!(r.isRejected(e)&&0===r.matchPrefix(e,"a=bundle-only").length)&&!a.rejected){var p=r.getIceParameters(e,n),h=r.getDtlsParameters(e,n);s&&(h.role="server"),o.usingBundle&&0!==t||(o._gather(a.mid,t),"new"===u.state&&u.start(c,p,s?"controlling":"controlled"),"new"===l.state&&l.start(h));var f=i(d,_);o._transceive(a,f.codecs.length>0,!1)}}))}return o._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?o._updateSignalingState("have-local-offer"):o._updateSignalingState("stable"),Promise.resolve()},l.prototype.setRemoteDescription=function(o){var l=this;if(-1===["offer","answer"].indexOf(o.type))return Promise.reject(c("TypeError",'Unsupported type "'+o.type+'"'));if(!a("setRemoteDescription",o.type,l.signalingState)||l._isClosed)return Promise.reject(c("InvalidStateError","Can not set remote "+o.type+" in state "+l.signalingState));var d={};l.remoteStreams.forEach((function(e){d[e.id]=e}));var _=[],p=r.splitSections(o.sdp),h=p.shift(),f=r.matchPrefix(h,"a=ice-lite").length>0,m=r.matchPrefix(h,"a=group:BUNDLE ").length>0;l.usingBundle=m;var g=r.matchPrefix(h,"a=ice-options:")[0];return l.canTrickleIceCandidates=!!g&&g.substr(14).split(" ").indexOf("trickle")>=0,p.forEach((function(a,c){var u=r.splitLines(a),p=r.getKind(a),g=r.isRejected(a)&&0===r.matchPrefix(a,"a=bundle-only").length,v=u[0].substr(2).split(" ")[2],b=r.getDirection(a,h),y=r.parseMsid(a),E=r.getMid(a)||r.generateIdentifier();if(g||"application"===p&&("DTLS/SCTP"===v||"UDP/DTLS/SCTP"===v))l.transceivers[c]={mid:E,kind:p,protocol:v,rejected:!0};else{var w,O,C,T,S,D,P,k,A;!g&&l.transceivers[c]&&l.transceivers[c].rejected&&(l.transceivers[c]=l._createTransceiver(p,!0));var I,x,j=r.parseRtpParameters(a);g||(I=r.getIceParameters(a,h),(x=r.getDtlsParameters(a,h)).role="client"),P=r.parseRtpEncodingParameters(a);var M=r.parseRtcpParameters(a),L=r.matchPrefix(a,"a=end-of-candidates",h).length>0,R=r.matchPrefix(a,"a=candidate:").map((function(e){return r.parseCandidate(e)})).filter((function(e){return 1===e.component}));if(("offer"===o.type||"answer"===o.type)&&!g&&m&&c>0&&l.transceivers[c]&&(l._disposeIceAndDtlsTransports(c),l.transceivers[c].iceGatherer=l.transceivers[0].iceGatherer,l.transceivers[c].iceTransport=l.transceivers[0].iceTransport,l.transceivers[c].dtlsTransport=l.transceivers[0].dtlsTransport,l.transceivers[c].rtpSender&&l.transceivers[c].rtpSender.setTransport(l.transceivers[0].dtlsTransport),l.transceivers[c].rtpReceiver&&l.transceivers[c].rtpReceiver.setTransport(l.transceivers[0].dtlsTransport)),"offer"!==o.type||g){if("answer"===o.type&&!g){O=(w=l.transceivers[c]).iceGatherer,C=w.iceTransport,T=w.dtlsTransport,S=w.rtpReceiver,D=w.sendEncodingParameters,k=w.localCapabilities,l.transceivers[c].recvEncodingParameters=P,l.transceivers[c].remoteCapabilities=j,l.transceivers[c].rtcpParameters=M,R.length&&"new"===C.state&&(!f&&!L||m&&0!==c?R.forEach((function(e){s(w.iceTransport,e)})):C.setRemoteCandidates(R)),m&&0!==c||("new"===C.state&&C.start(O,I,"controlling"),"new"===T.state&&T.start(x)),!i(w.localCapabilities,w.remoteCapabilities).codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&w.sendEncodingParameters[0].rtx&&delete w.sendEncodingParameters[0].rtx,l._transceive(w,"sendrecv"===b||"recvonly"===b,"sendrecv"===b||"sendonly"===b),!S||"sendrecv"!==b&&"sendonly"!==b?delete w.rtpReceiver:(A=S.track,y?(d[y.stream]||(d[y.stream]=new e.MediaStream),n(A,d[y.stream]),_.push([A,S,d[y.stream]])):(d.default||(d.default=new e.MediaStream),n(A,d.default),_.push([A,S,d.default])))}}else{(w=l.transceivers[c]||l._createTransceiver(p)).mid=E,w.iceGatherer||(w.iceGatherer=l._createIceGatherer(c,m)),R.length&&"new"===w.iceTransport.state&&(!L||m&&0!==c?R.forEach((function(e){s(w.iceTransport,e)})):w.iceTransport.setRemoteCandidates(R)),k=e.RTCRtpReceiver.getCapabilities(p),t<15019&&(k.codecs=k.codecs.filter((function(e){return"rtx"!==e.name}))),D=w.sendEncodingParameters||[{ssrc:1001*(2*c+2)}];var B,N=!1;if("sendrecv"===b||"sendonly"===b){if(N=!w.rtpReceiver,S=w.rtpReceiver||new e.RTCRtpReceiver(w.dtlsTransport,p),N)A=S.track,y&&"-"===y.stream||(y?(d[y.stream]||(d[y.stream]=new e.MediaStream,Object.defineProperty(d[y.stream],"id",{get:function(){return y.stream}})),Object.defineProperty(A,"id",{get:function(){return y.track}}),B=d[y.stream]):(d.default||(d.default=new e.MediaStream),B=d.default)),B&&(n(A,B),w.associatedRemoteMediaStreams.push(B)),_.push([A,S,B])}else w.rtpReceiver&&w.rtpReceiver.track&&(w.associatedRemoteMediaStreams.forEach((function(t){var n=t.getTracks().find((function(e){return e.id===w.rtpReceiver.track.id}));n&&function(t,n){n.removeTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))}(n,t)})),w.associatedRemoteMediaStreams=[]);w.localCapabilities=k,w.remoteCapabilities=j,w.rtpReceiver=S,w.rtcpParameters=M,w.sendEncodingParameters=D,w.recvEncodingParameters=P,l._transceive(l.transceivers[c],!1,N)}}})),void 0===l._dtlsRole&&(l._dtlsRole="offer"===o.type?"active":"passive"),l._remoteDescription={type:o.type,sdp:o.sdp},"offer"===o.type?l._updateSignalingState("have-remote-offer"):l._updateSignalingState("stable"),Object.keys(d).forEach((function(t){var n=d[t];if(n.getTracks().length){if(-1===l.remoteStreams.indexOf(n)){l.remoteStreams.push(n);var r=new Event("addstream");r.stream=n,e.setTimeout((function(){l._dispatchEvent("addstream",r)}))}_.forEach((function(e){var t=e[0],r=e[1];n.id===e[2].id&&u(l,t,r,[n])}))}})),_.forEach((function(e){e[2]||u(l,e[0],e[1],[])})),e.setTimeout((function(){l&&l.transceivers&&l.transceivers.forEach((function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))}))}),4e3),Promise.resolve()},l.prototype.close=function(){this.transceivers.forEach((function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()})),this._isClosed=!0,this._updateSignalingState("closed")},l.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},l.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout((function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}}),0))},l.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++})),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var n=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",n)}},l.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)})),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var n=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",n)}},l.prototype.createOffer=function(){var n=this;if(n._isClosed)return Promise.reject(c("InvalidStateError","Can not call createOffer after close"));var i=n.transceivers.filter((function(e){return"audio"===e.kind})).length,a=n.transceivers.filter((function(e){return"video"===e.kind})).length,s=arguments[0];if(s){if(s.mandatory||s.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==s.offerToReceiveAudio&&(i=!0===s.offerToReceiveAudio?1:!1===s.offerToReceiveAudio?0:s.offerToReceiveAudio),void 0!==s.offerToReceiveVideo&&(a=!0===s.offerToReceiveVideo?1:!1===s.offerToReceiveVideo?0:s.offerToReceiveVideo)}for(n.transceivers.forEach((function(e){"audio"===e.kind?--i<0&&(e.wantReceive=!1):"video"===e.kind&&--a<0&&(e.wantReceive=!1)}));i>0||a>0;)i>0&&(n._createTransceiver("audio"),i--),a>0&&(n._createTransceiver("video"),a--);var u=r.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.transceivers.forEach((function(o,i){var a=o.track,s=o.kind,c=o.mid||r.generateIdentifier();o.mid=c,o.iceGatherer||(o.iceGatherer=n._createIceGatherer(i,n.usingBundle));var u=e.RTCRtpSender.getCapabilities(s);t<15019&&(u.codecs=u.codecs.filter((function(e){return"rtx"!==e.name}))),u.codecs.forEach((function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),o.remoteCapabilities&&o.remoteCapabilities.codecs&&o.remoteCapabilities.codecs.forEach((function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)}))})),u.headerExtensions.forEach((function(e){(o.remoteCapabilities&&o.remoteCapabilities.headerExtensions||[]).forEach((function(t){e.uri===t.uri&&(e.id=t.id)}))}));var l=o.sendEncodingParameters||[{ssrc:1001*(2*i+1)}];a&&t>=15019&&"video"===s&&!l[0].rtx&&(l[0].rtx={ssrc:l[0].ssrc+1}),o.wantReceive&&(o.rtpReceiver=new e.RTCRtpReceiver(o.dtlsTransport,s)),o.localCapabilities=u,o.sendEncodingParameters=l})),"max-compat"!==n._config.bundlePolicy&&(u+="a=group:BUNDLE "+n.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),u+="a=ice-options:trickle\r\n",n.transceivers.forEach((function(e,t){u+=o(e,e.localCapabilities,"offer",e.stream,n._dtlsRole),u+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===n.iceGatheringState||0!==t&&n.usingBundle||(e.iceGatherer.getLocalCandidates().forEach((function(e){e.component=1,u+="a="+r.writeCandidate(e)+"\r\n"})),"completed"===e.iceGatherer.state&&(u+="a=end-of-candidates\r\n"))}));var l=new e.RTCSessionDescription({type:"offer",sdp:u});return Promise.resolve(l)},l.prototype.createAnswer=function(){var n=this;if(n._isClosed)return Promise.reject(c("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==n.signalingState&&"have-local-pranswer"!==n.signalingState)return Promise.reject(c("InvalidStateError","Can not call createAnswer in signalingState "+n.signalingState));var a=r.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.usingBundle&&(a+="a=group:BUNDLE "+n.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),a+="a=ice-options:trickle\r\n";var s=r.getMediaSections(n._remoteDescription.sdp).length;n.transceivers.forEach((function(e,r){if(!(r+1>s)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?a+="m=application 0 DTLS/SCTP 5000\r\n":a+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?a+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(a+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(a+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var c;if(e.stream)"audio"===e.kind?c=e.stream.getAudioTracks()[0]:"video"===e.kind&&(c=e.stream.getVideoTracks()[0]),c&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1});var u=i(e.localCapabilities,e.remoteCapabilities);!u.codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,a+=o(e,u,"answer",e.stream,n._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(a+="a=rtcp-rsize\r\n")}}));var u=new e.RTCSessionDescription({type:"answer",sdp:a});return Promise.resolve(u)},l.prototype.addIceCandidate=function(e){var t,n=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise((function(o,i){if(!n._remoteDescription)return i(c("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var a=e.sdpMLineIndex;if(e.sdpMid)for(var u=0;u<n.transceivers.length;u++)if(n.transceivers[u].mid===e.sdpMid){a=u;break}var l=n.transceivers[a];if(!l)return i(c("OperationError","Can not add ICE candidate"));if(l.rejected)return o();var d=Object.keys(e.candidate).length>0?r.parseCandidate(e.candidate):{};if("tcp"===d.protocol&&(0===d.port||9===d.port))return o();if(d.component&&1!==d.component)return o();if((0===a||a>0&&l.iceTransport!==n.transceivers[0].iceTransport)&&!s(l.iceTransport,d))return i(c("OperationError","Can not add ICE candidate"));var _=e.candidate.trim();0===_.indexOf("a=")&&(_=_.substr(2)),(t=r.getMediaSections(n._remoteDescription.sdp))[a]+="a="+(d.type?_:"end-of-candidates")+"\r\n",n._remoteDescription.sdp=r.getDescription(n._remoteDescription.sdp)+t.join("")}else for(var p=0;p<n.transceivers.length&&(n.transceivers[p].rejected||(n.transceivers[p].iceTransport.addRemoteCandidate({}),(t=r.getMediaSections(n._remoteDescription.sdp))[p]+="a=end-of-candidates\r\n",n._remoteDescription.sdp=r.getDescription(n._remoteDescription.sdp)+t.join(""),!n.usingBundle));p++);o()}))},l.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var n=null;if(this.transceivers.forEach((function(e){e.rtpSender&&e.rtpSender.track===t?n=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(n=e.rtpReceiver)})),!n)throw c("InvalidAccessError","Invalid selector.");return n.getStats()}var r=[];return this.transceivers.forEach((function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach((function(t){e[t]&&r.push(e[t].getStats())}))})),Promise.all(r).then((function(e){var t=new Map;return e.forEach((function(e){e.forEach((function(e){t.set(e.id,e)}))})),t}))};["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach((function(t){var n=e[t];if(n&&n.prototype&&n.prototype.getStats){var r=n.prototype.getStats;n.prototype.getStats=function(){return r.apply(this).then((function(e){var t=new Map;return Object.keys(e).forEach((function(n){var r;e[n].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(r=e[n]).type]||r.type,t.set(n,e[n])})),t}))}}}));var d=["createOffer","createAnswer"];return d.forEach((function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then((function(t){"function"==typeof e[0]&&e[0].apply(null,[t])}),(function(t){"function"==typeof e[1]&&e[1].apply(null,[t])})):t.apply(this,arguments)}})),(d=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach((function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)}),(function(t){"function"==typeof e[2]&&e[2].apply(null,[t])})):t.apply(this,arguments)}})),["getStats"].forEach((function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)})):t.apply(this,arguments)}})),l}},"8Lyy":function(e,t,n){var r=n("O6qx"),o=/%[sdv%]/g,i=function(e){var t=1,n=arguments,r=n.length;return e.replace(o,(function(e){if(t>=r)return e;var o=n[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(o);case"%d":return Number(o);case"%v":return""}}))},a=function(e,t,n){var r=[e+"="+(t.format instanceof Function?t.format(t.push?n:n[t.name]):t.format)];if(t.names)for(var o=0;o<t.names.length;o+=1){var a=t.names[o];t.name?r.push(n[t.name][a]):r.push(n[t.names[o]])}else r.push(n[t.name]);return i.apply(null,r)},s=["v","o","s","i","u","e","p","c","b","t","r","z","a"],c=["i","c","b","a"];e.exports=function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach((function(e){null==e.payloads&&(e.payloads="")}));var n=t.outerOrder||s,o=t.innerOrder||c,i=[];return n.forEach((function(t){r[t].forEach((function(n){n.name in e&&null!=e[n.name]?i.push(a(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach((function(e){i.push(a(t,n,e))}))}))})),e.media.forEach((function(e){i.push(a("m",r.m[0],e)),o.forEach((function(t){r[t].forEach((function(n){n.name in e&&null!=e[n.name]?i.push(a(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach((function(e){i.push(a(t,n,e))}))}))}))})),i.join("\r\n")+"\r\n"}},"8a7r":function(e,t,n){"use strict";var r=n("hswa"),o=n("RjD/");e.exports=function(e,t,n){t in e?r.f(e,t,o(0,n)):e[t]=n}},"8zW9":function(e,t,n){"use strict";function r(e){var t={};return e&&e.length&&e.filter((function(e){return!!e})).map((function(e){return e.queues&&e.queues[0]})).forEach((function(e){return t[e.type]=e})),t}n.r(t),n.d(t,"unpackQueues",(function(){return r}))},"91GP":function(e,t,n){var r=n("XKFU");r(r.S+r.F,"Object",{assign:n("czNK")})},"98sY":function(e,t,n){"use strict";n.r(t),n.d(t,"initDebugTools",(function(){return s})),n.d(t,"logEvalError",(function(){return c})),n.d(t,"debugLog",(function(){return u})),n.d(t,"debugEl",(function(){return l}));n("a1Th"),n("Btvt"),n("pIFo");var r=n("gdug"),o=n("W9Tc"),i=n("HLtZ");function a(){if(Object(o.partConfigEnabled)("log_fetch_requests")){var e=(e,t)=>{try{if(~e.indexOf("/al_audio")||~e.indexOf("/like.php"))throw new Error(t)}catch(e){Object(i.debugBufferLog)(e)}};!function(e){var t=window.XMLHttpRequest;window.XMLHttpRequest=function(){var n,r,i=new t,a=i.open,s=i.send;return i.open=function(){var e=Array.prototype.slice.call(arguments);return r=e[0],n=e[1],a.apply(i,arguments)},i.send=function(){var t=arguments[0];return("POST"===(r=(r||"").toUpperCase())||"GET"===r&&Object(o.partConfigEnabled)("log_fetch_requests_get"))&&e(n,[r,n,t].join(":")),s.apply(i,arguments)},i},["DONE","HEADERS_RECEIVED","LOADING","OPENED","UNSENT"].forEach(e=>{Object.defineProperty(window.XMLHttpRequest,e,{enumerable:!1,configurable:!1,writable:!1,value:t[e]})})}(e),window.fetch&&function(e){var t=window.fetch;window.fetch=function(){for(var n=new Array(arguments.length),r=0;r<n.length;++r)n[r]=arguments[r];var o,i=n[0],a="GET";"string"==typeof i?o=i:"Request"in window&&i instanceof window.Request?(o=i.url,i.method&&(a=i.method)):o=""+i,n[1]&&n[1].method&&(a=n[1].method);var s={method:a,url:o,status_code:null};return e(o,o),t.apply(this,n).then((function(e){return s.status_code=e.status,e})).catch((function(e){throw e}))}}(e)}}function s(){window._logTimer=(new Date).getTime(),a()}function c(e,t){if(window.Raven){if(t&&t.length>2e3){var n=t.indexOf("; window.TimeSpent && TimeSpent.setTimers && TimeSpent.setTimers(");~n&&(t=t.slice(0,n)),t=`${t.slice(0,1e3)}...${t.slice(-1e3)}`}e.message+=": "+t,Object(i.logError)(e)}}function u(e){try{window.debuglogClient&&debuglogClient(e);var t="["+((new Date).getTime()-window._logTimer)/1e3+"] ";if(window.console&&console.log){var n=Array.prototype.slice.call(arguments);n.unshift(t),r.browser.msie||r.browser.mobile?console.log(n.join(" ")):console.log.apply(console,n)}}catch(e){}}function l(e){if(!e)return!1;var t=e.tagName,n=e.id,r=e.className,o=(t||"").toLowerCase();return r&&(o+="."+e.className.replace(/\s+/g,".")),n&&!/^__vk/.test(n)&&(o+="#"+e.id),o||(e.toString()||"[NULL]")}},"9XzT":function(e,t,n){t.Interop=n("/oKx")},"9gX7":function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},"9r2g":function(e,t,n){"use strict";n.r(t),n.d(t,"registrationItemStat",(function(){return a}));var r=n("FbVm");n.d(t,"RegistrationFieldItemNames",(function(){return r.RegistrationFieldItemNames})),n.d(t,"RegistrationItemEventTypes",(function(){return r.RegistrationItemEventTypes})),n.d(t,"EventScreens",(function(){return r.EventScreens}));var o=new r.ProductionStatCollector,i=new r.ActionStatCollector(o),a=new r.RegistrationItemStatCollector(i)},A5AN:function(e,t,n){"use strict";var r=n("AvRE")(!0);e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},Afnz:function(e,t,n){"use strict";var r=n("LQAc"),o=n("XKFU"),i=n("KroJ"),a=n("Mukb"),s=n("hPIQ"),c=n("QaDb"),u=n("fyDq"),l=n("OP3Y"),d=n("K0xU")("iterator"),_=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,n,h,f,m,g){c(n,t,h);var v,b,y,E=function(e){if(!_&&e in T)return T[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},w=t+" Iterator",O="values"==f,C=!1,T=e.prototype,S=T[d]||T["@@iterator"]||f&&T[f],D=S||E(f),P=f?O?E("entries"):D:void 0,k="Array"==t&&T.entries||S;if(k&&(y=l(k.call(new e)))!==Object.prototype&&y.next&&(u(y,w,!0),r||"function"==typeof y[d]||a(y,d,p)),O&&S&&"values"!==S.name&&(C=!0,D=function(){return S.call(this)}),r&&!g||!_&&!C&&T[d]||a(T,d,D),s[t]=D,s[w]=p,f)if(v={values:O?D:E("values"),keys:m?D:E("keys"),entries:P},g)for(b in v)b in T||i(T,b,v[b]);else o(o.P+o.F*(_||C),t,v);return v}},AvRE:function(e,t,n){var r=n("RYi7"),o=n("vhPU");e.exports=function(e){return function(t,n){var i,a,s=String(o(t)),c=r(n),u=s.length;return c<0||c>=u?e?"":void 0:(i=s.charCodeAt(c))<55296||i>56319||c+1===u||(a=s.charCodeAt(c+1))<56320||a>57343?e?s.charAt(c):i:e?s.slice(c,c+2):a-56320+(i-55296<<10)+65536}}},"BJj/":function(e,t,n){"use strict";function r(e,t,n){var r;return function(){var o=arguments,i=()=>{r=null,n||e.apply(this,o)},a=n&&!r;clearTimeout(r),r=setTimeout(i,t),a&&e.apply(this,o)}}n.r(t),n.d(t,"debounce",(function(){return r}))},BiHW:function(e,t,n){"use strict";n.r(t);var r,o=n("q1tI"),i=n("xt6h"),a=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=function(){return(s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},u=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r};var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.appearance,r=e.wide,a=e.overflow,l=e.size,d=c(e,["className","appearance","wide","overflow","size"]),_=e.disabled,p=i.classNames.apply(void 0,u(["Button"],function(e){return Array.isArray(e)?e.map((function(e){return"Button--"+e})):["Button--"+e]}(n),["Button--size-"+l,{"Button--wide":r,"Button--overflow":!!a,"Button--disabled":_},t]));return o.createElement("button",s({},d,{className:p}),e.children)},t.defaultProps={appearance:"primary",size:"m",wide:!1,disabled:!1},t}(o.Component);t.default=l},Bj12:function(e,t,n){"use strict";n.r(t);var r=n("mMuO");n.d(t,"saveJsErrorLogs",(function(){return r.saveJsErrorLogs})),n.d(t,"saveStatlogEvents",(function(){return r.saveStatlogEvents})),n.d(t,"saveNetworkStats",(function(){return r.saveNetworkStats})),n.d(t,"saveCustomStats",(function(){return r.saveCustomStats})),n.d(t,"saveProductionStats",(function(){return r.saveProductionStats}))},Bm7g:function(e,t,n){"use strict";n.r(t),n.d(t,"Embedded",(function(){return r}));var r=function(){function e(e){var t=this;this.receiver=!1,this._requestId=1,this._requests={},this._onMessage=function(e){if(e.origin===t.origin&&e.data&&e.data.embeddedName===t.name){t.target=e.source;var n=e.data,r=n.response;if(r){var o=t._requests[r];o&&o(n.data),t._requests[r]=null}else n.request&&n.action&&Promise.resolve(t.onMessage(n.action,n.data)).then((function(e){t._sendResponse(n.request,n.action,e)}))}},this.name=e.name,this.target=e.target,this.origin=e.origin||"https://"+e.host,this.receiver=e.receiver||!1,this.onMessage=e.onMessage,window.addEventListener("message",this._onMessage,!1)}return e.prototype._sendResponse=function(e,t,n){this.target&&this.target.postMessage({embeddedName:this.name,action:t,response:e,data:n},this.origin)},e.prototype.sendMessage=function(e,t){var n=this;if(void 0===t&&(t={}),!this.target)return Promise.reject();var r=this._requestId,o=new Promise((function(e){n._requestId++,n._requests[r]=e}));return this.target.postMessage({embeddedName:this.name,action:e,data:t,request:r},this.origin),o},e.prototype.destroy=function(){window.removeEventListener("message",this._onMessage,!1),this.target=void 0},e}()},Bnag:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},Bszp:function(e,t,n){"use strict";n.r(t),n.d(t,"topHeaderClose",(function(){return _})),n.d(t,"topHeaderClearClose",(function(){return p}));n("HEwt"),n("a1Th"),n("Btvt"),n("rGqo"),n("rE2o"),n("ioFf"),n("pIFo"),n("KKXr"),n("SRfc"),n("Oyvg");var r=n("zxIV"),o=n("Egk5"),i=n("t7n3"),a=n("ErRf"),s=n("4+be"),c=n("aong"),u=n("XzvV");function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _(e){window.headerDestroy&&window.headerDestroy(),window.headerDestroy=e}function p(){delete window.headerDestroy}var h={cache:{},lists:{},maxItems:8,init:function(){if(this.inited)return!1;var e=Object(r.ge)("ts_input"),t=Object(r.ge)("ts_cont_wrap");if(vk.id&&Chat.init(),!e)return!1;Object(o.addEvent)(e,"focus",(function(){h.deselect(),Object(i.trim)(Object(r.val)(this))&&Object(r.addClass)(t.firstChild,"active"),h.toggleInput(!0)})),Object(o.addEvent)(e,"keydown",(function(n){switch(n.keyCode){case o.KEY.DOWN:case o.KEY.UP:h.moveSelection(n.keyCode),Object(o.cancelEvent)(n);break;case o.KEY.ENTER:var s=Object(r.geByClass1)("active",t);if(s)h.select(s,n);else{var c=Object(i.trim)(Object(r.val)(this));c&&(e.blur(),h.clear(),h.toggleInput(!1),nav.go("/search?c[section]=auto&c[q]="+encodeURIComponent(c)))}Object(o.cancelEvent)(n);break;case o.KEY.TAB:h.clear(),h.toggleInput(!1),Object(a.cancelStackFilter)("top_search",!0)}})),vk.id&&(Object(o.addEvent)(e,"keyup",(function(e){switch(e.keyCode){case o.KEY.DOWN:case o.KEY.UP:case o.KEY.ENTER:case o.KEY.ESC:Object(o.cancelEvent)(e);break;default:h.prepareRows(Object(i.trim)(Object(r.val)(this)))}})),Object(o.addEvent)(e,"paste",(function(){setTimeout((function(){h.prepareRows(Object(i.trim)(Object(r.val)(e)))}),10)})),Object(o.addEvent)(document,"mousedown",(function(e){Object(o.checkKeyboardEvent)(e)||Object(r.domClosest)("top_audio_layer_place",e.target)||Object(r.domClosest)("_ap_layer__close",e.target)||Object(r.domClosest)("layer_wrap",e.target)||_()})),this.inited=!0)},clear:function(){window.tooltips&&tooltips.destroyAll(Object(r.ge)("ts_cont_wrap"));var e=Object(r.ge)("ts_input");e&&e.phonblur&&(Object(r.val)(e,""),e.blur(),e.phonblur(),this.prepareRows())},select:function(e,t,n){if(Object(o.checkEvent)(t))return!0;var a=Object(r.ge)("ts_input"),s=Object(i.trim)(Object(r.val)(a)).length,c=e.getAttribute("hinttype");if(this.clear(),_(),s||a.blur(),n&&Object(r.hasClass)(t.target,"ts_contact_status"))return ajax.post("al_search.php",{act:"save_metrics",ql:s,mk:"chat_box"}),this.writeBox(n),!1;var u=nav.go(e,t,{params:{search_string:cur.tsStr||""}});return ajax.post("al_search.php",{act:"save_metrics",ql:s,mk:c}),u},deselect:function(){var e=Object(r.ge)("ts_cont_wrap");Object(i.each)(Object(r.geByClass)("active",e),(e,t)=>Object(r.removeClass)(t,"active"))},itemOver:function(e,t,n){1===t&&h.deselect();var o=Object(i.inArray)(e.getAttribute("hintType"),["h_friends","h_correspondents","h_chats"]);Object(r.toggleClass)(e,"write",o),Object(r.toggleClass)(e,"active",t)},moveSelection:function(e){var t,n=Object(r.ge)("ts_cont_wrap"),i=Object(r.geByClass1)("active",n);switch(e){case o.KEY.UP:t=!!i&&(this.getNextNode(i,-1,"a")||i);break;case o.KEY.DOWN:t=i?this.getNextNode(i,1,"a")||i:n.firstChild}return this.deselect(),t&&Object(r.addClass)(t,"active"),!1},getNextNode:function(e,t,n){for(var o=e,i=Object(r.domPN)(e);;){if((o=t>0?Object(r.domNS)(o):Object(r.domPS)(o))||(o=t>0?Object(r.domFC)(i):Object(r.domLC)(i)),n&&o.tagName&&o.tagName.toLowerCase()===n||!n&&o)return o;if(o===e)return!1}},toggleInput:function(e){e=!!e;var t=Object(r.ge)("ts_cont_wrap");Object(r.isVisible)(t)!==e&&(Object(r.toggle)("ts_cont_wrap",e),e&&Object(a.cancelStackPush)("top_search",(function(){var e=Object(r.ge)("ts_input");h.toggleInput(!1),e.blur()}),!0))},getList:function(e){switch(e){case"friends":return this.lists.friends||this.topFriends||{};case"publics":case"events":case"groups":case"apps":case"chats":case"search":return this.lists[e]||{}}return{}},onlines:function(){return window.curFastChat&&curFastChat.onlines||this.lists.onlines||{}},initFriendsList:function(){if(h.friendsLoaded)return!1;if(cur.initingFL||vk.isBanned||!vk.id)return!1;var e=function(){if(h.friendsLoaded)return!1;cur.initingFL=!0,ajax.post("al_search.php",{act:"get_pages"},{cache:1,onDone:function(e){delete cur.initingFL,h.friendsLoaded||(Object(i.each)(e,(function(e,t){h.lists[e]=t,"onlines"!==e&&h.updateCache(e)})),h.friendsLoaded=!0,Object(r.val)("ts_input")||h.prepareRows(""))},onFail:function(){delete cur.initingFL}})},t=h.getList("friends");Object(i.isEmpty)(t)?(cur.initingFL=!0,ajax.post("al_search.php",{act:"get_top_friends"},{cache:1,onDone:function(t){delete cur.initingFL,h.topFriends=t,h.updateCache("friends"),h.forceUpdate=!0,h.prepareRows(cur.tsStr||""),e()},onFail:function(){delete cur.initingFL}})):(h.updateCache("friends"),h.forceUpdate=!0,h.prepareRows(cur.tsStr||""),e())},getSimilarQueries:function(e){var t,n=[e=e.toLowerCase()];return(t=Object(s.parseLatin)(e))&&n.push(t),(t=Object(s.parseLatKeys)(e))&&n.push(t),(t=Object(s.parseCyr)(e))&&n.push(t),n},searchCache:function(e,t){var n=h.getList(e);if(!t)return!1;var r=this.getSimilarQueries(t);if(void 0!==this.cache[e][t])return r;var o=this.cache[e][t]={};Object(i.each)(r,(t,r)=>{var a=this.cache[e][" "+r.charAt(0).toLowerCase()];if(a){var s=new RegExp("(^|[\\s\\-\\(\\)\\.,;|:]+)"+Object(i.escapeRE)(r),"gi");Object(i.each)(a,e=>{var t=n[e+"_"];if(!Object(i.isArray)(t))return!0;null!==t[0].match(s)&&(o[e]=1)})}});var a=0;return Object(i.each)(o,()=>a++),o._num=a,r},updateCache:function(e,t,n){var r=t||this.getList(e);this.cache[e]=n&&this.cache[e]||{},Object(i.each)(r,(t,n)=>{var r=n[0],o=Object(i.intval)(t),a=r.split(/[\s\-\(\)\.,;|:]+/);Object(i.each)(a,(t,n)=>{var r=" "+n.charAt(0).toLowerCase();this.cache[e][r]=this.cache[e][r]||{},this.cache[e][r][o]=1})})},listSearch:function(e,t,n,r){var o=[],a={};return t?(h.searchCache(e,t),a=h.cache[e]&&h.cache[e][t]||{}):Object(i.each)(h.getList(e),(function(e){var t=Object(i.intval)(e);a[t]=1})),Object(i.each)(h.getList(e),(function(e){var t=Object(i.intval)(e),s=a[t];if((!r||!r[t])&&s)return!!n--&&void o.push([t,this])})),o},row:function(e,t,n,r,o,a,s,u,l){var d=0;if(a&&(r=r.replace(a,'$1<em class="ts_clist_hl">$2</em>')),Object(i.inArray)(s,["h_friends","h_correspondents","h_chats"])&&(d=e),u||(u=""),l=Object(i.intval)(l)){var _="";1&l&&(_+="page_verified "),2&l&&(_+="page_top_author "),l=`<div class="${_}" onmouseover="pageVerifiedTip(this, {type: ${l}, oid: ${e}})"></div>`}else l="";return`\n<a href="${t}" class="ts_contact clear_fix" id="ts_contact${e}" onclick="return TopSearch.select(this, event, ${d});" onmousedown="event.cancelBubble = true;"\n      onmouseover="TopSearch.itemOver(this, 1, event);"  onmouseout="TopSearch.itemOver(this, 0, event);" hinttype="${s}">\n  <span class="ts_contact_photo ${Object(c.onlinePlatformClass)(o)}">\n    <img class="ts_contact_img" src="${n}"/>\n  </span>\n  <span class="ts_contact_name fl_l">\n    <div class="ts_contact_title_wrap${l?" is_verified":""}">\n      <span class="ts_contact_title">${r}</span>\n    </div>${l}\n    <div class="ts_contact_info">${u}</div>\n  </span>\n  <div class="ts_contact_status"></div>\n</a>`},searchLists:function(e){return e?{friends:{order:0,count:h.maxItems-1,label:Object(s.getLang)("global_friends")},groups:{order:1,count:4,label:Object(s.getLang)("global_communities")},publics:{count:2,parent:"groups"},events:{count:1,parent:"groups"},apps:{order:2,count:1,label:Object(s.getLang)("global_apps")},vk_apps:{order:2,count:1,label:Object(s.getLang)("global_apps")},chats:{order:3,count:h.maxItems-1,label:Object(s.getLang)("global_chats")},search:{order:4,count:h.maxItems-1,label:Object(s.getLang)("head_search_results")}}:{friends:{order:0,count:h.maxItems,label:Object(s.getLang)("global_friends")}}},initListsHtml:function(){h.listsHtml=[]},addToListsHtml:function(e,t,n){var r=h.searchLists(n),o=r[(r[e]||{}).parent||e]||{},i=o.order||0,a=o.label||"";h.listsHtml[i]=h.listsHtml[i]||(n&&a?[`<div class="ts_search_sep">${a}</div>`]:[]),h.listsHtml[i].push(t)},htmlRows:function(e){var t="",n=h.listsHtml.map(e=>e.join(""));if(e){var r="#"===e[0]?"statuses":"auto",o="#"===e[0]?Object(s.getLang)("global_news_search_results"):Object(s.getLang)("global_show_all_results");t+=`\n<a href="/search?c[section]=${r}&c[q]=${encodeURIComponent(e)}" class="ts_search_link clear_fix active" id="ts_search_link"\n    onclick="return TopSearch.select(this, event);" onmousedown="event.cancelBubble = true;" onmouseover="TopSearch.itemOver(this, 1, event);"\n    onmouseout="TopSearch.itemOver(this, 0, event);" >\n  <span class="ts_contact_name fl_l">${o}</span>\n  <div class="ts_contact_status "></div>\n</a>`}return t+n.join("")},prepareRows:function(e){var t=h.maxItems,n=Object(r.ge)("ts_cont_wrap");if(!n||!vk.id)return!1;if(cur.tsStr&&cur.tsStr===e&&!h.forceUpdate)return!1;delete h.forceUpdate,h.initListsHtml();var o={};if(e){var a=[];Object(i.each)(this.getSimilarQueries(e),(function(){a.push(Object(i.escapeRE)(this))})),cur.lastRe=new RegExp("([ -]|^|s|&nbsp;|\b)("+a.join("|")+")","gi"),t--}Object(i.each)(h.searchLists(e),(function(n,a){if(h.cache[n]){var s=a.count,c=h.listSearch(n,e,s,o),u=[],d=0;Object(i.isEmpty)(c)||(Object(i.each)(c,(e,n)=>{if(!t||d>=s)return!1;u.push(n),t--,d++}),u.length&&Object(i.each)(u,(t,a)=>{var s=a[1],c=Object(i.intval)(a[0]),u=c>0&&h.onlines()[c],d=l(s,6),_=d[0],p=d[1],f=d[2],m=d[3],g=d[4],v=d[5],b="search"===n?m:"h_"+n,y=h.row(c,f,p,_,u,r.re,b,g,v);h.addToListsHtml(n,y,e),o[c]=1}))}})),n.innerHTML=h.htmlRows(e),e||Object(u.removeSearchPositionTracker)(u.serviceTopSearch),!t&&e&&"#"!==e[0]&&Object(u.saveSearchAttemptStats)(u.serviceTopSearch,0,!0,e),t&&e&&"#"!==e[0]&&this.hintsSearch(e,cur.lastRe||!1),e&&(cur.tsStr=e)},hintsSearch:function(e,t){var n,o=Object(r.ge)("ts_input"),a=Object(r.ge)("ts_cont_wrap"),s=+new Date;ajax.post("al_search.php",{act:"get_pages_hints",q:e},{cache:1,onDone:function(c,d){if(Object(i.trim)(Object(r.val)(o))!==e)return!1;if(!c)return!1;var _=h.maxItems-Object(r.geByClass)("ts_contact",a).length-1,p=_,f={};Object(i.each)(c,(function(o,a){var s=Object(i.intval)(o),c=l(a,6),u=c[0],d=c[1],p=c[2],m=c[3],g=c[4],v=c[5],b=h.searchLists(e),y=m.replace("h_",""),E=(b[y]||{}).parent||y;if(void 0===b[E]&&(E="search"),f[E]=f[E]||{},f[E][o]=a,h.lists[E]=h.lists[E]||{},h.lists[E][o]=a,Object(r.ge)("ts_contact"+s))return!0;if(!_--)return!1;var w=h.row(s,p,d,u,!1,t,m,g,v);return h.addToListsHtml(E,w,e),n=!0,!0}));var m=+new Date-s;if(Object(u.saveSearchAttemptStats)(u.serviceTopSearch,0,p!==_,e,0,d,m),Object(i.each)(f,(e,t)=>h.updateCache(e,t,!0)),n){var g=Object(r.geByClass1)("active",a),v=g?g.id:"";a.innerHTML=h.htmlRows(e),v&&Object(r.ge)(v)&&Object(r.addClass)(Object(r.ge)(v),"active")}}})},writeBox:function(e){window.curFastChat&&curFastChat.inited&&window.FastChat?FastChat.selectPeer(e,!1,{entrypoint:"fastchat_global_search"}):e>0&&e<2e9?window.showWriteMessageBox(!1,e):nav.go("/im?sel="+e)}};t.default=h},Btvt:function(e,t,n){"use strict";var r=n("I8a+"),o={};o[n("K0xU")("toStringTag")]="z",o+""!="[object z]"&&n("KroJ")(Object.prototype,"toString",(function(){return"[object "+r(this)+"]"}),!0)},"C/va":function(e,t,n){"use strict";var r=n("y3w9");e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},C13D:function(e,t,n){"use strict";n.r(t),n.d(t,"asObject",(function(){return i}));n("KKXr");var r=n("uk5P"),o=n("eVa8");function i(e){if(!e)return null;if(isObject(e))return e;if("string"==typeof e)return{id:e};var t=(e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_HASHES]||"").split("/"),n=(e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_COVER_URL]||"").split(","),i=Object(o.getAudioPerformers)(e,!1);return{id:intval(e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ID]),owner_id:intval(e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_OWNER_ID]),ownerId:e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_OWNER_ID],fullId:e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_OWNER_ID]+"_"+e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ID],title:e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_TITLE]||"",subTitle:e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_SUBTITLE],performer:i,mainArtists:e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_MAIN_ARTISTS],featArtists:e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_FEAT_ARTISTS],authorLink:e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_AUTHOR_LINK],duration:intval(e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_DURATION]),lyrics:intval(e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_LYRICS]),url:e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_URL],flags:e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_FLAGS],context:e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_CONTEXT],extra:e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_EXTRA],accessKey:e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_ACCESS_KEY],addHash:t[0]||"",editHash:t[1]||"",actionHash:t[2]||"",deleteHash:t[3]||"",replaceHash:t[4]||"",urlHash:t[5]||"",restoreHash:t[6]||"",canEdit:!!t[1],canDelete:!!t[3],isLongPerformer:e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_FLAGS]&r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_LONG_PERFORMER_BIT,canAdd:!!(e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_FLAGS]&r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_CAN_ADD_BIT),coverUrl_s:n[0],coverUrl_p:n[1],isClaimed:!!(e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_FLAGS]&r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_CLAIMED_BIT),isExplicit:!!(e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_FLAGS]&r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_EXPLICIT_BIT),isUMA:!!(e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_FLAGS]&r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_UMA_BIT),isReplaceable:!!(e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_FLAGS]&r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_REPLACEABLE),ads:e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ADS],album:e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ALBUM],albumId:intval(e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ALBUM_ID]),albumPart:intval(e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ALBUM_PART]),trackCode:e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_TRACK_CODE],restrictionStatus:e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_RESTRICTION],chartInfo:e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_CHART_INFO_INDEX]}}},CeZd:function(e,t,n){"use strict";n.r(t),n.d(t,"AjaxCacheClient",(function(){return a}));n("91GP"),n("rGqo"),n("Btvt");var r=n("t7n3"),o=n("cGUQ");function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}class a{static getInstance(e,t){var n=a.makeCacheKey(e,t);return a._instances[n]||(a._instances[n]=new a(n)),a._instances[n]}constructor(e){a.ensureCachesInitialized(),this._cacheKey=e}getFromCache(e,t,n){var o=n.cacheLevel,i=void 0===o?0:o,a=n.forceGlobalCache,s=void 0!==a&&a,c=n.onAnswerProcessed,u=void 0===c?()=>{}:c;if(i>0||s){var l=window.ajaxCache[this._cacheKey];if(l&&l._loading)return l._callbacks.push(e),!1;if(l&&!s)return e(0,l),3===i&&delete window.ajaxCache[this._cacheKey],!1;if(l=window.globalAjaxCache[this._cacheKey])return-1===l||Object(r.isFunction)(l)?window.globalAjaxCache[this._cacheKey]=t:t.apply(window,l),u&&u(),!1}return window.ajaxCache[this._cacheKey]={_loading:1,_callbacks:[]},!0}processExistingCache(e,t){var n=window.ajaxCache[this._cacheKey];n&&n._loading&&(setTimeout((function(){for(var r in n._callbacks)n._callbacks.hasOwnProperty(r)&&n._callbacks[r](e,t)}),0),delete window.ajaxCache[this._cacheKey])}cacheResponse(e){window.ajaxCache[this._cacheKey]=e}static ensureCachesInitialized(){window.ajaxCache||(window.ajaxCache={}),window.globalAjaxCache||(window.globalAjaxCache={})}static makeCacheKey(e,t){var n=i({},t);return["al","al_ad","ads_section","ads_showed","captcha_sid","captcha_key","_smt","_preload"].forEach(e=>delete n[e]),e+"#"+Object(o.toQueryString)(n)}static preload(e,t,n){a.ensureCachesInitialized(),e&&"/"!==e.substr(0,1)&&(e="/"+e),window.ajaxCache[a.makeCacheKey(e,t)]=n}static invalidate(e,t){a.ensureCachesInitialized(),void 0===e?window.ajaxCache={}:delete window.ajaxCache[a.makeCacheKey(e,t)]}static invalidateFor(e){Object.keys(window.ajaxCache).forEach(t=>{e(t)&&delete window.ajaxCache[t]})}}a._instances={}},Cfrj:function(e,t,n){var r=n("RYi7"),o=n("ne8i");e.exports=function(e){if(void 0===e)return 0;var t=r(e),n=o(t);if(t!==n)throw RangeError("Wrong length!");return n}},CkkT:function(e,t,n){var r=n("m0Pp"),o=n("Ymqv"),i=n("S/j/"),a=n("ne8i"),s=n("zRwo");e.exports=function(e,t){var n=1==e,c=2==e,u=3==e,l=4==e,d=6==e,_=5==e||d,p=t||s;return function(t,s,h){for(var f,m,g=i(t),v=o(g),b=r(s,h,3),y=a(v.length),E=0,w=n?p(t,y):c?p(t,0):void 0;y>E;E++)if((_||E in v)&&(m=b(f=v[E],E,g),e))if(n)w[E]=m;else if(m)switch(e){case 3:return!0;case 5:return f;case 6:return E;case 2:w.push(f)}else if(l)return!1;return d?-1:u||l?l:w}}},D1OX:function(e,t,n){"use strict";n.r(t),n.d(t,"uiGetGallery",(function(){return i})),n.d(t,"UIGallery",(function(){return a}));var r=n("qYuU"),o=Object(r.makeSharedState)("ui-gallery",()=>({galleries:{},incIndex:0}));function i(e){var t=domData(ge(e),"gallery-id");return t&&o().galleries[t]}class a{constructor(e,t){if(!e)throw new Error("No element was provided for UIGallery");if(e=ge(e),!hasClass(e,"ui_gallery"))throw new Error("Provided incorrect element for UIGallery");var n=i(e);if(n)return n;this._opts=extend({markOutside:!1,scrollY:!0,scrollX:!0,noArrows:!1},t),this._id=o().incIndex,o().incIndex+=1,this._el=e,this._width=getSize(this._el)[0],this._items=geByClass("ui_gallery_item",this._el),this._itemWidth=getSize(this._items[0])[0],this._itemOffset=intval(getStyle(this._items[0],vk.rtl?"marginLeft":"marginRight")),this._scrollOffset=intval(getStyle(this._items[0],"marginLeft")),this._itemFullWidth=this._itemWidth+this._itemOffset,this._innerCont=geByClass1("ui_gallery__inner_cont",this._el),this._inner=geByClass1("ui_gallery__inner",this._el),this._scroll=function(){var e={rtl:!1,backward:!1,delta:1,negative:!1,rtlSame:!1};if(!vk.rtl)return e;if(!cur._scrollInfo){var t=se('<div style="position: fixed; left: -1000; width: 0; overflow: scroll">x</div>');ge("content").appendChild(t);var n=t.scrollLeft;e.rtl=vk.rtl,e.backward=n>0,t.scrollLeft=1e3,e.delta=t.scrollLeft===n?-1:1,e.negative=!e.backward&&e.delta<0,e.rtlSame=e.rtl&&!e.backward&&!e.negative,re(t),cur._scrollInfo=e}return cur._scrollInfo}(),this._loadingMore=!1,this._finised=!1,this._visible={left:-1,right:-1,items:[]},this._outside={left:-1,right:-1,timer:null},this._initScroll(),this._initArrows(),domData(this._el,"gallery-id",this._id),o().galleries[this._id]=this,this._checkItemsAfterScroll(this._innerCont.scrollLeft,!0)}_initScroll(){(this._opts.scrollX||this._opts.scrollY)&&addEvent(this._innerCont,"DOMMouseScroll wheel",this._onWheelScroll.bind(this))}_initArrows(){this._opts.noArrows?addClass(this._el,"ui_gallery_no_arrows"):(this._leftArrow=geByClass1("ui_gallery__arrow_left",this._el),this._rightArrow=geByClass1("ui_gallery__arrow_right",this._el),this._arrowWidth=getSize(this._leftArrow)[0],addEvent(this._leftArrow,"click",this._onArrowScroll.bind(this,-1)),addEvent(this._leftArrow,"mouseover",this._onArrowMouseOver.bind(this,"left")),addEvent(this._leftArrow,"mouseout",this._onArrowMouseOut.bind(this)),addEvent(this._rightArrow,"click",this._onArrowScroll.bind(this,1)),addEvent(this._rightArrow,"mouseover",this._onArrowMouseOver.bind(this,"right")),addEvent(this._rightArrow,"mouseout",this._onArrowMouseOut.bind(this)))}_onWheelScroll(e){if(this._opts.scrollX||this._opts.scrollY){var t;if("wheel"==e.type)if(Math.abs(e.deltaY)>Math.abs(e.deltaX)){if(!this._opts.scrollY)return;t=-e.deltaY}else{if(!this._opts.scrollX)return;t=-e.deltaX}else if(void 0!==e.wheelDeltaY){if(!this._opts.scrollY)return;t=e.wheelDeltaY}else if(void 0!==e.wheelDelta)t=e.wheelDelta;else{if(!e.detail||1!==e.axis)return;t=-e.detail}t=this._scroll.rtlSame?-t:t,Math.abs(t)>=120&&(t=74*Math.max(-1,Math.min(1,t))),this._innerCont.scrollLeft-=t,this._checkItemsAfterScroll(this._innerCont.scrollLeft),cancelEvent(e)}}_onArrowScroll(e,t){if(!this._opts.noArrows){var n=this._innerCont.scrollLeft+(this._scroll.rtlSame?-e:e)*(this._width-2*this._arrowWidth),r=this._innerCont.scrollWidth-this._width;this._scroll.negative?(n=Math.min(n,0),n=Math.abs(n)):n=Math.max(0,n),n=Math.min(r,n);var o=this._scroll.negative||this._scroll.rtlSame?-e:e;if(o>0&&n<r)n=Math.floor(n/this._itemFullWidth)*this._itemFullWidth;else if(o<0&&n>0){n=Math.floor(n/this._itemFullWidth)*this._itemFullWidth}if(0===n||n===r){var i=this._innerCont.scrollWidth;addClass(this._inner,"ui_gallery__inner_shift_instant"),this._onArrowMouseOut(),n&&(n+=e*(this._innerCont.scrollWidth-i))}this._scroll.negative&&(n=-n),animate(this._innerCont,{scrollLeft:n},{duration:Math.abs(this._innerCont.scrollLeft-n)+50,transition:Fx.Transitions.easeOutCubic}),this._checkItemsAfterScroll(n),setTimeout(()=>removeClass(this._inner,"ui_gallery__inner_shift_instant"),0),cancelEvent(t)}}_checkItemsAfterScroll(e,t){if(this._scroll.negative&&(e=Math.abs(e)),this._opts.markOutside||this._opts.onViewItem){var n,r=this._itemWidth/3,o=(this._scroll.backward?this._inner.scrollWidth-this._width-e:e)-this._scrollOffset,i=e&&Math.floor(o/this._itemFullWidth),a=i*this._itemFullWidth+2*r;n=this._scroll.backward?e+this._width<this._inner.scrollWidth-a:e>a;var s,c=Math.min(this._items.length-1,Math.floor((o+this._width)/this._itemFullWidth)),u=c*this._itemFullWidth+2*r;if(s=this._scroll.backward?e>this._inner.scrollWidth-u:e+this._width<u,this._opts.onViewItem){var l=n?Math.min(this._items.length-1,i+1):i,d=s?Math.max(0,c-1):c;if(t||l!==this._visible.left||d!==this._visible.right){for(var _=l;_<=d;_++)(this._visible.left<0||t&&!inArray(this._items[_],this._visible.items)||_<this._visible.left||_>this._visible.right)&&this._opts.onViewItem(this._items[_],_);this._visible.left=l,this._visible.right=d,this._visible.items=this._items.slice(l,d+1)}}this._opts.markOutside&&(t?(geByClass("ui_gallery_item_outside",this._inner).forEach(e=>{removeClass(e,"ui_gallery_item_outside")}),this._outside.left=-1,this._outside.right=-1):((i!==this._outside.left||!n)&&this._outside.left>=0&&(removeClass(this._items[this._outside.left],"ui_gallery_item_outside"),this._outside.left=-1),(c!==this._outside.right||!s)&&this._outside.right>=0&&(removeClass(this._items[this._outside.right],"ui_gallery_item_outside"),this._outside.right=-1)),n&&i!==this._outside.left&&(addClass(this._items[i],"ui_gallery_item_outside"),this._outside.left=i),s&&c!==this._outside.right&&(addClass(this._items[c],"ui_gallery_item_outside"),this._outside.right=c))}if(!this._opts.noArrows){var p=e>0,h=e+this._width<this._inner.scrollWidth;toggleClass(this._leftArrow,"ui_gallery__arrow_visible",this._scroll.rtl&&!this._scroll.backward?h:p),toggleClass(this._rightArrow,"ui_gallery__arrow_visible",this._scroll.rtl&&!this._scroll.backward?p:h)}(!this._scroll.backward&&this._inner.scrollWidth-e-this._width<1e3||this._scroll.backward&&e<1e3)&&this._onLoadMore()}_onArrowMouseOver(e){this._opts.noArrows||addClass(this._inner,"ui_gallery__inner_shift_"+e)}_onArrowMouseOut(){this._opts.noArrows||(removeClass(this._inner,"ui_gallery__inner_shift_left"),removeClass(this._inner,"ui_gallery__inner_shift_right"))}_onLoadMore(){!this._opts.onLoadMore||this._loadingMore||this._finised||(this._loadingMore=!0,this._opts.onLoadMore(this._items.length))}addMore(e,t){e=e||[],this.addItems(e),this._finised=!!t||!e.length,this._loadingMore=!1}addItems(e,t){if((e=e||[]).length){var n=t>=0&&t<this._items.length?this._items[t]:null;e.forEach(e=>{n?domInsertBefore(e,n):this._inner.appendChild(e)}),this.refresh()}}destroy(){removeEvent(this._innerCont),removeEvent(this._leftArrow),removeEvent(this._rightArrow),domData(this._el,"gallery-id",null),delete o().galleries[this._id],this._opts.onDestroy&&this._opts.onDestroy(),re(this._el)}removeItem(e){return isNumeric(e)&&(e=this._items[e]),!(!e||!inArray(e,this._items))&&(re(e),this.refresh(),this._items.length||this.destroy(),!0)}refresh(){this._width=getSize(this._el)[0],this._items=geByClass("ui_gallery_item",this._el),this._checkItemsAfterScroll(this._innerCont.scrollLeft,!0)}getItems(){return this._items}getVisibleItems(){return this._visible.items.map((e,t)=>[e,this._visible.left+t])}}},D4iV:function(e,t,n){for(var r,o=n("dyZX"),i=n("Mukb"),a=n("ylqs"),s=a("typed_array"),c=a("view"),u=!(!o.ArrayBuffer||!o.DataView),l=u,d=0,_="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");d<9;)(r=o[_[d++]])?(i(r.prototype,s,!0),i(r.prototype,c,!0)):l=!1;e.exports={ABV:u,CONSTR:l,TYPED:s,VIEW:c}},DM26:function(e,t,n){"use strict";n.r(t),n.d(t,"pause",(function(){return r})),n.d(t,"retryFn",(function(){return o})),n.d(t,"debouncedPromise",(function(){return i})),n.d(t,"throttledPromise",(function(){return a})),n.d(t,"abortablePause",(function(){return s})),n.d(t,"promisify",(function(){return c}));n("VRzm"),n("Btvt");function r(e,t){return new Promise(n=>{setTimeout(n.bind(null,t),1e3*e)})}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=0;return function i(){for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return Promise.resolve().then(()=>e(...s)).catch(e=>{if(++o<=t){var a="function"==typeof n?n(o):0;return 0===a?i(...s):r(a).then(()=>i(...s))}throw e})}}function i(e,t,n){var r,o;return function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return new Promise((e,i)=>{var s=n&&!r;clearTimeout(r),o&&o.reject("debounce"),r=setTimeout((function(){r=null,o=null,n||e(a)}),t),s?e(a):n&&i("debounce"),o={resolve:e,reject:i}}).then(t=>e(...t))}}function a(e,t){var n,r,o;return function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return new Promise((e,i)=>{var s=Date.now(),c=()=>{e(a),n=s};!n||n+t<s?c():(o&&(o.reject(),clearTimeout(r)),o={resolve:e,reject:i},r=setTimeout(c,t-(s-n)))}).then(t=>e(...t))}}function s(e,t){var n,r=new Promise(r=>{n=r,setTimeout(r.bind(null,t),1e3*e)});return{pause:()=>r,abort(){n(t)}}}function c(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return new Promise(t=>e(...n,t))}}},DM2o:function(e,t,n){"use strict";n.r(t),n.d(t,"statlogsValueEvent",(function(){return c}));var r,o,i=n("J8bf"),a=n("jE6c"),s=n("Xrg9");function c(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];var c;void 0!==e&&void 0!==t&&u(()=>{try{c=(c=JSON.parse(Object(i.getCookie)(o))).data}catch(e){c=[]}c.push([Math.round(Date.now()/1e3),e,t].concat(r)),c=c.slice(c.length-100);var n=Math.round(Object(a.rand)(0,1e9));Object(i.setCookie)(o,JSON.stringify({data:c,uniqueId:n}),.01)})}function u(e,t){if(s.default.checkVersion()){if(!0!==s.default.get(r)){s.default.set(r,!0);try{e()}catch(e){}return void s.default.set(r,!1)}t||setTimeout(()=>u(e,!0),100)}else e()}r="lockkk_stats_cookie_lock",o="remixsts"},DVgA:function(e,t,n){var r=n("zhAb"),o=n("4R4u");e.exports=Object.keys||function(e){return r(e,o)}},ER42:function(e,t,n){"use strict";n.r(t),n.d(t,"post",(function(){return i})),n.d(t,"plaingetCancelable",(function(){return a}));var r=n("cGUQ"),o=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r};function i(e,t,n){return t&&(t.im_v=3),new Promise((function(r,i){window.ajax.post(e,t,{timeout:n,onDone:function(){r.apply(null,[o(arguments)])},onFail:function(){return i.apply(null,o(arguments)),!0}})}))}function a(e,t,n){void 0===n&&(n={});var o=new XMLHttpRequest;return{request:new Promise((function(i,a){var s,c=Date.now(),u=n.timeout||60,l=Object(r.toQueryString)(t);o.onreadystatechange=function(){4==o.readyState&&(window.clearInterval(s),o.status>=200&&o.status<300?i([o.responseText,o]):a([o.responseText,o]))};try{o.open("GET",e+"?"+l,!0)}catch(e){return a([e,o])}o.send(),s=window.setInterval((function(){Date.now()-c>1e3*u&&(window.browser.safari&&o.abort(),a(["",{}]),window.clearInterval(s))}),1e3)})),cancel:function(){o.abort()}}}},ERyv:function(e,t,n){"use strict";n.r(t),n.d(t,"isWeirdLogging",(function(){return u})),n.d(t,"imWeirdLog",(function(){return l})),n.d(t,"imWeirdCatch",(function(){return d})),n.d(t,"startLoggingAllUnhandled",(function(){return _})),n.d(t,"stopLoggingAllUnhandled",(function(){return p}));n("VRzm"),n("Btvt");var r,o=n("ER42"),i=n("DM26"),a=1;function s(e,t,n,o,i){if("Script error."!==e){var a=i?i.stack||i.message:null;l("unhandled_error",a?{err:e,stack:a}:{err:e})}r&&r.apply(this,arguments)}function c(e){e.preventDefault()}function u(){return!!window.imwl}function l(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];u()&&(n&&window.console&&(console.error(e,t),console.trace&&console.trace()),Object(i.retryFn)(o.post,3,()=>2)("al_im.php",{act:"a_weird_log",kind:e,data:JSON.stringify(extend({errIdx:a++,ua:navigator.userAgent},t))}))}function d(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return l(e,extend({err:t&&t.message||t},n)),Promise.reject(t)}function _(){r=window.onerror,window.onerror=s,window.addEventListener("unhandledrejection",c)}function p(){window.onerror=r,r=void 0,window.removeEventListener("unhandledrejection",c)}},EWmC:function(e,t,n){var r=n("LZWt");e.exports=Array.isArray||function(e){return"Array"==r(e)}},EasH:function(__webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"MessageBox",(function(){return MessageBox})),__webpack_require__.d(__webpack_exports__,"showBox",(function(){return showBox})),__webpack_require__.d(__webpack_exports__,"showTabbedBox",(function(){return showTabbedBox})),__webpack_require__.d(__webpack_exports__,"showFastBox",(function(){return showFastBox})),__webpack_require__.d(__webpack_exports__,"showCaptchaBox",(function(){return showCaptchaBox})),__webpack_require__.d(__webpack_exports__,"showReCaptchaBox",(function(){return showReCaptchaBox}));var core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("KKXr"),_ui__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("v+DW"),_debug_tools__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("98sY"),_dom_events__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("Egk5"),_ui_util__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("ryw6"),_dom__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("zxIV"),_fx__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("7jxN"),_utils_common__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("t7n3"),_lang__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("4+be"),_shared_lib_convert__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("cGUQ"),_box_utils__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("kcIO"),_accessibility__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("QGEU"),_web_helpers_classnames__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("ZxpX");function MessageBox(_options){var defaults={title:!1,titleControls:"",containerClass:"",width:450,height:"auto",animSpeed:0,bodyStyle:"",grey:!1,white:!1,selfDestruct:!0,progress:!1,hideOnBGClick:!1,hideButtons:!1,onShow:!1,onHideAttempt:!1,onBeforeHide:!1,onHide:!1,onClean:!1,onDestroy:!1,preventHideLastWithCheck:!1,refreshCoordsOnTimeout:!1},options=Object(_utils_common__WEBPACK_IMPORTED_MODULE_7__.extend)(defaults,_options),guid=window._message_box_guid++,visible=!1,btns={ok:[],cancel:[]},boxTitleBck;options.progress||(options.progress="box_progress"+guid);var controlsStyle=options.hideButtons?' style="display: none"':"",boxContainer=Object(_dom__WEBPACK_IMPORTED_MODULE_5__.ce)("div",{className:Object(_web_helpers_classnames__WEBPACK_IMPORTED_MODULE_12__.classNames)("popup_box_container",options.containerClass),innerHTML:`\n<div class="box_layout" onclick="boxQueue.skip=true;">\n  <div class="box_title_wrap">\n    <div class="box_x_button" aria-label="${Object(_lang__WEBPACK_IMPORTED_MODULE_8__.getLang)("global_close")}" tabindex="0" role="button"></div>\n    <div class="box_title_controls"></div>\n    <div class="box_title"></div>\n  </div>\n\n  <div class="box_body" style="${options.bodyStyle}"></div>\n  ${options.noControls?"":`\n  <div class="box_controls_wrap" ${controlsStyle}>\n    <div class="box_controls">\n      <table cellspacing="0" cellpadding="0" class="fl_r">\n        <tr></tr>\n      </table>\n      <div class="progress" id="${options.progress}"></div>\n\n      <div class="box_controls_text _box_controls_text">${options.textControls||""}</div>\n    </div>\n  <div>`}\n</div>`},{display:"none"});Object(_dom__WEBPACK_IMPORTED_MODULE_5__.hide)(boxContainer);var boxLayout=Object(_dom__WEBPACK_IMPORTED_MODULE_5__.domFC)(boxContainer),boxTitleWrap=Object(_dom__WEBPACK_IMPORTED_MODULE_5__.domFC)(boxLayout),boxCloseButton=Object(_dom__WEBPACK_IMPORTED_MODULE_5__.domFC)(boxTitleWrap),boxTitle=Object(_dom__WEBPACK_IMPORTED_MODULE_5__.domLC)(boxTitleWrap),boxTitleControls=Object(_dom__WEBPACK_IMPORTED_MODULE_5__.domNS)(boxCloseButton);options.noCloseButton&&Object(_dom__WEBPACK_IMPORTED_MODULE_5__.hide)(boxCloseButton);var boxBody=Object(_dom__WEBPACK_IMPORTED_MODULE_5__.domNS)(boxTitleWrap),boxControlsWrap=Object(_dom__WEBPACK_IMPORTED_MODULE_5__.domNS)(boxBody),boxControls=Object(_dom__WEBPACK_IMPORTED_MODULE_5__.domFC)(boxControlsWrap),boxButtons=Object(_dom__WEBPACK_IMPORTED_MODULE_5__.domFC)(boxControls),boxProgress=Object(_dom__WEBPACK_IMPORTED_MODULE_5__.domNS)(boxButtons),boxControlsText=Object(_dom__WEBPACK_IMPORTED_MODULE_5__.domNS)(boxProgress);boxLayer.appendChild(boxContainer),boxContainer.setAttribute("tabindex",0),boxContainer.focus(),refreshBox(),Object(_box_utils__WEBPACK_IMPORTED_MODULE_10__.boxRefreshCoords)(boxContainer);var emitter=new EventEmitter;function refreshBox(){boxTitleBck||(options.title?(boxTitle.innerHTML=options.title,Object(_dom__WEBPACK_IMPORTED_MODULE_5__.removeClass)(boxBody,"box_no_title"),Object(_dom__WEBPACK_IMPORTED_MODULE_5__.show)(boxTitleWrap)):(Object(_dom__WEBPACK_IMPORTED_MODULE_5__.addClass)(boxBody,"box_no_title"),Object(_dom__WEBPACK_IMPORTED_MODULE_5__.hide)(boxTitleWrap))),options.titleControls&&(boxTitleControls.innerHTML=options.titleControls),Object(_dom__WEBPACK_IMPORTED_MODULE_5__.toggleClass)(boxBody,"box_no_buttons",options.hideButtons),Object(_dom__WEBPACK_IMPORTED_MODULE_5__.toggleClass)(boxTitleWrap,"box_grey",options.grey),Object(_dom__WEBPACK_IMPORTED_MODULE_5__.toggleClass)(boxTitleWrap,"box_white",options.white),boxContainer.style.width="string"==typeof options.width?options.width:options.width+"px",boxContainer.style.height="string"==typeof options.height?options.height:options.height+"px"}function addButtonInternal(e,t,n,r){var o="flat_button";"no"===n||"gray"===n?(o+=" secondary",n="cancel"):n="ok";var i=Object(_dom__WEBPACK_IMPORTED_MODULE_5__.ce)("button",{className:o,innerHTML:e,id:r});return boxButtons.rows[0].insertCell(0).appendChild(i),Object(_ui__WEBPACK_IMPORTED_MODULE_1__.createButton)(i,(function(){emitter.emit(n,retBox),t.apply(null,arguments)})),btns[n].push(i),i}function setControlsText(e){boxControlsText.innerHTML=e}function _removeButtons(){for(var e=boxButtons.rows[0];e.cells.length;)Object(_dom__WEBPACK_IMPORTED_MODULE_5__.cleanElems)(e.cells[0]),e.deleteCell(0);btns.ok.length=btns.cancel.length=0}var destroyMe=function(){Object(_utils_common__WEBPACK_IMPORTED_MODULE_7__.isFunction)(options.onClean)&&options.onClean(),Object(_utils_common__WEBPACK_IMPORTED_MODULE_7__.isFunction)(options.onDestroy)&&options.onDestroy(),options.noControls||_removeButtons(),Object(_dom__WEBPACK_IMPORTED_MODULE_5__.cleanElems)(boxContainer,boxCloseButton,boxTitleWrap,options.noControls?void 0:boxControlsWrap),boxLayer.removeChild(boxContainer),delete window._message_boxes[guid]},hideMe=function(e,t,n){if(visible){visible=!1;var r=!0===e?0:options.animSpeed;options.hideOnBGClick&&Object(_dom_events__WEBPACK_IMPORTED_MODULE_3__.removeEvent)(document,"click",boxQueue.hideBGClick),Object(_utils_common__WEBPACK_IMPORTED_MODULE_7__.isFunction)(options.onBeforeHide)&&options.onBeforeHide();var o=function(){boxQueue.currHiding===_message_boxes[guid]&&(boxQueue.currHiding=!1),_message_boxes[guid].shOther||e||layers.boxhide(),!t&&options.selfDestruct?destroyMe():Object(_dom__WEBPACK_IMPORTED_MODULE_5__.hide)(boxContainer),Object(_utils_common__WEBPACK_IMPORTED_MODULE_7__.isFunction)(options.onHide)&&options.onHide(n),retBox.emit("afterHide",retBox)};r>0?(boxQueue.currHiding=_message_boxes[guid],Object(_fx__WEBPACK_IMPORTED_MODULE_6__.fadeOut)(boxContainer,r,o)):o()}};function showMe(e,t,n){if(!visible&&window._message_boxes[guid]&&!window._message_boxes[guid].forceHide){visible=!0;var r=!0===e||t?0:options.animSpeed;if(options.hideOnBGClick&&Object(_dom_events__WEBPACK_IMPORTED_MODULE_3__.addEvent)(document,"click",boxQueue.hideBGClick),t||layers.boxshow(),boxQueue.currHiding){boxQueue.currHiding.shOther=!0;var o=boxQueue.currHiding.bodyNode.parentNode.parentNode;Object(_dom__WEBPACK_IMPORTED_MODULE_5__.data)(o,"tween").stop(!0)}r>0?Object(_fx__WEBPACK_IMPORTED_MODULE_6__.fadeIn)(boxContainer,r):Object(_dom__WEBPACK_IMPORTED_MODULE_5__.show)(boxContainer),Object(_box_utils__WEBPACK_IMPORTED_MODULE_10__.boxRefreshCoords)(boxContainer),options.onShow&&options.onShow(n)}}Object(_dom_events__WEBPACK_IMPORTED_MODULE_3__.addEvent)(boxCloseButton,"click",boxQueue.hideLast);var retBox=window._message_boxes[guid]={guid,_show:showMe,_hide:hideMe,bodyNode:boxBody,controlsTextNode:boxControlsText,titleWrap:boxTitleWrap,btns,show:function(){return boxQueue._show(guid),this},progress:boxProgress,showCloseProgress:_dom__WEBPACK_IMPORTED_MODULE_5__.addClass.pbind(boxTitleWrap,"box_loading"),hideCloseProgress:_dom__WEBPACK_IMPORTED_MODULE_5__.removeClass.pbind(boxTitleWrap,"box_loading"),showProgress:function(){Object(_dom__WEBPACK_IMPORTED_MODULE_5__.hide)(boxControlsText),Object(_dom__WEBPACK_IMPORTED_MODULE_5__.show)(boxProgress)},hideProgress:function(){Object(_dom__WEBPACK_IMPORTED_MODULE_5__.hide)(boxProgress),Object(_dom__WEBPACK_IMPORTED_MODULE_5__.show)(boxControlsText)},hide:function(e){return!(Object(_utils_common__WEBPACK_IMPORTED_MODULE_7__.isFunction)(options.onHideAttempt)&&!options.onHideAttempt(e))&&(boxQueue._hide(guid),!0)},isVisible:function(){return visible},bodyHeight:function(){return Object(_dom__WEBPACK_IMPORTED_MODULE_5__.getStyle)(boxBody,"height")},content:function(e){return options.onClean&&options.onClean(),"string"==typeof e?boxBody.innerHTML=e:e instanceof HTMLElement&&(boxBody.innerHTML="",boxBody.appendChild(e)),options.refreshCoordsOnTimeout?setTimeout(()=>{Object(_box_utils__WEBPACK_IMPORTED_MODULE_10__.boxRefreshCoords)(boxContainer)}):Object(_box_utils__WEBPACK_IMPORTED_MODULE_10__.boxRefreshCoords)(boxContainer),boxContainer.focus(),refreshBox(),Object(_accessibility__WEBPACK_IMPORTED_MODULE_11__.updateAriaElements)(),this},emit:function(e,t){emitter.emit(e,t)},addButton:function(e,t,n,r,o){var i=addButtonInternal(e,t||this.hide,n,o);return r?i:this},setButtons:function(e,t,n,r){var o=this.removeButtons();return e?(o.addButton(e,t),n&&o.addButton(n,r,"no"),o):o.addButton(Object(_lang__WEBPACK_IMPORTED_MODULE_8__.getLang)("box_close"))},setControlsText,removeButtons:function(){return _removeButtons(),this},setBackTitle:function(e){e?(boxTitle.innerHTML='<div class="back">'+Object(_lang__WEBPACK_IMPORTED_MODULE_8__.getLang)("global_box_title_back")+"</div>",boxTitleBck=options.title,options.title=boxTitle.innerHTML,setTimeout((function(){Object(_dom__WEBPACK_IMPORTED_MODULE_5__.geByClass1)("back",boxTitle).onclick=e}),100)):boxTitleBck&&(boxTitle.innerHTML=options.title=boxTitleBck,boxTitleBck=!1)},destroy:destroyMe,getOptions:function(){return options},on:function(e,t){emitter.on(e,t)},once:function(e,t){emitter.once(e,t)},updateBoxCoords:function(){Object(_box_utils__WEBPACK_IMPORTED_MODULE_10__.boxRefreshCoords)(boxContainer)},setOptions:function(e){if(options.hideOnBGClick&&Object(_dom_events__WEBPACK_IMPORTED_MODULE_3__.removeEvent)(document,"click",boxQueue.hideBGClick),options=Object(_utils_common__WEBPACK_IMPORTED_MODULE_7__.extend)(options,e),"bodyStyle"in e)for(var t=options.bodyStyle.split(";"),n=0,r=t.length;n<r;n++){var o=t[n].split(":");o.length>1&&o[0].length&&(boxBody.style[Object(_utils_common__WEBPACK_IMPORTED_MODULE_7__.trim)(o[0])]=Object(_utils_common__WEBPACK_IMPORTED_MODULE_7__.trim)(o[1]),boxBody.style.setProperty&&boxBody.style.setProperty(Object(_utils_common__WEBPACK_IMPORTED_MODULE_7__.trim)(o[0]),Object(_utils_common__WEBPACK_IMPORTED_MODULE_7__.trim)(o[1]),""))}return options.hideOnBGClick&&Object(_dom_events__WEBPACK_IMPORTED_MODULE_3__.addEvent)(document,"click",boxQueue.hideBGClick),Object(_dom__WEBPACK_IMPORTED_MODULE_5__.toggle)(boxControlsWrap,!options.hideButtons),refreshBox(),options.noRefreshCoords||Object(_box_utils__WEBPACK_IMPORTED_MODULE_10__.boxRefreshCoords)(boxContainer),this},evalBox:function evalBox(js,url,params){var scr="((function() { return function() { var box = this; "+(js||"")+";}; })())";if(__debugMode){var fn=eval(scr);fn.apply(this,[url,params])}else try{var _fn=eval(scr);_fn.apply(this,[url,params])}catch(e){Object(_ui_util__WEBPACK_IMPORTED_MODULE_4__.topError)(e,{dt:15,type:7,url,query:params?Object(_shared_lib_convert__WEBPACK_IMPORTED_MODULE_9__.toQueryString)(params):void 0,js}),Object(_debug_tools__WEBPACK_IMPORTED_MODULE_2__.logEvalError)(e,scr)}},preventHideLastWithCheck:options.preventHideLastWithCheck};return retBox}function showBox(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;if(Object(_dom_events__WEBPACK_IMPORTED_MODULE_3__.checkEvent)(r))return!1;var o=n.params||{};n.containerClass&&(o.containerClass=n.containerClass);var i=new MessageBox(o),a={onDone:function(r,a,s,c){if(n.preOnDone&&n.onDone&&n.onDone(i),i.isVisible())if(__debugMode)u();else try{u()}catch(n){Object(_ui_util__WEBPACK_IMPORTED_MODULE_4__.topError)(n,{dt:15,type:103,url:e,query:Object(_shared_lib_convert__WEBPACK_IMPORTED_MODULE_9__.toQueryString)(t),answer:Array.prototype.slice.call(arguments).join("<!>")}),i.isVisible()&&i.hide()}else n.onDone&&n.onDone(i,c);function u(){Object(_dom__WEBPACK_IMPORTED_MODULE_5__.show)(boxLayerBG),Object(_dom__WEBPACK_IMPORTED_MODULE_5__.addClass)(bodyNode,"layers_shown"),i.setOptions({title:r,hideButtons:o.hideButtons||!1}),n.showProgress?i.show():Object(_dom__WEBPACK_IMPORTED_MODULE_5__.show)(i.bodyNode),i.content(a),i.evalBox(s,e,t),n.onDone&&n.onDone(i,c)}},onFail:function(e){if(i.failed=!0,setTimeout(i.hide,0),Object(_utils_common__WEBPACK_IMPORTED_MODULE_7__.isFunction)(n.onFail))return n.onFail(e)},cache:n.cache,stat:n.stat,fromBox:!0};return n.prgEl&&(n.showProgress=_ui_util__WEBPACK_IMPORTED_MODULE_4__.showGlobalPrg.pbind(n.prgEl,{cls:n.prgClass,w:n.prgW,h:n.prgH,hide:!0}),n.hideProgress=_dom__WEBPACK_IMPORTED_MODULE_5__.hide.pbind("global_prg")),n.showProgress?Object(_utils_common__WEBPACK_IMPORTED_MODULE_7__.extend)(a,{showProgress:n.showProgress,hideProgress:n.hideProgress}):(i.setOptions({title:!1,hideButtons:!0}).show(),boxQueue.count()<2&&(Object(_dom__WEBPACK_IMPORTED_MODULE_5__.hide)(boxLayerBG),Object(_dom__WEBPACK_IMPORTED_MODULE_5__.removeClass)(bodyNode,"layers_shown")),Object(_dom__WEBPACK_IMPORTED_MODULE_5__.hide)(i.bodyNode),a.showProgress=function(){Object(_dom__WEBPACK_IMPORTED_MODULE_5__.show)(boxLoader),Object(_box_utils__WEBPACK_IMPORTED_MODULE_10__.boxRefreshCoords)(boxLoader)},a.hideProgress=_dom__WEBPACK_IMPORTED_MODULE_5__.hide.pbind(boxLoader)),i.removeButtons().addButton(Object(_lang__WEBPACK_IMPORTED_MODULE_8__.getLang)("global_close")),ajax.post(e,t,a),i}function showTabbedBox(e,t,n,r){return(n=n||{}).stat=n.stat||[],n.stat.push(jsc("web/box.js"),"boxes.css"),showBox(e,t,n,r)}function showFastBox(e,t,n,r,o,i){return new MessageBox("string"==typeof e?{title:e}:e).content(t).setButtons(n,r,o,i).show()}function showCaptchaBox(e,t,n,r){var o=function(t){if(!t||void 0===t.keyCode||10===t.keyCode||13===t.keyCode){var o=Object(_dom__WEBPACK_IMPORTED_MODULE_5__.geByTag1)("input",n.bodyNode);if(Object(_utils_common__WEBPACK_IMPORTED_MODULE_7__.trim)(o.value)||!0===t){var i=Object(_dom__WEBPACK_IMPORTED_MODULE_5__.geByTag1)("img",n.bodyNode)[0];Object(_dom_events__WEBPACK_IMPORTED_MODULE_3__.removeEvent)(o),Object(_dom_events__WEBPACK_IMPORTED_MODULE_3__.removeEvent)(i),Object(_dom__WEBPACK_IMPORTED_MODULE_5__.show)(Object(_dom__WEBPACK_IMPORTED_MODULE_5__.geByClass1)("progress",n.bodyNode)),Object(_dom__WEBPACK_IMPORTED_MODULE_5__.hide)(o),r.onSubmit(e,o.value)}else Object(_dom__WEBPACK_IMPORTED_MODULE_5__.elfocus)(o)}},i=!!n,a=Object(_utils_common__WEBPACK_IMPORTED_MODULE_7__.intval)(t)?"":"&s=1",s=r.imgSrc||"/captcha.php?sid="+e+a;if(!i){var c=`\n<div class="captcha">\n  <div><img src="${s}"/></div>\n  <div>\n    <input type="text" class="big_text" maxlength="7" placeholder="${Object(_lang__WEBPACK_IMPORTED_MODULE_8__.getLang)("global_captcha_input_here")}" />\n    <div class="progress" /></div>\n  </div>\n</div>`+(r.addText||"");n=showFastBox({title:Object(_lang__WEBPACK_IMPORTED_MODULE_8__.getLang)("captcha_enter_code"),width:305,onHide:r.onHide,onDestroy:r.onDestroy||!1},c,Object(_lang__WEBPACK_IMPORTED_MODULE_8__.getLang)("captcha_send"),(function(){n.submit()}),Object(_lang__WEBPACK_IMPORTED_MODULE_8__.getLang)("captcha_cancel"),(function(){var e=Object(_dom__WEBPACK_IMPORTED_MODULE_5__.geByTag1)("input",n.bodyNode),t=Object(_dom__WEBPACK_IMPORTED_MODULE_5__.geByTag1)("img",n.bodyNode);Object(_dom_events__WEBPACK_IMPORTED_MODULE_3__.removeEvent)(e),Object(_dom_events__WEBPACK_IMPORTED_MODULE_3__.removeEvent)(t),n.hide()}))}n.submit=o.pbind(!0),n.changed=!0;var u=Object(_dom__WEBPACK_IMPORTED_MODULE_5__.geByTag1)("input",n.bodyNode),l=Object(_dom__WEBPACK_IMPORTED_MODULE_5__.geByTag1)("img",n.bodyNode);return i&&(u.value="",l.src="/captcha.php?sid="+e+a,Object(_dom__WEBPACK_IMPORTED_MODULE_5__.hide)(Object(_dom__WEBPACK_IMPORTED_MODULE_5__.geByClass1)("progress",n.bodyNode))),Object(_dom__WEBPACK_IMPORTED_MODULE_5__.show)(u),Object(_dom_events__WEBPACK_IMPORTED_MODULE_3__.addEvent)(u,"keypress",o),Object(_dom_events__WEBPACK_IMPORTED_MODULE_3__.addEvent)(l,"click",(function(){this.src="/captcha.php?sid="+e+a+"&v="+Object(_utils_common__WEBPACK_IMPORTED_MODULE_7__.irand)(1e6,2e6)})),Object(_dom__WEBPACK_IMPORTED_MODULE_5__.elfocus)(u),n}function showReCaptchaBox(e,t,n,r){window.recaptchaResponse=function(e){r.onSubmit(e)};var o=!!n,i=!!window.grecaptcha;if(!o){i||(window.recaptchaCallback=function(){var t=Object(_box_utils__WEBPACK_IMPORTED_MODULE_10__.curBox)();if(t){var n=Object(_dom__WEBPACK_IMPORTED_MODULE_5__.geByClass1)("recaptcha",t.bodyNode);n&&(Object(_dom__WEBPACK_IMPORTED_MODULE_5__.val)(n,""),window.grecaptcha.render(n,{sitekey:e,callback:window.recaptchaResponse}))}},headNode.appendChild(Object(_dom__WEBPACK_IMPORTED_MODULE_5__.ce)("script",{type:"text/javascript",src:"https://www.google.com/recaptcha/api.js?onload=recaptchaCallback&render=explicit&hl="+t})));var a='<div class="recaptcha"></div>'+(r.addText||"");n=showFastBox({title:Object(_lang__WEBPACK_IMPORTED_MODULE_8__.getLang)("global_recaptcha_title"),width:354,onHide:r.onHide,onDestroy:r.onDestroy||!1},a,Object(_lang__WEBPACK_IMPORTED_MODULE_8__.getLang)("captcha_cancel"));var s=Object(_dom__WEBPACK_IMPORTED_MODULE_5__.geByClass1)("recaptcha",n.bodyNode);s.id="recaptcha"+(n.guid?n.guid:"0"),Object(_ui__WEBPACK_IMPORTED_MODULE_1__.showProgress)(s)}return o&&i?window.grecaptcha.reset():i&&window.recaptchaCallback(),n.changed=!0,n}},EbDI:function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},EemH:function(e,t,n){var r=n("UqcF"),o=n("RjD/"),i=n("aCFj"),a=n("apmT"),s=n("aagx"),c=n("xpql"),u=Object.getOwnPropertyDescriptor;t.f=n("nh4g")?u:function(e,t){if(e=i(e),t=a(t,!0),c)try{return u(e,t)}catch(e){}if(s(e,t))return o(!r.f.call(e,t),e[t])}},Egk5:function(e,t,n){"use strict";n.r(t),n.d(t,"KEY",(function(){return a})),n.d(t,"isDigitKeyCode",(function(){return s})),n.d(t,"getDigitByKeyCode",(function(){return c})),n.d(t,"addEvent",(function(){return u})),n.d(t,"removeEvent",(function(){return l})),n.d(t,"triggerEvent",(function(){return d})),n.d(t,"cancelEvent",(function(){return _})),n.d(t,"stopEvent",(function(){return p})),n.d(t,"normEvent",(function(){return f})),n.d(t,"checkEvent",(function(){return m})),n.d(t,"checkKeyboardEvent",(function(){return g})),n.d(t,"checkOver",(function(){return v}));n("HEwt"),n("KKXr");var r=n("zxIV"),o=n("t7n3"),i=n("gdug"),a={LEFT:37,UP:38,RIGHT:39,DOWN:40,DEL:8,TAB:9,RETURN:13,ENTER:13,ESC:27,PAGEUP:33,PAGEDOWN:34,SPACE:32,CTRL:17,ALT:18,SHIFT:16};function s(e){return e>=49&&e<=57}function c(e){return e>=49&&e<=57&&e-48}function u(e,t,n,i,a,s){if((e=Object(r.ge)(e))&&3!=e.nodeType&&8!=e.nodeType){var c,u=a?((c=function(e){var t=e.data;e.data=a;var r=n.apply(this,[e]);return e.data=t,r}).handler=n,c):n;e.setInterval&&e!==window&&(e=window);var l=Object(r.data)(e,"events")||Object(r.data)(e,"events",{}),d=Object(r.data)(e,"handle")||Object(r.data)(e,"handle",function(e){return function(){h.apply(e,arguments)}}(e));Object(o.each)(t.split(/\s+/),(function(t,n){l[n]||(l[n]=[],!i&&e.addEventListener?e.addEventListener(n,d,s):!i&&e.attachEvent&&e.attachEvent("on"+n,d)),l[n].push(u)}))}}function l(e,t,n,i){if(void 0===i&&(i=!1),e=Object(r.ge)(e)){var a=Object(r.data)(e,"events");if(a)if("string"==typeof t)Object(o.each)(t.split(/\s+/),(function(t,s){if(Object(o.isArray)(a[s])){var c=a[s].length;if(Object(o.isFunction)(n)){for(var u=c-1;u>=0;u--)if(a[s][u]&&(a[s][u]===n||a[s][u].handler===n)){a[s].splice(u,1),c--;break}}else{for(var l=0;l<c;l++)delete a[s][l];c=0}c||(e.removeEventListener?e.removeEventListener(s,Object(r.data)(e,"handle"),i):e.detachEvent&&e.detachEvent("on"+s,Object(r.data)(e,"handle")),delete a[s])}})),Object(o.isEmpty)(a)&&(Object(r.removeData)(e,"events"),Object(r.removeData)(e,"handle"));else for(var s in a)a.hasOwnProperty(s)&&l(e,s)}}function d(e,t,n,i){e=Object(r.ge)(e);var a=Object(r.data)(e,"handle");if(a){var s=()=>a.call(e,Object(o.extend)(n||{},{type:t,target:e}));i?s():setTimeout(s,0)}}function _(e){if(!(e=e||window.event))return!1;for(;e.originalEvent;)e=e.originalEvent;return e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.cancelBubble=!0,e.returnValue=!1,!1}function p(e){if(!(e=e||window.event))return!1;for(;e.originalEvent;)e=e.originalEvent;return e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,!1}function h(e){e=f(e);var t=Array.from(arguments);t[0]=e;var n=Object(r.data)(this,"events");if(n&&"string"==typeof e.type&&n[e.type]&&n[e.type].length){var o=(n[e.type]||[]).slice();for(var i in o)if(o.hasOwnProperty(i)){if("mouseover"===e.type||"mouseout"===e.type){for(var a=e.relatedElement;a&&a!==this;)a=a.parentNode;if(a===this)continue}var s=o[i].apply(this,t);if(!1!==s&&-1!==s||_(e),-1===s)return!1}}}function f(e){var t=e=e||window.event;if((e=Object(o.clone)(t)).originalEvent=t,e.target||(e.target=e.srcElement||document),3==e.target.nodeType&&(e.target=e.target.parentNode),!e.relatedTarget&&e.fromElement&&(e.relatedTarget=e.fromElement===e.target),null==e.pageX&&null!=e.clientX){var n=document.documentElement,r=bodyNode;e.pageX=e.clientX+(n&&n.scrollLeft||r&&r.scrollLeft||0)-(n.clientLeft||0),e.pageY=e.clientY+(n&&n.scrollTop||r&&r.scrollTop||0)-(n.clientTop||0)}return!e.which&&(e.charCode||0===e.charCode?e.charCode:e.keyCode)&&(e.which=e.charCode||e.keyCode),!e.metaKey&&e.ctrlKey?e.metaKey=e.ctrlKey:!e.ctrlKey&&e.metaKey&&i.browser.mac&&(e.ctrlKey=e.metaKey),!e.which&&e.button&&(e.which=1&e.button?1:2&e.button?3:4&e.button?2:0),e}function m(e){var t=e||window.event;return t&&("click"===t.type||"mousedown"===t.type||"mouseup"===t.type)&&(t.which>1||t.button>1||t.ctrlKey||t.shiftKey||i.browser.mac&&t.metaKey)||!1}function g(e){if(!(e=f(e))||!e.target)return!1;if(!e.screenX)return!0;var t=Object(r.getSize)(e.target),n=Object(r.getXY)(e.target),o=e.pageX-n[0],i=e.pageY-n[1];return o<-1||o>t[0]+1||i<-1||i>t[1]+1||Math.abs(e.pageX-n[0]-t[0]/2)<1&&Math.abs(e.pageY-n[1]-t[1]/2)<1}function v(e,t){if(!e)return!0;e=e.originalEvent||e,t=t||e.target;var n=e.fromElement||e.relatedTarget;if(!n||n===t||n===t.parentNode)return!0;for(;n!==t&&n.parentNode&&n.parentNode!==bodyNode;)n=n.parentNode;return n!==t}},El3O:function(e,t,n){"use strict";n.r(t),n.d(t,"getPageHeaderHeight",(function(){return g})),n.d(t,"updateNarrow",(function(){return v})),n.d(t,"checkPageBlocks",(function(){return b})),n.d(t,"redraw",(function(){return y})),n.d(t,"onBodyScroll",(function(){return E})),n.d(t,"onBodyResize",(function(){return w})),n.d(t,"leftBlockOver",(function(){return O})),n.d(t,"leftBlockOut",(function(){return C})),n.d(t,"leftBlockHide",(function(){return T})),n.d(t,"autosizeSetup",(function(){return S})),n.d(t,"TopMenu",(function(){return D})),n.d(t,"getProgressHtml",(function(){return P})),n.d(t,"getProgressBarEl",(function(){return k}));n("pIFo");var r,o=n("t7n3"),i=n("zxIV"),a=n("lXE5"),s=n("kHqu"),c=n("v+DW"),u=n("m0N1"),l=n("7jxN"),d=n("Egk5"),_=n("i6oL"),p=n("gdug"),h=n("ErRf"),f=n("/PiP"),m=n("QGEU");function g(){var e=Object(i.ge)("page_header");return r=r||(e?e.offsetHeight:0)}function v(){cur.__narrowBar=cur.__narrowBar||{},cur.__narrowBar.bar=cur.__narrowBar.bar||Object(i.ge)("narrow_column"),cur.__narrowBar.barBlock=cur.__narrowBar.bar&&Object(i.geByClass1)("page_block",cur.__narrowBar.bar),cur.__narrowBar.wideCol=cur.__narrowBar.wideCol||Object(i.ge)("wide_column"),cur.__narrowBar.isBarFixed=cur.__narrowBar.isBarFixed||"fixed"===Object(i.getStyle)(cur.__narrowBar.bar,"position"),cur.__narrowBar.pl=cur.__narrowBar.pl||Object(i.ge)("page_layout");var e=cur.__narrowBar.bar,t=cur.__narrowBar.barBlock,n=cur.__narrowBar.wideCol,r=Object(a.scrollGetY)();if(!p.browser.mobile&&e&&t&&n&&!Object(i.isVisible)(boxLoader)&&!Object(i.isVisible)(boxLayerBG)&&!Object(i.isVisible)(layerBG)){var s,c=window.lastWindowHeight||0,u=Math.min(r,bodyNode.clientHeight-c),l=cur.__narrowBar.pl,d=vk.staticheader?Math.max(0,g()-u):g(),_=cur.__narrowBar.isBarFixed,h=Object(o.floatval)(Object(i.getStyle)(cur.__narrowBar.barBlock,"marginTop")),f=Object(i.getSize)(e)[1]-(_?h:0),m=Object(i.getSize)(n)[1],v=Object(i.getXY)(n)[1],b=f>=m-h,y=h,E=u+c-m-v-y,w=Math.max(0,E),O=v-d,C=Object(i.getXY)(e)[1]+(_?h:0),T=cur.__narrowBar.lastSt||0,S=cur.__narrowBar.lastStyles||{},D=d+y+f+h+w<=c&&!cur.narrowHide,P=cur.__narrowBarForceNotFixed,k=!1;u-1<O&&!(D&&p.browser.msie&&C<d+h)||b?s={marginTop:0}:!P&&(u-1<Math.min(T,C-d-h)||D)?(s={top:d,marginLeft:Math.min(-bodyNode.scrollLeft,Math.max(-bodyNode.scrollLeft,bodyNode.clientWidth-Object(i.getSize)(l)[0]))},k=!0):!P&&(u+1>Math.max(T,C+f+y-c)&&E<0&&!cur.narrowHide||cur.narrowHide&&u+1>Math.max(T,C+f-d))?(s={bottom:cur.narrowHide?c-d:y,marginLeft:Math.min(-bodyNode.scrollLeft,Math.max(-bodyNode.scrollLeft,bodyNode.clientWidth-Object(i.getSize)(l)[0]))},k=!0):s={marginTop:E>=0?m-f:Math.min(C-v,m-f+O)},function(e,t){var n=Object(o.clone)(e),r=Object(o.clone)(t);return Object(o.each)(n,(function(e,t){"position"!==e&&(n[e]=Math.round(t))})),Object(o.each)(r,(function(e,t){"position"!==e&&(r[e]=Math.round(t))})),JSON.stringify(n)===JSON.stringify(r)}(s,S)||(Object(o.each)(S,(function(e){S[e]=null})),Object(i.setStyle)(e,Object(o.extend)(S,s)),cur.__narrowBar.lastStyles=s),k!==_&&Object(i.toggleClass)(e,"fixed",k),cur.__narrowBar.lastSt=u,cur.__narrowBar.isBarFixed=k}}function b(){var e=Object(i.ge)("content");e&&(Object(i.toggleClass)(e,"page_block",!Object(i.geByClass1)("page_block",e)),Object(m.updateAriaElements)())}function y(e,t){e&&"fixed"===Object(i.getStyle)(e,"position")&&(t?Object(i.removeClass)(e,t):Object(i.setStyle)(e,{position:"relative"}),e.offsetLeft,t?Object(i.addClass)(e,t):Object(i.setStyle)(e,{position:"fixed"}))}function E(){if(window.pageNode){var e=Math.min(0,Math.max(-bodyNode.scrollLeft,bodyNode.clientWidth-Object(i.getSize)(Object(i.ge)("page_layout"))[0]));p.browser.mobile||vk.staticheader||Object(s.updateHeaderStyles)({marginLeft:e}),Object(s.updateLeftMenu)(),v(),Object(c.updSideTopLink)()}}function w(e){if(window.pageNode){var t=document.documentElement,n=t.clientWidth,r=t.clientHeight,a=Object(c.sbWidth)(),l=Math.max(Object(o.intval)(window.innerWidth),Object(o.intval)(n)),d=Math.max(Object(o.intval)(window.innerHeight),Object(o.intval)(r)),h=!1;if(p.browser.mobile&&(l=Math.max(l,Object(o.intval)(bodyNode.scrollWidth)),d=Math.max(d,Object(o.intval)(bodyNode.scrollHeight))),window.lastWindowWidth!==l||!0===e){h=!0,window.lastInnerWidth=window.lastWindowWidth=l,layerWrap.style.width=boxLayerWrap.style.width=l+"px";var m=layer.style.width=boxLayer.style.width=l-a-2+"px";if(window.mvLayerWrap&&!mvcur.minimized&&(mvLayerWrap.style.width=l+"px",mvLayer.style.width=m),window.wkLayerWrap&&(wkLayerWrap.style.width=l+"px",wkLayer.style.width=m),bodyNode.offsetWidth<vk.width+a+2&&(l=vk.width+a+2),l)for(var g=pageNode.firstChild;g;g=g.nextSibling)if(g.tagName){for(var b=(window.lastInnerWidth=l-a-1)-1,E=g.firstChild;E;E=E.nextSibling)"scroll_fix"===E.className&&(E.style.width=b+"px");document.documentElement.style.setProperty("--scroll-fixed-width",b+"px"),vk.staticheader||Object(s.updateHeaderStyles)({width:b})}}if((window.lastWindowHeight!==d||!0===e)&&(h=!0,window.lastWindowHeight=d,layerBG.style.height=boxLayerBG.style.height=layerWrap.style.height=boxLayerWrap.style.height=d+"px",window.mvLayerWrap&&!mvcur.minimized&&(mvLayerWrap.style.height=d+"px"),window.wkLayerWrap)){var w=p.browser.mobile?window.innerHeight:d;wkLayerWrap.style.height=w+"px"}if(vk.noSideTop||Object(c.updSideTopLink)(1),h&&window.curRBox&&window.curRBox.boxes&&window.getWndInner){var O=getWndInner();Object(o.each)(curRBox.boxes,(e,t)=>t._wnd_resize(O[0],O[1]))}setTimeout(u.updSeenAdsInfo,0);var C=Object(f.getAudioPlayer)();C.audioLayer&&C.audioLayer.isShown()&&C.audioLayer.updatePosition(),cur.pvShown&&window.Photoview&&setTimeout(Photoview.updatePhotoDimensions),window.tooltips&&tooltips.rePositionAll(),cur.lSTL&&Object(i.setStyle)(cur.lSTL,{width:Math.max(Object(i.getXY)(cur.lSTL.el)[0],0),height:d-1}),Object(i.ge)("dev_top_nav")&&Object(i.setStyle)(Object(i.ge)("dev_top_nav","left",null));var T=Object(i.geByClass)("ui_search_fixed"),S=Object(i.ge)("narrow_column");Object(o.each)(T,(function(){y(this,"ui_search_fixed"),setTimeout(y.pbind(this,"ui_search_fixed"),0)})),S&&(y(S,"fixed"),setTimeout(y.pbind(S,"fixed"),0)),Object(s.updateLeftMenu)(),v(),Object(_.updateSTL)()}}function O(e){var t=1;e.id||(e=Object(i.ge)("left_hide"+e),t=0),!t&&e.timer||(e.showing?Object(i.removeAttr)(e,"showing"):(Object(l.animate)(e,{opacity:t?1:.5},200),t&&(e.showing=1))),e.timer&&(clearTimeout(e.timer),Object(i.removeAttr)(e,"timer"))}function C(e){var t=.5;e.id||(e=Object(i.ge)("left_hide"+e),t=0),e.timer=setTimeout((function(){Object(l.animate)(e,{opacity:t},200),Object(i.removeAttr)(e,"timer")}),1)}function T(e,t,n){var r={act:"hide_block",block:e,hash:t};n&&(r.block=n),ajax.post("al_index.php",r,{onDone:u.updSeenAdsInfo}),Object(i.hide)("left_block"+e)}function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e=Object(i.ge)(e))if(e.autosize)e.autosize.update();else{t.minHeight=Object(o.intval)(t.minHeight)||Object(o.intval)(Object(i.getStyle)(e,"height")),t.maxHeight=Object(o.intval)(t.maxHeight);var n=Object(i.getSize)(e)[0]||Object(o.intval)(Object(i.getStyle)(e,"width")),r=Object(i.getStyle)(e,"fontSize"),a=Object(i.getStyle)(e,"lineHeight");n<1&&(n=Object(o.intval)(Object(i.getStyle)(e,"width",!1))),r.indexOf("em")>0&&(r=Object(o.floatval)(r)*vk.fs),r=Object(o.intval)(r);var s={width:n,height:10,fontFamily:Object(i.getStyle)(e,"fontFamily"),fontSize:r+"px",lineHeight:a,boxSizing:Object(i.getStyle)(e,"boxSizing")},c=["Top","Bottom","Left","Right"];Object(o.each)(c,(function(){s["padding"+this]=Object(i.getStyle)(e,"padding"+this)})),e.autosize={options:t,helper:Object(i.ce)("textarea",{className:"ashelper"},s),handleEvent:function(t,n){var r=n.charCode?String.fromCharCode(n.charCode):n.charCode;if(void 0===r&&(r=String.fromCharCode(n.keyCode),10===n.keyCode||13===n.keyCode?r="\n":!p.browser.msie&&n.keyCode<=40&&(r="")),!r)return t;if(!p.browser.msie)return t.substr(0,e.selectionStart)+r+t.substr(e.selectionEnd);var o=document.selection.createRange();return o.text&&(t=t.replace(o.text,"")),t+r},update:function(t){var n=e.value;!t||"blur"===t.type||"keyup"===t.type||p.browser.msie&&"keypress"!==t.type||t.ctrlKey||t.altKey||t.metaKey||(n=e.autosize.handleEvent(n,t)),n||(n=" "),e.autosize.helper.value!==n&&(e.autosize.helper.value=n);var r=e.autosize.options,s=Object(i.getSize)(e,!0)[1],c=e.autosize.helper.scrollHeight,u=c%a;r.exact&&u>2&&(c-=u-2),c<r.minHeight&&(c=r.minHeight);var l={overflow:"hidden"},d=Object(i.getStyle)(e,"overflow").indexOf("auto")>-1?"auto":"hidden";r.maxHeight&&c>r.maxHeight&&(c=r.maxHeight,Object(o.extend)(l,{overflow:"auto",overflowX:"hidden"})),r.addHeight&&(c+=r.addHeight),s===c&&d===l.overflow||(l.height=c,Object(i.setStyle)(e,l),Object(o.isFunction)(r.onResize)&&r.onResize(c))}},t.exact&&("normal"===a&&(a="120%"),a.indexOf("%")>0&&(a=r*Object(o.intval)(a)/100)),utilsNode.appendChild(e.autosize.helper),p.browser.opera_mobile?(Object(i.setStyle)(e,{overflow:"hidden"}),e.autosize.update(),Object(d.addEvent)(e,"blur",e.autosize.update)):(Object(d.addEvent)(e,"keydown keyup keypress change",e.autosize.update),setTimeout(()=>{Object(i.setStyle)(e,{overflow:"hidden",resize:"none"});var t=Object(i.val)(e);Object(i.val)(e," ",!0),Object(i.val)(e,t,!0),e.autosize.update()},0))}}var D={init:function(){if(this.inited)return!1;var e=Object(i.ge)("top_profile_link"),t=Object(i.ge)("top_profile_menu");if(!e||!t)return!1;Object(d.addEvent)(e,"mousedown",D.clicked),this.inited=!0},clicked:function(e){return Object(d.checkEvent)(e)||"mousedown"===e.type&&Object(d.checkKeyboardEvent)(e)||D.toggle(),!1},toggle:function(e){var t=Object(i.ge)("top_profile_link"),n=Object(i.ge)("top_profile_menu"),r=Object(i.hasClass)(n,"shown");void 0!==e&&r===e||(void 0===e&&(e=!r),Object(i.toggleClass)(t,"active",e),Object(i.toggleClass)(n,"shown",e),e?(Object(h.cancelStackPush)("top_menu",D.toggle.bind(this,!1),!0),cur.introExitTooltipHide&&(cur.introExitTooltipHide(),delete cur.introExitTooltipHide)):Object(h.cancelStackFilter)("top_menu",!0))},show:function(){D.hidetimer&&(clearTimeout(D.hidetimer),D.hidetimer=0),D.toggle(!0)},hide:function(){D.hidetimer||(D.hidetimer=setTimeout((function(){D.toggle(!1),D.hidetimer=0}),200))},select:function(e,t){return!!Object(d.checkEvent)(t)||(D.toggle(!1),nav.go(e,t,{noback:!0}))}};function P(e,t){return Object(i.rs)(vk.pr_tpl,{id:e||"",cls:t||""})}function k(e){return Object(i.geByClass1)("ui_progress_bar",e)}},Emh1:function(e,t,n){"use strict";n.r(t),n.d(t,"AudioPlayerHTML5",(function(){return f}));n("VRzm"),n("Btvt"),n("KKXr");var r="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMN0PQRSTUVWXYZO123456789+/=",o={v:function(e){return e.split("").reverse().join("")},r:function(e,t){var n;e=e.split("");for(var o=r+r,i=e.length;i--;)~(n=o.indexOf(e[i]))&&(e[i]=o.substr(n-t,1));return e.join("")},s:function(e,t){var n=e.length;if(n){var r=function(e,t){var n=e.length,r=[];if(n){var o=n;for(t=Math.abs(t);o--;)t=(n*(o+1)^t+o)%n,r[o]=t}return r}(e,t),o=0;for(e=e.split("");++o<n;)e[o]=e.splice(r[n-1-o],1,e[o])[0];e=e.join("")}return e},i:function(e,t){return o.s(e,t^vk.id)},x:function(e,t){var n=[];return t=t.charCodeAt(0),each(e.split(""),(function(e,r){n.push(String.fromCharCode(r.charCodeAt(0)^t))})),n.join("")}};function i(e){if((!window.wbopen||!~(window.open+"").indexOf("wbopen"))&&~e.indexOf("audio_api_unavailable")){var t,n,r=e.split("?extra=")[1].split("#"),i=""===r[1]?"":a(r[1]);if(r=a(r[0]),"string"!=typeof i||!r)return e;for(var s=(i=i?i.split(String.fromCharCode(9)):[]).length;s--;){if(t=(n=i[s].split(String.fromCharCode(11))).splice(0,1,r)[0],!o[t])return e;r=o[t].apply(null,n)}if(r&&"http"===r.substr(0,4))return r}return e}function a(e){if(!e||e.length%4==1)return!1;for(var t,n,o=0,i=0,a="";n=e.charAt(i++);)~(n=r.indexOf(n))&&(t=o%4?64*t+n:n,o++%4)&&(a+=String.fromCharCode(255&t>>(-2*o&6)));return a}var s=n("YQfe"),c=n("C13D");var u=n("egla"),l=n("XMCv"),d=n("VBqm"),_=n("Xrg9"),p=function(){return(p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},h=function(){function e(e,t){var n=this;this.fullyLoaded=!1,this.url="",this.audioElement=new Audio,this.audioElement.crossOrigin="anonymous",this.audioElement.preload="auto",this.volume=e.volume,this.addEventListeners(e),t&&this.setUrl(t).then((function(){n.audioElement.load()}));var r=new u.NetworkStatCollector;this.audioNetworkStatCollector=new u.AudioNetworkStatCollector(r)}return Object.defineProperty(e.prototype,"isFullyLoaded",{get:function(){return this.fullyLoaded},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"error",{get:function(){return this.audioElement.error||null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"played",{get:function(){return this.audioElement.played},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"src",{get:function(){return this.url},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hls",{get:function(){return this.hlsInstance||null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return isFinite(this.audioElement.duration)?this.audioElement.duration:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readyState",{get:function(){return this.audioElement.readyState},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentTime",{get:function(){return this.audioElement.currentTime},set:function(e){this.audioElement.currentTime=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this.audioElement.volume},set:function(e){this.audioElement.volume=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"playbackRate",{set:function(e){this.audioElement.playbackRate=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentProgress",{get:function(){return isNaN(this.audioElement.duration)?0:Math.max(0,Math.min(1,this.audioElement.currentTime/this.audioElement.duration))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentBuffered",{get:function(){return this.audioElement.buffered.length?Math.min(1,this.audioElement.buffered.end(0)/this.audioElement.duration):0},enumerable:!0,configurable:!0}),e.prototype.play=function(){return Object(d.wrapAudioPlay)(this.audioElement).catch((function(e){switch(e.code){case e.NOT_SUPPORTED_ERR:case e.ABORT_ERR:break;default:throw e}}))},e.prototype.pause=function(){this.audioElement.pause()},e.prototype.addEventListeners=function(e){var t=this;this.audioElement.addEventListener("pause",(function(){return e.onPause()})),this.audioElement.addEventListener("play",(function(){return e.onPlay()})),this.audioElement.addEventListener("progress",(function(){if(e.onBufferUpdate(),!t.hlsInstance){var n=t.audioElement.buffered;n.length&&Math.abs(n.end(n.length-1)-t.audioElement.duration)<1&&(t.fullyLoaded=!0)}})),this.audioElement.addEventListener("timeupdate",(function(){e.onProgressUpdate&&e.onProgressUpdate()})),this.audioElement.addEventListener("ended",(function(){e.onEnd&&e.onEnd()})),this.onFail=e.onFail||function(){},this.audioElement.addEventListener("error",(function(){t.onFail()})),this.audioElement.addEventListener("canplay",(function(){e.onCanPlay&&e.onCanPlay()})),this.audioElement.addEventListener("durationchange",(function(){e.onDurationChange&&e.onDurationChange()}))},e.isHlsUrl=function(e){return i(e).includes(".m3u8")},e.prototype.setUrl=function(t){var n=this,r=i(t);return this.url=r,e.isHlsUrl(r)&&!e.shouldUseNativeHls()&&"function"==typeof window.MediaSource?this.initHls(r).catch((function(){return n.onFail()})):(this.hlsInstance&&this.hlsInstance.destroy(),this.audioElement.src=r,this.audioElement.load(),Promise.resolve())},e.shouldUseNativeHls=function(){var e=window.browser.version.split(".")[0],t=parseInt(e);return window.browser.safari||window.browser.msie_edge&&t>11&&t<78},e.prototype.initHls=function(t){var n=this;return e.loadHls().then((function(e){var r=e.default;return new Promise((function(e){var o=!1,i=!!_.default.get("_audio_hls_debug");n.hlsInstance&&n.hlsInstance.destroy();var a=new r({debug:i,maxBufferHole:3,nudgeOffset:.5,nudgeMaxRetry:5,maxFragLookUpTolerance:.2});a.on(r.Events.BUFFER_EOS,(function(){return n.fullyLoaded=!0})),a.on(r.Events.ERROR,(function(e,t){t.details===r.ErrorDetails.BUFFER_STALLED_ERROR&&(o=!0),(i||t.fatal)&&console.log("audio hls error",e,t),t.details===r.ErrorDetails.BUFFER_STALLED_ERROR&&(a.stopLoad(),a.startLoad()),t.fatal&&n.onFail({type:t.type,details:t.details,url:t.frag&&t.frag.url||t.context&&t.context.url,code:t.networkDetails?t.networkDetails.status:0})})),a.on(r.Events.FRAG_BUFFERED,(function(e,t){var r=function(){try{return window.isMVK?window.audio.getCurrent():Object(c.asObject)(window.getAudioPlayer().getCurrentAudio())}catch(e){return{id:0,ownerId:0}}}(),i={owner_id:r.ownerId,audio_id:r.id,fragment_id:t.frag.sn.toString(),fragment_duration:Math.ceil(1e3*t.frag.duration).toString(),time_to_first_byte:Math.ceil(t.stats.tfirst-t.stats.trequest).toString(),time_to_first_frame:Math.ceil(t.stats.tload-t.stats.trequest).toString(),buffering_time:Math.ceil(t.stats.tbuffered-t.stats.trequest).toString()};o&&n.audioNetworkStatCollector.logEvent(p(p({},i),{event_type:u.AudioNetworkType.FRAGMENT_STALLED}),l.default.getConnectionType(),l.default.getConnectionEffectiveType()),o=!1,n.audioNetworkStatCollector.logEvent(p(p({},i),{event_type:u.AudioNetworkType.FRAGMENT_LOADED}),l.default.getConnectionType(),l.default.getConnectionEffectiveType())})),a.loadSource(t),a.attachMedia(n.audioElement),n.hlsInstance=a,e()}))}))},e.loadHls=function(){return n.e("hls").then(n.t.bind(null,"ulZh",7))},e}();class f{constructor(e){this.type="html5",this.opts=e||{},this._audioNodes=[],this._currentAudioEl=this._createAudioNode(),this._prefetchAudioEl=this._createAudioNode()}destroy(){}getPlayedTime(){for(var e=this._currentAudioEl.played,t=0,n=0;n<e.length;n++)t+=e.end(n)-e.start(n);return t}getCurrentTime(){return this._currentAudioEl.currentTime}clearAudioNode(){this._currentAudioEl=this._createAudioNode(s.SILENCE)}isCurrent(e){return e===this._currentAudioEl}_createAudioNode(e){var t=new h({onBufferUpdate:()=>{this.isCurrent(t)&&this.opts.onBufferUpdate(this.getCurrentBuffered())},onProgressUpdate:()=>{this.isCurrent(t)&&this.opts.onProgressUpdate(this.getCurrentProgress(),this.getPlayedTime(),this.getCurrentTime())},onEnd:()=>{this.isCurrent(t)&&t.src!==s.SILENCE&&this.opts.onEnd()},onSeeked:()=>{this.isCurrent(t)&&this.opts.onSeeked()},onSeek:()=>{this.isCurrent(t)&&this.opts.onSeek()},onFail:e=>{this._prefetchAudioEl===t?this._prefetchAudioEl=this._createAudioNode():this.isCurrent(t)&&t.src!==s.SILENCE&&(this._hlsError=e,this.opts.onFail&&this.opts.onFail())},onDurationChange:()=>{this.isCurrent(t)&&this._seekOnReady&&t.duration>0&&(this.seek(this._seekOnReady),this._seekOnReady=!1)},onCanPlay:()=>{this.isCurrent(t)&&this.opts.onCanPlay&&this.opts.onCanPlay()},onPause:this.opts.onPause,onPlay:this.opts.onPlay,volume:this.hasOwnProperty("_volume")?this._volume:this.opts.defaultVolume},e);return t}onReady(e){e()}prefetch(e){this._prefetchAudioEl&&this._prefetchAudioEl.url===i(e)||(this._prefetchAudioEl=this._createAudioNode(e))}seek(e){var t=this._currentAudioEl;t.duration>0&&t.src&&t.src!==s.SILENCE?t.currentTime=t.duration*e:this._seekOnReady=e}setVolume(e){void 0===e&&(e=this._currentAudioEl.volume),this._currentAudioEl.volume=e,this._prefetchAudioEl&&(this._prefetchAudioEl.volume=e),this._volume=e}setPlaybackRate(e){this._currentAudioEl.playbackRate=e}getCurrentProgress(){return this._currentAudioEl.currentProgress}getCurrentBuffered(){return this._currentAudioEl&&this._currentAudioEl.currentBuffered}getDuration(){return this._currentAudioEl&&this._currentAudioEl.duration}isFullyLoaded(){return this._currentAudioEl.isFullyLoaded}setUrl(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{};if(!e)return n&&n(!1);var r=i(e),o=this._currentAudioEl;if(this._currentAudioEl.src&&this._currentAudioEl.src!==s.SILENCE&&(this._seekOnReady=!1),this._currentAudioEl.src===r)return this.opts.onCanPlay&&this.opts.onCanPlay(),void(n&&n(!0));if(this._prefetchAudioEl){if(this._prefetchAudioEl.src===r)return this._currentAudioEl.pause(),this._currentAudioEl.setUrl(s.SILENCE),this._prefetchAudioEl.readyState>=3&&setTimeout(()=>this.opts.onCanPlay&&this.opts.onCanPlay()),this._currentAudioEl=this._prefetchAudioEl,this._prefetchAudioEl=null,void(n&&n(!0));r!==s.SILENCE&&this._prefetchAudioEl.setUrl(s.SILENCE)}o.src!==r&&(t=o.setUrl(r).then(()=>this._stopFrequencyAnalise())),t?t.then(()=>n(!0)).catch(()=>n(!1)):n(!0)}play(){this._stopFrequencyAnalise();var e=this._currentAudioEl;if(e.src){var t=e.play();return this._startFrequencyAnalise(),t}return Promise.resolve()}preparePlay(){if(browser.safari)return this._currentAudioEl.play()}_startFrequencyAnalise(){function e(e,t,n,r){return(n-t)*e/r+t}function t(e,t){return Math.random()*(t-e)+e}this._stopFrequencyAnalise();var n=999,r=null,o=null;this._freqUpdateInterval=setInterval(()=>{var i;this._currentAudioEl.paused?i=[0,0,0,0]:(++n>3&&(n=0,r=o,o=[t(.7,1),t(.55,.8),t(.3,.55),t(.03,.45)],r||(r=[t(.7,1),t(.55,.8),t(.3,.55),t(.03,.45)])),i=[e(n,r[0],o[0],3),e(n,r[1],o[1],3),e(n,r[2],o[2],3),e(n,r[3],o[3],3)]),this.opts.onFrequency&&this.opts.onFrequency(i)},50)}_stopFrequencyAnalise(){clearInterval(this._freqUpdateInterval),this.opts.onFrequency&&this.opts.onFrequency([0,0,0,0])}pause(){this._currentAudioEl.pause(),this._stopFrequencyAnalise()}stop(){this._currentAudioEl.pause(),this.seek(0),this._stopFrequencyAnalise()}_setFadeVolumeInterval(e){if(e){if(!this._fadeVolumeWorker&&window.Worker&&window.Blob){var t=new Blob(["\n          var interval;\n          onmessage = function(e) {\n            clearInterval(interval);\n            if (e.data == 'start') {\n              interval = setInterval(function() { postMessage({}); }, 20);\n            }\n          }\n        "]);try{this._fadeVolumeWorker=new Worker(window.URL.createObjectURL(t))}catch(e){this._fadeVolumeWorker=!1}}this._fadeVolumeWorker?(this._fadeVolumeWorker.onmessage=e,this._fadeVolumeWorker.postMessage("start")):this._fadeVolumeInterval=setInterval(e,60)}else this._fadeVolumeWorker&&(this._fadeVolumeWorker.terminate(),this._fadeVolumeWorker=null),this._fadeVolumeInterval&&clearInterval(this._fadeVolumeInterval)}fadeVolume(e,t,n){e=Math.max(0,Math.min(1,e));var r=this._currentAudioEl,o=0;if(t){var i=e-r.volume;o=i/(t/20||1)}else o=e<r.volume?-.06:.001;if(Math.abs(e-r.volume)<=.001)return this._setFadeVolumeInterval(),n&&n();var a=r.volume;this._setFadeVolumeInterval(()=>{!t&&o>0&&(o*=1.35),a+=o;if(o<0?a<=e:a>=e)return this.setVolume(e),this._setFadeVolumeInterval(),n&&n();this.setVolume(a)})}getErrorData(){var e=this._currentAudioEl.error||{};return{is_hls:this._currentAudioEl.hls?1:0,url:this._currentAudioEl.src,error_code:e.code,error_message:e.message,hls_error:this._hlsError?JSON.stringify(this._hlsError):null}}}},ErRf:function(e,t,n){"use strict";n.r(t),n.d(t,"cancelStackFilter",(function(){return o})),n.d(t,"cancelStackPush",(function(){return i})),n.d(t,"cancelStackPop",(function(){return a}));var r=n("Bszp");function o(e,t){var n=window.cancelStack||[];return t&&Object(r.topHeaderClearClose)(),window.cancelStack=n.filter(t=>t.name!==e),window.cancelStack}function i(e,t,n){return n&&Object(r.topHeaderClose)((function(){t(),o(e)})),window.cancelStack=o(e).concat([{func:t,name:e,dclick:n}]),window.cancelStack}function a(e){var t=window.cancelStack||[];Object(r.topHeaderClearClose)(),t.length>0&&t.pop().func(e);var n=t[t.length-1];return n&&n.dclick&&Object(r.topHeaderClose)((function(){n.func(e),o(n.name)})),window.cancelStack=t,window.cancelStack}},FJW5:function(e,t,n){var r=n("hswa"),o=n("y3w9"),i=n("DVgA");e.exports=n("nh4g")?Object.defineProperties:function(e,t){o(e);for(var n,a=i(t),s=a.length,c=0;s>c;)r.f(e,n=a[c++],t[n]);return e}},FWc3:function(e,t,n){"use strict";n.r(t),n.d(t,"showTooltip",(function(){return a})),n.d(t,"showTitle",(function(){return s})),n.d(t,"showHint",(function(){return c}));var r=n("zxIV"),o=n("Egk5"),i=n("t7n3");function a(e,t){(vk.loaded||t.noload)&&e&&(e.temphide||(e.temphide=function(){e.showing=!1},Object(o.addEvent)(e,"mouseout",e.temphide)),e.showing=!0,"loadingstat"!==e.tt&&(e.tt||(e.tt="loadingstat"),cur.cancelTooltip=!1,t.stat&&stManager.add(t.stat),stManager.add([jsc("web/tooltips.js"),"tooltips.css"],(function(){"loadingstat"===e.tt&&(e.tt=!1),e.showing&&!cur.cancelTooltip&&(!function(e){e.temphide&&(Object(o.removeEvent)(e,"mouseout",e.temphide),Object(r.removeAttr)(e,"temphide"),Object(r.removeAttr)(e,"showing"))}(e),e.tt&&e.tt.el&&!t.force||(tooltips.create(e,t),t.onCreate&&t.onCreate()),tooltips.show(e,t))}))))}function s(e,t,n,o){e=Object(r.ge)(e);n||(n=[Math.round(20-Object(r.getSize)(e)[0]/2),8]);a(e,Object(i.extend)({text:function(){return t||e.getAttribute("data-title")},shift:n,black:1},o||{}))}function c(e,t){t=t||{};a(e=Object(r.ge)(e),Object(i.extend)({text:function(){return e.getAttribute("data-title")},dir:"auto",width:300,shift:[22,8]},t))}},FbVm:function(e,t,n){"use strict";n.r(t),n.d(t,"NavigationStatCollector",(function(){return _})),n.d(t,"ProductionStatCollector",(function(){return f})),n.d(t,"ActionStatCollector",(function(){return g})),n.d(t,"ClickStatCollector",(function(){return b})),n.d(t,"ViewStatCollector",(function(){return E})),n.d(t,"RegistrationItemStatCollector",(function(){return w})),n.d(t,"MarketingTransitionItemStatCollector",(function(){return i})),n.d(t,"NavigationProductionStatEventTypes",(function(){return r.NavigationProductionStatEventTypes})),n.d(t,"RegistrationFieldItemNames",(function(){return r.RegistrationFieldItemNames})),n.d(t,"RegistrationItemEventTypes",(function(){return r.RegistrationItemEventTypes})),n.d(t,"EventScreens",(function(){return r.EventScreens})),n.d(t,"marketingTransitionItemStat",(function(){return O})),n.d(t,"easterEggsItemStat",(function(){return C})),n.d(t,"bridgeEventItemStat",(function(){return T})),n.d(t,"vkAppsActionMenuItemStat",(function(){return S}));var r=n("r0fY"),o=n("J8bf"),i=function(){function e(){this.productStatCollector=new f,this.actionStatCollector=new g(this.productStatCollector)}return e.prototype.logEvent=function(e,t,n,i){var a;void 0===i&&(i="");var s={campaign:e,source:n,event:t,unauth_id:Object(o.getCookie)("remixstid")};i&&(s.url=i);var c=((a={type:r.ActionProductionStatEventTypes.TYPE_MARKETING_TRANSITION_ITEM})[r.ActionProductionStatEventTypes.TYPE_MARKETING_TRANSITION_ITEM]=s,a);this.actionStatCollector.logEvent(c)},e}(),a=function(){function e(){this.productStatCollector=new f,this.actionStatCollector=new g(this.productStatCollector)}return e.prototype.logEvent=function(e,t,n,o){var i,a={webview_url:e,mini_app_id:t,event:n,error:o},s=((i={type:r.ActionProductionStatEventTypes.TYPE_BRIDGE_EVENT_ITEM})[r.ActionProductionStatEventTypes.TYPE_BRIDGE_EVENT_ITEM]=a,i);this.actionStatCollector.logEvent(s)},e}(),s=function(){function e(){this.productStatCollector=new f,this.actionStatCollector=new g(this.productStatCollector)}return e.prototype.logEvent=function(e,t,n,o){var i,a={egg_id:e,egg_event_id:t,position_id:n,event_type:o},s=((i={type:r.ActionProductionStatEventTypes.TYPE_EASTER_EGGS_ITEM})[r.ActionProductionStatEventTypes.TYPE_EASTER_EGGS_ITEM]=a,i);this.actionStatCollector.logEvent(s)},e}(),c=function(){function e(){this.productStatCollector=new f,this.clickStatCollector=new b(this.productStatCollector)}return e.prototype.logEvent=function(e,t,n){var o,i={type:n},a=((o={type:r.ClickProductionStatEventTypes.TYPE_MINI_APP_ITEM})[r.ClickProductionStatEventTypes.TYPE_MINI_APP_ITEM]=i,o),s={type:t,id:e};this.clickStatCollector.logEvent(a,s)},e}(),u=n("HLtZ"),l=n("W9Tc"),d=function(){return(d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},_=function(){function e(e){this.ProductionStatCollector=e,this.tabId=this.ProductionStatCollector.getIntId()%128}return e.prototype.logEvent=function(e){var t,n=d(d({},this.ProductionStatCollector.getBaseEvent()),((t={type:r.ProductionStatEventTypes.TYPE_NAVGO})[r.ProductionStatEventTypes.TYPE_NAVGO]=e,t));return this.ProductionStatCollector.logEvent(n),{statEvent:n}},e.prototype.getEventTabOpen=function(e){return{subtype:r.NavigationProductionStatEventTypes.TAB_OPEN,tab_id:this.tabId,screen:e}},e.prototype.getEventMove=function(e,t){var n,o,i=this.lastStatEvents,a=this.lastNavEvents;return i&&a?(a.subtype===r.NavigationProductionStatEventTypes.TAB_OPEN?n=a.screen:(n=a.screen_to,o=a.screen),{prev_navgo_id:i.id,subtype:t,screen:n,screen_to:e,screen_prev:o,prev_navgo_timestamp:i.timestamp,tab_id:this.tabId}):(Object(u.logError)(new Error("NavigationStatCollector: previous event not found.")),null)},e.prototype.addStatEvent=function(e,t){if(void 0===t&&(t=r.NavigationProductionStatEventTypes.GO),Object(l.partConfigEnabled)("navigation_timespent")){var n;if(t===r.NavigationProductionStatEventTypes.TAB_OPEN)n=this.getEventTabOpen(e);else{var o=this.getEventMove(e,t);if(!o)return;n=o}var i=this.logEvent(n).statEvent;this.lastStatEvents=i,this.lastNavEvents=n}},e.prototype.getModule=function(){var e,t;return null!==(t=null===(e=window.cur)||void 0===e?void 0:e.module)&&void 0!==t?t:"unknown"},e}(),p=n("W0P9"),h=n("Bj12"),f=function(){function e(){this.DEBUG=!1}return e.prototype.getCurrentTime=function(e){void 0===e&&(e=!0);var t=Date.now().toString(10);return e?t+"000":t},e.prototype.getIntId=function(){return Math.floor(Math.random()*e.MAX_INT32)},e.prototype.logEvent=function(e){this.DEBUG&&Object(p.log)(e),e.type&&e[e.type]?(Object(h.saveProductionStats)(e),this.lastEvent=e):Object(u.logError)(new Error("ProductionStatCollector: invalid event."))},e.prototype.getLastEvent=function(){return this.lastEvent},e.prototype.getBaseEvent=function(){var e;return{id:this.getIntId(),prev_id:null===(e=this.lastEvent)||void 0===e?void 0:e.id,timestamp:this.getCurrentTime(),url:window.location.href}},e.MAX_INT32=2147483647,e}(),m=function(){return(m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},g=function(){function e(e){this.productionStatCollector=e}return e.prototype.logEvent=function(e){var t,n=m(m({},this.productionStatCollector.getBaseEvent()),((t={type:r.ProductionStatEventTypes.TYPE_ACTION})[r.ProductionStatEventTypes.TYPE_ACTION]=e,t));this.productionStatCollector.logEvent(n)},e}(),v=function(){return(v=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},b=function(){function e(e){this.productionStatCollector=e}return e.prototype.logEvent=function(e,t){var n,o=v(v({},this.productionStatCollector.getBaseEvent()),((n={type:r.ProductionStatEventTypes.TYPE_CLICK})[r.ProductionStatEventTypes.TYPE_CLICK]=v({item:t},e),n));this.productionStatCollector.logEvent(o)},e}(),y=function(){return(y=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},E=function(){function e(e){this.productionStatCollector=e}return e.prototype.logEvent=function(e,t){var n,o=y(y({},this.productionStatCollector.getBaseEvent()),((n={type:r.ProductionStatEventTypes.TYPE_VIEW})[r.ProductionStatEventTypes.TYPE_VIEW]=y({item:t},e),n));this.productionStatCollector.logEvent(o)},e}(),w=function(){function e(e){this.actionStatCollector=e,this.fields={}}return e.prototype.logFieldInteraction=function(e,t,n){void 0===n&&(n=!1),[r.RegistrationFieldItemNames.PASSWORD,r.RegistrationFieldItemNames.SMS_CODE,r.RegistrationFieldItemNames.RULES_ACCEPT].includes(e)&&(t=t?"1":"0");var o=n?"0":this.actionStatCollector.productionStatCollector.getCurrentTime(!1);this.fields[e]?(this.fields[e].value=t,this.fields[e].end_interaction_time=o):this.fields[e]={name:e,value:t,start_interaction_time:o,end_interaction_time:o}},e.prototype.getFieldInteractions=function(){return Object.values(this.fields)},e.prototype.resetFieldInteractions=function(){for(var e=0,t=Object.getOwnPropertyNames(this.fields);e<t.length;e++){var n=t[e];delete this.fields[n]}},e.prototype.logEvent=function(e,t,n){var i;if(Object(l.partConfigEnabled)("registration_item_stat")){var a={event_type:e,screen:t,unauth_id:Object(o.getCookie)("remixstid"),sid:Object(o.getCookie)("remixnreg_sid")};[r.RegistrationItemEventTypes.SCREEN_PROCEED,r.RegistrationItemEventTypes.SCREEN_SKIP,r.RegistrationItemEventTypes.SCREEN_RETURN].includes(e)&&(a.screen_to=n,a.fields=this.getFieldInteractions(),this.resetFieldInteractions());var s=((i={type:r.ActionProductionStatEventTypes.TYPE_REGISTRATION_ITEM})[r.ActionProductionStatEventTypes.TYPE_REGISTRATION_ITEM]=a,i);this.actionStatCollector.logEvent(s)}},e}(),O=new i,C=new s,T=new a,S=new c},"Fya+":function(e,t,n){"use strict";n.r(t),n.d(t,"PRIVACY_KEYS",(function(){return r})),n.d(t,"PRIVACY_CATEGORIES",(function(){return o}));var r={PROFILE:"profile",SEARCH_ACCESS:"search_access",UPDATES:"updates",COMPANY_MESSAGES:"company_messages",PROFILE_CLOSED:"profile_closed"},o={ALL:0,FRIENDS:1,FRIENDS_OF_FRIENDS:2,ONLY_ME:3,ADVANCED_SETTINGS:4,SOME_FRIENDS:5,SOME_FRIENDS_LIST:6,CONTACTS:7}},GSQL:function(e,t,n){"use strict";n.r(t);n("91GP");var r=n("q1tI"),o=(n("17x9"),n("e87a")),i=n("euvX"),a=n("bTOO"),s=n("5PZO"),c=n("xt6h");function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var l=e=>{var t=e.className,n=e.appearance,l=void 0===n?"white":n,d=e.title,_=e.actionButtons,p=e.onClose,h=e.children,f=e.footerHint,m=e.hasScroll,g=Object(c.classNames)("Modal","Modal--"+l,t);return r.createElement(o.default,u({},e,{className:g}),r.createElement(i.ModalHeader,{title:d,onClose:p,appearance:l}),Boolean(h)&&r.createElement(a.ModalBody,{hasScroll:m},h),r.createElement(s.ModalFooter,{actionButtons:_,hint:f}))};l.Header=i.ModalHeader,l.Body=a.ModalBody,l.Footer=s.ModalFooter,t.default=l},GZEu:function(e,t,n){var r,o,i,a=n("m0Pp"),s=n("MfQN"),c=n("+rLv"),u=n("Iw71"),l=n("dyZX"),d=l.process,_=l.setImmediate,p=l.clearImmediate,h=l.MessageChannel,f=l.Dispatch,m=0,g={},v=function(){var e=+this;if(g.hasOwnProperty(e)){var t=g[e];delete g[e],t()}},b=function(e){v.call(e.data)};_&&p||(_=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return g[++m]=function(){s("function"==typeof e?e:Function(e),t)},r(m),m},p=function(e){delete g[e]},"process"==n("LZWt")(d)?r=function(e){d.nextTick(a(v,e,1))}:f&&f.now?r=function(e){f.now(a(v,e,1))}:h?(i=(o=new h).port2,o.port1.onmessage=b,r=a(i.postMessage,i,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(e){l.postMessage(e+"","*")},l.addEventListener("message",b,!1)):r="onreadystatechange"in u("script")?function(e){c.appendChild(u("script")).onreadystatechange=function(){c.removeChild(this),v.call(e)}}:function(e){setTimeout(a(v,e,1),0)}),e.exports={set:_,clear:p}},H6hf:function(e,t,n){var r=n("y3w9");e.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&r(i.call(e)),t}}},HEwt:function(e,t,n){"use strict";var r=n("m0Pp"),o=n("XKFU"),i=n("S/j/"),a=n("H6hf"),s=n("M6Qj"),c=n("ne8i"),u=n("8a7r"),l=n("J+6e");o(o.S+o.F*!n("XMVh")((function(e){Array.from(e)})),"Array",{from:function(e){var t,n,o,d,_=i(e),p="function"==typeof this?this:Array,h=arguments.length,f=h>1?arguments[1]:void 0,m=void 0!==f,g=0,v=l(_);if(m&&(f=r(f,h>2?arguments[2]:void 0,2)),null==v||p==Array&&s(v))for(n=new p(t=c(_.length));t>g;g++)u(n,g,m?f(_[g],g):_[g]);else for(d=v.call(_),n=new p;!(o=d.next()).done;g++)u(n,g,m?a(d,f,[o.value,g],!0):o.value);return n.length=g,n}})},HLtZ:function(e,t,n){"use strict";n.r(t),n.d(t,"RavenErrorData",(function(){return i.RavenErrorData})),n.d(t,"RavenStacktrace",(function(){return i.RavenStacktrace})),n.d(t,"PreparedErrorMessage",(function(){return i.PreparedErrorMessage})),n.d(t,"prepareError",(function(){return u})),n.d(t,"getRavenXhrTransport",(function(){return g})),n.d(t,"logError",(function(){return v})),n.d(t,"debugBufferLog",(function(){return y})),n.d(t,"logEvalError",(function(){return b}));var r,o,i=n("mXS3"),a=n("tEBl"),s=n.n(a),c=n("W9Tc");function u(e,t){var n=e.exception&&e.exception.values[0]||{type:"Message",value:e.message+l(e),stacktrace:e.stacktrace||{frames:[]}};"Error"===n.type&&n.value.startsWith("Non-Error exception captured with keys:")&&(n.value+=l(e)),!n.value&&e.message&&(n.value=e.message);var r=n.type,o=n.value,i=n.stacktrace,a=window.location,s=a.origin,c=a.protocol,u=a.hostname,p=a.port,h=a.href;p=p?":"+p:"",s=s||c+"//"+u+p;var f=e.environment,m=e.transaction,g=e.breadcrumbs;return{id:e.event_id,module:f||t(m,i,o),type:r,value:o,file:m,breadcrumbs:d(g),stacktrace:_(i,s),page:h,release:window.vk.rv,time:window.vk.ts+Math.floor(((new Date).getTime()-window.vk.started)/1e3)}}function l(e){return e.extra&&e.extra.__serialized__?"\n"+JSON.stringify(e.extra.__serialized__).slice(0,500):""}function d(e){if(!e||!e.values||0===e.values.length)return"";var t=e.values[0],n=t.data,r=t.category,o=t.message;return"xhr"===r?n.method+":"+n.status_code+":"+n.url:"custom"===r?o+":"+JSON.stringify(n):""}function _(e,t){var n=[];return e.frames.forEach((function(e,r){0===r&&(e.filename.includes("raven_logger.js")||e.filename.includes("raven.js"))||n.push(e.filename.replace(t,"")+":"+e.lineno+":"+e.colno+":"+e.function)})),n}var p="mvk"===(null===(o=null===(r=window.vk)||void 0===r?void 0:r.statsMeta)||void 0===o?void 0:o.platform)&&Object(c.partConfigEnabled)("mute_mvk_err_peaks"),h=p&&s()(10),f=p&&s()(5,3e3);var m=n("Bj12"),g=function(e){return function(t){var n=t.data,r=t.onSuccess,o=e(n);!function(e){if(!p||!f||!h)return!1;var t=e.value+"_"+e.stacktrace.join(""),n=[h.get(t)||0,f.get(t)||0],r=n[0],o=n[1];return h.set(t,++r),f.set(t,++o),o>=10||r>=50}(o)&&Object(m.saveJsErrorLogs)(o),r()}};function v(e,t){if(void 0===t&&(t={}),window.Raven){var n=t.breadcrumb,r=t.environment;n&&window.Raven.captureBreadcrumb({message:n.message,category:"custom",data:n.data}),r?window.Raven.captureException(e,{environment:r}):window.Raven.captureException(e)}}function b(e,t){window.Raven&&(t&&t.length>2e3&&(t=t.slice(0,1e3)+"..."+t.slice(-1e3)),e.message+=": "+t,v(e))}function y(e){return v(e,{environment:"debugLog"})}},HwS1:function(e,t,n){"use strict";n.r(t),n.d(t,"Gifts",(function(){return s}));n("91GP");var r=n("v+DW"),o=n("XHRy"),i=n("Q9Lc");function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s={deleteGift:function(e,t,n,r){r=r||{},ajax.post("al_gifts.php",{act:"delete",mid:r.mid,gift:n,hash:r.hash},{onDone:function(e){var n=ge("gift"+t);n&&(domNS(domFC(n))?domNS(domFC(n)).innerHTML=e:(n.appendChild(ce("div",{className:"gift_deleted",innerHTML:e})),hide(domFC(n)),window.Pagination&&!curBox()&&window.Pagination.recache(-1)))},showProgress:addClass.pbind(e,"gift_progress"),hideProgress:removeClass.pbind(e,"gift_progress")})},restoreGift:function(e,t,n,r){r=r||{},ajax.post("al_gifts.php",{act:"restore",mid:r.mid,gift:n,hash:r.hash},{onDone:function(){var e=ge("gift"+t);e&&domNS(domFC(e))&&(re(domNS(domFC(e))),show(domFC(e)))}})},markSpamGift:function(e,t,n,r){r=r||{},ajax.post("al_gifts.php",{act:"mark_spam",mid:r.mid,gift:n,hash:r.hash},{onDone:function(e){ge("gift_mark_spam"+t).innerHTML=e}})},initGiftsBox:function(e,t){e.setOptions({width:638,bodyStyle:"padding: 0",grey:!0,hideButtons:!0,onShow:function(){cur.gftbxWasScroll&&(boxLayerWrap.scrollTop=cur.gftbxWasScroll,cur.gftbxWasScroll=!1)}}),t.lang&&(cur.lang=extend(cur.lang||{},t.lang)),extend(cur,{gftbxOffset:t.offset,gftbxAutoload:!0,gftbxWasScroll:!1,gftbxMid:t.mid}),ajax.preload("al_gifts.php",{act:"box",mid:t.mid,offset:t.offset},t.preload),window.uiScrollBox&&window.uiScrollBox.init(e,{onShow:function(){addEvent(boxLayerWrap,"scroll",s.onGiftsScroll),setTimeout(cur.chooseAudioScroll,0)},onHide:function(){removeEvent(boxLayerWrap,"scroll",s.onGiftsScroll)}}),addEvent(boxLayerWrap,"scroll",s.onGiftsScroll);var n=boxLayerWrap.scrollTop;elfocus(geByClass1("_scroll_node",e.bodyNode)),boxLayerWrap.scrollTop=n,onBodyResize(),s.onGiftsScroll()},moreGifts:function(){var e=ge("gifts_more_link");Object(r.buttonLocked)(e)||(ajax.post("al_gifts.php",{act:"box",mid:cur.gftbxMid,offset:cur.gftbxOffset},{onDone:function(t,n,r){var o=ce("div",{innerHTML:t}),i=ge("gifts_rows");if(i){for(var a=domFC(o);a;a=domFC(o))i.appendChild(a);cur.gftbxOffset=n,r?s.preloadGifts():hide(e)}},showProgress:r.lockButton.pbind(e),hideProgress:r.unlockButton.pbind(e),cache:1}),cur.gftbxAutoload=!0)},preloadGifts:function(){ajax.post("al_gifts.php",{act:"box",mid:cur.gftbxMid,offset:cur.gftbxOffset},{cache:1})},onGiftsScroll:function(){if(cur.gftbxAutoload){var e=lastWindowHeight,t=ge("gifts_more_link");isVisible(t)&&e>getXY(t,!0)[1]&&t.click()}},showGiftBox:function(e,t,n){return window.Profile?window.Profile.showGiftBox(e,t,n):(cur.gftbxWasScroll=boxLayerWrap.scrollTop,boxLayerWrap.scrollTop=0,cur.viewAsBox?cur.viewAsBox():!showBox("al_gifts.php",{act:"get_gift_box",mid:e,fr:e==vk.id?1:0,ref:n},{stat:["gifts.css","wide_dd.js","wide_dd.css"],cache:1},t))},processBoxOptions(e,t){-1e3!=t&&(extend(cur,{forcedPaymentMethod:t.forcedPaymentMethod,paymentsOfferPreview:t.paymentsOfferPreview,paymentsPreload:t.paymentsPreload,paymentsAppOrder:t.paymentsAppOrder,paymentsOfferPreload:t.paymentsOfferPreload}),t.orderData&&i.AppOrderBox.initialize(t.orderData.orderId,t.orderData.appId,t.orderData.testMode,t.orderData.hash,t.orderData.votes,t.orderData.discount,t.orderData.billPeriod,t.orderData.salesRef),extend(cur,{paymentsAuthPayment:t.paymentsAuthPayment,paymentsOrderNotice:t.paymentsOrderNotice,paymentsTryCompleteOrder:t.paymentsTryCompleteOrder,isPaymentsAppOrder:t.isPaymentsAppOrder,paymentsOfferApp:t.paymentsOfferApp,checkoutEnabled:t.checkoutEnabled}),t.showProgress&&o.PaymentsBox.showProgress(""),extend(cur,{votesAmountsData:t.votesAmountsData,paymentsPreferVotes:t.paymentsPreferVotes,votesTypeInit:t.votesTypeInit,psList:t.psList,paymentsWideBox:t.paymentsWideBox,paymentsTooltips:t.paymentsTooltips,paymentsChangeType:0===t.paymentsWideBox?getLang("payments_go_change_pay_type"):"",payments_get_votes:getLang("payments_get_votes_new"),getVotesDoneHide:!0,paymentsWaitingCache:{},isPaymentComplete:!1,isPaymentAttemted:!1,usdRate:t.usdRate,paymentsHash:t.paymentsHash,paymentComplete:o.PaymentsBox.complete,paymentCanceled:o.PaymentsBox.paymentCanceled,paymentsShowProgress:o.PaymentsBox.showProgress,statSessionId:t.statSessionId}),o.PaymentsBox.initialize(e),cur.checkoutEnabled||(o.PaymentsBox.initPhoneCountry(t.countries,t.country),o.PaymentsBox.initPhoneNumber(ge("phone"))),extend(cur,{paymentsTypesSum:t.paymentsTypesSum,instantNeedCVV:t.instantNeedCVV,votesType:t.votesType,paymentsWPreload:t.paymentsWPreload}),t.getVotesAmountsOnDone&&o.PaymentsBox.getVotesAmountsOnDone.apply(this,cur.paymentsWPreload))},showGetMoneyBox(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return showBox("al_gifts.php",a({act:"get_money"},e),{onDone:this.processBoxOptions})}}},I2ZF:function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,o=n;return[o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]]].join("")}},"I8a+":function(e,t,n){var r=n("LZWt"),o=n("K0xU")("toStringTag"),i="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?n:i?r(t):"Object"==(a=r(t))&&"function"==typeof t.callee?"Arguments":a}},"IU+Z":function(e,t,n){"use strict";n("sMXx");var r=n("KroJ"),o=n("Mukb"),i=n("eeVq"),a=n("vhPU"),s=n("K0xU"),c=n("Ugos"),u=s("species"),l=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),d=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();e.exports=function(e,t,n){var _=s(e),p=!i((function(){var t={};return t[_]=function(){return 7},7!=""[e](t)})),h=p?!i((function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[u]=function(){return n}),n[_](""),!t})):void 0;if(!p||!h||"replace"===e&&!l||"split"===e&&!d){var f=/./[_],m=n(a,_,""[e],(function(e,t,n,r,o){return t.exec===c?p&&!o?{done:!0,value:f.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}})),g=m[0],v=m[1];r(String.prototype,e,g),o(RegExp.prototype,_,2==t?function(e,t){return v.call(e,this,t)}:function(e){return v.call(e,this)})}}},Ia1d:function(__webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"showVideo",(function(){return showVideo})),__webpack_require__.d(__webpack_exports__,"showInlineVideo",(function(){return showInlineVideo})),__webpack_require__.d(__webpack_exports__,"loadInlineVideo",(function(){return loadInlineVideo})),__webpack_require__.d(__webpack_exports__,"revertLastInlineVideo",(function(){return revertLastInlineVideo})),__webpack_require__.d(__webpack_exports__,"pauseLastInlineVideo",(function(){return pauseLastInlineVideo})),__webpack_require__.d(__webpack_exports__,"playLastInlineVideo",(function(){return playLastInlineVideo})),__webpack_require__.d(__webpack_exports__,"checkMp4",(function(){return checkMp4})),__webpack_require__.d(__webpack_exports__,"VideoConstants",(function(){return VideoConstants})),__webpack_require__.d(__webpack_exports__,"initVideo",(function(){return initVideo}));var core_js_modules_es6_object_assign__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("91GP"),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("KKXr"),_videoplayer_lib_player_states__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("qOki"),_dom_events__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("Egk5"),_utils_common__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("t7n3"),_dom__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("zxIV"),_lang__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("4+be"),_message_box__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("EasH"),_layout_utils__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("El3O"),_web_unauthorized_unauthorized__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("+i5L");function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function showVideo(e,t,n,r){if(cur.viewAsBox)return cur.viewAsBox();if(!Object(_dom_events__WEBPACK_IMPORTED_MODULE_3__.checkEvent)(r)){if(n||(n={}),Object(_web_unauthorized_unauthorized__WEBPACK_IMPORTED_MODULE_9__.isUnauthorizedMediaLayerBoxAvailable)()&&(r||n.openInPopup)&&!n.forceUnauth)return window.Unauthorized.showMoreBox(null,0,_web_unauthorized_unauthorized__WEBPACK_IMPORTED_MODULE_9__.UnauthorizedSourceType.VIDEO,()=>{showVideo(e,t,_extends({},n,{openInPopup:!1,forceUnauth:!0}),r)}),!1;if(n.forceUnauth=!0,window.mvcur&&mvcur.mvShown&&mvcur.minimized&&mvcur.videoRaw==e)return Videoview.unminimize(),!1;var o=nav.objLoc.claim,i=!(!n.addParams||!/^-?\d+_\d+$/.test(n.addParams.post_id))&&n.addParams.post_id;if(!n.playlistId&&i&&(/^public|groups|profile$/.test(cur.module)&&Object(_dom__WEBPACK_IMPORTED_MODULE_5__.hasClass)("post"+i,"own")?n.playlistId="wall_"+cur.oid:n.playlistId="post_"+n.addParams.post_id),n.playlistId&&(n.addParams=Object(_utils_common__WEBPACK_IMPORTED_MODULE_4__.extend)(n.addParams,{playlist_id:n.playlistId}),!window.VideoPlaylist||!VideoPlaylist.getList(n.playlistId)))if(/^wall_/.test(n.playlistId)){var a=cur.wallVideos&&cur.wallVideos[n.playlistId];n.addParams.load_playlist=a&&a.list.length>=50?0:1}else n.addParams.load_playlist=!/^(?:post_)?-?\d+_-?\d+$/.test(n.playlistId)||cur.pageVideosList&&cur.pageVideosList[n.playlistId]?0:1;!n.expandPlayer&&cur.videoInlinePlayer&&cur.videoInlinePlayer.getVideoId()==e&&cur.videoInlinePlayer.canExpand()&&(n.expandPlayer=cur.videoInlinePlayer),n.expandPlayer&&(n.addParams=Object(_utils_common__WEBPACK_IMPORTED_MODULE_4__.extend)(n.addParams,{expand_player:1}),delete cur.videoInlinePlayer);var s=new CallHub((function(){n.hidden?n.hidden(s.data,n,t,e):Videoview.showVideo.apply(Videoview,s.data)}),2);stManager.add(["videoview.js","videoview.css","page.js","page.css"],()=>{s.failed||(n.hidden||(revertLastInlineVideo(),Videoview.show(r,e,t,n)),s.done())}),Object(_utils_common__WEBPACK_IMPORTED_MODULE_4__.extend)(n,{onDone:function(){var t=Array.prototype.slice.call(arguments);t.unshift(e),s.data=t,s.done()},onFail:function(t){if(s.failed=1,!n.hidden){if(window.mvcur&&mvcur.mvShown)Videoview.hide();else{var r=Object(_utils_common__WEBPACK_IMPORTED_MODULE_4__.clone)(nav.objLoc);r.z==="video"+e&&delete r.z,r[0]==="video"+e&&(r[0]="videos"+e.split("_")[0]),nav.setLoc(r)}Object(_message_box__WEBPACK_IMPORTED_MODULE_7__.showFastBox)(Object(_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("global_error"),t||Object(_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("global_error_occured")),s.done()}return!0},cache:"status"!==t});var c=n.params;return c||(c={act:"show",video:e,list:t,autoplay:n.autoplay?1:0,ad_video:n.ad_video,module:n.module||window.Videoview&&window.Videoview.getVideoModule()||"",svids:n.svids}),n.addParams&&(c=Object(_utils_common__WEBPACK_IMPORTED_MODULE_4__.extend)(c,n.addParams)),Object(_utils_common__WEBPACK_IMPORTED_MODULE_4__.trim)(c.module)||Object(_utils_common__WEBPACK_IMPORTED_MODULE_4__.extend)(c,{_nol:JSON.stringify(nav.objLoc)}),o&&(c.claim=o),ajax.post("al_video.php?act="+c.act,c,n),Object(_utils_common__WEBPACK_IMPORTED_MODULE_4__.vkImage)().src=locProtocol+"//vk.com/rtrg?r=w*Z1Flwi3QdbWaoLMc7zOA*7Cr4Nrtojr9otHjsjIhsb2CVqRWalgbvxZw3MzxZa6be3Siu2XY3gvK5fysYtWLWgNwHMpjRTupSGZrcGRNlj7fduqq9*t7ij6CX4aMcBTD5be8mIXJsbTsvP8Zl2RZEd76a4FTuCOFqzMxqGtFc-",!1}}function showInlineVideo(videoId,listId,options,ev,thumb){if(Object(_dom_events__WEBPACK_IMPORTED_MODULE_3__.checkEvent)(ev))return!0;if(options=options||{},window.mvcur&&mvcur.mvShown||options.hasRestriction)return showVideo(videoId,listId,options,ev);if(Object(_dom__WEBPACK_IMPORTED_MODULE_5__.attr)(thumb,"data-loading"))return!1;var h=thumb.clientHeight,w=thumb.clientWidth,btn=Object(_dom__WEBPACK_IMPORTED_MODULE_5__.domByClass)(thumb,"page_post_video_play_inline"),onLoaded=options.onLoaded;onLoaded&&delete options.onLoaded;var params={video:videoId,list:listId,autoplay:options.autoplay,module:options.module};return Object(_dom__WEBPACK_IMPORTED_MODULE_5__.domData)(thumb,"stretch-vertical")&&(params.stretch_vertical=1),Object(_utils_common__WEBPACK_IMPORTED_MODULE_4__.extend)(params,options.addParams),showProgress(),loadInlineVideo(params,(function(e,t){hideProgress(),e?onDone.apply(null,t):onFail.apply(null,t)}),options.cache),cur.videoInlinePlayerDestroyerSet||(cur.destroy.push(_destroyInlineVideoPlayer),cur.videoInlinePlayerDestroyerSet=1),Object(_utils_common__WEBPACK_IMPORTED_MODULE_4__.vkImage)().src="//vk.com/rtrg?r=w*Z1Flwi3QdbWaoLMc7zOA*7Cr4Nrtojr9otHjsjIhsb2CVqRWalgbvxZw3MzxZa6be3Siu2XY3gvK5fysYtWLWgNwHMpjRTupSGZrcGRNlj7fduqq9*t7ij6CX4aMcBTD5be8mIXJsbTsvP8Zl2RZEd76a4FTuCOFqzMxqGtFc-",!1;function onDone(title,html,js,opts){revertLastInlineVideo(),Object(_dom__WEBPACK_IMPORTED_MODULE_5__.hide)(thumb);var videoWrap=Object(_dom__WEBPACK_IMPORTED_MODULE_5__.ce)("div",{innerHTML:html,className:"inline_video_wrap"},{width:w,height:h});if(-195297477!==opts.mvData.authorId&&(window._videoLastInlined=[videoWrap,thumb]),thumb.parentNode.appendChild(videoWrap),cur.mvOpts=!(!opts||!opts.mvData)&&opts.mvData,opts.player){var container=Object(_dom__WEBPACK_IMPORTED_MODULE_5__.domByClass)(videoWrap,"video_box_wrap");Object(_utils_common__WEBPACK_IMPORTED_MODULE_4__.isFunction)(onLoaded)&&(opts.player.params[0].onPlayerLoaded=onLoaded);var linkAttr=Object(_dom__WEBPACK_IMPORTED_MODULE_5__.attr)(thumb,"data-link-attr");linkAttr&&(opts.player.params[0].link_attr=linkAttr),VideoInitializer.initPlayer(container,opts.player.type,opts.player.params)}try{eval("(function () {"+js+"})();")}catch(e){}if(!params.from_autoplay){var notifier=window.Notifier;notifier&&setTimeout(()=>notifier.lcSend("video_start"),0);var audioPlayer=window.ap;audioPlayer&&audioPlayer.isPlaying()&&(audioPlayer.pause(),audioPlayer.pausedByVideo=Object(_utils_common__WEBPACK_IMPORTED_MODULE_4__.vkNow)())}ev&&domClosest("bookmarks_row_type_video",ev.target)&&statlogsValueEvent("bookmarks_product_analytics",{item_type:"video",item_owner_id:cur.mvOpts.oid,item_id:cur.mvOpts.vid,time:window.getServerTime()}),thumb.setAttribute("data-playing",1)}function onFail(e){params.from_autoplay||Object(_message_box__WEBPACK_IMPORTED_MODULE_7__.showFastBox)(Object(_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("global_error"),e||Object(_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("global_error_occured"))}function showProgress(){thumb.setAttribute("data-loading",1),options.no_progress||(Object(_dom__WEBPACK_IMPORTED_MODULE_5__.addClass)(btn,"page_post_video_play_inline_loading"),Object(_dom__WEBPACK_IMPORTED_MODULE_5__.val)(btn,Object(_layout_utils__WEBPACK_IMPORTED_MODULE_8__.getProgressHtml)()))}function hideProgress(){thumb.removeAttribute("data-loading"),options.no_progress||(Object(_dom__WEBPACK_IMPORTED_MODULE_5__.removeClass)(btn,"page_post_video_play_inline_loading"),Object(_dom__WEBPACK_IMPORTED_MODULE_5__.val)(btn,""))}}function loadInlineVideo(e,t,n){var r=Object(_utils_common__WEBPACK_IMPORTED_MODULE_4__.extend)({autoplay:0,module:cur.module},e);Object(_utils_common__WEBPACK_IMPORTED_MODULE_4__.trim)(r.module)||(r._nol=JSON.stringify(nav.objLoc));var o=["videoview.js","videoview.css"];function i(e,n){Object(_utils_common__WEBPACK_IMPORTED_MODULE_4__.isFunction)(t)&&t(e,n)}r.from_autoplay&&o.push("videoplayer.js","videoplayer.css","hls.min.js"),ajax.post("al_video.php?act=show_inline",r,{onDone:function(){var e=[].slice.call(arguments);i(!0,e)},onFail:function(){var e=[].slice.call(arguments);return i(!1,e),!0},stat:o,local:1,cache:n})}function revertLastInlineVideo(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(window._videoLastInlined){var n,r=!1,o=Object(_dom__WEBPACK_IMPORTED_MODULE_5__.ge)(e);if(o&&(n=window._videoLastInlined[0])){for(;n=n.parentNode;)if(n==o){r=!0;break}if(!r)return}Object(_dom__WEBPACK_IMPORTED_MODULE_5__.re)(window._videoLastInlined[0]),Object(_dom__WEBPACK_IMPORTED_MODULE_5__.show)(window._videoLastInlined[1]),window._videoLastInlined[1].removeAttribute("data-playing"),window._videoLastInlined=!1,_destroyInlineVideoPlayer(t),delete cur.mvOpts}}function _destroyInlineVideoPlayer(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];cur.videoInlinePlayer&&(cur.videoInlinePlayer.destroy(e),delete cur.videoInlinePlayer)}function pauseLastInlineVideo(){if(window._videoLastInlined){var e=cur.videoInlinePlayer||Object(_dom__WEBPACK_IMPORTED_MODULE_5__.ge)("video_yt")&&window.VideoYoutube;if(e){if(e.isActiveLive&&e.isActiveLive())return;cur.mvOpts.lastPlayerState=e.getState(),e.togglePlay(!1)}}}function playLastInlineVideo(){if(window._videoLastInlined&&cur.mvOpts&&cur.mvOpts.lastPlayerState===_videoplayer_lib_player_states__WEBPACK_IMPORTED_MODULE_2__.PLAYING){var e=cur.videoInlinePlayer||Object(_dom__WEBPACK_IMPORTED_MODULE_5__.ge)("video_yt")&&window.VideoYoutube;e&&e.togglePlay(!0)}}function checkMp4(e){e(!0)}var VideoConstants={VIDEO_ITEM_INDEX_OWNER_ID:0,VIDEO_ITEM_INDEX_ID:1,VIDEO_ITEM_INDEX_THUMB:2,VIDEO_ITEM_INDEX_TITLE:3,VIDEO_ITEM_INDEX_FLAGS:4,VIDEO_ITEM_INDEX_DURATION:5,VIDEO_ITEM_INDEX_HASH:6,VIDEO_ITEM_INDEX_MODER_ACTS:7,VIDEO_ITEM_INDEX_OWNER:8,VIDEO_ITEM_INDEX_DATE:9,VIDEO_ITEM_INDEX_VIEWS:10,VIDEO_ITEM_INDEX_PLATFORM:11,VIDEO_ITEM_INDEX_BLOCKED:12,VIDEO_ITEM_INDEX_MUSIC_VIDEO_META:13,VIDEO_ITEM_INDEX_ARIA:14,VIDEO_ITEM_INDEX_RESTRICTION_BLOCK:15,VIDEO_ITEM_INDEX_RESTRICTION_CLASSES:16,VIDEO_ITEM_INDEX_ADMIN_INFO:17,VIDEO_ITEM_FLAG_EXTERNAL:1,VIDEO_ITEM_FLAG_ACTIVE_LIVE:2,VIDEO_ITEM_FLAG_CAN_EDIT:64,VIDEO_ITEM_FLAG_CAN_DELETE:128,VIDEO_ITEM_FLAG_CAN_ADD:256,VIDEO_ITEM_FLAG_PRIVATE:512,VIDEO_ITEM_FLAG_NO_AUTOPLAY:1024,VIDEO_ITEM_FLAG_ADDED:2048,VIDEO_ITEM_FLAG_SKIP_THUMB_LOAD:4096,VIDEO_ITEM_FLAG_NEED_SIGN_IN:8192,VIDEO_ITEM_FLAG_HD:16384};function initVideo(){window._videoLastInlined=!1}},Ieup:function(__webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"menuSettings",(function(){return menuSettings})),__webpack_require__.d(__webpack_exports__,"showWriteMessageBox",(function(){return showWriteMessageBox})),__webpack_require__.d(__webpack_exports__,"giftsBox",(function(){return giftsBox})),__webpack_require__.d(__webpack_exports__,"moneyTransferBox",(function(){return moneyTransferBox})),__webpack_require__.d(__webpack_exports__,"reportAd",(function(){return reportAd})),__webpack_require__.d(__webpack_exports__,"mobilePromo",(function(){return mobilePromo})),__webpack_require__.d(__webpack_exports__,"showAudioClaimWarning",(function(){return showAudioClaimWarning})),__webpack_require__.d(__webpack_exports__,"sureDeleteAll",(function(){return sureDeleteAll})),__webpack_require__.d(__webpack_exports__,"imageStatusPopup",(function(){return imageStatusPopup}));var core_js_modules_es6_object_assign__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("91GP"),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("pIFo"),_message_box__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("EasH"),_ui__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("v+DW"),_dom__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("zxIV"),_dom_events__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("Egk5"),_lang__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("4+be"),_debug_tools__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("98sY"),_box_utils__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("kcIO"),_shared_lib_web_stats__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("Bj12"),_shared_user_user_env__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("W9Tc"),_web_payments_money_transfer__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("821F");function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function menuSettings(e){return Object(_message_box__WEBPACK_IMPORTED_MODULE_2__.showTabbedBox)("al_settings.php",{act:"menu_box",type:e})}function showWriteMessageBox(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};cur.onFriendMessage&&cur.onFriendMessage(),stManager.add(["page.js","wide_dd.js"]);var r=Object(_message_box__WEBPACK_IMPORTED_MODULE_2__.showBox)("al_im.php",_extends({act:"a_write_box",to:t},n.params),{stat:[jsc("web/writebox.js"),"writebox.css","wide_dd.css","page.css","post.css",jsc("web/emoji.js"),"notifier.css"],cache:1},e);return r&&Object(_dom_events__WEBPACK_IMPORTED_MODULE_5__.cancelEvent)(e),window.WriteBox&&WriteBox.extractEmoji(),!r}function giftsBox(e,t,n){return cur.viewAsBox?cur.viewAsBox():!Object(_message_box__WEBPACK_IMPORTED_MODULE_2__.showBox)("al_gifts.php",{act:"box",tab:n||"received",mid:e},{cache:1,stat:["gifts.css",jsc("web/gifts.js")]},t)}function moneyTransferBox(e,t,n,r,o,i,a){if(cur.viewAsBox)return cur.viewAsBox();if(o){var s,c;if(!a)return 2===o?(s=cur.lang&&cur.lang.mail_money_transfer_cancel_confirm||Object(_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("mail_money_transfer_cancel_confirm"),c=cur.lang&&cur.lang.mail_money_transfer_cancel_btn||Object(_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("mail_money_transfer_cancel_btn")):(s=cur.lang&&cur.lang.mail_money_transfer_decline_confirm||Object(_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("news_fb_money_transfer_decline_confirm"),c=cur.lang&&cur.lang.mail_money_transfer_decline_btn||Object(_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("news_fb_money_transfer_decline_btn")),void(cur.confirmBox=Object(_message_box__WEBPACK_IMPORTED_MODULE_2__.showFastBox)(Object(_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("global_action_confirmation"),s,c,moneyTransferBox.pbind(e,t,n,r,o,!1,1),Object(_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("global_cancel")));var u=Object(_dom__WEBPACK_IMPORTED_MODULE_4__.hasClass)(Object(_dom__WEBPACK_IMPORTED_MODULE_4__.domPN)(r),"wall_postlink_preview_btn")||Object(_dom__WEBPACK_IMPORTED_MODULE_4__.hasClass)(r,"money_transfer__decline_button"),l=Object(_dom__WEBPACK_IMPORTED_MODULE_4__.geByClass1)("flat_button",Object(_dom__WEBPACK_IMPORTED_MODULE_4__.domPN)(r));return 2!==a&&(Object(_ui__WEBPACK_IMPORTED_MODULE_3__.disableButton)(l,!0),u?(Object(_dom__WEBPACK_IMPORTED_MODULE_4__.addClass)(r.firstChild,"round_spinner"),Object(_dom__WEBPACK_IMPORTED_MODULE_4__.removeClass)(r.firstChild,"button")):Object(_ui__WEBPACK_IMPORTED_MODULE_3__.lockButton)(r),cur.confirmBox&&cur.confirmBox.hide()),void ajax.post("al_payments.php?act=a_cancel_money_transfer",{tx_id:e,hash:t,from:u?"snippet":""},{onDone:function(i,a,s){0!==i?(u?(Object(_dom__WEBPACK_IMPORTED_MODULE_4__.re)(r),Object(_dom__WEBPACK_IMPORTED_MODULE_4__.hasClass)(l,"secondary")||Object(_dom__WEBPACK_IMPORTED_MODULE_4__.domReplaceEl)(l,s)):Object(_dom__WEBPACK_IMPORTED_MODULE_4__.re)(Object(_dom__WEBPACK_IMPORTED_MODULE_4__.domPN)(r)),Object(_box_utils__WEBPACK_IMPORTED_MODULE_8__.showDoneBox)(a),window.TopNotifier.invalidate()):setTimeout(moneyTransferBox.pbind(e,t,n,r,o,!1,2),2e3)},onFail:function(e){return Object(_ui__WEBPACK_IMPORTED_MODULE_3__.disableButton)(l,!1),u?(Object(_dom__WEBPACK_IMPORTED_MODULE_4__.addClass)(r.firstChild,"button"),Object(_dom__WEBPACK_IMPORTED_MODULE_4__.removeClass)(r.firstChild,"round_spinner")):Object(_ui__WEBPACK_IMPORTED_MODULE_3__.unlockButton)(r),setTimeout(Object(_message_box__WEBPACK_IMPORTED_MODULE_2__.showFastBox)(Object(_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("global_error"),e).hide,2e3),!0}})}return cur.acceptMoneyBtn=r,i?!_web_payments_money_transfer__WEBPACK_IMPORTED_MODULE_11__.MoneyTransfer.showMoneyTransferBox({request_id:e,request:i,hash:t},{stat:["payments.css",jsc("workers/payments.js")]},e=>(Object(_box_utils__WEBPACK_IMPORTED_MODULE_8__.curBox)()&&Object(_box_utils__WEBPACK_IMPORTED_MODULE_8__.curBox)().hide(),setTimeout(Object(_message_box__WEBPACK_IMPORTED_MODULE_2__.showFastBox)(Object(_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("global_error"),e).hide,2e3),!0)):!Object(_message_box__WEBPACK_IMPORTED_MODULE_2__.showBox)("al_payments.php",{act:"accept_money_transfer_box",tx_id:e,hash:t},{stat:["payments.css",jsc("workers/payments.js")],onFail:e=>(Object(_box_utils__WEBPACK_IMPORTED_MODULE_8__.curBox)()&&Object(_box_utils__WEBPACK_IMPORTED_MODULE_8__.curBox)().hide(),setTimeout(Object(_message_box__WEBPACK_IMPORTED_MODULE_2__.showFastBox)(Object(_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("global_error"),e).hide,2e3),!0)},n)}function reportAd(e,t){if(Object(_shared_user_user_env__WEBPACK_IMPORTED_MODULE_10__.partConfigEnabled)("ads_new_reports_web_tgb")){var n="",r=null,o=Object(_message_box__WEBPACK_IMPORTED_MODULE_2__.showBox)("/reports.php",{act:"report_ad_box",ad_data:t},{onDone:function(){var e=Object(_dom__WEBPACK_IMPORTED_MODULE_4__.geByClass)("radiobtn","ad_report");window.radioBtns.ad_report={val:0,els:e};var t=Object(_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("ad_csrf");n=t?t.value:n,r=Object(_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("ad_comment")},params:{width:370,onClean:()=>{delete window.radioBtns.ad_report}},stat:["reports.css"]});o.removeButtons(),o.addButton(Object(_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("box_send"),i=>{ajax.post("reports.php",{act:"a_report_ad",ad_id:e,reason:window.radioBtns.ad_report.val,comment:r?r.value:"",ad_data:t,hash:n},{onDone:()=>{o.hide(),Object(_box_utils__WEBPACK_IMPORTED_MODULE_8__.showDoneBox)(Object(_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("reports_thanks_for_report"))},showProgress:()=>Object(_ui__WEBPACK_IMPORTED_MODULE_3__.lockButton)(i),hideProgress:()=>Object(_ui__WEBPACK_IMPORTED_MODULE_3__.unlockButton)(i)})}),o.addButton(Object(_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("global_cancel"),!1,"no")}else Object(_message_box__WEBPACK_IMPORTED_MODULE_2__.showBox)("/reports.php?act=a_report_ad_box",{ad_id:e},{params:{width:370},stat:["ui_controls.js","ui_controls.css"]})}var mobilePromo=_message_box__WEBPACK_IMPORTED_MODULE_2__.showBox.pbind("al_login.php",{act:"mobile",box:1});function showAudioClaimWarning(e,t,n){var r,o,i=e.id,a=e.ownerId,s=e.title,c=t.id,u=t.reason,l=t.original,d={width:470};if(e.restrictionStatus)return AudioUtils.showAudioRestriction(e);"geo"===u?(r=Object(_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("audio_claimed_geo"),o=Object(_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("audio_claim_warning_title")):"site_rules_violation"===u?(r=Object(_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("audio_site_rules_violation_warning"),o=Object(_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("audio_site_rules_violation_header")):"replace"===u?(r=Object(_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("audio_claimed_replacement_available"),o=Object(_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("audio_claim_warning_title")):"subscription"===u?(d.hideButtons=!0,d.bodyStyle="padding: 0; border-radius: 4px;",d.width=450,o=!1,r=`\n      <div class="audio_claim_popup">\n        <div class="audio_claim_popup__title">${Object(_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("global_audio_only_with_subscription_title")}</div>\n        <div class="audio_claim_popup__text">${Object(_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("global_audio_only_with_subscription_text")}</div>\n        <div class="audio_claim_popup__close" onclick="curBox().hide()"></div>\n        <button class="flat_button round_button" onclick="AudioPlayer.showSubscriptionPopup()">${Object(_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("global_audio_only_with_subscription_btn")}</button>\n      </div>`):(r=Object(_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("audio_claim_warning"),o=Object(_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("audio_claim_warning_title")),d.title=o;var _=[d,r=(r=(r=r.replace(/\{audio\}/g,`<b>${s}</b>`)).replace(/\{objection_link\}/g,`<a href="/help?act=cc_objection&claim=${c}&content=audio${a}_${i}">${Object(_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("audio_claim_objection")}</a>`)).replace(/\{delete_link\}/g,`<a onclick="deleteAudioOnClaim(${a}, ${i}); return false;">${Object(_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("audio_claim_delete")}</a>`)],p=null;if(n&&l){var h=AudioUtils.drawAudio(l,"no_extra");_[1]=r.replace(/\{original\}/g,l[AudioUtils.AUDIO_ITEM_INDEX_PERFORMER]+" - "+l[AudioUtils.AUDIO_ITEM_INDEX_TITLE])+"<br/><br/>"+h,_.push(Object(_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("audio_replace_with_original"),(function(){Object(_ui__WEBPACK_IMPORTED_MODULE_3__.lockButton)(p.btns.ok[0]),n(()=>p.hide())})),d.textControls=`<a onclick="deleteAudioOnClaim(${a}, ${i}); return false;">${Object(_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("audio_claim_delete_capital")}</a>`}cur.claimWarning=p=_message_box__WEBPACK_IMPORTED_MODULE_2__.showFastBox.apply(null,_)}function sureDeleteAll(title,text,where,objectId,toId,fromId,hash,event){if(!Object(_dom_events__WEBPACK_IMPORTED_MODULE_5__.checkEvent)(event)){var box=Object(_message_box__WEBPACK_IMPORTED_MODULE_2__.showFastBox)({title},text,Object(_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("global_delete"),(function(btn){ajax.post("/delete_all.php",{act:where,object_id:objectId,to_id:toId,from_id:fromId,hash,loc:nav.objLoc[0]},{onDone:function onDone(res){if(__debugMode)eval(res);else try{eval(res)}catch(e){Object(_debug_tools__WEBPACK_IMPORTED_MODULE_7__.logEvalError)(e,res)}box.hide()},showProgress:_ui__WEBPACK_IMPORTED_MODULE_3__.lockButton.pbind(btn),hideProgress:_ui__WEBPACK_IMPORTED_MODULE_3__.unlockButton.pbind(btn)})}),Object(_lang__WEBPACK_IMPORTED_MODULE_6__.getLang)("global_cancel"));return!1}}function imageStatusPopup(e,t){Object.assign(t,{act:"image_status"});var n=Object(_message_box__WEBPACK_IMPORTED_MODULE_2__.showBox)("special_event.php",t,{containerClass:"ImageStatusPopup__container",params:{hideButtons:!0},onFail:function(){return window.cur.imageStatusBox&&window.cur.imageStatusBox.hide(),!0},onDone:function(e,t){var n=t.status_id;n&&Object(_shared_lib_web_stats__WEBPACK_IMPORTED_MODULE_9__.saveStatlogEvents)({name:"image_status",value:n,keys:["show_popup"]})}},e);n&&(Object(_dom_events__WEBPACK_IMPORTED_MODULE_5__.cancelEvent)(e),window.cur.imageStatusBox=n)}},Ijbi:function(e,t,n){var r=n("WkPL");e.exports=function(e){if(Array.isArray(e))return r(e)}},IrTF:function(e,t,n){"use strict";n.r(t);var r=n("q1tI"),o=n.n(r),i=n("xt6h"),a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},c=function(e){var t=e.inverted,n=e.size,r=e.className,c=s(e,["inverted","size","className"]),u=Object(i.classNames)("Progress",{"Progress--inverted":!!t},"Progress--size-"+n,r);return o.a.createElement("div",a({className:u},c),o.a.createElement("div",{className:"Progress__item"}),o.a.createElement("div",{className:"Progress__item"}),o.a.createElement("div",{className:"Progress__item"}))};c.defaultProps={inverted:!1,size:"s"},t.default=c},Iw71:function(e,t,n){var r=n("0/R4"),o=n("dyZX").document,i=r(o)&&r(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},"J+6e":function(e,t,n){var r=n("I8a+"),o=n("K0xU")("iterator"),i=n("hPIQ");e.exports=n("g3g5").getIteratorMethod=function(e){if(null!=e)return e[o]||e["@@iterator"]||i[r(e)]}},J8bf:function(e,t,n){"use strict";n.r(t),n.d(t,"getCookie",(function(){return a})),n.d(t,"setCookie",(function(){return s})),n.d(t,"initCookies",(function(){return c}));n("SRfc"),n("KKXr");var r=n("W9Tc"),o=n("DM2o");function i(){return browser.chrome&&parseInt(browser.version)>=71}function a(e){return function(){window._cookies={};for(var e=document.cookie.split(";"),t=/^[\s]*([^\s]+?)$/i,n=0,r=e.length;n<r;n++){var o=e[n].split("=");2===o.length&&(_cookies[o[0].match(t)[1]]=unescape(o[1].match(t)?o[1].match(t)[1]:""))}}(),"https:"!==location.protocol&&Object(o.statlogsValueEvent)("read_unsecure_cookie",e,location.href),_cookies[e]}function s(e,t,n,o){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"None",s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:window.locDomain,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},u=e+"="+escape(t),l=c.withoutSubdomains?".":"",d="; path=/"+(s?"; domain="+l+s:""),_="https:"===location.protocol,p=!!o;Object(r.partConfigEnabled)("cookie_secure_default_true")&&(p=!1!==o);var h=_&&p?"; secure":"",f=p&&i()&&Object(r.partConfigEnabled)("cookie_class_samesite")?"; SameSite="+a:"",m="";if(n){var g=new Date;g.setTime(g.getTime()+24*n*60*60*1e3),m="; expires="+g.toGMTString()}document.cookie=u+m+d+f+h}function c(){window._cookies={}}},JiEa:function(e,t){t.f=Object.getOwnPropertySymbols},JlTo:function(e,t,n){"use strict";n.r(t),n.d(t,"tmrTrackPage",(function(){return c})),n.d(t,"tmrTrackRegistration",(function(){return u})),n.d(t,"tmrTrackCustomGoal",(function(){return l})),n.d(t,"tmrTrackMiniAppOpen",(function(){return g})),n.d(t,"tmrTrackMiniAppClose",(function(){return v})),n.d(t,"tmrTrackMiniAppLogin",(function(){return b})),n.d(t,"tmrTrackMiniAppRegistration",(function(){return y})),n.d(t,"tmrTrackMiniAppCustom",(function(){return E}));n("91GP");var r=n("J8bf");function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var i="miniAppEvent";function a(){return window.vk&&window.vk.id?window.vk.id:0}function s(e){window.vk&&window.vk.zero||window.__dev||(window._tmr=window._tmr||[],window._tmr.push(e))}function c(e,t){s({id:"2579437",url:e,referrer:t,type:"pageView",start:(new Date).getTime(),pid:a(),userid:a()}),Object(r.getCookie)("remixtmr_login")&&(Object(r.setCookie)("remixtmr_login","",-1),s({id:"2579437",type:"reachGoal",goal:"mt_login",userid:a()}))}function u(){s({id:"2579437",type:"reachGoal",goal:"mt_registration",userid:a()})}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s({id:"2579437",type:"reachGoal",goal:e,userid:a(),params:t})}function d(e){var t=a();a&&s({id:"2579437",type:i,params:o({},e,{platformUserId:String(t)})})}var _="open",p="close",h="login",f="registration",m="custom";function g(e,t){d({eventType:_,miniAppId:e,queryParams:t})}function v(e){d({eventType:p,miniAppId:e})}function b(e,t){d({eventType:h,miniAppId:e,customUserId:t})}function y(e,t){d({eventType:f,miniAppId:e,customUserId:t})}function E(e,t){d(o({eventType:m,miniAppId:e},t))}},Jph1:function(e,t,n){"use strict";n.r(t);var r=n("qFE6");t.default=r},K0xU:function(e,t,n){var r=n("VTer")("wks"),o=n("ylqs"),i=n("dyZX").Symbol,a="function"==typeof i;(e.exports=function(e){return r[e]||(r[e]=a&&i[e]||(a?i:o)("Symbol."+e))}).store=r},KCt4:function(e,t,n){"use strict";var r={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};r.localCName=r.generateIdentifier(),r.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},r.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},r.getDescription=function(e){var t=r.splitSections(e);return t&&t[0]},r.getMediaSections=function(e){var t=r.splitSections(e);return t.shift(),t},r.matchPrefix=function(e,t){return r.splitLines(e).filter((function(e){return 0===e.indexOf(t)}))},r.parseCandidate=function(e){for(var t,n={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:n[t[r]]=t[r+1]}return n},r.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},r.parseIceOptions=function(e){return e.substr(14).split(" ")},r.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},r.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},r.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},r.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},r.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),o=0;o<r.length;o++)n[(t=r[o].trim().split("="))[0].trim()]=t[1];return n},r.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var r=[];Object.keys(e.parameters).forEach((function(t){e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},r.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},r.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},r.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},r.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},r.getMid=function(e){var t=r.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},r.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},r.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:r.matchPrefix(e+t,"a=fingerprint:").map(r.parseFingerprint)}},r.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},r.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},r.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?r.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},r.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},r.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},r.getCryptoParameters=function(e,t){return r.matchPrefix(e+t,"a=crypto:").map(r.parseCryptoLine)},r.getIceParameters=function(e,t){var n=r.matchPrefix(e+t,"a=ice-ufrag:")[0],o=r.matchPrefix(e+t,"a=ice-pwd:")[0];return n&&o?{usernameFragment:n.substr(12),password:o.substr(10)}:null},r.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},r.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=r.splitLines(e)[0].split(" "),o=3;o<n.length;o++){var i=n[o],a=r.matchPrefix(e,"a=rtpmap:"+i+" ")[0];if(a){var s=r.parseRtpMap(a),c=r.matchPrefix(e,"a=fmtp:"+i+" ");switch(s.parameters=c.length?r.parseFmtp(c[0]):{},s.rtcpFeedback=r.matchPrefix(e,"a=rtcp-fb:"+i+" ").map(r.parseRtcpFb),t.codecs.push(s),s.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(s.name.toUpperCase())}}}return r.matchPrefix(e,"a=extmap:").forEach((function(e){t.headerExtensions.push(r.parseExtmap(e))})),t},r.writeRtpDescription=function(e,t){var n="";n+="m="+e+" ",n+=t.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=t.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach((function(e){n+=r.writeRtpMap(e),n+=r.writeFmtp(e),n+=r.writeRtcpFb(e)}));var o=0;return t.codecs.forEach((function(e){e.maxptime>o&&(o=e.maxptime)})),o>0&&(n+="a=maxptime:"+o+"\r\n"),n+="a=rtcp-mux\r\n",t.headerExtensions&&t.headerExtensions.forEach((function(e){n+=r.writeExtmap(e)})),n},r.parseRtpEncodingParameters=function(e){var t,n=[],o=r.parseRtpParameters(e),i=-1!==o.fecMechanisms.indexOf("RED"),a=-1!==o.fecMechanisms.indexOf("ULPFEC"),s=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),c=s.length>0&&s[0].ssrc,u=r.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substr(17).split(" ").map((function(e){return parseInt(e,10)}))}));u.length>0&&u[0].length>1&&u[0][0]===c&&(t=u[0][1]),o.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var r={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&t&&(r.rtx={ssrc:t}),n.push(r),i&&((r=JSON.parse(JSON.stringify(r))).fec={ssrc:c,mechanism:a?"red+ulpfec":"red"},n.push(r))}})),0===n.length&&c&&n.push({ssrc:c});var l=r.matchPrefix(e,"b=");return l.length&&(l=0===l[0].indexOf("b=TIAS:")?parseInt(l[0].substr(7),10):0===l[0].indexOf("b=AS:")?1e3*parseInt(l[0].substr(5),10)*.95-16e3:void 0,n.forEach((function(e){e.maxBitrate=l}))),n},r.parseRtcpParameters=function(e){var t={},n=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];n&&(t.cname=n.value,t.ssrc=n.ssrc);var o=r.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=o.length>0,t.compound=0===o.length;var i=r.matchPrefix(e,"a=rtcp-mux");return t.mux=i.length>0,t},r.parseMsid=function(e){var t,n=r.matchPrefix(e,"a=msid:");if(1===n.length)return{stream:(t=n[0].substr(7).split(" "))[0],track:t[1]};var o=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return o.length>0?{stream:(t=o[0].value.split(" "))[0],track:t[1]}:void 0},r.parseSctpDescription=function(e){var t,n=r.parseMLine(e),o=r.matchPrefix(e,"a=max-message-size:");o.length>0&&(t=parseInt(o[0].substr(19),10)),isNaN(t)&&(t=65536);var i=r.matchPrefix(e,"a=sctp-port:");if(i.length>0)return{port:parseInt(i[0].substr(12),10),protocol:n.fmt,maxMessageSize:t};if(r.matchPrefix(e,"a=sctpmap:").length>0){var a=r.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(a[0],10),protocol:a[1],maxMessageSize:t}}},r.writeSctpDescription=function(e,t){var n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},r.generateSessionId=function(){return Math.random().toString().substr(2,21)},r.writeSessionBoilerplate=function(e,t,n){var o=void 0!==t?t:2;return"v=0\r\no="+(n||"thisisadapterortc")+" "+(e||r.generateSessionId())+" "+o+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},r.writeMediaSection=function(e,t,n,o){var i=r.writeRtpDescription(e.kind,t);if(i+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),i+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":"active"),i+="a=mid:"+e.mid+"\r\n",e.direction?i+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?i+="a=sendrecv\r\n":e.rtpSender?i+="a=sendonly\r\n":e.rtpReceiver?i+="a=recvonly\r\n":i+="a=inactive\r\n",e.rtpSender){var a="msid:"+o.id+" "+e.rtpSender.track.id+"\r\n";i+="a="+a,i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+a,e.sendEncodingParameters[0].rtx&&(i+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+a,i+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(i+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),i},r.getDirection=function(e,t){for(var n=r.splitLines(e),o=0;o<n.length;o++)switch(n[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[o].substr(2)}return t?r.getDirection(t):"sendrecv"},r.getKind=function(e){return r.splitLines(e)[0].split(" ")[0].substr(2)},r.isRejected=function(e){return"0"===e.split(" ",2)[1]},r.parseMLine=function(e){var t=r.splitLines(e)[0].substr(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},r.parseOLine=function(e){var t=r.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]}},r.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var t=r.splitLines(e),n=0;n<t.length;n++)if(t[n].length<2||"="!==t[n].charAt(1))return!1;return!0},e.exports=r},KKXr:function(e,t,n){"use strict";var r=n("quPj"),o=n("y3w9"),i=n("69bn"),a=n("A5AN"),s=n("ne8i"),c=n("Xxuz"),u=n("Ugos"),l=n("eeVq"),d=Math.min,_=[].push,p="length",h=!l((function(){RegExp(4294967295,"y")}));n("IU+Z")("split",2,(function(e,t,n,l){var f;return f="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1)[p]||2!="ab".split(/(?:ab)*/)[p]||4!=".".split(/(.?)(.?)/)[p]||".".split(/()()/)[p]>1||"".split(/.?/)[p]?function(e,t){var o=String(this);if(void 0===e&&0===t)return[];if(!r(e))return n.call(o,e,t);for(var i,a,s,c=[],l=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),d=0,h=void 0===t?4294967295:t>>>0,f=new RegExp(e.source,l+"g");(i=u.call(f,o))&&!((a=f.lastIndex)>d&&(c.push(o.slice(d,i.index)),i[p]>1&&i.index<o[p]&&_.apply(c,i.slice(1)),s=i[0][p],d=a,c[p]>=h));)f.lastIndex===i.index&&f.lastIndex++;return d===o[p]?!s&&f.test("")||c.push(""):c.push(o.slice(d)),c[p]>h?c.slice(0,h):c}:"0".split(void 0,0)[p]?function(e,t){return void 0===e&&0===t?[]:n.call(this,e,t)}:n,[function(n,r){var o=e(this),i=null==n?void 0:n[t];return void 0!==i?i.call(n,o,r):f.call(String(o),n,r)},function(e,t){var r=l(f,e,this,t,f!==n);if(r.done)return r.value;var u=o(e),_=String(this),p=i(u,RegExp),m=u.unicode,g=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(h?"y":"g"),v=new p(h?u:"^(?:"+u.source+")",g),b=void 0===t?4294967295:t>>>0;if(0===b)return[];if(0===_.length)return null===c(v,_)?[_]:[];for(var y=0,E=0,w=[];E<_.length;){v.lastIndex=h?E:0;var O,C=c(v,h?_:_.slice(E));if(null===C||(O=d(s(v.lastIndex+(h?0:E)),_.length))===y)E=a(_,E,m);else{if(w.push(_.slice(y,E)),w.length===b)return w;for(var T=1;T<=C.length-1;T++)if(w.push(C[T]),w.length===b)return w;E=y=O}}return w.push(_.slice(y)),w}]}))},KkBR:function(e,t,n){"use strict";n.r(t),n.d(t,"initLoginBoxForm",(function(){return T})),n.d(t,"initLoginCombinedBoxForm",(function(){return S})),n.d(t,"Login",(function(){return D}));var r=n("MZbF"),o=n("q1tI"),i=(n("Oyvg"),n("SRfc"),n("pIFo"),n("91GP"),n("17x9"),n("v+DW")),a=n("6krn"),s=n("dV62"),c=n("WfnU"),u=n("h7Kf"),l=n("+tmx"),d=n("6b4t"),_=n("i8i4"),p=n("ZxpX"),h=n("clTp");class f extends o.Component{constructor(e){super(e),this.addTooltip=e=>{if(this.el){var t=this.props,n=t.text,r=t.position,o=t.align,i=t.marginTop,a=t.marginLeft,s=Object(h.default)(this.el);this.update({text:n,position:r,align:o,rect:s,marginTop:i,marginLeft:a})}},this.removeTooltip=e=>{document.activeElement!==this.inputEl&&this.update({remove:!0})},this.renderTooltip=()=>{if(!this.state.tooltip)return null;var e=this.state.tooltip,t=e.x,n=e.y,r=e.position,i=e.align,a=e.text,s=e.removed,c=this.props,u=c.appearance,l=c.width,d=Object(p.classNames)("UnblockTooltip","UnblockTooltip--"+r,"UnblockTooltip--"+u,{"UnblockTooltip--removed":!!s,["UnblockTooltip--align-"+i]:"t"===r||"b"===r}),_={top:n,left:t},h=l?{width:l}:{};return o.createElement("div",{className:d,style:_},o.createElement("div",{className:"UnblockTooltip__in",style:h,dangerouslySetInnerHTML:{__html:a}}))},this.state={}}componentDidMount(){this.el=_.findDOMNode(this),this.inputEl="INPUT"===this.el.tagName?this.el:this.el.getElementsByTagName("input")[0],this.backgroundElement=document.getElementById("box_layer_wrap"),this.el.addEventListener("mouseenter",this.addTooltip),this.el.addEventListener("mouseleave",this.removeTooltip),this.inputEl.addEventListener("focus",this.addTooltip),this.inputEl.addEventListener("blur",this.removeTooltip),this.backgroundElement.addEventListener("scroll",this.addTooltip),window.addEventListener("resize",this.addTooltip)}componentWillUnmount(){this.el.removeEventListener("mouseenter",this.addTooltip),this.el.removeEventListener("mouseleave",this.removeTooltip),this.inputEl.removeEventListener("focus",this.addTooltip),this.inputEl.removeEventListener("blur",this.removeTooltip),this.backgroundElement.addEventListener("scroll",this.addTooltip),window.removeEventListener("resize",this.addTooltip)}update(e){var t=e.position,n=e.align,r=e.text,o=e.rect,i=e.marginTop,a=e.marginLeft,s=!o||0===o.top&&0===o.left;if(!0!==e.remove&&this.props.isShown&&!s){var c=o.left,u=o.top;switch(t){case"t":c+=.5*o.width;break;case"r":c+=o.width,u+=.5*o.height;break;case"b":c+=.5*o.width,u+=o.height;break;case"l":u+=.5*o.height}c=Math.round(c+a),u=Math.round(u+i),this.setState({tooltip:{position:t,align:n,text:r,x:c,y:u}})}else this.setState({tooltip:Object.assign({},this.state.tooltip,{removed:!0})})}render(){var e=this.renderTooltip();return e?(this.defaultNode||"undefined"==typeof window||(this.defaultNode=document.createElement("div"),document.body.appendChild(this.defaultNode)),o.createElement(o.Fragment,null,this.props.children,_.createPortal(e,this.defaultNode))):this.props.children}}f.defaultProps={appearance:"black",position:"b",align:"center",marginTop:0,marginLeft:0};var m=n("3blr"),g=n("wVf2");class v extends o.Component{constructor(e){var t;super(e),t=this,this.componentDidMount=()=>{document.addEventListener("keydown",this.onDocumentKeyDown),this.setInitialState(),this.synchronizeStateWithBackend()},this.componentWillUnmount=()=>{document.removeEventListener("keydown",this.onDocumentKeyDown),this.removeResendCodeButtonTimer()},this.componentDidUpdate=(e,t)=>{this.state.initialLoading||this.state.delayedUnblockExplanation||this.state.delayedUnblockFinished||t.phone===this.state.phone&&t.code===this.state.code&&t.codeSent===this.state.codeSent||this.updateFocus()},this.sendCode=()=>{if(!this.isBusy()){this.resetMessage();var e={act:v.acts.sendCode,phone:this.getPhonePrefix()+this.state.newPhone,hash:this.state.processHash,sure:1};ajax.post(v.controller,e,{onDone:e=>{this.setStateByProcess(e),this.setResendCodeButtonTimer()},onFail:e=>(this.setErrorMessage(e),!0),showProgress:()=>this.setState({mainButtonLoading:!0}),hideProgress:()=>this.setState({mainButtonLoading:!1})})}},this.sendCodeToBoundPhone=()=>{if(!this.isBusy()){this.resetMessage();var e={act:v.acts.sendCodeToBoundPhone,hash:this.state.processHash};ajax.post(v.controller,e,{onDone:e=>{this.setStateByProcess(e),this.setResendCodeButtonTimer()},onFail:e=>(this.setErrorMessage(e),this.synchronizeStateWithBackend(),!0),showProgress:()=>this.setState({mainButtonLoading:!0}),hideProgress:()=>this.setState({mainButtonLoading:!1})})}},this.resetPhone=e=>{this.isBusy()||(this.removeResendCodeButtonTimer(),e&&this.resetMessage(),this.setState({phonePrefixIndex:v.constants.firstCountryIndex,backendCallResetsEnabled:null,phone:"",code:"",newPhone:"",newCode:"",phonePrefixInputNeeded:!0,codeSent:!1,checkCodeAttemptsAmount:void 0}))},this.resetUnblockForm=()=>{if(!this.isBusy()){var e={act:v.acts.resetUnblockForm,hash:this.state.processHash};ajax.post(v.controller,e,{onDone:e=>{this.setStateByProcess(e,{delayedUnblockExplanation:"",delayedUnblockFinished:!1})},onFail:e=>(this.setErrorMessage(e),this.synchronizeStateWithBackend(),!0),showProgress:()=>this.setState({resetUnblockDataButtonLoading:!0}),hideProgress:()=>this.setState({resetUnblockDataButtonLoading:!1})})}},this.checkCode=()=>{if(!this.isBusy())if(this.state.newCode.length<4)Object(i.notaBene)(this.references.validationCodeInput.element);else{this.resetMessage();var e={act:v.acts.checkCode,code:this.state.newCode,hash:this.state.processHash};ajax.post(v.controller,e,{onDone:e=>{this.setStateByProcess(e),this.references.passwordInput.element.focus(),this.setState({mainButtonLoading:!1})},onFail:e=>(this.synchronizeStateWithBackend(()=>{this.setErrorMessage(e),this.setState({mainButtonLoading:!1})}),!0),showProgress:()=>this.setState({mainButtonLoading:!0})})}},this.resendCode=()=>{if(!this.isBusy()){this.resetMessage();var e={act:v.acts.resendCode,hash:this.state.processHash};ajax.post(v.controller,e,{onDone:e=>{this.setStateByProcess(e,{newCode:""}),this.setInfoMessage(this.getResentInfoMessageText()),this.setResendCodeButtonTimer(),this.references.validationCodeInput.element.focus()},onFail:e=>(this.setErrorMessage(e),this.synchronizeStateWithBackend(),!0),showProgress:()=>this.setState({noCodeButtonLoading:!0}),hideProgress:()=>this.setState({noCodeButtonLoading:!1})})}},this.unblock=()=>{if(!this.isBusy())if(v.isBadPassword(this.state.newPassword))Object(i.notaBene)(this.references.passwordInput.element);else{this.resetMessage();var e={act:v.acts.unblock,pass:this.state.newPassword,hash:this.state.unblockHash};ajax.post(v.controller,e,{onDone:e=>{e.delayed_unblock_explanation?this.setState({delayedUnblockExplanation:e.delayed_unblock_explanation,mainButtonLoading:!1}):(this.setState({password:this.state.newPassword}),v.refreshAuthDataAndRedirectToFeed(e.login_hash,e.logout_hash,e.email,this.state.newPassword))},onFail:e=>(this.setErrorMessage(e),this.setState({mainButtonLoading:!1}),this.synchronizeStateWithBackend(),!0),showProgress:()=>this.setState({mainButtonLoading:!0})})}},this.redirectToAuth=()=>{this.setState({redirectToAuthButtonLoading:!0}),window.location.href=document.getElementById("top_logout_link").href},this.synchronizeStateWithBackend=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{},n={act:v.acts.getStatus};ajax.post(v.controller,n,{onDone:n=>{e(),t.setStateByProcess(n)},onFail:e=>(t.setErrorMessage(e),t.synchronizeStateWithBackend(),!0)})},this.setStateByProcess=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t.getStateByProcess(e);t.state.initialLoading&&(r.initialLoading=!1),n&&Object.assign(r,n),0!==t.state.unbanDataId&&void 0!==t.state.unbanDataId&&r.unbanDataId!==t.state.unbanDataId&&t.setErrorMessage(a.default.getLang("login_unban_data_expired")),t.setState(r),r.delayedUnblockExplanation||r.delayedUnblockFinished||(r.codeSent&&r.resendButtonSecondsLeft&&t.setResendCodeButtonTimer(),0===r.checkCodeAttemptsAmount&&t.resetPhone(!1))},this.getStateByProcess=e=>({phone:e.phone,code:e.code,password:e.password,phonePrefixInputNeeded:!e.phone,canEditPhone:e.can_edit_phone,codeSent:e.code_sent,checkCodeAttemptsAmount:Number(e.check_code_attempts_amount),backendCallResetsEnabled:e.call_resets_enabled,phonePrefixesCallResetsEnabledConfig:e.phone_prefixes_call_resets_enabled_config,phonePrefixesToCountryMapping:e.country_to_phone_prefixes_map,unbanDataId:e.unban_data_id,delayedUnblockExplanation:e.delayed_unblock_explanation,delayedUnblockFinished:e.delayed_unblock_finished,resendCodeTimer:v.constants.noResetCodeTimerEnabled,resendButtonSecondsLeft:e.sms_resend_delay_timer_left,resendAttemptsAmount:e.resend_attempts_amount,resendCodeDelay:e.sms_resend_delay,phonePrefixIndex:this.getInitialPhonePrefixIndex(e.country_to_phone_prefixes_map,e.phone_prefix),newPhone:e.phone,newCode:e.code,newPassword:"",processHash:e.process_hash,unblockHash:e.unblock_hash}),this.areCallResetsEnabled=()=>{if(null!==this.state.backendCallResetsEnabled)return this.state.backendCallResetsEnabled;var e=String(this.state.phonePrefixesToCountryMapping[this.state.phonePrefixIndex][0]),t=Number(e.replace("_",""));return!this.state.phonePrefixesCallResetsEnabledConfig.includes(t)},this.updateFocus=()=>{this.state.phone?this.state.phone&&!this.state.code&&this.state.codeSent?this.references.validationCodeInput.element.focus():this.state.phone&&this.state.code&&this.references.passwordInput.element.focus():this.references.phoneInput.element.focus()},this.setErrorMessage=e=>{this.setState({message:e,isError:!0})},this.setInfoMessage=e=>{this.setState({message:e,isError:!1})},this.resetMessage=()=>{this.setState({message:""})},this.isBusy=()=>this.state.mainButtonLoading||this.state.noCodeButtonLoading||this.state.resetUnblockDataButtonLoading,this.onDocumentKeyDown=e=>{switch(e.keyCode){case KEY.ENTER:this.references.mainButton.props.onClick();break;default:return}e.stopPropagation(),e.preventDefault()},this.setResendCodeButtonTimer=()=>{if(this.state.resendCodeTimer===v.constants.noResetCodeTimerEnabled){var e=this.state.resendButtonSecondsLeft||this.state.resendCodeDelay;this.setState({resendCodeTimer:setInterval(this.resendCodeButtonTimerTick,l.SECOND),resendButtonSecondsLeft:e})}},this.resendCodeButtonTimerTick=()=>{var e=this.state.resendButtonSecondsLeft-1;this.setState({resendButtonSecondsLeft:e}),0===e&&this.removeResendCodeButtonTimer()},this.removeResendCodeButtonTimer=()=>{clearInterval(this.state.resendCodeTimer),this.setState({resendCodeTimer:v.constants.noResetCodeTimerEnabled,resendButtonSecondsLeft:0})},this.noResendsWereMade=()=>this.state.resendAttemptsAmount===v.constants.noCodeResentAmount,this.isLastResendStep=()=>this.state.resendAttemptsAmount===v.constants.maxCodeResentAmount,this.shouldRenderCallResetsSteps=()=>this.areCallResetsEnabled()?this.noResendsWereMade():this.isLastResendStep(),this.getCodeBlockHeaderLabel=()=>this.shouldRenderCallResetsSteps()?a.default.getLang("login_authcheck_called_phone_label"):a.default.getLang("login_confirmation_code"),this.getCodeBlockTooltipLabel=()=>this.shouldRenderCallResetsSteps()?this.props.tooltips.codeCallReset:this.props.tooltips.code,this.getResentInfoMessageText=()=>this.shouldRenderCallResetsSteps()?a.default.getLang("login_authcheck_call_reset_sent"):a.default.getLang("login_authcheck_sms_resent"),this.getResendCodeWaitingLabel=()=>{var e;e=this.areCallResetsEnabled()?this.noResendsWereMade()?a.default.getLang("join_send_code_via_sms_time"):a.default.getLang("join_resend_code_time"):this.noResendsWereMade()?a.default.getLang("join_resend_code_time"):a.default.getLang("login_authcheck_send_call_reset_delay");var t=Math.floor(this.state.resendButtonSecondsLeft/60)+":"+(this.state.resendButtonSecondsLeft%60<10?"0":"")+this.state.resendButtonSecondsLeft%60;return e.replace("%s",t)},this.getResendCodeButtonLabel=()=>this.areCallResetsEnabled()?this.noResendsWereMade()?a.default.getLang("join_send_code_via_sms"):a.default.getLang("join_no_code"):this.noResendsWereMade()?a.default.getLang("join_no_code"):a.default.getLang("login_authcheck_send_call_reset_message"),this.getInitialPhonePrefixIndex=(e,t)=>{var n=e.findIndex(e=>e[3]==t);return-1===n&&(n=v.constants.firstCountryIndex),n},this.mapPhonePrefixesToOption=()=>this.state.phonePrefixesToCountryMapping.map((e,t)=>({constant:t,name:e[1]})),this.getPhonePrefix=()=>this.state.phonePrefixesToCountryMapping[this.state.phonePrefixIndex][3],this.renderResendCodeButton=()=>{var e;if(this.state.resendAttemptsAmount===v.constants.maxCodeResentAmount)e=o.createElement("div",{className:"resend_button resend_button--waiting"},a.default.getLang("reg_code_limit_exceeded"));else if(0===this.state.resendButtonSecondsLeft)e=o.createElement(c.default,{appearance:"link",loading:this.state.noCodeButtonLoading,className:"resend_button",onClick:this.resendCode},this.getResendCodeButtonLabel());else{var t=this.getResendCodeWaitingLabel();e=o.createElement("div",{className:"resend_button resend_button--waiting"},t)}return o.createElement("div",{className:"resend_button_wrap"},e)},this.renderPhonePrefixBlock=()=>{if(!this.state.phonePrefixInputNeeded)return"";var e=this.state.phone?v.constants.finishedClass:"";return o.createElement("div",{className:"input phone_number_prefix_input "+e},o.createElement("div",{className:"label"},a.default.getLang("join_country_label")),o.createElement(d.default,{className:"dark phone_number_prefix _phone_input_tooltip "+e,config:{id:"phone_number_prefix",placeholder:"",selected:[this.state.phonePrefixIndex],options:this.mapPhonePrefixesToOption()},singleSelectCrutch:!0,onFilterChange:(e,t)=>{this.setState({phonePrefixIndex:null===t?this.state.phonePrefixIndex:t})},readOnly:!!this.state.phone}))},this.renderPhoneBlock=()=>{var e=this.state.phone&&!this.state.code&&this.state.canEditPhone?o.createElement("a",{className:"_change_phone_button",onClick:()=>this.resetPhone(!0)},a.default.getLang("login_unblock_form_change_phone")):"",t=this.state.phonePrefixInputNeeded?this.getPhonePrefix():"",n=this.state.phone?v.constants.finishedClass:"",r=!this.state.phone&&!this.state.code&&this.state.phonePrefixInputNeeded,i=this.state.newPhone;return o.createElement("div",{className:"input phone_number_input"},o.createElement("div",{className:"label"},a.default.getLang("login_mobile_phone")),e,o.createElement(f,{text:this.getPhoneBlockTooltipLabel(),appearance:v.constants.tooltipAppearance,position:v.constants.tooltipPosition,width:v.constants.tooltipWidth,marginLeft:v.constants.tooltipMarginLeft,isShown:r},o.createElement("div",{id:"join_phone_prefixed",className:"prefix_input_wrap "+n},o.createElement("div",{id:"join_phone_prefix",className:"prefix_input_prefix"},o.createElement("nobr",null,t)),o.createElement("div",{className:"prefix_input_field"},o.createElement(u.default,{className:"prefix_input phone_number _phone_input_tooltip "+n,value:i,readOnly:!!this.state.phone,onChange:e=>this.setState({newPhone:e.target.value}),ref:e=>{this.references.phoneInput=e}}),o.createElement("div",{className:"prefix_input_border"})))))},this.renderCodeBlock=()=>{if(!this.state.phone)return"";if(!this.state.codeSent)return"";var e=this.getCodeBlockHeaderLabel(),t=this.state.code?v.constants.finishedClass:"",n=this.state.phone&&!this.state.code,r=!!this.state.code;return o.createElement("div",{className:"input verification_code_input"},o.createElement("div",{className:"label"},e),o.createElement(f,{text:this.getCodeBlockTooltipLabel(),appearance:v.constants.tooltipAppearance,position:v.constants.tooltipPosition,width:v.constants.tooltipWidth,marginLeft:v.constants.tooltipMarginLeft,isShown:n},o.createElement(u.default,{className:"verification_code _verification_code_input_tooltip dark "+t,ref:e=>{this.references.validationCodeInput=e},placeholder:a.default.getLang("login_authcheck_enter_code"),value:this.state.newCode,readOnly:r,onChange:e=>this.setState({newCode:e.target.value})})))},this.renderPasswordBlock=()=>{if(!this.state.phone||!this.state.code)return"";var e=v.checkPasswordStrength(this.state.newPassword),t=this.state.newPassword?o.createElement("div",{id:"blocked_about_pass",className:"blocked_pwd_level"+e}):"",n=this.state.newPassword?o.createElement("div",{className:"blocked_pass_strength blocked_about_login"},a.default.getLang("join_pwd_level"+e)):"",r=!this.state.password;return o.createElement("div",{className:"input new_password_input"},o.createElement("div",{className:"label"},a.default.getLang("login_new_password_label")),o.createElement(f,{text:this.props.tooltips.password,appearance:v.constants.tooltipAppearance,position:v.constants.tooltipPosition,width:v.constants.tooltipWidth,marginLeft:v.constants.tooltipMarginLeft,isShown:r},o.createElement(u.default,{className:"dark new_password _password_input_tooltip",ref:e=>{this.references.passwordInput=e},placeholder:a.default.getLang("login_enter_password"),value:this.state.newPassword,onChange:e=>this.setState({newPassword:e.target.value})})),t,n)},this.renderMainButton=()=>{var e,t,n,r=this.areCallResetsEnabled()?a.default.getLang("reg_validate_call_reset_button"):a.default.getLang("login_receive_code");if(this.state.phone||this.state.code)if(this.state.phone&&!this.state.code)this.state.codeSent?(e=this.checkCode,t=a.default.getLang("login_check_code"),n=this.renderResendCodeButton()):(e=this.sendCodeToBoundPhone,t=r,n="");else{if(!this.state.phone||!this.state.code)return"";e=this.unblock,t=a.default.getLang("login_blocked_unblock_page"),n=""}else e=this.sendCode,t=r,n="";return o.createElement("div",null,o.createElement(c.default,{className:"UnblockForm__mainButton",loading:this.state.mainButtonLoading,onClick:e,ref:e=>{this.references.mainButton=e}},t),n)},this.renderMessage=()=>{if(!this.state.message)return"";var e=this.state.isError?"error":"";return o.createElement("div",{id:"unblock_box_errors_block"},o.createElement("div",{className:"msg submit_error "+e,dangerouslySetInnerHTML:{__html:this.state.message}}))},this.renderContent=()=>this.state.initialLoading?v.renderInitialLoading():this.state.delayedUnblockExplanation?this.renderDelayedWaitExplanation():this.state.delayedUnblockFinished?this.renderDelayedUnblockFinishedScreen():o.createElement("div",{className:"UnblockForm__content__inputs"},this.renderPhonePrefixBlock(),this.renderPhoneBlock(),this.renderCodeBlock(),this.renderPasswordBlock(),this.renderMainButton()),this.renderDelayedWaitExplanation=()=>o.createElement("div",{className:"DelayedWaitExplanation"},o.createElement("div",{className:"DelayedWaitExplanation__message msg submit_error ",dangerouslySetInnerHTML:{__html:a.default.getLang("restore_change_phone_done_wait_banned").replace("{date}",this.state.delayedUnblockExplanation)}}),o.createElement("div",{className:"DelayedWaitExplanation__progressWrap"},o.createElement(c.default,{appearance:"tertiary",loading:this.state.resetUnblockDataButtonLoading,onClick:this.resetUnblockForm},a.default.getLang("login_delayed_its_not_me")))),this.renderDelayedUnblockFinishedScreen=()=>o.createElement("div",{id:"unblock_box_errors_block"},o.createElement("div",{className:"msg submit_error ",dangerouslySetInnerHTML:{__html:a.default.getLang("login_delayed_request_finished")}}),o.createElement("div",{className:"DelayedRequestFinished__button"},o.createElement(c.default,{loading:this.state.redirectToAuthButtonLoading,onClick:this.redirectToAuth},a.default.getLang("login_unblock_redirect_to_auth"))),o.createElement("div",{className:"DelayedRequestFinished__notMeButton"},o.createElement(c.default,{appearance:"tertiary",loading:this.state.resetUnblockDataButtonLoading,onClick:this.resetUnblockForm},a.default.getLang("login_delayed_its_not_me")))),this.render=()=>o.createElement("div",{className:"UnblockForm"},o.createElement("div",{className:"UnblockForm__header box_title_wrap"},o.createElement("div",{className:"box_x_button",role:"button",onClick:s.destroyComponentInBox}),o.createElement("div",{className:"box_title"},a.default.getLang("login_blocked_call_title"))),o.createElement("div",{className:"UnblockForm__content box_body clear_fix"},o.createElement("div",{className:"login_blocked_wrap"},o.createElement("div",{className:"unblock_form"},o.createElement("div",{className:"UnblockForm__content__header"},o.createElement("div",{className:"antispam_team_logo"}),o.createElement("div",{className:"reason"},a.default.getLang("login_unblock_form_explanation"))),this.renderMessage(),this.renderContent())))),this.state={initialLoading:!0},this.references={phoneInput:null,validationCodeInput:null,passwordInput:null,mainButton:null}}setInitialState(){this.setState({message:"",isError:!1,initialLoading:!0,mainButtonLoading:!1,noCodeButtonLoading:!1,resetUnblockDataButtonLoading:!1,redirectToAuthButtonLoading:!1})}getPhoneBlockTooltipLabel(){return this.areCallResetsEnabled()?this.props.tooltips.phoneCallReset:this.props.tooltips.phone}}v.controller="/al_login.php",v.acts={getStatus:"get_unblock_process_status",sendCode:"send_unblock_code",sendCodeToBoundPhone:"send_unblock_code_to_bound_phone",resendCode:"resend_unblock_code",checkCode:"check_unblock_code",unblock:"unblock",resetUnblockForm:"reset_unblock_form"},v.constants={finishedClass:"finished",maxCodeResentAmount:2,noCodeResentAmount:0,firstCountryIndex:0,noResetCodeTimerEnabled:0,tooltipWidth:250,tooltipMarginLeft:5,tooltipAppearance:"white",tooltipPosition:"r",passwordStrengths:{none:-1,incorrectTooShort:0,weakTypical:1,good:2,veryGood:3,excellent:4,incorrectHasSpaces:5}},v.refreshAuthDataAndRedirectToFeed=(e,t,n,r)=>{var o=utilsNode.appendChild(ce("div",{innerHTML:'\n      <form id="login_block_auth_form" target="login_block_auth_frame" action="" method="POST">\n        <input type="hidden" name="_origin" id="login_server_origin" />\n        <input type="hidden" name="email" id="login_block_email" />\n        <input type="hidden" name="pass" id="login_block_pass" />\n      </form>\n      <iframe name="login_block_auth_frame" id="login_block_auth_frame"></iframe>'})),i=window.onLoginDone,a=ge("login_block_auth_form");a.action=Object(g.getLoginDomain)()+"?act=login&ip_h="+t+"&lg_h="+e+"&redirect=1&role=al_frame",val("login_block_email",winToUtf(n)),val("login_block_pass",winToUtf(r)),val("login_server_origin",cur.serverOrigin),a.submit(),cur.destroy.push(()=>{re(o),window.onLoginDone=i}),window.onLoginDone=()=>{re(o),nav.go("/feed",!0)}},v.isBadPassword=e=>{var t=[v.constants.passwordStrengths.incorrectHasSpaces,v.constants.passwordStrengths.incorrectTooShort],n=v.checkPasswordStrength(e);return t.includes(n)},v.checkPasswordStrength=e=>{var t=v.constants.passwordStrengths.none,n=["qwerty","йцукен","gfhjkm","пароль","password","abc123","fuckyou","123abc","baseball","football","soccer","monkey","liverpool","princess","jordan","slipknot","superman","iloveyou"];if(e.length<6)t=v.constants.passwordStrengths.incorrectTooShort;else if(/\s/.test(e))t=v.constants.passwordStrengths.incorrectHasSpaces;else if(e.match(/^\d+$/)||n.indexOf(e)>=0||e.substr(-1).match(/\d/)&&n.indexOf(e.substr(0,e.length-1))>=0)t=v.constants.passwordStrengths.weakTypical;else{for(var r=[/[^a-z]/g,/[^A-Z]/g,/[^а-яё]/g,/[^А-ЯЁ]/g,/[^0-9]/g,/[a-zA-Zа-яА-ЯёЁ0-9]/g],o=[],i=0,a=0,s=r.length;a<s;++a){var c=e.replace(r[a],"").length;c&&(c>1&&i++,o.push({group:a,cnt:c}))}if(o.length<3&&o[o.length-1].group!=r.length-1&&i<2&&(t=v.constants.passwordStrengths.good),(i>2||o.length>2&&o[o.length-1].group==r.length-1)&&(t=v.constants.passwordStrengths.excellent),t<0&&i>1){var u=e.replace(r[r.length-1],"");u.length>1&&u.replace(new RegExp(escapeRE(u.charAt(0)),"g"),"").length&&(t=v.constants.passwordStrengths.excellent)}t<0&&(t=v.constants.passwordStrengths.veryGood),t&&t<3&&e.length>13&&t++}return t},v.renderInitialLoading=()=>o.createElement("div",{className:"InitialLoading"},o.createElement(m.default,null));var b=n("zxIV"),y=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r},E=function(){function e(e){this.containerEl=e,this.viewportEl=e.firstElementChild,this.layerEl=this.viewportEl.firstElementChild,this.initializeSlides()}return e.prototype.init=function(){this.setIndex(0)},e.prototype.initializeSlides=function(){var e;this.slides=y(this.layerEl.children).map((function(e,t){return{coordX:t*e.offsetWidth,width:e.offsetWidth,el:e}})),this.viewportEl.style.width=(null===(e=this.slides[0])||void 0===e?void 0:e.width)+"px";var t=this.containerEl.offsetWidth,n=this.viewportEl.offsetWidth;this.layerWidth=this.slides.reduce((function(e,t){return t.width+e}),0),this.min=n-(t-n)/2-this.layerWidth,this.max=0},e.prototype.validateIndent=function(e){var t=this.min,n=this.max;return e<t?t:e>n?n:e},e.prototype.calculateIndent=function(e){var t=this.slides,n=t.length?t[e]:null;if(n){var r=n.coordX;return this.validateIndent(-1*r)}return 0},e.prototype.render=function(){var e=this,t=this.calculateIndent(this.currentIndex);requestAnimationFrame((function(){e.layerEl.style.transform="translateX("+t+"px)"})),y(this.layerEl.children).forEach((function(t,n){t.classList.toggle("LoginRecentUsersGallery__slide--prev2",n===e.currentIndex-2),t.classList.toggle("LoginRecentUsersGallery__slide--active",n===e.currentIndex),t.classList.toggle("LoginRecentUsersGallery__slide--next2",n===e.currentIndex+2)}))},e.prototype.setRelativeIndex=function(e){this.currentIndex=Math.max(0,Math.min(this.currentIndex+e,this.slides.length-1)),this.onChange(this.currentIndex),this.render()},e.prototype.setIndex=function(e){this.currentIndex=Math.max(0,Math.min(e,this.slides.length-1)),this.onChange(this.currentIndex),this.render()},e}(),w=n("o7bv"),O=n("EasH"),C=function(){function e(e){this.rootEl=e,this.init()}return e.prototype.init=function(){var e=this.rootEl,t=e.querySelector(".LoginBox__form");if(t){var n=e.querySelector(".LoginBox__formExpire"),r=e.querySelector(".LoginBox__buttonSignIn"),o=e.querySelector(".LoginBox__buttonSignUp"),a=e.querySelector('[name="email"]'),s=e.querySelector('[name="pass"]'),c=e.querySelector('[name="ul"]');a&&Object(w.placeholderInit)(a),s&&Object(w.placeholderInit)(s),null==n||n.addEventListener("click",(function(e){e.preventDefault(),Object(i.checkbox)(n)})),s&&s.addEventListener("input",(function(){t.classList.toggle("LoginBox--showExpire",s.value.trim().length>0)})),o&&(o.onclick=function(){return Object(O.showBox)("join.php",{act:"box",from:window.nav.strLoc}),!1}),t.onsubmit=function(){if(Object(i.isButtonLocked)(r))return!1;var e=window.submitQuickLoginForm;if(!e)return!0;var t=a?a.value.trim():"",o=s?s.value.trim():"",u=Number(Object(i.isChecked)(n));if(a&&!t)return Object(i.notaBene)(a),!1;if(!o)return Object(i.notaBene)(s),!1;var l={expire_input:u};return c&&c.value&&(l.ul=c.value),e(t,o,{prg:"login_button",params:l}),Object(i.lockButton)(r),!1},requestAnimationFrame((function(){var e;null===(e=a||s)||void 0===e||e.focus()}))}},e}();function T(e){e&&new C(e)}function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.querySelector('.LoginRecentBox [name="ul"]'),r=e.querySelector(".LoginRecentBox__alternative"),o=e.querySelector(".LoginRecentBox .LoginBox__title");r.addEventListener("click",t=>{t.preventDefault(),e.classList.add("LoginCombinedBox--standard")});var i=new E(e.querySelector(".LoginRecentBox__users"));i.onChange=e=>{var r=t.users[e];r&&(o.innerHTML=r.title,n&&(n.value=r.encrypted))},i.init(),e.querySelectorAll(".LoginRecentBox__user").forEach((e,t)=>{e.addEventListener("click",()=>{i.setIndex(t)})})}var D={init(){each(geByClass("big_text","login_form_wrap"),(e,t)=>{placeholderInit(t)}),setTimeout(b.elfocus.pbind(!isVisible("email")||val("email")?"pass":"email"),0);var e=ge("login_form"),t=ge("email"),n=ge("pass"),r=val("login_ul");return e.onsubmit=()=>{if(!window.submitQuickLoginForm)return!0;if(!r&&!trim(t.value))return notaBene(t),!1;if(!trim(n.value))return notaBene(n),!1;var e={expire_input:val("expire_input")};return r&&(e.ul=r),submitQuickLoginForm(t.value,n.value,{prg:"login_button",params:e}),!1},window.loginByCredential&&!r&&(t.onclick=loginByCredential,n.onclick=loginByCredential),!0},initBlockedPage(){r.FAQTutorial.tryInit()},initBox(){var e=curBox();e.changed=!0,e.setOptions({width:560,onClean:()=>{},hideButtons:!0,bodyStyle:"padding: 0"}),T(document.querySelector(".LoginBox"))},changeMail(e,t,n){var r=trim(val("login_new_mail")),o=1;return r?(e&&(n=cur.changeMailHash),-1==r.indexOf("@")?showMsg("login_change_mail_error",getLang("reg0_error_bad_email"),"error"):(e&&(o=0),void ajax.post("/login?act=a_change_mail",{newmail:r,hash:n,from_page:o},{onDone(t){var n="login_change_mail_form";e&&(n="login_change_mail_box",curBox().removeButtons(),curBox().addButton(getLang("global_cancel"),null,"no")),val(n,t)},onFail:e=>(showMsg("login_change_mail_error",e,"error"),!0),showProgress:lockButton.pbind(t),hideProgress:unlockButton.pbind(t)}))):notaBene("login_new_mail")},initChangeMailBox(){curBox().removeButtons(),curBox().addButton(getLang("global_cancel"),null,"no"),curBox().addButton(getLang("reg0_change_mail"),D.changeMail.pbind(1)),Object(b.elfocus)("change_mail_new")},isBanExpired:()=>cur.unblockDate<Date.now()/1e3,canUnblockFast:()=>!0===cur.canUnblockFast,showUnblockForm(){Object(s.showComponentInBox)(o.createElement(v,{tooltips:{phone:cur.phoneTooltip,phoneCallReset:cur.phoneCallResetTooltip,code:cur.verificationCodeTooltip,codeCallReset:cur.verificationCodeCallResetTooltip,password:cur.passwordTooltip}}))},fastUnblock:e=>{var t={act:"fast_unblock",hash:e},n=document.getElementsByClassName("unblock_button--fast")[0];n?ajax.post("/al_login.php",t,{onDone:function(){showDoneBox(getLang("login_fast_unblocked_wait_description"),{out:5e3}),nav.reload()},onFail:function(e){return unlockButton(n),showDoneBox(e),!0},showProgress:()=>lockButton(n)}):showFastBox(getLang("global_error"))},showDeletePageBox(){showFastBox(getLang("login_blocked_delete_page_header"),getLang("login_blocked_sure_delete_page_question"),getLang("box_yes"),()=>{ajax.post("al_settings.php",{act:"a_deactivate",hash:cur.deactivate_hash},{onDone:e=>{showDoneBox(e),nav.go("/id"+vk.id)},onFail:e=>{showDoneBox(e),curBox().hideProgress()}})},getLang("box_no"))}}},KroJ:function(e,t,n){var r=n("dyZX"),o=n("Mukb"),i=n("aagx"),a=n("ylqs")("src"),s=n("+lvF"),c=(""+s).split("toString");n("g3g5").inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,n,s){var u="function"==typeof n;u&&(i(n,"name")||o(n,"name",t)),e[t]!==n&&(u&&(i(n,a)||o(n,a,e[t]?""+e[t]:c.join(String(t)))),e===r?e[t]=n:s?e[t]?e[t]=n:o(e,t,n):(delete e[t],o(e,t,n)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[a]||s.call(this)}))},Kuth:function(e,t,n){var r=n("y3w9"),o=n("FJW5"),i=n("4R4u"),a=n("YTvA")("IE_PROTO"),s=function(){},c=function(){var e,t=n("Iw71")("iframe"),r=i.length;for(t.style.display="none",n("+rLv").appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),c=e.F;r--;)delete c.prototype[i[r]];return c()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[a]=e):n=c(),void 0===t?n:o(n,t)}},LQAc:function(e,t){e.exports=!1},LQSR:function(e,t){e.exports=function e(t){if(!t)return!1;if(this.length!=t.length)return!1;for(var n=0,r=this.length;n<r;n++)if(this[n]instanceof Array&&t[n]instanceof Array){if(!e.apply(this[n],[t[n]]))return!1}else if(this[n]!=t[n])return!1;return!0}},LZWt:function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},LlZA:function(e,t,n){"use strict";n.r(t),n.d(t,"initJoinForm",(function(){return h}));var r=n("v+DW"),o=n("zxIV"),i=n("kcIO"),a=n("o7bv"),s=n("ryw6"),c=n("xt6h"),u=n("4+be");function l(e,t){for(var n=[[0,Object(u.getLang)("index_sel_bday")]],r=Object(c.getLastDayOfMonth)(e,t),o=1;o<=r;++o)n.push([o,String(o)]);return n}function d(e,t,n,r){Number(n.val())>Object(c.getLastDayOfMonth)(e,t)&&n.clear(),n.setData(l(e,t).slice(Number(r)?1:0))}var _=n("9r2g"),p=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r};function h(e,t){var n,c,u,h,f,m,g=t.from,v=t.bdateMonths,b=t.bdateYears,y=t.fbApp,E=t.fbState,w=t.fbLocale,O=t.inBox,C=t.onSignInClick,T=t.onNotNowClick,S=(null===(c=null===(n=window.cur)||void 0===n?void 0:n.options)||void 0===c?void 0:c.bday)||0,D=(null===(h=null===(u=window.cur)||void 0===u?void 0:u.options)||void 0===h?void 0:h.bmonth)||0,P=(null===(m=null===(f=window.cur)||void 0===f?void 0:f.options)||void 0===m?void 0:m.byear)||0,k=O?_.EventScreens.START_BOX:_.EventScreens.START;_.registrationItemStat.logEvent(_.RegistrationItemEventTypes.SCREEN_PROCEED,_.EventScreens.NOWHERE,k);var A,I,x,j=e.querySelector(".JoinForm__error"),M=e.querySelector('.JoinForm__textInput[name="first_name"]'),L=e.querySelector('.JoinForm__textInput[name="last_name"]'),R=e.querySelector(".JoinForm__birthdateDayInput"),B=e.querySelector(".JoinForm__birthdateMonthInput"),N=e.querySelector(".JoinForm__birthdateYearInput"),U=e.querySelector(".JoinForm__sex"),F=e.querySelectorAll(".JoinForm__sexRadio"),W=e.querySelector(".JoinForm__birthdate"),H=e.querySelector(".JoinForm__submitButton"),K=e.querySelector(".JoinForm__facebookLogin"),V=e.querySelector(".JoinForm__facebookLogin .FacebookLogin__button"),q=e.querySelector(".JoinForm__signIn"),G=e.querySelector(".JoinForm__notNow"),z=function(){if(!Object(r.isButtonLocked)(H)){var e={fname:null==M?void 0:M.value.trim(),lname:null==L?void 0:L.value.trim(),bday:A.val(),bmonth:I.val(),byear:x.val(),from:g,frm:1,event_screen:k};Object(o.isVisible)(U)&&(e.sex=Number(Object(r.radioval)("join_form_sex"))||0),window.tooltips&&window.tooltips.hideAll();var t=function(e,t){e&&t&&window.Index.showRegTT(e,t)};window.ajax.post("join.php?act=start",e,{onDone:function(e,n){switch(e){case"first_name":return t(M,n),void Object(r.notaBene)(M);case"last_name":return t(L,n),void Object(r.notaBene)(L);case"sex_row":return Object(o.show)(U),void t(U,n);case"birthdate_row":return void t(W,n)}n&&Object(s.showMsg)(j,n,"error",!0)},showProgress:function(){return Object(r.lockButton)(H)},hideProgress:function(){return Object(r.unlockButton)(H)}})}},Y=function(){var e=Number(A.val())||0,t=Number(I.val())||0,n=Number(x.val())||0,r=new Date(0);e&&r.setDate(e),t&&r.setMonth(t),n&&r.setFullYear(n),_.registrationItemStat.logFieldInteraction(_.RegistrationFieldItemNames.BDAY,r.getTime().toString())};M&&(_.registrationItemStat.logFieldInteraction(_.RegistrationFieldItemNames.FIRST_NAME,M.value,!0),M.addEventListener("keyup",(function(){_.registrationItemStat.logFieldInteraction(_.RegistrationFieldItemNames.FIRST_NAME,M.value)}))),L&&(_.registrationItemStat.logFieldInteraction(_.RegistrationFieldItemNames.LAST_NAME,L.value,!0),L.addEventListener("keyup",(function(){_.registrationItemStat.logFieldInteraction(_.RegistrationFieldItemNames.LAST_NAME,L.value)}))),[M,L].forEach((function(e){Object(a.placeholderInit)(e),null==e||e.addEventListener("keydown",(function(e){10!==e.keyCode&&13!==e.keyCode||z()}))})),requestAnimationFrame((function(){return Object(o.elfocus)(M)})),_.registrationItemStat.logFieldInteraction(_.RegistrationFieldItemNames.BDAY,"",!0),A=new window.Dropdown(R,l(P,D),{big_text:!0,multiselect:!1,zeroPlaceholder:!0,selectedItems:S,onChange:function(){Y()}}),I=new window.Dropdown(B,v,{big_text:!0,multiselect:!1,zeroPlaceholder:!0,selectedItems:D,onChange:function(e){Y(),d(x.val(),e,A,S)}}),x=new window.Dropdown(N,b,{big_text:!0,multiselect:!1,zeroPlaceholder:!0,selectedItems:P,onChange:function(e){Y(),d(e,I.val(),A,S)}}),window.radioBtns.join_form_sex={els:p(F),val:0},_.registrationItemStat.logFieldInteraction(_.RegistrationFieldItemNames.SEX,Number(Object(r.radioval)("join_form_sex")).toString(),!0),F.forEach((function(e){e.addEventListener("click",(function(){var e=Number(Object(r.radioval)("join_form_sex"))||0;_.registrationItemStat.logFieldInteraction(_.RegistrationFieldItemNames.SEX,e.toString())}))})),null==H||H.addEventListener("click",(function(e){e.preventDefault(),z()})),y&&(window.cur.fbApp=y,window.cur.fbState=E,window.cur.fbLocale=w),window.Index.fbCheck(y,"",K),null==V||V.addEventListener("click",(function(e){e.preventDefault(),window.Index.fbJoin("",V)})),q&&C&&q.addEventListener("click",C),G&&T&&G.addEventListener("click",T);var $=Object(i.curBox)();$&&$.setOptions({onClean:function(){A&&A.destroy(),I&&I.destroy(),x&&x.destroy()}}),window.stManager.add([window.jsc("web/tooltips.js"),"tooltips.css"]).catch((function(){}))}},LyE8:function(e,t,n){"use strict";var r=n("eeVq");e.exports=function(e,t){return!!e&&r((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},M6Qj:function(e,t,n){var r=n("hPIQ"),o=n("K0xU")("iterator"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||i[o]===e)}},MSYF:function(__webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Nav",(function(){return Nav}));var core_js_modules_es6_object_assign__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("91GP"),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("KKXr"),core_js_modules_es6_regexp_search__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("OG14"),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("a1Th"),core_js_modules_es6_promise__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("VRzm"),core_js_modules_es6_object_to_string__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("Btvt"),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("pIFo"),core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("Oyvg"),core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("SRfc"),_utils_common__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("t7n3"),_shared_lib_common__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("jE6c"),_ads__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("m0N1"),_debug_tools__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("98sY"),_dom__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("zxIV"),_dom_events__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("Egk5"),_scroll__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("lXE5"),_ui_util__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("ryw6"),_shared_lib_convert__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("cGUQ"),_nav_utils__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("kHqu"),_shared_counters_updateCounters__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("y/eL"),_layout_utils__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("El3O"),_video__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("Ia1d"),_legacy_performance_stats__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("eNQP"),_browser__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("gdug"),_feature_entries__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("/PiP"),_accessibility__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("QGEU"),_top_search__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("Bszp"),_stl__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__("i6oL"),_utils__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__("aong"),_message_box__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__("EasH"),_lang__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__("4+be"),_shared_navigation_stats__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__("T3FL"),_web_lib_ajax_module_callback__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__("aALx"),_shared_evbus__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__("MJEz"),_shared_user_user_env__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__("W9Tc"),_shared_network_stats_module_navigation_module_navigation_collector__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__("XHVZ"),_shared_network_stats__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__("egla");function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var SHOW_MORE_APPS_SHOWN_CLASSNAME="show_more_apps_container_shown",SHOW_MORE_APPS_BUTTON_HIDDEN_CLASSNAME="show_more_apps_button_hidden",updateCountersTimeout,Nav={getData:function(e){if(e.length){for(var t in navMap){if(navMap.hasOwnProperty(t))if("<"!==t[0])if(e.match(new RegExp("^"+t,"i")))return navMap[t][2]?null:{url:navMap[t][0],files:navMap[t][1]}}return e.match(/^[a-z0-9\-_]+\.php$/i)?{url:e}:{url:navMap["<other>"][0],files:navMap["<other>"][1]}}return{url:navMap["<void>"][0],files:navMap["<void>"][1]}},reload:function(e){if(!Object(_nav_utils__WEBPACK_IMPORTED_MODULE_18__.reloadCheckFlood)(e)){e=e||{};var t=Nav.strLoc.replace(/^\/+/g,"");e.force?(hab.stop(),location.href="/"+t):(TopNotifier.invalidate(),Nav.go("/"+t,void 0,Object(_utils_common__WEBPACK_IMPORTED_MODULE_9__.extend)({nocur:!0},e)))}},link:function(e,t){if(Object(_dom_events__WEBPACK_IMPORTED_MODULE_14__.checkEvent)(t)||cur.noAjaxNav){var n=e.replace(new RegExp("^("+locProtocol+"//"+locHost+")?/?","i"),"");window.open(n)}else Nav.go(e)},go:function go(loc,ev){var opts=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Nav.showLessApps(),loc&&loc.href&&loc.getAttribute&&loc.getAttribute("data-change-location-with-post-away")){var newLink=loc.href,_postParams=Nav.getPostParams(loc,!(!opts.params||!opts.params._post_click_type)),postOptions=Nav.mergePostParamsOptions(_postParams,opts.params),extraQuery={};return postOptions._post&&(extraQuery.post=postOptions._post,postOptions._post_ad_data&&(extraQuery.post_ad_data=postOptions._post_ad_data),postOptions._post_click_cc_key&&(extraQuery.cc_key=postOptions._post_click_cc_key),newLink="/away.php?to="+encodeURIComponent(newLink)+"&"+Object(_shared_lib_convert__WEBPACK_IMPORTED_MODULE_17__.toQueryString)(extraQuery)),location.href=newLink,!1}if(!Object(_dom_events__WEBPACK_IMPORTED_MODULE_14__.checkEvent)(ev)&&!cur.noAjaxNav){if(LongView.onBeforePageChange(),loc.tagName&&"a"===loc.tagName.toLowerCase()){if("_blank"===loc.target||Nav.baseBlank)return;var _params=loc.getAttribute("hrefparams");if(_params&&(opts.params=Object(_utils_common__WEBPACK_IMPORTED_MODULE_9__.extend)(opts.params||{},Object(_shared_lib_convert__WEBPACK_IMPORTED_MODULE_17__.fromQueryString)(_params))),loc=loc.href||"",ev&&!(loc||"").match(new RegExp("^"+locProtocol+"//"+locHost,"i")))return}var strLoc="",objLoc={},changed={};"string"==typeof loc?(loc=loc.replace(new RegExp("^("+locProtocol+"//"+locHost+")?/?","i"),""),strLoc=loc,objLoc=Nav.fromStr(loc)):(loc[0]||(loc[0]=""),strLoc=Nav.toStr(loc),objLoc=loc),Object(_legacy_performance_stats__WEBPACK_IMPORTED_MODULE_22__.statDurationsLoadImage)(),Object(_legacy_performance_stats__WEBPACK_IMPORTED_MODULE_22__.statNavigationTiming)(),0===strLoc.indexOf("market")&&window.MarketAnalyticsManager&&window.MarketAnalyticsManager.setScreen(window.cur.module);var donutLinkRegex=/^donut\/([A-Za-z0-9_\.]{2,32})/;if(!opts.skipDonutLinkCheck&&strLoc.match(donutLinkRegex)){var source="direct_link",parsedLoc=strLoc.match(donutLinkRegex),ownerDomain=parsedLoc[1],groupDoesntExistsCallback=()=>{nav.go(strLoc,ev,_extends({},opts,{skipDonutLinkCheck:!0}))};return Object(_feature_entries__WEBPACK_IMPORTED_MODULE_24__.showDonutSubscribePopup)(null,null,null,source,"",{type:"subscribe",fromSnippet:!0,onFailCallback:groupDoesntExistsCallback,params:{act:"subscribe_popup"}},ownerDomain),!1}var ap=Object(_feature_entries__WEBPACK_IMPORTED_MODULE_24__.getAudioPlayer)();if(ap&&ap.updateCurrentPlaying&&ap.updateCurrentPlaying(),!opts.nocur){for(var i in changed=Object(_utils_common__WEBPACK_IMPORTED_MODULE_9__.clone)(objLoc),Nav.objLoc)Nav.objLoc.hasOwnProperty(i)&&(Nav.objLoc[i]===changed[i]?delete changed[i]:void 0===changed[i]&&(changed[i]=!1));if(!1===Object(_nav_utils__WEBPACK_IMPORTED_MODULE_18__.zNav)(Object(_utils_common__WEBPACK_IMPORTED_MODULE_9__.clone)(changed),{hist:opts.hist,asBox:opts.asBox,onDone:opts.onDone},objLoc))return Nav.setLoc(strLoc),!1;bookmarksNav(ev,strLoc);var onArticleNavBack=cur._back&&cur._back.hasOwnProperty("onArticleNavBack")?cur._back.onArticleNavBack:null,isHandled=articleNav(strLoc,Nav.toStr(Nav.objLoc),opts.back,onArticleNavBack,ev);if(isHandled)return Promise.resolve(isHandled).then(()=>{strLoc=cleanArticleUrlByObjLoc(objLoc),Nav.setLoc(strLoc,!0),(Nav.objLoc.z||Nav.objLoc.w)&&Object(_nav_utils__WEBPACK_IMPORTED_MODULE_18__.zNav)({z:Nav.objLoc.z,w:Nav.objLoc.w},{})}),!1;var isHandledAuthorPage=authorPageNav(strLoc,Nav.toStr(Nav.objLoc),opts.back,opts.postId);if(isHandledAuthorPage)return window.AuthorPage&&window.AuthorPage.isOpen()&&cur.articleEditorLayer&&cur.articleEditorLayer.hide(!1),cur._hardNav?(window.location.href=strLoc,!1):(Nav.setLoc(strLoc),(Nav.objLoc.z||Nav.objLoc.w)&&Object(_nav_utils__WEBPACK_IMPORTED_MODULE_18__.zNav)({z:Nav.objLoc.z,w:Nav.objLoc.w},{}),!1)}if(!opts.nocur&&(vk.loaded||!changed[0]))for(var curnav=cur.nav||[],_i=curnav.length-1;_i>=0;_i--){var oldUrl=document.URL;if(!1===curnav[_i](Object(_utils_common__WEBPACK_IMPORTED_MODULE_9__.clone)(changed),Nav.objLoc,objLoc,opts)){var currentURL=`${locProtocol}//${location.host}/${strLoc}`,referrer=oldUrl===currentURL?"":oldUrl;return updateCountersTimeout&&clearTimeout(updateCountersTimeout),updateCountersTimeout=setTimeout(_shared_counters_updateCounters__WEBPACK_IMPORTED_MODULE_19__.updateCounters.pbind(currentURL,referrer),10),!1}}if(4===vk.al||!vk.loaded&&(!window.audioPlayer||!audioPlayer.player)&&changed[0])return setTimeout((function(){location.href="/"+(strLoc||"").replace("%23","#")}),0),!1;if(window.Upload&&Upload.terminateAllUploads(),Object(_top_search__WEBPACK_IMPORTED_MODULE_26__.topHeaderClose)(),opts.back){if(cur._back&&cur._back.onBack)return cur._back.onBack(strLoc);for(var _i2=0,l=globalHistory.length;_i2<l;_i2++)if(globalHistory[_i2].loc===strLoc){var _ret=function(){var e=globalHistory.splice(_i2,1)[0],t=Object(_dom__WEBPACK_IMPORTED_MODULE_13__.ge)("wrap3"),n=Object(_dom__WEBPACK_IMPORTED_MODULE_13__.ge)("title"),r=cur._onback;return window.tooltips&&tooltips.destroyAll(),Object(_dom__WEBPACK_IMPORTED_MODULE_13__.hide)("audio_tip_wrap"),Object(_nav_utils__WEBPACK_IMPORTED_MODULE_18__.processDestroy)(cur),window.radioBtns=e.radioBtns,window.ajaxCache=e.ajaxCache,window.PageID=e.pid,boxQueue.hideAll(!1,!0),layerQueue.clear(),layers.fullhide&&layers.fullhide(!0),Object(_nav_utils__WEBPACK_IMPORTED_MODULE_18__.showBackLink)(),window.cur=e.cur,setTimeout((function(){if(t.innerHTML="",t.parentNode.replaceChild(e.content,t),vk.width===e.width&&vk.width_dec===e.width_dec&&vk.width_dec_footer===e.width_dec_footer||Object(_nav_utils__WEBPACK_IMPORTED_MODULE_18__.handlePageView)(e),Object(_scroll__WEBPACK_IMPORTED_MODULE_15__.scrollToY)(e.scrollTop,0),Object(_dom__WEBPACK_IMPORTED_MODULE_13__.setDocumentTitle)(e.htitle),n&&(n.innerHTML=e.title,Object(_dom__WEBPACK_IMPORTED_MODULE_13__.setStyle)(n.parentNode,"display",e.hideHeader?"none":"block")),e.bodyClass!==bodyNode.className&&(bodyNode.className=e.bodyClass||"",vk.body_class=e.bodyClass||""),cur._back.show)for(var o=0,i=cur._back.show.length;o<i;o++)cur._back.show[o]();if(!cur.noquickreg&&Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_10__.isFunction)(window.changeQuickRegButton)&&window.changeQuickRegButton(!1),r)for(var a=0,s=r.length;a<s;a++)r[a]();Nav.setLoc(strLoc);var c=e.back||{};setTimeout((function(){_shared_navigation_stats__WEBPACK_IMPORTED_MODULE_31__.navigationStat.addStatEvent(_shared_navigation_stats__WEBPACK_IMPORTED_MODULE_31__.navigationStat.getModule(),_shared_navigation_stats__WEBPACK_IMPORTED_MODULE_31__.NavigationProductionStatEventTypes.BACK),Object(_nav_utils__WEBPACK_IMPORTED_MODULE_18__.showBackLink)(c[0],c[1],c[2]),(Nav.objLoc.z||Nav.objLoc.w)&&Object(_nav_utils__WEBPACK_IMPORTED_MODULE_18__.zNav)({z:Nav.objLoc.z,w:Nav.objLoc.w},{}),Object(_stl__WEBPACK_IMPORTED_MODULE_27__.updateSTL)(),Object(_nav_utils__WEBPACK_IMPORTED_MODULE_18__.updateLeftMenu)(),Object(_accessibility__WEBPACK_IMPORTED_MODULE_25__.updateAriaElements)(),_top_search__WEBPACK_IMPORTED_MODULE_26__.default.clear()}),10),Object(_feature_entries__WEBPACK_IMPORTED_MODULE_24__.getAudioPlayer)().updateCurrentPlaying()}),10),{v:!1}}();if("object"==typeof _ret)return _ret.v}}var dest=objLoc[0],where;delete objLoc[0];try{where=Nav.getData(dest)}catch(e){where=null}if(null===where){if(opts.throwErrorOnDisabledPath)throw new Error("AL navigation is disabled for this path");return!0}opts.noframe||(opts.tstat=ajax.tGetParam(),ajax.tStart=(new Date).getTime(),opts.bench=!0),opts.params&&opts.params._ref||(opts.params=Object(_utils_common__WEBPACK_IMPORTED_MODULE_9__.extend)(opts.params||{},{_ref:Nav.objLoc[0]||""})),where.files&&stManager.add(where.files),where.params=Object(_utils_common__WEBPACK_IMPORTED_MODULE_9__.extend)({__query:dest,al_id:vk.id},objLoc,opts.params||{});var postParamsEl=ev&&ev.target&&ev.target.getAttribute?ev.target:loc&&loc.getAttribute?loc:null,postParams=Nav.getPostParams(postParamsEl,!!where.params._post_click_type);where.params=Nav.mergePostParamsOptions(postParams,where.params),opts.cl_id&&(where.params.fr_click=cur.oid+","+opts.cl_id+","+cur.options.fr_click),opts.tstat&&(where.params._tstat=opts.tstat),opts.permanent&&(where.params._permanent=opts.permanent);var curNavVersion=++NextPageID,done=function done(title,html,js,params){if(curNavVersion===NextPageID){try{params._id=params.id}catch(e){return Object(_ui_util__WEBPACK_IMPORTED_MODULE_16__.topError)(e,{dt:15,type:6,msg:`Error: ${e.message}, (params undefined?), title: ${title}, html: ${html}, js: ${js}`,url:where.url,query:Object(_shared_lib_convert__WEBPACK_IMPORTED_MODULE_17__.toQueryString)(where.params),answer:arguments.length})}var execTqTasks=e=>{params.exec_on_start&&Object(_shared_evbus__WEBPACK_IMPORTED_MODULE_33__.processExecData)(JSON.stringify(params.exec_on_start),e)};if(window.lastScrollTop=Object(_scroll__WEBPACK_IMPORTED_MODULE_15__.scrollGetY)(),opts.bench&&(ajax.tProcess=(new Date).getTime()),stVersions[jsc("web/common_web.js")]>StaticFiles[jsc("web/common_web.js")].v){if(Nav.setLoc(params.loc||Nav.strLoc),Object(_nav_utils__WEBPACK_IMPORTED_MODULE_18__.reloadCheckFlood)({force:!0,from:4}))return;if(window.Calls.isInActiveCall)return;location.reload(!0)}else{var newPage=void 0===where.params.al_id||where.params.al_id!=params.id||params.fullPage,tNode=Object(_dom__WEBPACK_IMPORTED_MODULE_13__.ge)("title"),wNode=Object(_dom__WEBPACK_IMPORTED_MODULE_13__.ge)("wrap3"),_back=cur._back,hist=!1;if((strLoc===(cur._back||{}).loc||newPage||opts.back)&&(_back=!1),(opts.noback||params.level&&(!cur._level||params.level<=cur._level)&&!1!==opts.noback)&&(_back=!1,(opts.noback||cur._level&&params.level<cur._level)&&Object(_nav_utils__WEBPACK_IMPORTED_MODULE_18__.showBackLink)()),window.tooltips&&tooltips.destroyAll(),Object(_utils_common__WEBPACK_IMPORTED_MODULE_9__.each)(Object(_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("page_actions_wrap"),(e,t)=>Object(_dom__WEBPACK_IMPORTED_MODULE_13__.hide)(t)),Object(_dom__WEBPACK_IMPORTED_MODULE_13__.hide)("audio_tip_wrap"),_back){if(Object(_video__WEBPACK_IMPORTED_MODULE_21__.revertLastInlineVideo)(null,!0),hist={loc:_back.loc||Nav.strLoc,cur,radioBtns:Object(_utils_common__WEBPACK_IMPORTED_MODULE_9__.clone)(radioBtns),ajaxCache,pid:PageID,scrollTop:Object(_scroll__WEBPACK_IMPORTED_MODULE_15__.scrollGetY)(),htitle:document.title.toString(),width:vk.width,width_dec:vk.width_dec,width_dec_footer:vk.width_dec_footer,noleftmenu:vk.noleftmenu,notopmenu:vk.notopmenu,nobottommenu:vk.nobottommenu,bodyClass:vk.body_class,back:!(!_tbLink||!_tbLink.loc)&&[_tbLink.loc,Object(_dom__WEBPACK_IMPORTED_MODULE_13__.val)(_tbLink),_tbLink.fast]},tNode&&tNode.parentNode&&!Object(_dom__WEBPACK_IMPORTED_MODULE_13__.isVisible)(tNode.parentNode)&&(hist.hideHeader=!0),Object(_nav_utils__WEBPACK_IMPORTED_MODULE_18__.globalHistoryDestroy)(hist.loc),globalHistory.length>2){var h=globalHistory.shift();Object(_nav_utils__WEBPACK_IMPORTED_MODULE_18__.processDestroy)(h.cur),h.content.innerHTML=""}if(cur._back.hide)for(var _i5=0,_l3=cur._back.hide.length;_i5<_l3;_i5++)cur._back.hide[_i5]();_back.text&&Object(_nav_utils__WEBPACK_IMPORTED_MODULE_18__.showBackLink)(hist.loc,_back.text,1)}else _tbLink&&(_tbLink.fast=0),Object(_nav_utils__WEBPACK_IMPORTED_MODULE_18__.processDestroy)(cur);if(PageID=NextPageID,Object(_utils_common__WEBPACK_IMPORTED_MODULE_9__.each)(radioBtns,(function(e,t){t.keep||delete radioBtns[e]})),window.ajaxCache={},boxQueue.hideAll(!1,!0),layerQueue.clear(),layers.fullhide&&layers.fullhide(!0,!0),window.cur={beforeNavigateRequestHandlers:[],destroy:[],nav:[]},window._stlWas=0,newPage){for(Object(_dom__WEBPACK_IMPORTED_MODULE_13__.cleanElems)("quick_login_button","quick_expire","search_form","top_links","bottom_nav");globalHistory.length;){var _h=globalHistory.shift();Object(_nav_utils__WEBPACK_IMPORTED_MODULE_18__.processDestroy)(_h.cur),_h.content.innerHTML=""}var oldTopW=Object(_dom__WEBPACK_IMPORTED_MODULE_13__.ge)("dev_top_nav_wrap")&&Object(_dom__WEBPACK_IMPORTED_MODULE_13__.getSize)("dev_top_nav_wrap")[0]||Object(_dom__WEBPACK_IMPORTED_MODULE_13__.ge)("page_header_wrap")&&Object(_dom__WEBPACK_IMPORTED_MODULE_13__.getSize)("page_header_wrap")[0]||0;pageNode.innerHTML=html,execTqTasks(pageNode),oldTopW&&!vk.staticheader&&Object(_nav_utils__WEBPACK_IMPORTED_MODULE_18__.updateHeaderStyles)({width:oldTopW}),window._tbLink=Object(_dom__WEBPACK_IMPORTED_MODULE_13__.ge)("top_back_link");try{_tbLink.style.maxWidth=_tbLink.parentNode.offsetWidth-35+"px"}catch(e){}_browser__WEBPACK_IMPORTED_MODULE_23__.browser.mobile||Object(_layout_utils__WEBPACK_IMPORTED_MODULE_20__.onBodyResize)(!0)}else{if(_back){var newW=Object(_dom__WEBPACK_IMPORTED_MODULE_13__.ce)("div",{id:"wrap3"});Object(_utils_common__WEBPACK_IMPORTED_MODULE_9__.extend)(hist,{content:wNode.parentNode.replaceChild(newW,wNode),title:tNode?tNode.innerHTML:""}),globalHistory.push(hist),wNode=newW}var _oldTopW=Object(_dom__WEBPACK_IMPORTED_MODULE_13__.ge)("dev_top_nav_wrap")&&Object(_dom__WEBPACK_IMPORTED_MODULE_13__.getSize)("dev_top_nav_wrap")[0]||Object(_dom__WEBPACK_IMPORTED_MODULE_13__.ge)("page_header_wrap")&&Object(_dom__WEBPACK_IMPORTED_MODULE_13__.getSize)("page_header_wrap")[0]||0;wNode&&(wNode.innerHTML=html,execTqTasks(wNode)),_oldTopW&&!vk.staticheader&&Object(_nav_utils__WEBPACK_IMPORTED_MODULE_18__.updateHeaderStyles)({width:_oldTopW}),tNode&&(tNode.innerHTML=title,(title?_dom__WEBPACK_IMPORTED_MODULE_13__.show:_dom__WEBPACK_IMPORTED_MODULE_13__.hide)(tNode.parentNode)),Object(_feature_entries__WEBPACK_IMPORTED_MODULE_24__.getAudioPlayer)().updateCurrentPlaying()}if(Object(_layout_utils__WEBPACK_IMPORTED_MODULE_20__.checkPageBlocks)(),Object(_stl__WEBPACK_IMPORTED_MODULE_27__.updateSTL)(),Object(_nav_utils__WEBPACK_IMPORTED_MODULE_18__.updateLeftMenu)(),Object(_accessibility__WEBPACK_IMPORTED_MODULE_25__.updateAriaElements)(),_top_search__WEBPACK_IMPORTED_MODULE_26__.default.clear(),window.LazyLoad&&LazyLoad.scanDelayed(),Object(_nav_utils__WEBPACK_IMPORTED_MODULE_18__.handlePageParams)(params),opts.preventScroll||(opts.scrollTop>0?Object(_scroll__WEBPACK_IMPORTED_MODULE_15__.scrollToY)(opts.scrollTop,0):opts.noscroll||params.noscroll||Object(_scroll__WEBPACK_IMPORTED_MODULE_15__.scrollToTop)(0)),opts.bench&&(ajax.tRender=(new Date).getTime()),Nav.curLoc=params.loc,js){var evalString=`(function(){${js};})()`;if(__debugMode)eval(evalString);else try{eval(evalString)}catch(e){Object(_debug_tools__WEBPACK_IMPORTED_MODULE_12__.logEvalError)(e,evalString)}}ajax._framenext(),opts.onDone&&opts.onDone(),_browser__WEBPACK_IMPORTED_MODULE_23__.browser.mobile&&Object(_layout_utils__WEBPACK_IMPORTED_MODULE_20__.onBodyResize)(),changed.f&&Object(_utils__WEBPACK_IMPORTED_MODULE_28__.handleScroll)(changed.f),Nav.setLoc(params.loc||""),changed[0]&&(window.vkLastNav=Date.now()),Object(_utils_common__WEBPACK_IMPORTED_MODULE_9__.lTimeout)((function(){Object(_feature_entries__WEBPACK_IMPORTED_MODULE_24__.getAudioPlayer)().updateCurrentPlaying(),TopMenu.toggle(!1)}),_browser__WEBPACK_IMPORTED_MODULE_23__.browser.chrome?100:50)}}};return window.Page&&(Page.postsSave(),Page.postsSend(),Page.postsClearTimeouts()),Object(_ads__WEBPACK_IMPORTED_MODULE_11__.updSeenAdsInfo)(),Object(_ads__WEBPACK_IMPORTED_MODULE_11__.__adsUpdate)("already"),"im"!==Nav.objLoc[0]&&"im"!==changed[0]||(where.params=Object(_utils_common__WEBPACK_IMPORTED_MODULE_9__.extend)({},where.params,{_full_page:!0})),Object(_web_lib_ajax_module_callback__WEBPACK_IMPORTED_MODULE_32__.subscribeOnModuleEvaluated)(()=>{_shared_navigation_stats__WEBPACK_IMPORTED_MODULE_31__.navigationStat.addStatEvent(_shared_navigation_stats__WEBPACK_IMPORTED_MODULE_31__.navigationStat.getModule(),_shared_navigation_stats__WEBPACK_IMPORTED_MODULE_31__.NavigationProductionStatEventTypes.GO)},!0),Array.isArray(window.cur.beforeNavigateRequestHandlers)&&window.cur.beforeNavigateRequestHandlers.forEach(e=>{"function"==typeof e&&e()}),window.cur.beforeNavigateRequestHandlers=[],!__debugMode&&Object(_shared_user_user_env__WEBPACK_IMPORTED_MODULE_34__.partConfigEnabled)("measure_module_navigation_stats")&&window.performance.mark(_shared_network_stats_module_navigation_module_navigation_collector__WEBPACK_IMPORTED_MODULE_35__.ModuleNavigationStatMarks.web.PERF_MARK),ajax.post(where.url,where.params,{onDone:function(){var e=arguments;if(__debugMode)done.apply(null,e);else{try{done.apply(null,e)}catch(t){Object(_ui_util__WEBPACK_IMPORTED_MODULE_16__.topError)(t,{dt:15,type:6,url:where.url,query:Object(_shared_lib_convert__WEBPACK_IMPORTED_MODULE_17__.toQueryString)(where.params),js:e[2],answer:Array.prototype.slice.call(arguments).join("<!>")})}Object(_shared_user_user_env__WEBPACK_IMPORTED_MODULE_34__.partConfigEnabled)("measure_module_navigation_stats")&&Object(_web_lib_ajax_module_callback__WEBPACK_IMPORTED_MODULE_32__.subscribeOnModuleEvaluated)(()=>new _shared_network_stats_module_navigation_module_navigation_collector__WEBPACK_IMPORTED_MODULE_35__.ModuleNavigationStatCollector(_shared_network_stats__WEBPACK_IMPORTED_MODULE_36__.NetworkStatCollectorInstance).logEvent("web"),!0)}},onFail:opts.onFail||function(e){if(e)return setTimeout(Object(_message_box__WEBPACK_IMPORTED_MODULE_29__.showFastBox)({title:Object(_lang__WEBPACK_IMPORTED_MODULE_30__.getLang)("global_error")},e).hide,__debugMode?3e4:3e3),!0},frame:opts.noframe?0:1,canReload:!0,showProgress:opts.showProgress,hideProgress:opts.hideProgress,cache:opts.search?1:"",bench:opts.bench}),!1}},setLoc:function(e,t){var n,r;n=r=e,"string"==typeof e?r=Nav.fromStr(e):n=Nav.toStr(e),(t||!Object(_feature_entries__WEBPACK_IMPORTED_MODULE_24__.isArticleLayerOpen)()||n.match(/article_edit(-?\d+_\d+)/))&&(Nav.strLoc=n,Nav.objLoc=r,hab.setLoc(Nav.strLoc))},change:function(e,t,n){var r=Object(_utils_common__WEBPACK_IMPORTED_MODULE_9__.clone)(Nav.objLoc);return Object(_utils_common__WEBPACK_IMPORTED_MODULE_9__.each)(e,(function(e,t){!1===t?delete r[e]:r[e]=t})),Nav.go(r,t,n)},fromStr:function(e){var t=(e=e.split("#"))[0].split("?"),n={0:t[0]||""};return e[1]&&(n["#"]=e[1]),Object(_utils_common__WEBPACK_IMPORTED_MODULE_9__.extend)(Object(_shared_lib_convert__WEBPACK_IMPORTED_MODULE_17__.fromQueryString)(t[1]||""),n)},toStr:function(e){var t=(e=Object(_utils_common__WEBPACK_IMPORTED_MODULE_9__.clone)(e))["#"]||"",n=e[0]||"";delete e[0],delete e["#"];var r=Object(_shared_lib_convert__WEBPACK_IMPORTED_MODULE_17__.toQueryString)(e);return(r?n+"?"+r:n)+(t?"#"+t:"")},init:function(){window.globalHistory=[],Nav.strLoc=hab.getLoc(),Nav.objLoc=Nav.fromStr(Nav.strLoc)},getPostParams:function(e,t){var n=!(!e||!e.getAttribute),r={};if(!n)return r;var o=e.getAttribute("data-post-id");o&&(r.post_id=o);var i=e.getAttribute("data-parent-post-id");i&&(r.parent_post_id=i);var a=e.getAttribute("data-post-click-type");a&&(r.post_click_type=a);var s=e.getAttribute("mention_id");s&&(r.post_click_mention_id=s);var c=e.getAttribute("data-post-click-cc-key");c&&(r.post_click_cc_key=c);var u=[e.getAttribute("href"),e.getAttribute("data-href")];if(Object(_utils_common__WEBPACK_IMPORTED_MODULE_9__.each)(u,(function(e,t){if(t&&"#"!==t)return r.post_click_url=t,!1})),!!a||t){var l=Object(_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("_ads_block_data_w",e),d=(l=l||Object(_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("_ads_promoted_post_data_w",e))&&l.getAttribute("data-ad"),_=l&&l.getAttribute("data-ad-block-uid");d&&(r.ad_data=d),_&&(r.ad_block_unique_id=_)}return r},mergePostParamsOptions:function(e,t){if(t=t||{},!e)return t;function n(e,n,r){var o=r&&t[n];return!(!e||o)&&(t[n]=e,!0)}return n(e.post_id,"_post",!0),n(e.parent_post_id,"_parent_post",!0),n(e.post_click_type,"_post_click_type",!0),t._post_click_type&&(n(e.post_click_mention_id,"_post_click_mention_id",!0),n(e.post_click_cc_key,"_post_click_cc_key",!0),n(e.post_click_url,"_post_click_url",!0),n(e.ad_data,"_post_ad_data",!0)&&n(e.ad_block_unique_id,"_post_ad_block_unique_id")),t},showMoreApps(){var e=getShowMoreAppsContainer();e&&(e.classList.add(SHOW_MORE_APPS_SHOWN_CLASSNAME),getShowMoreAppsButton().classList.add(SHOW_MORE_APPS_BUTTON_HIDDEN_CLASSNAME))},showLessApps(){var e=getShowMoreAppsContainer();e&&(e.classList.remove(SHOW_MORE_APPS_SHOWN_CLASSNAME),getShowMoreAppsButton().classList.remove(SHOW_MORE_APPS_BUTTON_HIDDEN_CLASSNAME))}};function getShowMoreAppsContainer(){return document.querySelector(".show_more_apps_container")}function getShowMoreAppsButton(){return document.querySelector(".show_more_apps_button")}function authorPageNav(e,t,n){if(n&&cur.backFromAuthorPage)return delete cur.backFromAuthorPage,!0;var r=e.toLowerCase(),o=window.AuthorPage&&window.AuthorPage.isOpen(),i=r.match(/^(?:%40|@)-?[.a-z0-9_]+(?:\?\w+)?([\?&]z\=[a-z0-9-_]+)*$/);if(i)return!!o||(i[1]?cur._hardNav=!0:(boxRefreshCoords(boxLoader),Object(_dom__WEBPACK_IMPORTED_MODULE_13__.show)(boxLoader),Object(_dom__WEBPACK_IMPORTED_MODULE_13__.show)(boxLayerWrap),stManager.add([jsc("web/author_page.js"),jsc("web/article_layer.js"),"author_page.css","ui_controls.js","ui_controls.css"],(function(){cur.prevAuthorPageUrl=t,window.AuthorPage.showLayer(r)})),!0));if(o){if(/^article_edit([0-9\-]+)_(\d+)/.test(r))return!1;if(n&&window.AuthorPage.isStandalone())return window.location.reload(!0),!0;var a=window.AuthorPage.close(!0);return void 0!==a?a:!!n}}function articleNav(e,t,n,r,o){var i=e.toLowerCase(),a=/^(?:%40|@)-?[.a-z0-9_]+-[a-z0-9-]+(?:[\?&]\w+\=[a-z0-9-_]+)*$/;if(a.test(i))return window.isArticleLayerOpen()||(cur.articlePrevLoc=t),window.WkView&&WkView.hide(!0),window.boxQueue&&boxQueue.hideAll(),stManager.add([jsc("web/article_layer.js"),"article.css"]).then(()=>new Promise(e=>{ArticleLayer.show(i,!0,!1,{ev:o,onShowDone:()=>{cur.articleSequence=Math.max(1,(cur.articleSequence||0)+(n?-1:1)),e()},prepareAsync:!0})}));if(window.isArticleLayerOpen()){if(n&&ArticleLayer.isStandalone())return window.location.reload(!0),!0;var s=()=>{ArticleLayer.close(),delete cur.articleSequence},c=cur.articlePrevLoc;return delete cur.articlePrevLoc,c&&!a.test(c)?e===c?(s(),r&&r(),!0):(layers.fullhide=function(){s()},!1):(s(),!0)}return!1}function cleanArticleUrlByObjLoc(e){return e&&e.ref&&delete e.ref,Nav.toStr(e)}function bookmarksNav(e){if(e){var t=Object(_dom__WEBPACK_IMPORTED_MODULE_13__.domClosest)("bookmarks_rows",e.target),n=!!Object(_dom__WEBPACK_IMPORTED_MODULE_13__.domClosest)("bookmarks_pages",e.target);if((t||n)&&(n||Object(_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(t,"bookmarks_rows_user")||Object(_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(t,"bookmarks_rows_group")||Object(_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(t,"bookmarks_rows_page"))){var r;if(!(r=t?Object(_dom__WEBPACK_IMPORTED_MODULE_13__.domClosest)("_bookmark_page_item",e.target):Object(_dom__WEBPACK_IMPORTED_MODULE_13__.domClosest)("line_cell",e.target)))return;statlogsValueEvent("bookmarks_product_analytics",{item_type:"page",item_id:Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_10__.intval)(Object(_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(r,"id")),time:window.getServerTime()})}}}__webpack_exports__.default=Nav},MZbF:function(e,t,n){"use strict";n.r(t),n.d(t,"FAQTutorial",(function(){return s}));var r=n("zxIV"),o=n("KkBR"),i=n("v+DW");function a(){var e=geByClass("tutorial_step").slice(-1)[0],t=geByClass1("content",e);t.innerHTML=getTemplate("login_tutorial_finish_appeal")+t.innerHTML}var s={tryInit(){geByClass1("tutorial_step")&&a()},select(e,t,n){var s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!cur.tutorialProcessing&&!isChecked(e)){var c=gpeByClass("tutorial_step",e);hasClass(c,"finished")||(removeClass(geByClass1("on",c),"on"),addClass(e,"on"),ajax.post("support?act=a_select_tutorial",{name:t,id:n,load:1,ban:nav.objLoc.ban||0},{onDone(e,t){s||addClass(c,"finished");var n,i=!0,u=ge("page_body").offsetHeight+(vk.staticheader?0:Object(r.getH)(ge("page_header_cont")));if(s)do{(n=domNS(c))&&(re(n),i=!1)}while(n);if(ge("login_blocked_wrap").innerHTML+=e,a(),"login"===nav.objLoc[0]&&t){var l=document.querySelectorAll(".tutorial_step"),d=l[l.length-1];if(o.Login.isBanExpired()){o.Login.canUnblockFast()?d.innerHTML+=getTemplate("login_unblock_by_phone_fast"):d.innerHTML+=getTemplate("login_unblock_by_phone");var _=l[l.length-1].querySelector(".help_table_question__m");_&&hide(_)}else d.innerHTML+=getTemplate("login_wait_for_ban_expiration_message")}i&&scrollToY(u)},onFail:e=>(showDoneBox(e),!1),showProgress(){cur.tutorialProcessing=!0,Object(i.lockButton)(e)},hideProgress(){cur.tutorialProcessing=!1,Object(i.unlockButton)(e)}}))}},home:()=>{nav.go("/support?act=home")},back:e=>{var t=geByClass("tutorial_step"),n=t[t.length-1];2===t.length&&hide(e),hide(n),removeClass(geByClass1("on",t[t.length-2]),"on")}}},MZmb:function(e,t,n){"use strict";n.r(t),n.d(t,"AjaxProtoJson",(function(){return o}));var r=n("t7n3");class o{parseResponse(e){var t=this.parseStaticPayload(e);return{navVersion:Object(r.intval)(t.loaderVersion),newStatic:t.static,statsMeta:t.statsMeta,langId:Object(r.intval)(t.langPack),langVer:Object(r.intval)(t.langVersion),langKeys:t.langKeys,templates:t.templates,code:Object(r.intval)(t.payload[0]),payload:t.payload[1],debugLog:t.debugLog,env:t.env,extra:t.extra}}parseStaticPayload(e,t){var n=e;return e&&"string"==typeof e&&(n=JSON.parse(e)),n.payload&&n.payload[0]>0&&(n.payload[1]=n.payload[1].map(e=>"string"==typeof e?JSON.parse(e):e)),n}}},MfQN:function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},MiCK:function(e,t,n){"use strict";n.r(t),n.d(t,"mobileOnlineTip",(function(){return a})),n.d(t,"pageVerifiedTip",(function(){return s})),n.d(t,"audioShowActionTooltip",(function(){return c})),n.d(t,"mentionOver",(function(){return u})),n.d(t,"bookmarkTooltip",(function(){return l})),n.d(t,"showCovidStatusTooltip",(function(){return d}));var r=n("FWc3"),o=n("zxIV"),i=n("DM2o");function a(e,t){var n=t.asrtl?0:t.right?289:35,o=t.asrtl?" mobile_tt_asrtl":t.right?" mobile_tt_right":"";return Object(r.showTooltip)(e,{url:"al_login.php",params:{act:"mobile_tt",mid:t.mid,was:t.was},slide:15,ajxdt:200,showdt:200,hidedt:200,forcetoup:t.forcetoup,toup:!1,dir:"auto",asrtl:t.asrtl,appendParentCls:t.appendParentCls,shift:[n,8,7],className:"mobile_tt"+o})}function s(e,t){return Object(r.showTooltip)(e,{url:"/al_page.php",params:{act:"verified_tt",type:t.type,oid:t.oid,force_new_tab:t.forceNewTab?1:0},slide:15,ajxdt:200,showdt:200,hidedt:200,dir:"auto",shift:[95,5,7],className:"verified_tt"})}function c(e,t,n){if(!cur._addRestoreInProgress){var i=Object(o.gpeByClass)("_audio_row",e),a=AudioUtils.getAudioFromEl(i,!0);if(a){var s=Object(o.domData)(e,"action"),c=AudioUtils.getRowActionName(s,a,i),u={text:()=>c,black:1,shift:t||[7,4,0],needLeft:!0,forcetodown:n,noZIndex:!0};each(["_im_mess_stack","top_notify_wrap","_ape_audio_item","wk_history_audio_content"],(function(t,n){if(Object(o.gpeByClass)(n,e))return u.appendParentCls=n,!1})),Object(o.gpeByClass)("_im_mess_stack",e)&&(u.shift=[7,10,0],u.noZIndex=!0),Object(r.showTooltip)(e,u)}}}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(r.showTooltip)(e,{url:"al_wall.php",params:{act:"mention_tt",mention:e.getAttribute("mention_id"),from:"wall"},shift:t.shift||[52,7,7],hidedt:t.hidedt||500,showdt:500,needLeft:t.needLeft,slide:15,checkLeft:!0,reverseOffset:t.reverseOffset||112,dir:"auto",appendEl:t.appendEl||Object(o.domClosest)("im-page-history-w",e)||Object(o.domClosest)("rb_box_wrap",e)||Object(o.domClosest)("wk_cont",e)||Object(o.domClosest)("scroll_fix_wrap",e)})}function l(e){var t="";Object(o.gpeByClass)("_im_mess_stack",e)?t="_im_mess_stack":Object(o.gpeByClass)("wall_text",e)&&(t="scroll_fix_wrap"),Object(r.showTooltip)(e,{className:"bookmarks_tt ",shift:[32,8],text:()=>"1"===Object(o.domData)(e,"state")?Object(o.domData)(e,"remove"):Object(o.domData)(e,"add"),black:1,appendParentCls:t})}function d(e,t){Object(r.showTooltip)(e,{text:t,dir:"up",forcetodown:!0,hidedt:300,hasover:!0,center:!0,shift:[-2,6],onShowStart:()=>Object(i.statlogsValueEvent)("corona_status_stat","show_tooltip")})}},Mukb:function(e,t,n){var r=n("hswa"),o=n("RjD/");e.exports=n("nh4g")?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},N8g3:function(e,t,n){t.f=n("K0xU")},NO8f:function(e,t,n){n("7DDg")("Uint8",1,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},Nk8j:function(e,t,n){"use strict";n.r(t),n.d(t,"getPhotoData",(function(){return r})),n.d(t,"getCurrentPhoto",(function(){return o})),n.d(t,"setPhotoData",(function(){return i})),n.d(t,"deletePhotoData",(function(){return a})),n.d(t,"dropPhotoCacheData",(function(){return s})),n.d(t,"getIndexedFriends",(function(){return c})),n.d(t,"setIndexedFriends",(function(){return u})),n.d(t,"isImgBlurred",(function(){return l}));n("KKXr");function r(e){var t=cur.pvListId,n=cur.pvIndex;if(cur.pvData&&t&&!isNaN(n)){var r=cur.pvData[t][n];return e?r[e]:r}return!1}function o(){var e=cur.pvListId,t=cur.pvIndex;return cur.pvData&&e&&!isNaN(t)?cur.pvData[e][t]:null}function i(e,t){var n=cur.pvListId,r=cur.pvIndex;return!(!cur.pvData||!n||isNaN(r))&&(cur.pvData[n][r][e]=t,cur.pvData[n][r])}function a(e){var t=cur.pvListId,n=cur.pvIndex;return!!(cur.pvData&&t&&Number.isInteger(Number.parseInt(n)))&&(delete cur.pvData[t][n][e],!0)}function s(){delete cur.pvList,delete cur.pvData}function c(){return cur.pvIndexedFriends}function u(e,t){cur.pvIndexedFriends=new vkIndexer(e,e=>e[1],t)}function l(e){if(!e)return!1;var t=e.photoRaw?e.photoRaw.split("_")[0]:"";return!(!e.restrictionBlur||cur.unblurredPhotos&&cur.unblurredPhotos.indexOf(e.photoRaw)>-1||cur.unblurredOwners&&cur.unblurredOwners.indexOf(t)>-1)}},Nr18:function(e,t,n){"use strict";var r=n("S/j/"),o=n("d/Gc"),i=n("ne8i");e.exports=function(e){for(var t=r(this),n=i(t.length),a=arguments.length,s=o(a>1?arguments[1]:void 0,n),c=a>2?arguments[2]:void 0,u=void 0===c?n:o(c,n);u>s;)t[s++]=e;return t}},O6qx:function(e,t){var n=e.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w\/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-\.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%d trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))? (\S*)(?: (\S*))?/,names:["value","direction","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+" %s"+(e.config?" %s":"")}},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),t+=null!=e["network-id"]?" network-id %d":"%v",t+=null!=e["network-cost"]?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return null!=e.attribute&&(t+=" %s",null!=e.value&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_\/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{push:"invalid",names:["value"]}]};Object.keys(n).forEach((function(e){n[e].forEach((function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")}))}))},OEbY:function(e,t,n){n("nh4g")&&"g"!=/./g.flags&&n("hswa").f(RegExp.prototype,"flags",{configurable:!0,get:n("C/va")})},OG14:function(e,t,n){"use strict";var r=n("y3w9"),o=n("g6HL"),i=n("Xxuz");n("IU+Z")("search",1,(function(e,t,n,a){return[function(n){var r=e(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,r):new RegExp(n)[t](String(r))},function(e){var t=a(n,e,this);if(t.done)return t.value;var s=r(e),c=String(this),u=s.lastIndex;o(u,0)||(s.lastIndex=0);var l=i(s,c);return o(s.lastIndex,u)||(s.lastIndex=u),null===l?-1:l.index}]}))},OOHW:function(e,t,n){"use strict";n.r(t),n.d(t,"serializeAudio",(function(){return o}));n("OEbY");var r=n("uk5P");function o(e){if(!e)return null;if(Array.isArray(e))return e;var t=[e.addHash,e.editHash,e.actionHash,e.deleteHash,e.replaceHash,e.urlHash,e.restoreHash].join("/"),n=[e.coverUrl_s,e.coverUrl_p].join(","),o=[];return o[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ID]=e.id,o[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_OWNER_ID]=e.owner_id,o[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_URL]=e.url,o[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_TITLE]=e.title,o[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_PERFORMER]=e.performer,o[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_DURATION]=e.duration,o[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ALBUM_ID]=e.albumId,o[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_AUTHOR_LINK]=e.authorLink,o[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_LYRICS]=e.lyrics,o[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_FLAGS]=e.flags,o[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_CONTEXT]=e.context,o[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_EXTRA]=e.extra,o[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_HASHES]=t,o[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_COVER_URL]=n,o[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ADS]=e.ads,o[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_SUBTITLE]=e.subTitle,o[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_MAIN_ARTISTS]=e.mainArtists,o[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_FEAT_ARTISTS]=e.featArtists,o[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ALBUM]=e.album,o[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_TRACK_CODE]=e.trackCode,o[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_RESTRICTION]=e.restrictionStatus,o[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ALBUM_PART]=e.albumPart,o[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_ACCESS_KEY]=e.accessKey,o[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_CHART_INFO_INDEX]=e.chartInfo,o}},OP3Y:function(e,t,n){var r=n("aagx"),o=n("S/j/"),i=n("YTvA")("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),r(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},OftT:function(e,t,n){"use strict";n.r(t),n.d(t,"cancelDonutSubscription",(function(){return u}));var r=n("zxIV"),o=n("4+be"),i=n("v+DW"),a=n("aong"),s=n("EasH"),c=n("3oLO");function u(e,t,n){var u=n.onApplyDone;Object(s.showBox)("al_settings.php",{act:"a_cancel_donut",owner_id:e,hash:t},{onDone:function(n){n.setButtons(Object(o.getLang)("settings_donut_confirm"),(function(){Object(i.lockButton)(n.btns.ok[0]),function(e,t,n,o){var a=o.onApplyDone;c.ajax.post("al_settings.php",{act:"a_cancel_donut_apply",owner_id:e,hash:t},{onDone:function(){var e;null===(e=null==n?void 0:n.hide)||void 0===e||e.call(n),a({box:n})},onFail:function(e){var t,o;if(n){var a=null===(o=null===(t=n.bodyNode)||void 0===t?void 0:t.querySelector)||void 0===o?void 0:o.call(t,".error");a&&(Object(r.val)(a,e),Object(r.show)(a)),Object(i.unlockButton)(n.btns.ok[0])}}})}(e,t,n,{onApplyDone:u})}),Object(o.getLang)("settings_donut_cancel_button_cancel"))},onFail:function(e){Object(a.showErrorBox)(e)}})}},OnI7:function(e,t,n){var r=n("dyZX"),o=n("g3g5"),i=n("LQAc"),a=n("N8g3"),s=n("hswa").f;e.exports=function(e){var t=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},OrGp:function(e,t,n){"use strict";n.r(t),n.d(t,"showQuickLoginBox",(function(){return _})),n.d(t,"showJoinBox",(function(){return p})),n.d(t,"Index",(function(){return h}));n("pIFo");var r=n("1BRX"),o=n("v+DW"),i=n("EasH"),a=n("FWc3"),s=n("4+be"),c=n("ryw6"),u=n("t7n3"),l=n("zxIV"),d=n("9r2g");function _(){return showBox("al_login.php",{act:"box"}),!1}function p(){return showBox("join.php",{act:"box",from:window.nav.strLoc}),!1}var h={initNew:function(){each(geByClass("big_text","index_rcolumn"),(function(e,t){placeholderInit(t),gpeByClass("ij_form",t,ge("index_rcolumn"))&&addEvent(t,"keydown",(function(e){10!=e.keyCode&&13!=e.keyCode||h.submitJoinStart()}))})),h.initRegForm(),setTimeout(elfocus.pbind("index_email"),0);var e=ge("index_login_form"),t=ge("index_email"),n=ge("index_pass");e.onsubmit=function(){return!window.submitQuickLoginForm||(trim(t.value)?trim(n.value)?(submitQuickLoginForm(t.value,n.value,{prg:"index_login_button",params:{expire_input:val("index_expire_input")}}),!1):(Object(o.notaBene)(n),!1):(Object(o.notaBene)(t),!1))},window.loginByCredential&&(t.onclick=loginByCredential,n.onclick=loginByCredential),window.onReLoginDone=function(e){location.href=e},window.onReLoginFailed=function(e){-1===e&&(location.href=location.href.replace(/^http:/,"https:"))}},statSaveBdayInteraction(){var e=Object(u.intval)(cur.uiBday.val()),t=Object(u.intval)(cur.uiBmonth.val()),n=Object(u.intval)(cur.uiByear.val()),r=new Date(0);e&&r.setDate(e),t&&r.setMonth(t),n&&r.setFullYear(n),d.registrationItemStat.logFieldInteraction(d.RegistrationFieldItemNames.BDAY,r.getTime())},initRegForm:function(){"invite_confirm"===nav.objLoc.act?cur.eventScreen=d.EventScreens.REGISTRATION_INVITE_CONFIRM:cur.eventScreen=cur.options.proceed_as?d.EventScreens.START_PROCEED_AS:d.EventScreens.START,d.registrationItemStat.logEvent(d.RegistrationItemEventTypes.SCREEN_PROCEED,d.EventScreens.NOWHERE,cur.eventScreen),d.registrationItemStat.logFieldInteraction(d.RegistrationFieldItemNames.BDAY,"",!0),cur.uiBday=new Dropdown(ge("ij_bday"),h.generateDays(cur.options.byear,cur.options.bmonth),{big_text:!0,multiselect:!1,zeroPlaceholder:!0,selectedItems:cur.options.bday,onChange(){h.statSaveBdayInteraction()}}),cur.uiBmonth=new Dropdown(ge("ij_bmonth"),cur.options.bmonths,{big_text:!0,multiselect:!1,zeroPlaceholder:!0,selectedItems:cur.options.bmonth,onChange:function(e){h.statSaveBdayInteraction(),h.updateDays(cur.uiByear.val(),e)}}),cur.uiByear=new Dropdown(ge("ij_byear"),cur.options.byears,{big_text:!0,multiselect:!1,zeroPlaceholder:!0,selectedItems:cur.options.byear,onChange:function(e){h.statSaveBdayInteraction(),h.updateDays(e,cur.uiBmonth.val())}});var e=Object(l.$$)("#ij_sex_row .radiobtn");window.radioBtns.ij_sex={els:e,val:0},d.registrationItemStat.logFieldInteraction(d.RegistrationFieldItemNames.SEX,Object(u.intval)(radioval("ij_sex")),!0),e.forEach(e=>{e.addEventListener("click",()=>{var e=Object(u.intval)(radioval("ij_sex"));d.registrationItemStat.logFieldInteraction(d.RegistrationFieldItemNames.SEX,e)})}),d.registrationItemStat.logFieldInteraction(d.RegistrationFieldItemNames.FIRST_NAME,val("ij_first_name"),!0),Object(l.$)("#ij_first_name").addEventListener("keyup",()=>{d.registrationItemStat.logFieldInteraction(d.RegistrationFieldItemNames.FIRST_NAME,val("ij_first_name"))}),d.registrationItemStat.logFieldInteraction(d.RegistrationFieldItemNames.LAST_NAME,val("ij_last_name"),!0),Object(l.$)("#ij_last_name").addEventListener("keyup",()=>{d.registrationItemStat.logFieldInteraction(d.RegistrationFieldItemNames.LAST_NAME,val("ij_last_name"))}),cur.destroy.push((function(e){e.uiBday&&e.uiBday.destroy(),e.uiBmonth&&e.uiBmonth.destroy(),e.uiByear&&e.uiByear.destroy()})),stManager.add([jsc("web/tooltips.js"),"tooltips.css"])},submitJoinStart:function(){var e=ge("ij_submit");if(!Object(o.isButtonLocked)(e)){var t={fname:trim(val("ij_first_name")),lname:trim(val("ij_last_name")),bday:cur.uiBday.val(),bmonth:cur.uiBmonth.val(),byear:cur.uiByear.val(),frm:1,ah:nav.objLoc.ah,event_screen:cur.eventScreen};isVisible("ij_sex_row")&&(t.sex=Object(u.intval)(radioval("ij_sex"))),window.tooltips&&tooltips.hideAll(),val("ij_msg",""),ajax.post("join.php?act=start",t,{onDone:function(e,t){var n=ge("ij_"+e);"sex_row"==e&&show(n),n?h.showRegTT(n,t):Object(c.showMsg)("ij_msg",t,"msg",!0)},showProgress:o.lockButton.pbind(e),hideProgress:o.unlockButton.pbind(e)})}},showRegTT:function(e,t){var n,r="INPUT"===e.tagName,i=e;(!r&&(n=geByClass1("selector_table",e))||!r&&(n=geByClass1("radiobtn",e)))&&(i=n);var s=function(){Object(a.showTooltip)(i,{text:t,dir:"right",width:320,typeClass:"ij_tt",shift:[335,-getSize(i)[1]/2],hasover:1,nohideover:1,onCreate:function(){removeEvent(i,"mouseout"),r&&(i.onblur=function(){i.tt&&i.tt.hide&&i.tt.hide()})}})};r?(e.onfocus=s,Object(o.notaBene)(e)):(s(),each(geByClass("selector_table",e),(function(e,t){Object(o.notaBene)(t)})))},showLoginBox:e=>(showBox("al_login.php",{act:"auth_box",ul:e},{params:{dark:!0,hideButtons:!0,bodyStyle:"padding: 44px 25px;"}}),!1),showQuickLoginBox:_,showJoinBox:p,deleteRecentAccount:function(e,t,n,r){return window.tooltips&&tooltips.hideAll(),ajax.post("/al_login.php?act=a_delete_recent_account",{mid:t,hash:n},{onDone:function(){re(gpeByClass("_row",e))}}),cancelEvent(r)},generateDays:function(e,t){for(var n=[[0,Object(s.getLang)("index_sel_bday")]],o=Object(r.getLastDay)(e,t),i=1;i<=o;++i)n.push([i,i+""]);return n},updateDays:function(e,t,n){n||(n=cur.uiBday),n.val()>Object(r.getLastDay)(e,t)&&n.clear(),n.setData(h.generateDays(e,t).slice(Object(u.intval)(cur.options.bday)?1:0))},fbCheck:function(e,t,n){var r,o,i,a,s;window.fbAsyncInit=function(){FB.init({appId:e,xfbml:!0,version:"v2.7"});var r="_box"===t;n||(n=ge("index_fbcontinuewithsign"+(t||""))),setStyle(n,{opacity:0,height:0,overflow:"hidden"}),show(n),FB.Event.subscribe("xfbml.render",()=>{animate(n,{height:r?79:55,opacity:1},200)})},window.FB&&window.FB.init?window.fbAsyncInit():(r=document,o="script",i="facebook-jssdk",s=r.getElementsByTagName(o)[0],r.getElementById(i)||((a=r.createElement(o)).id=i,a.src="//connect.facebook.net/"+cur.fbLocale+"/sdk.js",s.parentNode.insertBefore(a,s)))},fbJoin:function(e,t){cur.fbContext=e,cur.fbLoginButton=t,setCookie("remixfbstate",cur.fbState,30);var n=location.protocol+"//"+location.host+"/join?act=fb_sign",r=encodeURIComponent(n),o="https://graph.facebook.com/v2.9/oauth/authorize?client_id="+cur.fbApp+"&redirect_uri="+r+"&scope=email,user_birthday&display=popup&state="+cur.fbState,i=void 0!==window.screenX?window.screenX:window.screenLeft,a=void 0!==window.screenY?window.screenY:window.screenTop,s=void 0!==window.outerWidth?window.outerWidth:document.body.clientWidth,c=void 0!==window.outerHeight?window.outerHeight:document.body.clientHeight-22,u=parseInt(i+(s-640)/2,10),l=parseInt(a+(c-340)/2.5,10);return window.open(o,"fb_sign","width=640,height=340,left="+u+",top="+l),!1},fbFinish:function(e){e.error?setTimeout(Object(i.showFastBox)(Object(s.getLang)("global_error"),e.error).hide,2e3):e.date&&(Object(o.lockButton)(cur.fbLoginButton||ge("index_fb"+(cur.fbContext||""))),nav.go("/join?act=fb_start"))}}},Oyvg:function(e,t,n){var r=n("dyZX"),o=n("Xbzi"),i=n("hswa").f,a=n("kJMx").f,s=n("quPj"),c=n("C/va"),u=r.RegExp,l=u,d=u.prototype,_=/a/g,p=/a/g,h=new u(_)!==_;if(n("nh4g")&&(!h||n("eeVq")((function(){return p[n("K0xU")("match")]=!1,u(_)!=_||u(p)==p||"/a/i"!=u(_,"i")})))){u=function(e,t){var n=this instanceof u,r=s(e),i=void 0===t;return!n&&r&&e.constructor===u&&i?e:o(h?new l(r&&!i?e.source:e,t):l((r=e instanceof u)?e.source:e,r&&i?c.call(e):t),n?this:d,u)};for(var f=function(e){e in u||i(u,e,{configurable:!0,get:function(){return l[e]},set:function(t){l[e]=t}})},m=a(l),g=0;m.length>g;)f(m[g++]);d.constructor=u,u.prototype=d,n("KroJ")(r,"RegExp",u)}n("elZq")("RegExp")},"PA/O":function(e,t,n){"use strict";function r(e,t){return new Promise((function(n){setTimeout(n.bind(null,t),1e3*e)}))}n.r(t),n.d(t,"pause",(function(){return r}))},Q9Lc:function(e,t,n){"use strict";n.r(t),n.d(t,"AppOrderBox",(function(){return u}));var r=n("zxIV"),o=n("kcIO"),i=n("v+DW"),a=n("EasH"),s=n("aong"),c=n("HwS1");class u{static instantSkipAppOrder(e,t){var n=gpeByClass("payments_instant_progress_wrap",e),r={act:"a_order",aid:cur.paymentsOrderAppId,order_id:cur.paymentsOrderId,votes:cur.paymentsPreferVotes,test_mode:cur.paymentsOrderTestMode,_skip_instant:t||1,hash:cur.paymentsOrderHash};void 0!==cur.checkedMaxVotes&&(r.checked_max_votes=cur.checkedMaxVotes),ajax.post("al_apps.php",r,{forceDone:1,onDone:()=>{cur.paymentsCheckOrderCnt=1,Object(o.curBox)().hide(),cur.paymentsCheckOrderCnt=0,cur.fromInstantPay=!0},showProgress:addClass.pbind(n,"loading"),hideProgress:removeClass.pbind(n,"loading")})}static processOrder(e,t){t||(t=Object(o.curBox)());var n=Object(r.isVisible)("payments_box")?2:0,l=!1;e||(e=n),n&&(l=t.btns.ok[0],Object(i.lockButton)(l));var d={act:"a_order",aid:cur.paymentsOrderAppId,order_id:cur.paymentsOrderId,votes:cur.paymentsPreferVotes,from:nav.objLoc[0],test_mode:cur.paymentsOrderTestMode,_votes_ok:e,hash:cur.paymentsOrderHash};1==e&&cur.paymentsOrderBillPeriod&&(d.payment_type=cur.votesType),!cur.paymentsOrderBillPeriod&&ge("payments_order_auto_confirm")&&(d.auto_confirm=Object(i.isChecked)("payments_order_auto_confirm")),cur.salesRef&&(d.sales_ref=cur.salesRef),ajax.post("al_apps.php",d,{forceDone:3==+e?1:0,onDone:(r,d,_,p)=>{if(p&&-1e3!==p&&(cur.votesBoxOptions=p),3==e&&-1e3==_)return c.Gifts.processBoxOptions(Object(o.curBox)(),p),cur.paymentsCheckOrderCnt=1,t.hide(),void(cur.paymentsCheckOrderCnt=0);if(0===_||_>0)return cur.paymentsPreferVotes=1,n?cur.paymentsShowBoxError(d):(t.hide(),Object(a.showFastBox)(getLang("global_error"),d)),void(cur.paymentsOrderBillPeriod&&cur.onSubscriptionFail?cur.onSubscriptionFail(_):cur.onAppOrderFail&&cur.onAppOrderFail(_));if(r.result){var h=Object(o.curBox)();return cur.isPaymentsAppOrder=!1,h&&h.hide(),Object(o.showDoneBox)(d),r.balance&&Object(s.updateMoney)(r.balance),void(cur.onSubscriptionDone&&r.subscriptionStatus&&(cur.onSubscriptionDone(r.subscriptionStatus),cur.onSubscriptionDone=!1))}var f=r.orderId;if(f){d&&(t=Object(a.showFastBox)("",d)).setOptions({title:!1,width:520,bodyStyle:"padding: 0;",hideButtons:!0}),l&&Object(i.unlockButton)(l),cur.isPaymentsAppOrder=!1,cur.paymentsOrderId=f,r.subscriptionId&&(cur.paymentsSubscriptionId=r.subscriptionId),cur.paymentsOrderCheckHash=r.checkHash;var m=getLang("payments_waiting_app_order_complete");ge("payments_box_progress_msg_wrap")?(val("payments_box_progress_msg_wrap",`<span id="payments_box_progress_msg">${m}</span>`),cur.paymentsShowProgress()):val("apps_paymentbox_progress_msg_wrap",m),cur.paymentsCheckOrderCnt=0,cur.paymentsCheckOrderInt=setInterval(u.checkOrder,2e3)}else cur.paymentGetOrderItemTO=setTimeout(u.processOrder.pbind(!1,t),1e3)},onFail:function(e){return!e||(Object(r.isVisible)("payments_box")?cur.paymentsShowBoxError(e):(t.hide(),Object(a.showFastBox)(getLang("global_error"),e)),!0)}})}static checkOrder(){if(15==cur.paymentsCheckOrderCnt)ge("payments_box_progress_msg").innerHTML=getLang("payments_waiting_payment_complete_still");else if(cur.paymentsCheckOrderCnt>30)return clearInterval(cur.paymentsCheckOrderInt),Object(o.curBox)().hide(),void Object(a.showFastBox)(getLang("payments_app_order_box_title"),getLang("payments_app_add_votes_delay"),getLang("global_close"),()=>{cur.paymentsOrderBillPeriod&&cur.onSubscriptionCancel?cur.onSubscriptionCancel():cur.onAppOrderCancel&&cur.onAppOrderCancel(),Object(o.curBox)().hide()});cur.paymentsCheckOrderCnt++,ajax.post("al_apps.php",{act:"a_check_order",aid:cur.paymentsOrderAppId,order_id:cur.paymentsOrderId,test_mode:cur.paymentsOrderTestMode,from:nav.objLoc[0],hash:cur.paymentsOrderCheckHash},{onDone:(e,t,n,r,i)=>{e&&(Object(o.curBox)()&&Object(o.curBox)().hide(),clearInterval(cur.paymentsCheckOrderInt),cur.paymentsCheckOrderCnt=0,window.toggleFlash(!1),Object(o.showDoneBox)(t,{out:1e3,callback:()=>{window.toggleFlash(!0)}}),n&&Object(s.updateMoney)(n),1==e?(cur.paymentsOrderBillPeriod&&cur.onSubscriptionSuccess?(cur.onSubscriptionSuccess(cur.paymentsSubscriptionId),TopNotifier&&TopNotifier.invalidate()):cur.onAppOrderSuccess&&cur.onAppOrderSuccess(cur.paymentsOrderId),cur.onSubscriptionDone&&i&&(cur.onSubscriptionDone(i),cur.onSubscriptionDone=!1)):cur.paymentsOrderBillPeriod&&cur.onSubscriptionFail?cur.onSubscriptionFail(r):cur.onAppOrderFail&&cur.onAppOrderFail(r))},onFail:function(e){return clearInterval(cur.paymentsCheckOrderInt),cur.paymentsShowBoxError(e),!0}})}static initialize(e,t,n,r,o,i,a,s){extend(cur,{isPaymentsAppOrder:!0,paymentsAuthPayment:!1,paymentsOrderNotice:!1,paymentsOrderId:e,paymentsOrderAppId:t,paymentsOrderTestMode:n,paymentsOrderHash:r,paymentsPreferVotes:o,paymentsOrderDiscount:i,paymentsOrderBillPeriod:a,salesRef:s})}}},QChX:function(e,t,n){"use strict";n.r(t),n.d(t,"HAS_MEDIA_SESSION",(function(){return i})),n.d(t,"clear",(function(){return a})),n.d(t,"updateMediaSessionMetadata",(function(){return s}));var r,o=n("YQfe"),i=window&&window.navigator&&"mediaSession"in window.navigator&&"MediaMetadata"in window;function a(){i&&((r=r||document.createElement("audio")).src=o.SILENCE,r.play().then(()=>{}).catch(()=>{}))}function s(e){if(i){(location.hostname+e.album).length>30&&(e.album=e.album.substring(0,30-location.hostname.length)+"…");var t=navigator.mediaSession.metadata;t?(t.title=e.title,t.artist=e.artist,t.album=e.album,t.artwork=e.artwork):navigator.mediaSession.metadata=new MediaMetadata(e)}}},QCnb:function(e,t,n){"use strict";e.exports=n("+wdc")},QGEU:function(e,t,n){"use strict";n.r(t),n.d(t,"hasAccessibilityMode",(function(){return u})),n.d(t,"updateOnlineText",(function(){return l})),n.d(t,"updateAriaCheckboxes",(function(){return d})),n.d(t,"updateAriaRadioBtns",(function(){return _})),n.d(t,"updateAriaElements",(function(){return p})),n.d(t,"makeInteractiveMVKA11yProposal",(function(){return h}));var r=n("v+DW"),o=n("t7n3"),i=n("zxIV"),a=n("4+be"),s=n("gdug"),c=n("DM2o");function u(){return!(!window.vk||!vk.a11y)}function l(){clearTimeout(cur.updateOnlineTO),cur.updateOnlineTO=setTimeout((function(){Object(o.each)(Object(i.geByClass)("_online"),(function(){var e=Object(i.geByClass1)("_online_reader",this)||this,t=Object(i.hasClass)(this,"online"),n=Object(i.hasClass)(this,"mobile"),r=Object(i.geByTag)("img",e),s=function(e){var t=Object(i.domClosest)("_post",e),n=t&&Object(i.domByClass)(t,"author");return n?n.innerText||n.textContent:""};if(t){var c="";Object(o.each)(r,(function(){var e=Object(i.attr)(this,"alt")||Object(i.attr)(this,"data-alt")||s(this);e&&(c=Object(o.trim)(c+" "+e),this.setAttribute("data-alt",e),this.removeAttribute("alt"))})),c=Object(o.trim)(c+" "+(n?Object(a.getLang)("global_user_is_online_mobile"):Object(a.getLang)("global_user_is_online"))),e.setAttribute("aria-label",c)}else Object(o.each)(r,(function(){var e=Object(i.attr)(this,"data-alt")||s(this);e&&(this.setAttribute("alt",e),this.removeAttribute("data-alt"))})),e.removeAttribute("aria-label")}))}),100)}function d(){clearTimeout(cur.updateChkBoxTO),cur.updateChkBoxTO=setTimeout((function(){var e=[];Object(o.each)(["checkbox","checkbox_pic"],(function(){e=e.concat(Object(i.geByClass)(this))})),Object(o.each)(e,(function(){"DIV"!==this.tagName||this.getAttribute("role")||(this.setAttribute("role","checkbox"),this.setAttribute("aria-checked",Object(r.isChecked)(this)?"true":"false"),this.setAttribute("tabindex",0))}))}),100)}function _(){clearTimeout(cur.updateRadioBtnsTO),cur.updateRadioBtnsTO=setTimeout((function(){var e=[],t=Object(i.geByClass)("radiobtn");Object(o.each)(t,(function(){if("DIV"===this.tagName&&!this.getAttribute("role")){var t=Object(r.isChecked)(this);this.setAttribute("role","radio"),this.setAttribute("aria-checked",t?"true":"false"),this.setAttribute("tabindex",t?0:-1);var n=function(e){var t=0,n=e;for(;t<5&&n!==document;){if(n=Object(i.domPN)(n),Object(i.geByClass)("radiobtn",n).length>1)break;t++}return n}(this);~e.indexOf(n)||e.push(n)}})),Object(o.each)(e,(function(){if(!Object(i.geByClass)("on",this).length){var e=Object(i.geByClass)("radiobtn",this);e.length&&e[0].setAttribute("tabindex",0)}}))}),100)}function p(){l(),d(),_()}function h(){var e=document.getElementById("a11y_mvk_proposal");e&&e.getAttribute("aria-label")&&!e.getAttribute("role")&&(e.setAttribute("role","link"),e.style.display="block",e.classList.add("visually-hidden"),e.addEventListener("click",e=>{var t;Object(c.statlogsValueEvent)("accessibility","is_mvk_proposal_clicked",null===(t=cur)||void 0===t?void 0:t.module),setTimeout(()=>{Object(s.redirectToMVK)()},100)},{passive:!0}))}},QaDb:function(e,t,n){"use strict";var r=n("Kuth"),o=n("RjD/"),i=n("fyDq"),a={};n("Mukb")(a,n("K0xU")("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=r(a,{next:o(1,n)}),i(e,t+" Iterator")}},R5GP:function(e,t,n){"use strict";n.r(t),n.d(t,"unpackStore",(function(){return c}));var r=n("BJj/"),o=n("ERyv"),i=n("Xrg9"),a=n("t7n3");function s(e,t){if(!t)return i.default.get(e);i.default.set(e,t)}function c(e){return function(e){return!!e.get}(e)?e.get():e}t.default=function(e,t){void 0===e&&(e={}),void 0===t&&(t={});var n=Object(r.debounce)(s,300),c=Object(a.extend)({},e),u=[],l=[];return t.store&&(c=i.default.get(t.key)||c),{get:function(){return c},set:function(e){var r=this,i=Object(o.isWeirdLogging)()?function(e){try{var t={};return Error.captureStackTrace(t,e),t.stack}catch(e){return""}}(this.set):null;return e(c).then((function(e){return c=e,t.store&&n(t.key,e),r.emit(),r})).catch((function(e){return Object(o.imWeirdCatch)("store_set_catch",e,{stack:i})}))},setState:function(e){var t=this;return this.set((function(n){return n=Object(a.extend)(n,e),t.emit(),Promise.resolve(n)}))},stash:function(){u.push(c),c=Object(a.extend)({},e),this.emit()},reset:function(){c=Object(a.extend)({},e),this.emit()},unmount:function(){c={},e=!1,l=[]},pop:function(){u.length>0&&(c=u.pop(),this.emit())},emit:function(){var e=this;l.length>0&&l.forEach((function(t){return t(e)}))},subscribe:function(e){l.includes(e)||l.push(e)},unsubscribe:function(e){l=l.filter((function(t){return t!==e}))},mutate:function(e){e(c),t.store&&n(t.key,c),this.emit()}}}},RIqP:function(e,t,n){var r=n("Ijbi"),o=n("EbDI"),i=n("ZhPi"),a=n("Bnag");e.exports=function(e){return r(e)||o(e)||i(e)||a()}},RYi7:function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},RbYe:function(e,t,n){"use strict";n.r(t),n.d(t,"getFiles",(function(){return u})),n.d(t,"clipboardProcessPaste",(function(){return _})),n.d(t,"copyToClipboard",(function(){return a._copyWithFakeElement}));n("HEwt"),n("a1Th"),n("rGqo"),n("rE2o"),n("ioFf"),n("VRzm"),n("Btvt");function r(e){var t=window.getSelection();return t.removeAllRanges(),t.addRange(e),e}function o(e,t,n,o){var i=document.createRange();return i.setStart(e,t),i.setEnd(n,o),r(i)}function i(e,t){if(t=t?t+"":"",!browser.msie&&document.execCommand)document.execCommand("insertHTML",!1,t);else if(e){e.deleteContents();var n=cf(t),o=n.lastChild;e.insertNode(n),o&&((e=e.cloneRange()).setStartAfter(o),e.collapse(!0),r(e))}return e}var a=n("c8JK");function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e){var t=function(e){return e&&e.clipboardData?e.clipboardData:e&&e.originalEvent&&e.originalEvent.clipboardData?e.originalEvent.clipboardData:window.clipboardData}(e);if(!t)return[];var n=t.items;if(!n)return[];for(var r=[],o=0;o<n.length;o++)0==n[o].type.indexOf("image")&&r.push(n[o].getAsFile());return r}var l=!1,d=null;function _(e){return new Promise((t,n)=>{if(l)return cancelEvent(e),n();var r=s(function(){var e=null,t=window.getSelection();t.getRangeAt&&t.rangeCount&&(e=t.getRangeAt(0));var n=null,r=null,o=0,i=0,a=document.activeElement;return e&&("selectionStart"in a?(n=a,r=a,o=a.selectionStart,i=a.selectionEnd):t.rangeCount&&(n=e.startContainer,r=e.endContainer,o=e.startOffset,i=e.endOffset)),[e,n,o,r,i]}(),5),a=r[0],c=r[1],u=r[2],_=r[3],p=r[4];if(a){if("paste"===e.type){var h=e.clipboardData||e.originalEvent&&e.originalEvent.clipboardData;if(h&&h.types&&h.getData){cancelEvent(e),l=!0;var f=h.getData("text/html")||clean(h.getData("text/plain"))||"";return t([f,e=>{i(a,e),l=!1}])}for(var m=cf(),g=e.target||window.event.srcElement;g.firstChild;)m.appendChild(g.firstChild);return new Promise(e=>setTimeout(()=>{var t=g.innerHTML||"";g.innerHTML="",g.appendChild(m),e([t,e=>{i(a=o(c,u,_,p),e),l=!1}])},0))}if("beforepaste"===e.type)return l=!0,function(){if(!d){var e=ge("utils");d=ce("div",{},{width:"10px",height:"10px",overflow:"hidden"}),attr(d,"contenteditable","true"),e.appendChild(d)}}(),d.focus(),void(d.onpaste=()=>{setTimeout(()=>{var e=d.innerHTML||"";d.innerHTML="",delete d.onpaste,t([e,e=>{i(a=o(c,u,_,p),e),l=!1}])},0)})}return n()})}},Rcri:function(e,t,n){"use strict";n.r(t),n.d(t,"Hint",(function(){return a}));var r=n("4+be"),o=n("Egk5"),i=n("3oLO"),a=function(){function e(e,t){this.type=e,this.id=t.id,this.title=t.title,this.text=t.text,this.hintId=t.hintId,this.hideHash=t.hideHash,this.actions=t.actions,t.currentStep&&t.totalSteps&&(this.tutorialSteps={current:t.currentStep,total:t.totalSteps})}return e.prototype.hide=function(){this.onHide&&this.onHide(),i.ajax.post("al_index.php",{act:"help_hints_hide",hint_id:this.hintId,hash:this.hideHash})},e.prototype.generateContent=function(){var e=this,t=document.createElement("div");if(this.title&&(t.innerHTML+='<div class="CatalogHint__title">'+this.title+"</div>"),this.text&&(t.innerHTML+='<div class="CatalogHint__text">'+this.text+"</div>"),this.actions){var n=document.createElement("div");n.classList.add("CatalogHint__actions");var i=this.actions.map((function(t){var n=document.createElement("a");switch(n.classList.add("flat_button"),t.type){case"open_url":n.href=t.url,n.onclick=function(n){window.nav.go(t.url),e.hide(),Object(o.cancelEvent)(n)};break;case"switch_section":n.onclick=function(r){Object(o.cancelEvent)(r),window.currentAudioPage(n).catalogController.currentSection.switchSection(t.targetSectionId),e.hide()}}return n.innerHTML=t.label,n}));if(n.append.apply(n,i),this.tutorialSteps){var a=document.createElement("div");a.classList.add("CatalogHint__tutorialSteps"),a.innerHTML=Object(r.langStr)(Object(r.getLang)("audio_onboarding_tutorial_progress"),"step",this.tutorialSteps.current,"total_steps",this.tutorialSteps.total),n.append(a)}t.append(n)}return t},e}()},"RjD/":function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"S/j/":function(e,t,n){var r=n("vhPU");e.exports=function(e){return Object(r(e))}},S0WU:function(e,t,n){"use strict";n.r(t),n.d(t,"EventBus",(function(){return o}));var r=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r},o=function(){function e(){this.subscriptions={}}return e.prototype.subscribe=function(e,t){var n=this;return Array.isArray(e)&&e.forEach((function(e){return n.subscribe(e,t)})),this.subscriptions[e]||(this.subscriptions[e]=[]),this.subscriptions[e].push(t),{unsubscribe:function(){return n.unsubscribe(e,t)}}},e.prototype.unsubscribe=function(e,t){if(this.subscriptions[e]){var n=this.subscriptions[e].indexOf(t);n>=0&&this.subscriptions[e].splice(n,1)}},e.prototype.emit=function(e){for(var t=this,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];this.precheck&&!this.precheck.apply(this,r([e],n))||(this.onAnyCallBack&&setTimeout((function(){return t.onAnyCallBack.apply(t,r([e],n))})),this.subscriptions[e]&&this.subscriptions[e].forEach((function(e){return setTimeout((function(){return e.apply(void 0,n)}))})))},e}()},"S6+Z":function(e,t,n){"use strict";n.r(t),n.d(t,"emojiRegex",(function(){return r})),n.d(t,"skinToneModifierRegex",(function(){return o})),n.d(t,"EMOJI_PREFIXED_REPLACES",(function(){return i})),n.d(t,"EMOJI_REPLACES",(function(){return a})),n.d(t,"EMOJI_HINTS",(function(){return s}));var r=()=>/(?:\uD83C\uDFF4)(?:(?:\uDB40\uDC67)(?:\uDB40\uDC62)(?:(?:\uDB40\uDC65)(?:\uDB40\uDC6E)(?:\uDB40\uDC67)|(?:\uDB40\uDC77)(?:\uDB40\uDC6C)(?:\uDB40\uDC73)|(?:\uDB40\uDC73)(?:\uDB40\uDC63)(?:\uDB40\uDC74))(?:\uDB40\uDC7F)|\u200D\u2620\uFE0F?)|(?:\uD83D\uDC69)\u200D(?:\uD83D\uDC69)\u200D(?:(?:\uD83D\uDC66)\u200D(?:\uD83D\uDC66)|(?:\uD83D\uDC67)\u200D(?:\uD83D[\uDC66\uDC67]))|(?:\uD83D\uDC68)(?:\u200D(?:\u2764\uFE0F?\u200D(?:(?:\uD83D\uDC8B)\u200D)?(?:\uD83D\uDC68)|(?:\uD83D[\uDC68\uDC69])\u200D(?:(?:\uD83D\uDC66)\u200D(?:\uD83D\uDC66)|(?:\uD83D\uDC67)\u200D(?:\uD83D[\uDC66\uDC67]))|(?:\uD83D\uDC66)\u200D(?:\uD83D\uDC66)|(?:\uD83D\uDC67)\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDB0-\uDDB3]))|(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDB0-\uDDB3]))|(?:\uD83D\uDC69)\u200D(?:\u2764\uFE0F?\u200D(?:(?:\uD83D\uDC8B)\u200D(?:\uD83D[\uDC68\uDC69])|(?:\uD83D[\uDC68\uDC69]))|(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDB0-\uDDB3]))|(?:\uD83D\uDC69)\u200D(?:\uD83D\uDC66)\u200D(?:\uD83D\uDC66)|(?:(?:\uD83D\uDC41)\uFE0F?\u200D(?:\uD83D\uDDE8)|(?:\uD83D\uDC69)(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|(?:\uD83D\uDC68)(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|(?:(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)\uFE0F?|(?:\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF]))\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDD6-\uDDDD])(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\u200D[\u2640\u2642])|(?:\uD83D\uDC69)\u200D[\u2695\u2696\u2708])\uFE0F?|(?:\uD83D\uDC69)\u200D(?:\uD83D\uDC67)\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC69)\u200D(?:\uD83D\uDC69)\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC68)(?:\u200D(?:(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D[\uDC66\uDC67]))|(?:\uD83C[\uDFFB-\uDFFF]))|(?:\uD83C\uDFF3)\uFE0F?\u200D(?:\uD83C\uDF08)|(?:\uD83D\uDC69)\u200D(?:\uD83D\uDC67)|(?:\uD83D\uDC69)(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDB0-\uDDB3])|(?:\uD83D\uDC69)\u200D(?:\uD83D\uDC66)|(?:\uD83C\uDDF6)(?:\uD83C\uDDE6)|(?:\uD83C\uDDFD)(?:\uD83C\uDDF0)|(?:\uD83C\uDDF4)(?:\uD83C\uDDF2)|(?:\uD83D\uDC69)(?:\uD83C[\uDFFB-\uDFFF])|(?:\uD83C\uDDED)(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|(?:\uD83C\uDDEC)(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|(?:\uD83C\uDDEA)(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|(?:\uD83C\uDDE8)(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|(?:\uD83C\uDDF2)(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|(?:\uD83C\uDDF3)(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|(?:\uD83C\uDDFC)(?:\uD83C[\uDDEB\uDDF8])|(?:\uD83C\uDDFA)(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|(?:\uD83C\uDDF0)(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|(?:\uD83C\uDDEF)(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|(?:\uD83C\uDDF8)(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|(?:\uD83C\uDDEE)(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|(?:\uD83C\uDDFF)(?:\uD83C[\uDDE6\uDDF2\uDDFC])|(?:\uD83C\uDDEB)(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|(?:\uD83C\uDDF5)(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|(?:\uD83C\uDDE9)(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|(?:\uD83C\uDDF9)(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|(?:\uD83C\uDDE7)(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|[#\*0-9]\uFE0F?\u20E3|(?:\uD83C\uDDF1)(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|(?:\uD83C\uDDE6)(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|(?:\uD83C\uDDF7)(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|(?:\uD83C\uDDFB)(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|(?:\uD83C\uDDFE)(?:\uD83C[\uDDEA\uDDF9])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1F\uDD30-\uDD36\uDDB5\uDDB6\uDDD1-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDEEB\uDEEC\uDEF4-\uDEF9]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD70\uDD73-\uDD76\uDD7A\uDD7C-\uDDA2\uDDB0-\uDDB9\uDDC0-\uDDC2\uDDD0-\uDDFF])|(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEF9]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD70\uDD73-\uDD76\uDD7A\uDD7C-\uDDA2\uDDB0-\uDDB9\uDDC0-\uDDC2\uDDD0-\uDDFF])\uFE0F?|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC69\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDDB5\uDDB6\uDDB8\uDDB9\uDDD1-\uDDDD])/g,o=/\uFE0F?\uD83C[\uDFFB-\uDFFF]/,i={e29da4:/(\s|^)([0OО]:\))([\s\.,]|$)/g,f09f9887:/(\s|^)(;-\)+)([\s\.,]|$)/g,f09f9889:/(\s|^)([XХxх]-?D)([\s\.,]|$)/g,f09f9886:/(\s|^)(B-\))([\s\.,]|$)/g,f09f988e:/(\s|^)(3-\))([\s\.,]|$)/g,f09f988c:/(\s|^)(&gt;\()([\s\.,]|$)/g,f09f98a0:/(\s|^)(;[oоOО])([\s\.,]|$)/g,f09f98b0:/(\s|^)(8\|)([\s\.,]|$)/g,f09f98b3:/(\s|^)(8-?[oоOО])([\s\.,]|$)/g,f09f98b2:/(\s|^)(8-\))([\s\.,]|$)/g,f09f988d:/(\s|^)(:[XХ])([\s\.,]|$)/g,f09f98b7:/(\s|^)(:[oоOО])([\s\.,]|$)/g,f09f98a8:/(\s|^)(&lt;3)([\s\.,]|$)/g},a={f09f988a:/(:-\))([\s\.,]|$)/g,f09f9883:/(:-D)([\s\.,]|$)/g,f09f989c:/(;-[PР])([\s\.,]|$)/g,f09f988b:/(:-[pр])([\s\.,]|$)/g,f09f9892:/(:-\()([\s\.,]|$)/g,e298ba:/(:-?\])([\s\.,]|$)/g,f09f988f:/(;-\])([\s\.,]|$)/g,f09f9894:/(3-?\()([\s\.,]|$)/g,f09f98a2:/(:&#039;\()([\s\.,]|$)/g,f09f98ad:/(:_\()([\s\.,]|$)/g,f09f98a9:/(:\(\()([\s\.,]|$)/g,f09f9890:/(:\|)([\s\.,]|$)/g,f09f98a1:/(&gt;\(\()([\s\.,]|$)/g,f09f989a:/(:-\*)([\s\.,]|$)/g,f09f9888:/(\}:\))([\s\.,]|$)/g,f09f918d:/(:like:)([\s\.,]|$)/g,f09f918e:/(:dislike:)([\s\.,]|$)/g,e2989d:/(:up:)([\s\.,]|$)/g,e29c8c:/(:v:)([\s\.,]|$)/g,f09f918c:/(:ok:|:ок:)([\s\.,]|$)/g},s={e29da4:[0,"<3"],f09f988a:[1,":-)"],f09f9883:[2,":-D"],f09f9889:[3,";-)"],f09f9886:[4,"xD"],f09f989c:[5,";-P"],f09f988b:[6,":-p"],f09f988d:[7,"8-)"],f09f988e:[8,"B-)"],f09f9892:[9,":-("],f09f988f:[10,";-]"],f09f9894:[11,"3("],f09f98a2:[12,":'("],f09f98ad:[13,":_("],f09f98a9:[14,":(("],f09f98a8:[15,":o"],f09f9890:[16,":|"],f09f988c:[17,"3-)"],f09f98a0:[18,">("],f09f98a1:[19,">(("],f09f9887:[20,"O:)"],f09f98b0:[21,";o"],f09f98b3:[22,"8|"],f09f98b2:[23,"8o"],f09f98b7:[24,":X"],f09f989a:[25,":-*"],f09f9888:[26,"}:)"],f09f918d:[27,":like:"],f09f918e:[28,":dislike:"],e2989d:[29,":up:"],e29c8c:[30,":v:"],f09f918c:[31,":ok:"]}},SRfc:function(e,t,n){"use strict";var r=n("y3w9"),o=n("ne8i"),i=n("A5AN"),a=n("Xxuz");n("IU+Z")("match",1,(function(e,t,n,s){return[function(n){var r=e(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,r):new RegExp(n)[t](String(r))},function(e){var t=s(n,e,this);if(t.done)return t.value;var c=r(e),u=String(this);if(!c.global)return a(c,u);var l=c.unicode;c.lastIndex=0;for(var d,_=[],p=0;null!==(d=a(c,u));){var h=String(d[0]);_[p]=h,""===h&&(c.lastIndex=i(u,o(c.lastIndex),l)),p++}return 0===p?null:_}]}))},SlkY:function(e,t,n){var r=n("m0Pp"),o=n("H6hf"),i=n("M6Qj"),a=n("y3w9"),s=n("ne8i"),c=n("J+6e"),u={},l={};(t=e.exports=function(e,t,n,d,_){var p,h,f,m,g=_?function(){return e}:c(e),v=r(n,d,t?2:1),b=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(i(g)){for(p=s(e.length);p>b;b++)if((m=t?v(a(h=e[b])[0],h[1]):v(e[b]))===u||m===l)return m}else for(f=g.call(e);!(h=f.next()).done;)if((m=o(f,v,h.value,t))===u||m===l)return m}).BREAK=u,t.RETURN=l},Syzc:function(e,t,n){"use strict";n.r(t),n.d(t,"plainpost",(function(){return p})),n.d(t,"request",(function(){return h})),n.d(t,"AjaxCancellationToken",(function(){return _}));n("HEwt"),n("a1Th"),n("rE2o"),n("ioFf"),n("rGqo"),n("VRzm"),n("Btvt"),n("KKXr");for(var r=n("cGUQ"),o=(n("nCnK"),new Uint32Array(256)),i=256;i--;){for(var a=i,s=8;s--;)a=1&a?3988292384^a>>>1:a>>>1;o[i]=a}var c=n("t7n3"),u=n("W9Tc");function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}class _{_setCancelCb(e){this._cancel=e}cancel(){this._cancel&&this._cancel()}}function p(e,t,n,o,i,a,s){var c=arguments.length>7&&void 0!==arguments[7]&&arguments[7],d=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;if(t.act&&Object(u.partConfigEnabled)("force_act_in_get_params")){var _={},p=e,f="";if(e.includes("?")){var m=e.split("?"),g=l(m,2);p=g[0],f=g[1],_=Object(r.fromQueryString)(f)}_.act=t.act,e=`${p}?${Object(r.toQueryString)(_,!0)}`}var v=h(e,t,{xhrOptions:a,sortQueryStringParams:s&&!s.noSort,headers:s&&s.headers,noExtraHeaders:c,urlOnly:i,cancellationToken:s&&s.cancellationToken,logger:d}),b=v._getXhr();return v.then(e=>n&&n(e.data,b.status)).catch(e=>o&&o(e,b.status)),b}function h(e,t,n){var i,a=n.xhrOptions,s=n.headers,u=void 0===s?null:s,l=n.urlOnly,d=void 0!==l&&l,_=n.sortQueryStringParams,p=void 0===_||_,h=n.noExtraHeaders,f=void 0!==h&&h,m=n.cancellationToken,g=void 0===m?null:m,v=n.logger,b=void 0===v?null:v;b&&(i=function(e){for(var t=-1,n=0,r=e.length;n<r;n++)t=t>>>8^o[255&t^e[n]];return(-1^t)>>>0}(e+JSON.stringify(t)),b(`Initialized request #${i} with URL ${e} and query ${JSON.stringify(t)}`));var y=new XMLHttpRequest;g&&g._setCancelCb(()=>{b&&b("Aborting request #"+i),y.abort()});var E=new Promise((function(n,o){var s="string"!=typeof t?Object(r.toQueryString)(t,!p):t;y.onreadystatechange=function(){if(y.readyState===XMLHttpRequest.DONE)if(b&&b(`Request readyState -> DONE with status ${y.status} #${i}`),y.status>=200&&y.status<300)try{n({data:y.responseText,code:y.status}),b&&b("Success handler finished for request #"+i)}catch(e){b&&b("Success handler failed for request #"+i),o({data:y.responseText,code:-1}),b&&b(`Failure handler finished for request #${i} [1]`)}else o({data:y.responseText,url:e,act:t.act,code:y.status}),b&&b(`Failure handler finished for request #${i} [2]`)};try{b&&b("Starting request #"+i),y.open("POST",e,!0)}catch(e){b&&b(`Request #${i} failed`),o({data:e,code:-1}),b&&b(`Failure handler finished for request #${i} [3]`)}u&&Object.keys(u).forEach(e=>{y.setRequestHeader(e,u[e])}),a&&Object(c.each)(a,(function(e,t){y[e]=t})),d||(y.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),f||y.setRequestHeader("X-Requested-With","XMLHttpRequest")),b&&b("Sending data for request #"+i),y.send(s)}));return E._getXhr=()=>y,E}},T3FL:function(e,t,n){"use strict";n.r(t),n.d(t,"navigationStat",(function(){return i}));var r=n("FbVm");n.d(t,"NavigationProductionStatEventTypes",(function(){return r.NavigationProductionStatEventTypes}));var o=new r.ProductionStatCollector,i=new r.NavigationStatCollector(o)},TGUg:function(e,t,n){"use strict";function r(e,t){var n="";return e.forEach((function(r,o){var i="/audio?performer=1&q="+encodeURIComponent(r.name),a=window.getWebHost?window.getWebHost():"";r.id&&(i="/artist/"+r.id),n+=t?`<a class="artist_link" href="${a}${i}">${r.name}</a>`:r.name,o<e.length-1&&(n+=", ")})),n}n.r(t),n.d(t,"getAudioArtistsString",(function(){return r}))},TmuT:function(e,t,n){"use strict";n.r(t),n.d(t,"BaseController",(function(){return _}));var r,o=n("kefJ"),i=n("Rcri"),a=n("k487"),s=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=function(){return(c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},u=function(e){function t(t,n){var r=this,i=n,s="center",u="top";n.classList.contains("CatalogBlock__layout--header")&&(i=n.querySelector(".CatalogBlock__title")||n,s="left"),n.classList.contains("MusicAuthor__follow_btn")&&(s="right",u="bottom"),r=e.call(this,o.HintType.Tooltip,t)||this;var l=c({force_side:u,align:s,offset_left:0,offset_top:0,width:"250px"},t);return r.tooltip=new a.default(i,{content:r.title||r.text||"",cls:"feature_intro_tt "+r.id+" CatalogTooltip",forceSide:l.force_side,align:l.align,width:l.width,offset:[l.offset_left,l.offset_top],autoShow:!1,onHide:function(){return r.hide()}}),r}return s(t,e),t.prototype.show=function(){this.tooltip.show()},t}(i.Hint),l=n("jSWr"),d=function(){return(d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},_=function(){function e(){}return e.prototype.fetchNext=function(){return this.fetchSection(this.id,this.nextFrom)},e.prototype.fetchSection=function(e,t,n){var r=this;return void 0===n&&(n={}),this.fetchInProgress=!0,new Promise((function(o,i){var a=d({section_id:e,start_from:t},n);window.nav.objLoc.claim&&(a.claim=window.nav.objLoc.claim),window.ajax.post("al_audio.php?act=load_catalog_section",a,{onDone:function(e,t,n){r.fetchInProgress=!1,o({blocks:e,data:t,blockItems:n})},onFail:function(){return i(),r.fetchInProgress=!1,!0}})}))},e.prototype.getId=function(){return this.id},e.getHint=function(e,t){switch(t.type){case o.HintType.Tooltip:return new u(t,e);case o.HintType.Highlight:return new l.HighlightHint(t,e)}return null},e}()},TxR4:function(e,t,n){"use strict";n.r(t),n.d(t,"emojiSymbolToByteHex",(function(){return o})),n.d(t,"emojiByteHexToSymbol",(function(){return i})),n.d(t,"emojiRemoveSkinToneModifiers",(function(){return a}));n("KKXr"),n("pIFo");var r=n("S6+Z");function o(e){return encodeURIComponent(e.replace(/\uFE0F/gi,"")).replace(/%/gi,"").toLowerCase()}function i(e){var t,n=e.length%2==1,r=n?e.slice(0,1):"",o=n?e.slice(1):e,i="";try{i=decodeURIComponent("%"+(t=o,t.split("").reduce((e,t,n)=>e+t+((n+1)%2==0?" ":""),"").trim().split(/\s+/)).join("%"))}catch(e){}return r+i}function a(e){return e.replace(Object(r.emojiRegex)(),s)}function s(e){return e.replace(r.skinToneModifierRegex,"")}},UExd:function(e,t,n){var r=n("nh4g"),o=n("DVgA"),i=n("aCFj"),a=n("UqcF").f;e.exports=function(e){return function(t){for(var n,s=i(t),c=o(s),u=c.length,l=0,d=[];u>l;)n=c[l++],r&&!a.call(s,n)||d.push(e?[n,s[n]]:s[n]);return d}}},Ugos:function(e,t,n){"use strict";var r,o,i=n("C/va"),a=RegExp.prototype.exec,s=String.prototype.replace,c=a,u=(r=/a/,o=/b*/g,a.call(r,"a"),a.call(o,"a"),0!==r.lastIndex||0!==o.lastIndex),l=void 0!==/()??/.exec("")[1];(u||l)&&(c=function(e){var t,n,r,o,c=this;return l&&(n=new RegExp("^"+c.source+"$(?!\\s)",i.call(c))),u&&(t=c.lastIndex),r=a.call(c,e),u&&r&&(c.lastIndex=c.global?r.index+r[0].length:t),l&&r&&r.length>1&&s.call(r[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)})),r}),e.exports=c},UqcF:function(e,t){t.f={}.propertyIsEnumerable},V9bF:function(e,t,n){"use strict";function r(e){return e>0&&e<2e9}function o(e){return e>2e9}n.r(t),n.d(t,"isChatPeer",(function(){return o})),n.d(t,"isUserPeer",(function(){return r}))},VBqm:function(e,t,n){"use strict";n.r(t),n.d(t,"wrapAudioPlay",(function(){return r}));n("VRzm"),n("Btvt");function r(e){try{return e.play()||Promise.resolve()}catch(e){return Promise.reject(e)}}},VRzm:function(e,t,n){"use strict";var r,o,i,a,s=n("LQAc"),c=n("dyZX"),u=n("m0Pp"),l=n("I8a+"),d=n("XKFU"),_=n("0/R4"),p=n("2OiF"),h=n("9gX7"),f=n("SlkY"),m=n("69bn"),g=n("GZEu").set,v=n("gHnn")(),b=n("pbhE"),y=n("nICZ"),E=n("ol8x"),w=n("vKrd"),O=c.TypeError,C=c.process,T=C&&C.versions,S=T&&T.v8||"",D=c.Promise,P="process"==l(C),k=function(){},A=o=b.f,I=!!function(){try{var e=D.resolve(1),t=(e.constructor={})[n("K0xU")("species")]=function(e){e(k,k)};return(P||"function"==typeof PromiseRejectionEvent)&&e.then(k)instanceof t&&0!==S.indexOf("6.6")&&-1===E.indexOf("Chrome/66")}catch(e){}}(),x=function(e){var t;return!(!_(e)||"function"!=typeof(t=e.then))&&t},j=function(e,t){if(!e._n){e._n=!0;var n=e._c;v((function(){for(var r=e._v,o=1==e._s,i=0,a=function(t){var n,i,a,s=o?t.ok:t.fail,c=t.resolve,u=t.reject,l=t.domain;try{s?(o||(2==e._h&&R(e),e._h=1),!0===s?n=r:(l&&l.enter(),n=s(r),l&&(l.exit(),a=!0)),n===t.promise?u(O("Promise-chain cycle")):(i=x(n))?i.call(n,c,u):c(n)):u(r)}catch(e){l&&!a&&l.exit(),u(e)}};n.length>i;)a(n[i++]);e._c=[],e._n=!1,t&&!e._h&&M(e)}))}},M=function(e){g.call(c,(function(){var t,n,r,o=e._v,i=L(e);if(i&&(t=y((function(){P?C.emit("unhandledRejection",o,e):(n=c.onunhandledrejection)?n({promise:e,reason:o}):(r=c.console)&&r.error&&r.error("Unhandled promise rejection",o)})),e._h=P||L(e)?2:1),e._a=void 0,i&&t.e)throw t.v}))},L=function(e){return 1!==e._h&&0===(e._a||e._c).length},R=function(e){g.call(c,(function(){var t;P?C.emit("rejectionHandled",e):(t=c.onrejectionhandled)&&t({promise:e,reason:e._v})}))},B=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),j(t,!0))},N=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw O("Promise can't be resolved itself");(t=x(e))?v((function(){var r={_w:n,_d:!1};try{t.call(e,u(N,r,1),u(B,r,1))}catch(e){B.call(r,e)}})):(n._v=e,n._s=1,j(n,!1))}catch(e){B.call({_w:n,_d:!1},e)}}};I||(D=function(e){h(this,D,"Promise","_h"),p(e),r.call(this);try{e(u(N,this,1),u(B,this,1))}catch(e){B.call(this,e)}},(r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n("3Lyj")(D.prototype,{then:function(e,t){var n=A(m(this,D));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=P?C.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&j(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new r;this.promise=e,this.resolve=u(N,e,1),this.reject=u(B,e,1)},b.f=A=function(e){return e===D||e===a?new i(e):o(e)}),d(d.G+d.W+d.F*!I,{Promise:D}),n("fyDq")(D,"Promise"),n("elZq")("Promise"),a=n("g3g5").Promise,d(d.S+d.F*!I,"Promise",{reject:function(e){var t=A(this);return(0,t.reject)(e),t.promise}}),d(d.S+d.F*(s||!I),"Promise",{resolve:function(e){return w(s&&this===a?D:this,e)}}),d(d.S+d.F*!(I&&n("XMVh")((function(e){D.all(e).catch(k)}))),"Promise",{all:function(e){var t=this,n=A(t),r=n.resolve,o=n.reject,i=y((function(){var n=[],i=0,a=1;f(e,!1,(function(e){var s=i++,c=!1;n.push(void 0),a++,t.resolve(e).then((function(e){c||(c=!0,n[s]=e,--a||r(n))}),o)})),--a||r(n)}));return i.e&&o(i.v),n.promise},race:function(e){var t=this,n=A(t),r=n.reject,o=y((function(){f(e,!1,(function(e){t.resolve(e).then(n.resolve,r)}))}));return o.e&&r(o.v),n.promise}})},VTer:function(e,t,n){var r=n("g3g5"),o=n("dyZX"),i=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n("LQAc")?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},Vd3H:function(e,t,n){"use strict";var r=n("XKFU"),o=n("2OiF"),i=n("S/j/"),a=n("eeVq"),s=[].sort,c=[1,2,3];r(r.P+r.F*(a((function(){c.sort(void 0)}))||!a((function(){c.sort(null)}))||!n("LyE8")(s)),"Array",{sort:function(e){return void 0===e?s.call(i(this)):s.call(i(this),o(e))}})},W0P9:function(e,t,n){"use strict";n.r(t),n.d(t,"log",(function(){return i})),n.d(t,"warn",(function(){return a})),n.d(t,"error",(function(){return s})),n.d(t,"debug",(function(){return c}));var r=n("W9Tc");function o(){return window.console&&Object(r.partConfigEnabled)("js_console_logs")}function i(){o()&&window.console.log&&window.console.log(...arguments)}function a(){o()&&(window.console.warn?window.console.warn(...arguments):i(...arguments))}function s(){o()&&(window.console.error?window.console.error(...arguments):i(...arguments))}function c(){o()&&(window.console.debug?window.console.debug(...arguments):i(...arguments))}},W0fz:function(e,t,n){"use strict";n.r(t),n.d(t,"isPodcast",(function(){return o}));var r=n("uk5P");function o(e){if(!e)return!1;var t=isObject(e)?e.extra:e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_EXTRA];return isObject(t)||(t=JSON.parse(t||"{}")),!!t.podcast}},W8MJ:function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},W9Tc:function(e,t,n){"use strict";n.r(t),n.d(t,"partConfigEnabled",(function(){return o})),n.d(t,"getTestGroup",(function(){return i})),n.d(t,"calculateTimeOffsets",(function(){return a}));var r=n("J8bf");function o(e){var t=(window.vk||{}).pe;return!!(void 0===t?{}:t)[e]}function i(e){var t=(window.vk||{}).ex;return(void 0===t?{}:t)[e]||null}function a(){var e=window.vk.ts;if(e&&!window.browser.opera_mobile){var t=new Date,n=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds())/1e3-e;n-=10800,n=(n/=60).toFixed(0),(n*=60)<-55800?n+=86400:n>37800&&(n-=86400);var o=0,i=Math.abs(n);[-12,-11,-10,-9.5,-9,-8,-7,-6,-5,-4.5,-4,-3.5,-3,-2,-1,0,1,2,3,3.5,4,4.5,5,5.5,5.75,6,6.5,7,8,8.75,9,9.5,10,10.5,11,12,12.75,13,14].forEach(e=>{var t=Math.round(3600*(e-3)),r=Math.abs(n-t);r<i&&(i=r,o=t)});var a=Object(r.getCookie)("remixdt");return void 0!==a&&intval(a)===o||Object(r.setCookie)("remixdt",o,365),o}return 0}},WbBG:function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},WfnU:function(e,t,n){"use strict";n.r(t);var r,o=n("q1tI"),i=n("xt6h"),a=n("IrTF"),s=n("BiHW"),c=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=function(){return(u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},l=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.loading,r=e.children,c=l(e,["className","loading","children"]),d=["primary","positive"].some((function(e){return e===c.appearance}));return o.createElement(s.default,u({},c,{className:Object(i.classNames)("ButtonWithProgress",{"ButtonWithProgress--loading":n},t)}),o.createElement("span",{className:"ButtonWithProgress__content"},r),n&&o.createElement(a.default,{inverted:d,className:"ButtonWithProgress__progress"}))},t.defaultProps={appearance:"primary",size:"m",wide:!1,disabled:!1,loading:!1},t}(o.Component);t.default=d},WkPL:function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},XAlg:function(e,t,n){"use strict";n.r(t),n.d(t,"donutStats",(function(){return s}));var r=n("FbVm"),o=n("r0fY"),i=n("llQL"),a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},s=new(function(){function e(){this.productionStatCollector=new r.ProductionStatCollector,this.actionStatCollector=new r.ActionStatCollector(this.productionStatCollector),this.navStatCollector=new r.NavigationStatCollector(this.productionStatCollector)}return e.prototype.logEventAction=function(t){return this.actionStatCollector.logEvent(e.createDonutActionStatEvent(t))},e.prototype.logEventActionView=function(e){return this.logEventAction(a(a({},e),{event_type:i.DonutActionEventType.PAYMENT_FORM}))},e.prototype.logEventDescriptionClick=function(t){this.navStatCollector.logEvent(a(a({},e.createNavStatEventBase()),e.createDescriptionClickStatEvent(t)))},e.createDonutActionStatEvent=function(e){var t;return(t={type:o.ActionProductionStatEventTypes.TYPE_DONUT_PAYMENT_ITEM})[o.ActionProductionStatEventTypes.TYPE_DONUT_PAYMENT_ITEM]=e,t},e.createNavStatEventBase=function(){return{screen:"wall",subtype:o.NavigationProductionStatEventTypes.GO}},e.createDescriptionClickStatEvent=function(t){var n;return(n={item:e.processClickParamsToEventItem(t),type:o.NavigationProductionStatEventTypes.TYPE_DONUT_DESCRIPTION_NAV_ITEM})[o.NavigationProductionStatEventTypes.TYPE_DONUT_DESCRIPTION_NAV_ITEM]={},n},e.processClickParamsToEventItem=function(e){return{type:o.EventItemType.BROWSER,owner_id:e.ownerId,track_code:e.trackCode}},e}())},XBHu:function(e,t,n){"use strict";n.r(t),n.d(t,"AudioAds",(function(){return a}));n("a1Th"),n("Btvt");var r=n("lkNA"),o=n("rEJs"),i=n("W0fz");class a{constructor(e,t,n){this._isPlaying=!1,this._adsCurrentProgress=0,this._adman=null,this._admanLoaded=!1,this._adEvents=[],this.player=e||{},this.playerVersion=t||null,this._startAdsTO=null,this._adsConfig=null,this._duration=0,this.isMvk=Boolean(n),this.adsStatUrl=this.isMvk?"audio":"al_audio.php"}isPlaying(){return this._isPlaying}setAdsConfig(e){this._adsConfig=e}getCurrentProgress(){return this._adsCurrentProgress}getDuration(){return this._duration}loadAdman(e){var t=t=>e&&e(t);if(this._admanLoaded)t();else{var n=0;Object(r.loadScript)(a.ADMAN_SRC,{onLoad:()=>{this._admanLoaded=!0,t()},onError:()=>{window.abp?(this._admanLoaded=!0,t()):(3===(n+=1)&&(this._admanLoaded=!0),t("script_load_fail"))}})}}_fetchAd(e,t,n,r,i){this.loadAdman(c=>{if(!window.AdmanHTML)return this._sendEvent("no_adman",t,a.AD_TYPE,c),r&&r();this._adman=new AdmanHTML;var u=this._adsConfig||vk.audioAdsConfig||window.audioAdsConfig,l={_SITEID:276,ver:251116,vk_id:vk.id,duration:e.duration,content_id:s(e.ownerId,e.id),vk_catid:a.CAT_IDS[t]||a.CAT_IDS.other,sign:u.sign||""};extend(l,e.ads||{}),nav.objLoc&&nav.objLoc.preview&&(l.preview=intval(nav.objLoc.preview)),cur.adsPreview&&(l.preview=1,l.vk_id=398724832),this._adman.setDebug(!!l.preview),this._adman.onError(()=>r&&r()),this._adman.onReady(()=>{if(this._adman){var e=this._adman.getBannersForSection(a.AD_TYPE);e&&e.length?"statistics"===e[0].type?(this._play(!0,t),r&&r()):(this._sendEvent("received",t),n?(this._sendEvent("rejected",t,a.AD_TYPE,i),this.deinit(),r&&r()):(this._sendEvent("ready",t),this.player.notify(o.events.AD_READY),this._play(!1,t,r))):(n||this._sendEvent("not_received",t),r&&r())}}),this._adman.init({slot:3514,wrapper:this.isMvk?ce("div"):se("<div></div>"),params:l,browser:{adBlock:!!window.abp,mobile:!1}}),this._sendEvent("requested",t)})}_sendEvent(e,t,n,r){var o=n?"/"+n:"",i=r?"/"+r:"";this._adEvents.push(e+"/"+t+o+i),clearTimeout(this._adEventDelay),this._adEventDelay=setTimeout(()=>{ajax.post(this.adsStatUrl,{act:"ad_event",events:this._adEvents.join(","),v:this.playerVersion,abp:intval(window.abp)},{onFail:()=>!0}),this._adEvents=[]},500)}_play(e,t,n){this._adman.onCompleted(()=>{this.deinit(!0),e?this._sendEvent("statistics",t):(this.player.notify(o.events.PROGRESS,0),this.player.notify(o.events.AD_COMPLETED),this._isPlaying=!1,this._adsCurrentProgress=0,this._sendEvent("completed",t),window.setDocumentTitle&&window.setDocumentTitle(this._adsPrevTitle),n&&n())}),this._adman.onStarted(()=>{e||(this.player.setIsPlaying(!0),this.player.notify(o.events.PLAY),this.player.notify(o.events.PROGRESS,0),this.player.notify(o.events.AD_STARTED),this.updateVolume(),this._sendEvent("started",t),window.statlogsValueEvent&&statlogsValueEvent("audio_web_ad_link","show"))}),this._adman.onPaused(()=>{this.player.setIsPlaying(!1),this.player.notify(o.events.PAUSE)}),this._adman.onPlayed(()=>{this.player.setIsPlaying(!0),this.player.notify(o.events.PLAY)});var r=[.25,.5,.75];if(this._adman.onTimeRemained(e=>{this._duration=isNaN(e.duration)?0:e.duration,this._adsCurrentProgress=(isNaN(e.percent)?0:e.percent)/100,this.player.notify(o.events.PROGRESS,this._adsCurrentProgress,this._duration),each(r,(e,n)=>{if(this._adsCurrentProgress>=n)return r.shift(),this._sendEvent("progress_"+intval(100*n),t),!1})}),this._adman.start(a.AD_TYPE),e)return n&&n();this._isPlaying=!0,this._adsPrevTitle=document.title,this.isMvk||setDocumentTitle(getLang("global_audio_ad"))}updateVolume(){this._adman&&this._adman.setVolume(.7*this.player.getVolume())}deinit(e){this._adman=null,!e&&this.player.notify(o.events.AD_DEINITED)}pause(){this._adman&&(this.player.setIsPlaying(!1),this._adman.pause())}stop(){this._adman&&(this.player.setIsPlaying(!1),this._adman.stop())}resume(){this._adman&&(this.player.setIsPlaying(!0),this._adman.resume(),this.player.notify(o.events.PLAY))}checkPlay(e,t){var n=this.player._getPlayingContextSection(),r=this._isAllowed(e),o=r.type,i=r.reason,s=()=>t&&t();switch(o){case a.ALLOW_ALLOWED:this._fetchAd(e,n,!1,s);break;case a.ALLOW_DISABLED:s();break;case a.ALLOW_REJECT:this._fetchAd(e,n,!0,!1,i),s()}}_isAllowed(e){if(vk.widget)return{type:a.ALLOW_DISABLED};if(Object(i.isPodcast)(e))return{type:a.ALLOW_DISABLED};if(window.browser&&window.browser.safari)return{type:a.ALLOW_DISABLED};var t=this._adsConfig||vk.audioAdsConfig||window.audioAdsConfig;if(t){if(!t.enabled)return{type:a.ALLOW_DISABLED};if(cur.adsPreview)return{type:a.ALLOW_ALLOWED};if(t.day_limit_reached)return{type:a.ALLOW_REJECT,reason:a.REJECT_REASON_LIMIT};var n=this.player._getPlayingContextSection();return t.sections.indexOf(n)>-1?{type:a.ALLOW_ALLOWED}:{type:a.ALLOW_REJECT,reason:a.REJECT_REASON_SECTION}}return{type:a.ALLOW_REJECT,reason:a.REJECT_REASON_UNKNOWN}}startPlay(e,t){this.checkPlay(e,t)}}function s(e,t){for(var n=e.toString(16),r=t.toString(16);r.length<8;)r="0"+r;return n+r}a.ADMAN_SRC="//ad.mail.ru/static/admanhtml/rbadman-html5.min.js",a.CAT_IDS={my:101,my_playlists:101,audio_feed:109,recent:113,user_wall:104,group_wall:104,user_list:102,group_list:103,user_playlists:102,group_playlists:103,feed:105,search:110,global_search:110,replies:104,im:106,group_status:104,user_status:104,recs:107,recs_audio:107,recs_album:107,other:114},a.AD_TYPE="preroll",a.ALLOW_DISABLED=1,a.ALLOW_ALLOWED=2,a.ALLOW_REJECT=3,a.REJECT_REASON_UNKNOWN="unknown",a.REJECT_REASON_LIMIT="track_limit_exceeded",a.REJECT_REASON_SECTION="section_not_allowed"},XHRy:function(__webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"PaymentsBox",(function(){return PaymentsBox}));var core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("a1Th"),core_js_modules_es6_object_to_string__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("Btvt"),core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("SRfc"),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("pIFo"),_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("zxIV"),_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("kcIO"),_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("v+DW"),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("t7n3"),_web_lib_message_box__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("EasH"),_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("FWc3"),_web_lib_lang__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("4+be"),_web_lib_browser__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("gdug"),_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("DM2o"),_web_lib_feature_entries__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("/PiP"),_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("98sY"),_web_lib_ui_util__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("ryw6"),_web_lib_accessibility__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("QGEU"),_web_lib_utils__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("aong"),_web_payments_app_order_box__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("Q9Lc"),_shared_evbus__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("MJEz");class PaymentsBox{static initHandlers(){Object(_shared_evbus__WEBPACK_IMPORTED_MODULE_19__.tq)().setInteractiveHandler("PaymentsBox/ps_promo_banner_click",e=>{Object(_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_12__.statlogsValueEvent)("payments_ps_promo_banner_event","","votes_buypage","relocate"),PaymentsBox.getVotesAmounts(!1,"spasibo",e.payload.target)}),Object(_shared_evbus__WEBPACK_IMPORTED_MODULE_19__.tq)().setInteractiveHandler("PaymentsBox/save_phone_prefix_click",e=>{Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.elfocus)(geByTag1("input",e.payload.target.parentNode),0,0)}),Object(_shared_evbus__WEBPACK_IMPORTED_MODULE_19__.tq)().setInteractiveHandler("PaymentsBox/save_phone_input",e=>{13===e.payload.event.keyCode&&PaymentsBox.saveSmsPhone()}),Object(_shared_evbus__WEBPACK_IMPORTED_MODULE_19__.tq)().setInteractiveHandler("PaymentsBox/get_votes_amounts",e=>{PaymentsBox.getVotesAmounts(!1,e.payload.dataAttrs.name,e.payload.target)}),Object(_shared_evbus__WEBPACK_IMPORTED_MODULE_19__.tq)().setInteractiveHandler("PaymentsBox/phone_code_input",e=>{13===e.payload.event.keyCode&&PaymentsBox.smsSendCode()}),Object(_shared_evbus__WEBPACK_IMPORTED_MODULE_19__.tq)().setInteractiveHandler("PaymentsBox/show_confirm",()=>{PaymentsBox.showConfirm()}),Object(_shared_evbus__WEBPACK_IMPORTED_MODULE_19__.tq)().setInteractiveHandler("PaymentsBox/show_types",()=>{PaymentsBox.showTypes()}),Object(_shared_evbus__WEBPACK_IMPORTED_MODULE_19__.tq)().setInteractiveHandler("PaymentsBox/show_terminal_tt",e=>{PaymentsBox.paymentsShowTerminalTT(e.payload.target,e.payload.dataAttrs.name)}),Object(_shared_evbus__WEBPACK_IMPORTED_MODULE_19__.tq)().setInteractiveHandler("PaymentsBox/show_phone_form",()=>{PaymentsBox.showPhoneForm(2)}),Object(_shared_evbus__WEBPACK_IMPORTED_MODULE_19__.tq)().setInteractiveHandler("PaymentsBox/hide_box",()=>{Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_5__.curBox)().hide()})}static initialize(e){PaymentsBox.initHandlers(),window.curNotifier&&curNotifier.idle_manager&&curNotifier.idle_manager.started&&(isArray(cur.onUnidle)||(cur.onUnidle=[]),isArray(cur.onIdle)||(cur.onIdle=[]),cur.onUnidle.push(()=>{cur.getVotesDoneHide=!0}),cur.onIdle.push(()=>{cur.getVotesDoneHide=!1}));var t={bodyStyle:"padding: 0;",hideButtons:!0};if(cur.paymentsWideBox){var n={width:cur.checkoutEnabled?800:780,height:390};cur.checkoutEnabled||(n.title=!1),t=extend(t,n)}else t=extend(t,{width:480});e.setOptions(extend(t,{onClean:()=>{var t="sms"===cur.votesType&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_box_progress");for(var n in cur.smsChkStatInt&&clearInterval(cur.smsChkStatInt),cur.paymentsWaitingCache)cur.paymentsWaitingCache[n][2]&&clearInterval(cur.paymentsWaitingCache[n][2]);cur.smsAmountsInt&&clearTimeout(cur.smsAmountsInt),cur.isPaymentsAppOrder&&(cur.isPaymentComplete||cur.isPaymentAttemted)?e.onDone?e.onDone():(e.hide(),_web_payments_app_order_box__WEBPACK_IMPORTED_MODULE_18__.AppOrderBox.processOrder(1,e)):cur.isPaymentsAppOrder&&!cur.paymentsCheckOrderCnt&&cur.paymentsOrderBillPeriod&&cur.onSubscriptionCancel?cur.onSubscriptionCancel():cur.isPaymentsAppOrder&&!cur.paymentsCheckOrderCnt&&cur.onAppOrderCancel?cur.onAppOrderCancel():cur.paymentsTryCompleteOrder&&(cur.isPaymentComplete||cur.isPaymentAttemted)&&e.onDone&&e.onDone(),PaymentsBox.removeCheckOffersEvent(),window.removeEventListener("message",PaymentsBox.frameMessage,!1),t&&Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_5__.showDoneBox)(getLang("payments_get_votes_box_close_notice"),{out:6e3})}})),(cur.fromInstantPay||cur.paymentsAuthPayment)&&(e.onDone=!1),cur.votesBox=e,cur.destroy.push(()=>{for(;boxQueue.count();)boxQueue.hideLast(!1)}),cur.checkoutEnabled?cur.paymentsWideBox?(PaymentsBox.showProgress(""),PaymentsBox.submitDmrCheckout(cur.paymentsPreferVotes,!0)):(show("payments_getvotes_cont"),window.radioBtns.payments_getvotes_amounts={els:Array.prototype.slice.apply(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.geByClass)("radiobtn",ge("payments_getvotes_amounts")))},PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.showConfirm)):cur.votesTypeInit&&(PaymentsBox.getVotesAmounts(!1,cur.votesTypeInit),cur.votesTypeInit=!1)}static initPhoneCountry(e,t){cur.countries=e,cur.defCountry=t,cur.uiPhoneCountry=new Dropdown(ge("phone_country"),cur.countries,{selectedItems:t,big:!0,autocomplete:!0,multiselect:!1,onChange:e=>{var t=ge("phone"),n=ge("payments_phone_prefix"),r=cur.uiPhoneCountry.val_full()[3];if(0===e||"0"===e||""===e||!1===e||void 0===e){var o=val(n);if(r==o)return;for(var i=0,a=cur.countries.length;i<a;++i)if(cur.countries[i][3]==o)return cur.uiPhoneCountry.val(cur.countries[i]);return cur.uiPhoneCountry.val(cur.defCountry,!0)}val(n,r),setTimeout(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.elfocus.pbind(t),0)}}),cur.destroy.push(cur.uiPhoneCountry.destroy.bind(cur.uiPhoneCountry))}static initPhoneNumber(e){e&&["input","keydown","keyup","mousedown","mouseup","select","contextmenu","drop"].forEach((function(t){e.addEventListener(t,e=>{var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.domClosestByTag)("input",e.target);t&&(t.value=t.value.replace(/\D/g,""))})}))}static validateEmail(e){return e.length<64&&e.match(/^.{1,40}@.{1,40}$/)&&e.match(/^([a-z0-9_\-]{0,40}\.){0,10}[a-z0-9_\-*]{1,40}@(([a-z0-9][a-z0-9_\-]{0,40})?[a-z0-9]\.){1,6}[a-z]{2,7}$/i)}static getEmail(){var e=!1;if(cur.paymentsEmailCheckbox)if(Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.isChecked)(cur.paymentsEmailCheckbox)){if(!(e=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.trim)(val(cur.paymentsEmailInput))))return Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.notaBene)(cur.paymentsEmailInput),""}else e="false";return e}static toggleEmail(e){"INPUT"===e.tagName&&(e=geByClass1("checkbox",Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.domPN)(e)),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.isChecked)(e))||(Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.checkbox)(e),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.isChecked)(e)&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.elfocus)(cur.paymentsEmailInput))}static unbind(e,t,n,r){if(!Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.isButtonLocked)("payments_getvotes_submit")){var o=cur.paymentsPreferVotes;if(n){var i={act:"a_del_instant_method",type:e,prefer_votes:r?-1:o,hash:t};cur.isPaymentsAppOrder&&cur.paymentsOrderAppId&&(i.aid=cur.paymentsOrderAppId),ajax.post("al_payments.php",i,{onDone:PaymentsBox.getVotesAmountsOnDone,onFail:function(e){return PaymentsBox.showBoxError(e),!0},showProgress:()=>{cur.confirmBox?cur.confirmBox.showProgress():Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.lockButton)("payments_getvotes_submit")},hideProgress:()=>{cur.confirmBox?cur.confirmBox.hide():Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.unlockButton)("payments_getvotes_submit")}})}else{var a="card"==e?getLang("payments_unbind_card_confirm"):getLang("payments_revoke_token_confirm");cur.confirmBox=Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_8__.showFastBox)({title:getLang("global_action_confirmation"),dark:1,forceNoBtn:1,bodyStyle:"padding: 20px; line-height: 160%;"},a,getLang("payments_unbind_card_btn"),()=>{PaymentsBox.unbind(e,t,!0)},getLang("global_cancel"))}}}static instantPay(){if(!Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.isButtonLocked)("payments_getvotes_submit")){var e=Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_5__.curBox)();if(cur.isPaymentAttemted=!0,cur.paymentsAuthPayment)e.hide();else{var t,n,r;if(ge("payments_getvotes_amounts")&&(cur.votesAmountsVal=Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.radioval)("payments_getvotes_amounts")),void 0===cur.votesAmountsData[cur.votesAmountsVal]){var o=ge("votes_num")?parseInt(ge("votes_num").value,10):0;if(!(o>0))return;cur._otherVotes=o,t=cur._otherAmount,n=cur._otherAmount,r=cur.votesAmountCustomTimeHash}else t=cur.votesAmountsData[cur.votesAmountsVal][2],n=cur.votesAmountsData[cur.votesAmountsVal][3],r=cur.votesAmountsData[cur.votesAmountsVal][4];var i={act:"a_getvotes_charge",type:cur.votesType,instant_pay:1,amount:t,order_amount:n,hash:r};cur.statSessionId&&(i.stat_session_id=cur.statSessionId),cur.isPaymentsAppOrder&&cur.paymentsOrderId&&(i.order_id=cur.paymentsOrderId,i.order_app_id=cur.paymentsOrderAppId,i.order_bill_period=cur.paymentsOrderBillPeriod,i.order_hash=cur.paymentsOrderHash),PaymentsBox.disablePaymentTypesRows(),ajax.post("al_payments.php",i,{onDone:(e,t)=>{cur.smsChkStatCnt=0,cur.smsChkStatInt=setInterval(()=>{PaymentsBox.checkStatus(cur.votesType,e)},2e3),PaymentsBox.showProgress&&PaymentsBox.showProgress()},onFail:e=>(PaymentsBox.showBoxError(e),!0),showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.lockButton.pbind("payments_getvotes_submit"),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.unlockButton.pbind("payments_getvotes_submit")})}}}static showAllPrices(e){return each(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.geByClass)("radiobtn",ge("payments_getvotes_amounts")),(e,t)=>{show(t)}),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.re)(e),!1}static paymentsShowTerminalTT(e,t){var n="";cur.paymentsTooltips[t]&&(n+=cur.paymentsTooltips[t]),n&&Object(_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_9__.showTooltip)(e,{text:n,dir:"auto",slide:15,className:"payments_terminal_tt",shift:[-3,3],hasover:1})}static updatePayAmount(o){var v=o.value.replace(/[^0-9]/g,""),i=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.intval)(parseInt(v,10));v=i<1e4?i:parseInt(i.toString().substr(0,4),10),o.value!=v&&(o.value=v);var amount=0;if(cur.votesAmountsData.calcPayAmount){-1==cur.votesAmountsData.calcPayAmount.indexOf("return")&&(cur.votesAmountsData.calcPayAmount="return "+cur.votesAmountsData.calcPayAmount);var calcFunc="(function(votes){"+cur.votesAmountsData.calcPayAmount+";})("+v+")";try{amount=eval(calcFunc)}catch(e){Object(_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_14__.logEvalError)(e,calcFunc)}amount=amount?Math.ceil(100*amount)/100:0,amount=parseInt(amount,10)==amount?amount.toFixed(0):amount.toFixed(2),cur._otherAmount=amount,cur._otherVotes=v}var bonusElement=ge("payments_other_votes_bonus");if(bonusElement&&(cur.votesAmountsData.bonusesTable||cur.votesAmountsData.calcBonusVotes)){var bonus=0;if(cur.votesAmountsData.calcBonusVotes){var _calcFunc="(function(votes){"+cur.votesAmountsData.calcBonusVotes+";})("+v+")";try{bonus=eval(_calcFunc)}catch(e){Object(_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_14__.logEvalError)(e,_calcFunc)}}else for(var j in cur.votesAmountsData.bonusesTable)if(v>=j){var _bonus=Math.floor(v*cur.votesAmountsData.bonusesTable[j]/j);_bonus>bonus&&(bonus=_bonus)}bonus?(bonusElement.innerHTML=getLang("payments_bonus_votes",bonus),show(bonusElement)):hide(bonusElement)}cur.votesAmountsData.currency_str?ge("votes_amount").innerHTML=amount>0?Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_10__.langNumeric)(amount,cur.votesAmountsData.currency_str):"":ge("votes_amount").innerHTML=amount>0?getLang("payments_votes_cost_in_rubles",amount):""}static onChangeOption(e,t,n){var r;if(Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.radiobtn)(e,t,n),"payments_getvotes_amounts"===n){var o=cur.votesAmountsData[t];o?(cur.votesAmountsVal=t,r=getLang("payments_get_votes_for_X").replace("{amount}",o[1]),val("votes_num",""),val("votes_amount",""),cur.paymentsEmailCheckbox&&Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.isChecked)(cur.paymentsEmailCheckbox)&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.elfocus)(cur.paymentsEmailInput)):(r=cur.payments_get_votes,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.elfocus)("votes_num")),cur.checkoutEnabled?PaymentsBox.setButtons(r,PaymentsBox.showConfirm):PaymentsBox.setButtons(r,cur.votesAmountIsInstant||o&&o.length>=5?PaymentsBox.instantPay:PaymentsBox.showConfirm,cur.paymentsChangeType,PaymentsBox.showTypes)}}static setConfirmButtons(){if("card"!=cur.votesType&&cur.psList[cur.votesType]){var e=cur.forcedPaymentMethod?void 0:cur.paymentsWideBox?getLang("payments_back_to_ps_list"):getLang("payments_go_ps_list"),t=!cur.psList[cur.votesType].in_menu;cur.paymentsInstantPayType==cur.votesType?t?PaymentsBox.setButtons(getLang("payments_pay_order_btn"),PaymentsBox.instantPay,e,PaymentsBox.showPaySystemsList):PaymentsBox.setButtons(getLang("payments_pay_order_btn"),PaymentsBox.instantPay):t?PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.showConfirm,e,PaymentsBox.showPaySystemsList):PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.showConfirm)}else cur.checkoutEnabled?PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.showConfirm):PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.showConfirm,cur.paymentsChangeType,PaymentsBox.showTypes)}static popupWrite(e){return!(e.document.innerHTML==cur._popup_text||!cur._popup_text)&&(e.document.write(cur._popup_text),e.document.close(),e.blur(),e.focus(),cur._popup_callback&&cur._popup_callback(),!0)}static show3DsFrame(e,t){if(cur.threeds_submitted)return!0;cur.threeds_submitted=!0;var n=ge("payments_iframe_container"),r=ge("cards_iframe");r||((r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ce)("iframe",{id:"card_iframe",name:"card_iframe"},{border:0,height:"435px",width:n.parentNode.offsetWidth+"px",overflowX:"hidden",overflowY:"hidden"})).frameBorder=0,n.innerHTML="",n.appendChild(r));var o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ce)("form",{target:"card_iframe",method:"POST",action:e});for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&o.appendChild(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ce)("input",{type:"hidden",name:i,value:t[i]}));n.appendChild(o),addClass("payments_iframe_container",cur.checkoutEnabled?"payments_threeds_checkout_frame":"payments_threeds_frame"),show("payments_iframe_container"),hide("payments_box_progress"),o.submit()}static submitDmrCheckout(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_box_progress")||t){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.lockButton)("payments_getvotes_submit");var n=cur.psList.dmr_checkout,r=!1,o=(e*n.vote_cost).toFixed(2);if(!e||e<=0?r=getLang("payments_web_no_sum"):n.min_amount&&e<n.min_amount?r=getLang("payments_min_amount_limit_votes").replace("%s",n.min_amount):n.max_amount&&e>n.max_amount?r=getLang("payments_max_amount_limit_votes").replace("%s",n.max_amount):void 0!==n.rest_amount_day&&e>n.rest_amount_day?r=getLang("payments_rest_amount_day_votes").replace("%s",n.rest_amount_day):void 0!==n.rest_amount_week&&e>n.rest_amount_week&&(r=getLang("payments_rest_amount_week_votes").replace("%s",n.rest_amount_week)),r)return PaymentsBox.showBoxError(r),!1;var i=PaymentsBox.getEmail();if(""===i)return Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.unlockButton)("payments_getvotes_submit"),!1;if(i&&"false"!==i&&!PaymentsBox.validateEmail(i))return Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.notaBene)(cur.paymentsEmailInput),PaymentsBox.showBoxError(getLang("payments_error_invalid_email")),!1;removeClass("payments_iframe_container","payments_threeds_checkout_frame");var a=ge("payments_iframe_container"),s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ce)("iframe",{id:"card_iframe",name:"card_iframe"},{border:0,height:"435px",width:a.parentNode.offsetWidth+"px",overflowX:"hidden",overflowY:"hidden",display:"block",borderRadius:"0 0 4px 4px"});s.frameBorder=0,a.innerHTML="",a.style.height=s.style.height,a.appendChild(s),window.addEventListener("message",PaymentsBox.frameMessage,!1);var c=cur.votesType;!c&&cur.votesTypeInit&&(c=cur.votesTypeInit);var u={act:"a_getvotes_charge",type:"dmr_checkout",hash:cur.paymentsHash,amount:o,stat_session_id:cur.statSessionId,votes:e};c&&(u.pay_method=c),cur.paymentsAuthPayment&&(u.only_auth=1),i&&(u.email=i),cur.votesAmountsData.appoveCode&&(u.approve_code=cur.votesAmountsData.appoveCode),cur.isPaymentsAppOrder&&cur.paymentsOrderId&&(u.order_id=cur.paymentsOrderId,u.order_app_id=cur.paymentsOrderAppId,u.order_bill_period=cur.paymentsOrderBillPeriod,u.order_hash=cur.paymentsOrderHash),cur.votesAmountsData.purchaseDescr&&(u.purchase_descr=cur.votesAmountsData.purchaseDescr),PaymentsBox.trackingProtectionEnabled((function(){Object(_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_12__.statlogsValueEvent)("payments",0,"votes","dmr_checkout","iframe_track_protection_enabled")}),(function(){Object(_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_12__.statlogsValueEvent)("payments",0,"votes","dmr_checkout","iframe_track_protection_disabled")})),ajax.post("al_payments.php",u,{onDone:function(t,r,i){if(t){if(-2==t){var a=getLang("global_money_amount_rub",Math.floor(o));return val("payments_getvotes_confirm_msg",r),val("payments_box_votes_num",e),val("payments_box_amount",a),val("payments_box_votes_money",getLang("payments_money_for_votes",e).replace("{money}",a)),cur.votesAmountsData.resend_msg&&val("payments_getvotes_sms_resend",cur.votesAmountsData.resend_msg),cur.votesAmountsData.confirm_hash=i,val("confcode",""),show("payments_box_confcode_wrap"),PaymentsBox.enablePaymentTypesRows(),void PaymentsBox.approveGetCode()}if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_getvotes_confirm")&&PaymentsBox.showVotesAmounts(),!cur.paymentsWideBox){var s=ge("payments_getvotes_submit");PaymentsBox.setButtons(s.innerHTML,PaymentsBox.showConfirm,getLang("global_back"),PaymentsBox.showVotesAmounts)}cur._popup_text=r,cur._popup_callback=!1,cur._popup_callback=function(){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.unlockButton)("payments_getvotes_submit"),hide("payments_getvotes_wrap","payments_getvotes_buttons","payments_box_progress","payments_box_error"),show("payments_iframe_container"),ge("payments_iframe_container").scrollTop=0};var c=ge("card_iframe");c.contentWindow.document.open("text/html","replace"),c.contentWindow.document.write(r),c.contentWindow.document.close(),cur._popup_callback(),cur.smsChkData=t,cur.isPaymentComplete=cur.isPaymentCanceled=cur.isPaymentFailed=!1,cur.smsChkStatCnt=0,cur.smsChkStatInt=setInterval((function(){PaymentsBox.checkStatus("dmr_checkout",t),n.use_iframe&&(cur.isPaymentCanceled||cur.isPaymentFailed)?(clearInterval(cur.smsChkStatInt),PaymentsBox.showVotesAmounts(),cur.isPaymentFailed?PaymentsBox.showBoxError(getLang("payments_landing_cancelled")):PaymentsBox.showBoxError(getLang("payments_payment_cancelled")),window.removeEventListener("message",PaymentsBox.frameMessage,!1)):cur.isPaymentComplete&&"dmr_checkout"!=n.name&&PaymentsBox.showTypes()}),2e3)}},onFail:e=>(Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.isButtonLocked)("payments_getvotes_submit")||PaymentsBox.setConfirmButtons(),PaymentsBox.showBoxError(e),!0),frame:_web_lib_browser__WEBPACK_IMPORTED_MODULE_11__.browser.safari_mobile})}}static submitCard(e){if(!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_box_progress")){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.lockButton)("payments_getvotes_submit");var t=cur.psList.card,n=!1,r=(e*t.vote_cost).toFixed(2);if(!e||e<=0?n=getLang("payments_web_no_sum"):t.min_amount&&e<t.min_amount?n=getLang("payments_min_amount_limit_votes").replace("%s",t.min_amount):t.max_amount&&e>t.max_amount?n=getLang("payments_max_amount_limit_votes").replace("%s",t.max_amount):null!=t.rest_amount_day&&e>t.rest_amount_day?n=getLang("payments_rest_amount_day_votes").replace("%s",t.rest_amount_day):null!=t.rest_amount_week&&e>t.rest_amount_week&&(n=getLang("payments_rest_amount_week_votes").replace("%s",t.rest_amount_week)),n)return PaymentsBox.showBoxError(n),!1;var o,i=PaymentsBox.getEmail();if(""===i)return Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.unlockButton)("payments_getvotes_submit"),!1;if(i&&"false"!==i&&!PaymentsBox.validateEmail(i))return Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.notaBene)(cur.paymentsEmailInput),PaymentsBox.showBoxError(getLang("payments_error_invalid_email")),!1;if(cur.votesAmountsData.needApprove){var a=getLang("global_money_amount_rub",Math.floor(r));return val("payments_getvotes_confirm_msg",cur.votesAmountsData.needApprove),val("payments_box_votes_num",e),val("payments_box_amount",a),val("payments_box_votes_money",getLang("payments_money_for_votes",e).replace("{money}",a)),cur.votesAmountsData.resend_msg&&val("payments_getvotes_sms_resend",cur.votesAmountsData.resend_msg),val("confcode",""),delete cur.votesAmountsData.needApprove,show("payments_box_confcode_wrap"),void PaymentsBox.approveGetCode()}if(PaymentsBox.disablePaymentTypesRows(),t.use_iframe){var s=ge("payments_iframe_container"),c=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ce)("iframe",{id:"card_iframe",name:"card_iframe"},{border:0,height:"435px",width:s.parentNode.offsetWidth+"px",overflowX:"hidden",overflowY:"hidden"});c.frameBorder=0,s.innerHTML="",s.appendChild(c),window.addEventListener("message",PaymentsBox.frameMessage,!1)}else{o=window.open("","_blank","scrollbars=1, resizable=1, menubar=1, left=0, top=0, toolbar=1, status=1"),cur._popup_text=PaymentsBox.popupHtml(getLang("payments_cards_redirect"),"",""),PaymentsBox.popupWrite(o)}var u={act:"a_getvotes_charge",type:"card",hash:cur.paymentsHash,amount:r,stat_session_id:cur.statSessionId};cur.paymentsAuthPayment&&(u.only_auth=1),i&&(u.email=i),cur.votesAmountsData.appoveCode&&(u.approve_code=cur.votesAmountsData.appoveCode),cur.isPaymentsAppOrder&&cur.paymentsOrderId&&(u.order_id=cur.paymentsOrderId,u.order_app_id=cur.paymentsOrderAppId,u.order_bill_period=cur.paymentsOrderBillPeriod,u.order_hash=cur.paymentsOrderHash),PaymentsBox.trackingProtectionEnabled((function(){Object(_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_12__.statlogsValueEvent)("payments",0,"votes","dmr","iframe_track_protection_enabled")}),(function(){Object(_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_12__.statlogsValueEvent)("payments",0,"votes","dmr","iframe_track_protection_disabled")})),ajax.post("al_payments.php",u,{onDone:function(n,i,a){if(n){if(-2==n){t.use_iframe||o.close();var s=getLang("global_money_amount_rub",Math.floor(r));return val("payments_getvotes_confirm_msg",i),val("payments_box_votes_num",e),val("payments_box_amount",s),val("payments_box_votes_money",getLang("payments_money_for_votes",e).replace("{money}",s)),cur.votesAmountsData.resend_msg&&val("payments_getvotes_sms_resend",cur.votesAmountsData.resend_msg),cur.votesAmountsData.confirm_hash=a,val("confcode",""),show("payments_box_confcode_wrap"),PaymentsBox.enablePaymentTypesRows(),void PaymentsBox.approveGetCode()}if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_getvotes_confirm")&&PaymentsBox.showVotesAmounts(),t.use_iframe||(Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.unlockButton)("payments_getvotes_submit"),PaymentsBox.showProgress()),cur._popup_text=i,cur._popup_callback=!1,t.use_iframe){cur._popup_callback=function(){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.unlockButton)("payments_getvotes_submit"),hide("payments_getvotes_wrap","payments_getvotes_buttons","payments_box_progress","payments_box_error"),show("payments_iframe_container"),ge("payments_iframe_container").scrollTop=0};var c=ge("card_iframe");c.contentWindow.document.open("text/html","replace"),c.contentWindow.document.write(i),c.contentWindow.document.close(),cur._popup_callback()}else o.document.open("text/html","replace"),o.document.write(i),o.document.close(),o.blur(),o.focus();cur.smsChkData=n,cur.isPaymentComplete=cur.isPaymentCanceled=cur.isPaymentFailed=!1,cur.smsChkStatCnt=0,cur.smsChkStatInt=setInterval((function(){PaymentsBox.checkStatus("card",n),!t.use_iframe&&o.closed?setTimeout((function(){cur.isPaymentComplete||(clearInterval(cur.smsChkStatInt),PaymentsBox.showBoxError(getLang("payments_payment_cancelled"),"info_msg"),PaymentsBox.setConfirmButtons())}),500):t.use_iframe&&(cur.isPaymentCanceled||cur.isPaymentFailed)?(clearInterval(cur.smsChkStatInt),PaymentsBox.showVotesAmounts(),cur.isPaymentFailed?PaymentsBox.showBoxError(getLang("payments_landing_cancelled")):PaymentsBox.showBoxError(getLang("payments_payment_cancelled")),window.removeEventListener("message",PaymentsBox.frameMessage,!1)):cur.isPaymentComplete&&"alfabank"!=t.name&&"dmr"!=t.name&&PaymentsBox.showTypes()}),2e3)}},onFail:function(e){return t.use_iframe||o.close(),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.isButtonLocked)("payments_getvotes_submit")||PaymentsBox.setConfirmButtons(),PaymentsBox.showBoxError(e),!0},frame:_web_lib_browser__WEBPACK_IMPORTED_MODULE_11__.browser.safari_mobile})}}static trackingProtectionEnabled(e,t){var n=new XMLHttpRequest;n.open("GET","https://top-fwz1.mail.ru/counter2?id=1",!0),n.onreadystatechange=function(){200!==n.status?e():t(),n.onreadystatechange=null},n.send()}static submitPaymentSystem(e){if(!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_box_progress")){var t=cur.votesType,n=cur.psList[t],r=!1,o=0,i=0,a=0,s=0;if(!n.simple_redirect){if(!e)return;o=(e*n.vote_cost).toFixed(2),i=(e*n.vote_cost/cur.usdRate).toFixed(2),a=Math.floor(o),s=100*(o-a),!e||e<=0?r=getLang("payments_web_no_sum"):n.min_amount&&e<n.min_amount?r=getLang("payments_min_amount_limit_votes").replace("%s",n.min_amount):n.max_amount&&e>n.max_amount?r=getLang("payments_max_amount_limit_votes").replace("%s",n.max_amount):null!=n.rest_amount_day&&e>n.rest_amount_day?r=getLang("payments_rest_amount_day_votes").replace("%s",n.rest_amount_day):null!=n.rest_amount_week&&e>n.rest_amount_week&&(r=getLang("payments_rest_amount_week_votes").replace("%s",n.rest_amount_week))}if(r)return PaymentsBox.showBoxError(r),!1;var c=PaymentsBox.getEmail();if(""!==c)if(!c||"false"===c||PaymentsBox.validateEmail(c)){if(PaymentsBox.showProgress(),PaymentsBox.disablePaymentTypesRows(),"mailmoney_vkpay"===t){var u={act:"a_getvotes_charge",type:t,hash:cur.paymentsHash,amount:o,random_auth:0,stat_session_id:cur.statSessionId};ajax.post("al_payments.php",u,{onDone:e=>{var t=Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_5__.curBox)(),n={noLocChange:1,skipBoxesHide:1,noClickHide:1};cur.isPaymentsAppOrder?cur.app.openAppInLayer(e,!1,!0,n):Object(_web_lib_feature_entries__WEBPACK_IMPORTED_MODULE_13__.showWiki)({w:e},!1,!1,n),t._hide(!1,!0),cur.onExternalAppDone=e=>{t._show(),e.status||(PaymentsBox.showBoxError(getLang("payments_payment_cancelled"),"info_msg"),PaymentsBox.setConfirmButtons(),clearInterval(cur.smsChkStatInt)),cur.onExternalAppDone=null,window.WkView&&WkView.hide(!1,!0)},cur.smsChkStatCnt=0,cur.smsChkStatInt=setInterval((function(){PaymentsBox.checkStatus(cur.votesType,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.data,null,t)}),2e3)},onFail:e=>(PaymentsBox.showBoxError(e),PaymentsBox.setConfirmButtons(),!0)})}else{if(cur.votesAmountsData.oauth_url&&(!ge("payments_remember_wallet")||Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.isChecked)("payments_remember_wallet"))){var l=cur.votesAmountsData.oauth_params,d="";for(var _ in l){if(Object.prototype.hasOwnProperty.call(l,_))d+=`<input type="hidden" autocomplete="off" name="${_}" value="${l[_]}"/>`}var p=ge("paymentSystemsForm");p.action=cur.votesAmountsData.oauth_url,p.method="post",p.innerHTML=d;var h=cur.votesAmountsData.popup_params||{},f=h.width||700,m=h.height||600,g=`scrollbars=1, resizable=1, menubar=0, left=${Math.floor(window.screen.width/2)-f/2}, top=${Math.floor(window.screen.height/2)-m/2}, width=${f}, height=${m}`,v=getLang("payment_redirect").replace("%s",n.title),b=`<form action="${p.action}" method="${p.method}" id="popup_payment_form" accept-charset="UTF-8">${p.innerHTML}</form>`;cur._popup_text=PaymentsBox.popupHtml(v,b,"document.getElementById('popup_payment_form').submit()"),cur._popup_callback=!1;var y=window.open("","_blank",g);cur.smsChkStatCnt=0,cur.oauthState=0;var E=0;return cur.smsChkStatInt=setInterval((function(){if(2==cur.oauthState)PaymentsBox.checkStatus(cur.votesType,cur.smsChkData);else if(0==cur.oauthState&&(E=cur.isPaymentComplete&&cur.paymentCompleteParams&&cur.paymentCompleteParams.code?cur.paymentCompleteParams.code:0)){cur.oauthState=1;var e={act:"a_getvotes_charge",type:t,oauth_code:E,hash:cur.paymentsHash,amount:o,stat_session_id:cur.statSessionId};return cur.paymentsAuthPayment&&(e.only_auth=1),c&&(e.email=c),void ajax.post("al_payments.php",e,{onDone:e=>{cur.oauthState=2,cur.smsChkData=e},onFail:e=>(clearInterval(cur.smsChkStatInt),PaymentsBox.showBoxError(e),PaymentsBox.setConfirmButtons(),!0)})}(y.closed&&!cur.isPaymentComplete||cur.isPaymentComplete&&!E)&&(clearInterval(cur.smsChkStatInt),cur.isPaymentComplete?PaymentsBox.showBoxError(getLang("payments_sms_money_fail")):PaymentsBox.showBoxError(getLang("payments_payment_cancelled"),"info_msg"),PaymentsBox.setConfirmButtons())}),2e3),void PaymentsBox.popupWrite(y)}if(cur.votesAmountsData.provider&&-1!==["dmr","paypal","yandexmoney","api_provider"].indexOf(cur.votesAmountsData.provider)){var w,O=getLang("payment_redirect").replace("%s",n.title),C={act:"a_getvotes_charge",type:t,hash:cur.paymentsHash,amount:o,random_auth:0,stat_session_id:cur.statSessionId};if(c&&(C.email=c),"paypal"===cur.votesAmountsData.provider||"yandexmoney"===cur.votesAmountsData.provider){var T;if(ge("payments_remember_wallet")?(C.remember_wallet=Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.isChecked)("payments_remember_wallet")||cur.forceRebind,cur.forceRebind&&(cur.forceRebind=!1)):C.remember_wallet=1,C.remember_wallet){var S=cur.votesAmountsData.popup_params||{},D=S.width||700,P=S.height||600;T=`scrollbars=1, resizable=1, menubar=0, left=${Math.floor(window.screen.width/2)-D/2}, top=${Math.floor(window.screen.height/2)-P/2}, width=${D}, height=${P}`}else{T="scrollbars=1, resizable=1, menubar=1, left=0, top=0, toolbar=1, status=1"}w=C.remember_wallet?window.open("","",T):window.open("","_blank",T);var k=getLang("payment_redirect").replace("%s",n.title);cur._popup_text=PaymentsBox.popupHtml(k,"",""),PaymentsBox.popupWrite(w)}ajax.post("al_payments.php",C,{onDone:function(e,t,n){if(e){var r="api_provider"!==cur.votesAmountsData.provider;cur.canOpenPopup=r;var o=!r;PaymentsBox.checkStatusCallback=e=>{if("paypal"===cur.votesAmountsData.provider||"yandexmoney"===cur.votesAmountsData.provider){if(w&&!w.closed&&!o){o=!0;var t=ge("paymentSystemsForm");t.action=e.action,t.method="get";var n="";for(var r in e.params){if(Object.prototype.hasOwnProperty.call(e.params,r))n+=`<input type="hidden" autocomplete="off" name="${r}" value="${e.params[r]}"/>`}t.innerHTML=n;var i=`<form action="${t.action}" method="${t.method}" id="popup_payment_form" accept-charset="UTF-8">${t.innerHTML}</form>`;cur._popup_text=PaymentsBox.popupHtml(O,i,"document.getElementById('popup_payment_form').submit()"),PaymentsBox.popupWrite(w)}(w.closed&&!cur.isPaymentComplete||cur.isPaymentComplete)&&(clearInterval(cur.smsChkStatInt),PaymentsBox.showBoxError(cur.isPaymentComplete?getLang("payments_sms_money_fail"):getLang("payments_payment_cancelled")),PaymentsBox.setConfirmButtons())}else cur._popup||(cur._popup=window.open("","_blank"))},cur.smsChkData=e,cur.smsChkStatCnt=0,cur.smsChkStatInt=setInterval(()=>{PaymentsBox.checkStatus(cur.votesType,e)},2e3)}},onFail:function(e){return Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.isButtonLocked)("payments_getvotes_submit")||PaymentsBox.setConfirmButtons(),PaymentsBox.showBoxError(e),!0}})}else{if(!cur.isAdsPayment){var A={act:"a_getvotes_invoice",type:cur.votesType,amount:o,votes:e,invoice_hash:cur.votesAmountsData.invoice_hash,stat_session_id:cur.statSessionId};ajax.post("al_payments.php",A)}var I=n.gate_params,x="",j=ge("paymentSystemsForm"),M=(new Date).getTime();for(var L in I)if(Object.prototype.hasOwnProperty.call(I,L)){var R=I[L];x+=`<input type="hidden" autocomplete="off" name="${L}" value="${R=(R=(R=(R=(R=(R=R.replace("{amount_votes}",e)).replace("{amount_rub}",o)).replace("{amount_usd}",i)).replace("{amount_rub_int}",a)).replace("{amount_rub_frac}",s)).replace("{time}",M)}"/>`}var B=n.gate_url;B=(B=(B=(B=(B=(B=B.replace("{time}",M)).replace("{amount_votes}",e)).replace("{amount_rub}",o)).replace("{amount_usd}",i)).replace("{amount_rub_int}",a)).replace("{amount_rub_frac}",s),j.action=B,j.method=n.gate_method,j.innerHTML=x;var N=!1;try{var U=getLang("payment_redirect").replace("%s",n.title),F=`<form action="${j.action}" method="${j.method}" id="popup_payment_form" accept-charset="${n.gate_charset}">${j.innerHTML}</form>`;cur._popup_text=PaymentsBox.popupHtml(U,F,`Payments.submitPopupForm("${t}", "${e}", "${o}", "${i}")`),cur._popup_callback=!1,N=window.open("","_blank","scrollbars=1, resizable=1, menubar=1, left=0, top=0, toolbar=1, status=1"),Object(_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_12__.statlogsValueEvent)("payments","","votes",t,"start"),cur.smsChkData=!1,cur.isPaymentComplete=!1,cur.smsChkStatCnt=0,cur.smsChkStatInt=setInterval((function(){PaymentsBox.checkStatus(cur.votesType,!1),N.closed&&!cur.isPaymentComplete&&(clearInterval(cur.smsChkStatInt),PaymentsBox.showBoxError(getLang("payments_payment_cancelled"),"info_msg"),n.simple_redirect?PaymentsBox.setButtons(!1,!1,cur.paymentsChangeType,PaymentsBox.showTypes):PaymentsBox.setConfirmButtons())}),2e3),PaymentsBox.popupWrite(N)}catch(e){j.submit()}c&&ajax.post("al_payments.php",{act:"a_set_receipt_email",email:c,hash:cur.paymentsHash},{onFail:e=>!0})}}}else PaymentsBox.showBoxError(getLang("payments_error_invalid_email"))}}static approveSendCode(){var e=ge("confcode").value;if(e.length){hide("payments_box_error");for(var t=0,n=0;n<e.length;n++)t+=parseInt(e[n]);if((t%=10)!=cur.votesAmountsData.approveCodeChk)return PaymentsBox.showBoxError(getLang("payments_invalid_code")),void Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.notaBene)("confcode");cur.votesAmountsData.appoveCode=e,PaymentsBox.showConfirm()}else Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.notaBene)("confcode")}static approveGetCode(e){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.lockButton)("payments_getvotes_submit");var t={act:"a_getvotes_approve_code",hash:cur.votesAmountsData.confirm_hash};return e&&(t.resend=1),ajax.post("al_payments.php",t,{onDone:function(t,n){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.unlockButton)("payments_getvotes_submit"),1==t?PaymentsBox.showBoxError(n):e||(cur.votesAmountsData.approveCodeChk=n,PaymentsBox.refreshBox(),show("payments_getvotes_confirm"),PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.approveSendCode,cur.paymentsChangeType,cur.checkoutEnabled?PaymentsBox.showVotesAmounts:PaymentsBox.showTypes))},onFail:function(e){return PaymentsBox.showBoxError(e),PaymentsBox.setConfirmButtons(),!0}}),!1}static smsSendPin(){if(null==cur.votesAmountsVal)return!1;var e=cur.votesAmountsData[cur.votesAmountsVal][3],t=cur.votesAmountsData[cur.votesAmountsVal][2];if(4!=e&&8!=t&&(2!=e||5!=t))return!1;var n=ge("confcode").value;n.length&&(Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.lockButton)("payments_getvotes_submit"),ajax.post("al_payments.php",{act:"a_getvotes_validate",code:n,oid:cur.votesAmountsData[cur.votesAmountsVal][3],qid:cur.smsChkData.qid,hash:cur.smsChkData.hash},{onDone:function(){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.unlockButton)("payments_getvotes_submit"),PaymentsBox.showProgress(),cur.smsChkStatCnt=0,cur.smsChkStatInt=setInterval(PaymentsBox.checkStatus.pbind("sms",cur.smsChkData),2e3)},onFail:function(e){return PaymentsBox.showBoxError(e),!0}}))}static smsSendCode(){if("card"===cur.votesType)return!1;if(null!=cur.votesAmountsVal){var e=cur.votesAmountsData[cur.votesAmountsVal][3],t=cur.votesAmountsData[cur.votesAmountsVal][2];if(4==e||8==t||2==e&&5==t)return PaymentsBox.smsSendPin()}var n=ge("confcode").value;n.length?(Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.lockButton)("payments_getvotes_submit"),ajax.post("al_payments.php",{act:"a_getvotes_validate",pid:cur.votesAmountsVal,code:n,hash:cur.votesAmountsData[cur.votesAmountsVal].hash},{onDone:function(e){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.unlockButton)("payments_getvotes_submit"),e&&3==cur.votesAmountsData[cur.votesAmountsVal][2]?PaymentsBox.getVotesCharge(!1,!0):e&&PaymentsBox.getVotesCharge()},onFail:function(e){return PaymentsBox.showBoxError(e),!0}})):Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.notaBene)("confcode")}static smsGetCode(e){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.lockButton)("payments_getvotes_submit");var t={act:"a_getvotes_validate",hash:cur.votesAmountsData[cur.votesAmountsVal].hash,pid:cur.votesAmountsVal};e&&(t.resend=1),ajax.post("al_payments.php",t,{onDone:function(e,t){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.unlockButton)("payments_getvotes_submit"),2==e?(PaymentsBox.showBoxError(t,"ok_msg"),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.elfocus)("confcode")):e&&3==cur.votesAmountsData[cur.votesAmountsVal][2]?PaymentsBox.getVotesCharge(!1,!0):e?PaymentsBox.getVotesCharge():(PaymentsBox.refreshBox(),show("payments_getvotes_confirm"),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.elfocus)("confcode"),cur.paymentsWideBox?PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.smsSendCode,getLang("payments_change_phone_number"),PaymentsBox.showPhoneForm):PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.smsSendCode,cur.paymentsChangeType,PaymentsBox.showTypes))},onFail:function(e){return PaymentsBox.showBoxError(e),PaymentsBox.setConfirmButtons(),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.elfocus)("confcode"),!0}})}static confirmPinCode(){var e=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.trim)(ge("confcode").value);if(e.length){var t={act:"a_getvotes_confirm_pin",hash:cur.updateTnxHash,ps:cur.votesType,qid:cur.smsChkData.qid,pin:e};PaymentsBox.showProgress(),ajax.post("al_payments.php",t,{onDone:function(){cur.smsChkStatInt=setInterval(()=>{PaymentsBox.checkStatus(cur.votesType,cur.smsChkData)},2e3)},onFail:function(e){PaymentsBox.refreshBox(),PaymentsBox.showBoxError(e)}})}else Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.notaBene)("confcode")}static checkPinKeyPress(e){if(!((e=e||window.event).ctrlKey||e.altKey||e.metaKey)){var t=null;if(null===e.which&&e.keyCode>=32?t=String.fromCharCode(e.keyCode):0!==e.which&&0!==e.charCode&&e.which>=32&&(t=String.fromCharCode(e.which)),null!==t)return!(t<"0"||t>"9")&&void 0}}static fillBDay(){var params={act:"a_getvotes_fill_bday"};ajax.post("al_payments.php",params,{onDone:function onDone(js){if(js)try{eval(js)}catch(e){Object(_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_14__.logEvalError)(e,js)}}})}static showOffer(e){var t={act:"a_getvotes_offer",offer_id:e,offer_aid:cur.paymentsOfferApp||0,app_currency:cur.offersAppCurrency||0};cur.app&&cur.app.options&&(t.aid=cur.app.options.aid),cur.paymentsOfferPreview&&(t.offer_view=cur.paymentsOfferPreview),ajax.post("al_payments.php",t,{onDone:PaymentsBox.offerOnLoad,onFail:e=>(e&&(PaymentsBox.showBoxError(e),hide("payments_getvotes_wrap")),!0)})}static showNextOffers(e){var t={act:"a_getvotes_amounts",type:"offers",offset:cur.offersOffset,app_currency:cur.offersAppCurrency,hash:cur.paymentsHash};cur.app&&cur.app.options&&(t.isAppOrder=cur.paymentsOfferApp?1:0,t.aid=cur.app.options.aid),ajax.post("al_payments.php",t,{onDone:function(t,n){n&&(t||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.re)(e),cur.offersOffset+=20,ge("payments_offers_wrap").innerHTML+=n,PaymentsBox.checkOffers())},showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.lockButton.pbind(e),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.unlockButton.pbind(e)})}static showConfirm(){cur.votesAmountsVal=ge("payments_getvotes_amounts")?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.radioval)("payments_getvotes_amounts"):0;var e=ge("votes_num")?parseInt(ge("votes_num").value,10):0;if(void 0!==cur.votesAmountsVal){cur.votesAmountsVal&&null==cur.votesAmountsData[cur.votesAmountsVal]&&ge("votes_num")&&!e&&Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.notaBene)("votes_num");var t=ge("payments_spasibo_rules_accept");if(t&&!Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.isChecked)(t)){var n={text:getLang("payments_spasibo_rules_not_accepted"),dir:"auto",className:"payments_terminal_tt",hasover:1};return cur.paymentsWideBox&&(n=extend(n,{shift:[-30,10]})),void Object(_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_9__.showTooltip)(t,n)}if(Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_5__.curBox)().changed=!0,"sms"===cur.votesType){cur.isResetCheckedMaxSmsVotesValue&&(ge("payments_getvotes_confirm_msg").innerHTML=cur.votesAmountsData.confirm_msg_again,cur.isResetCheckedMaxSmsVotesValue=!1);var r=cur.votesAmountsData.confirm_type;if(2==r&&null!=cur.votesAmountsData.checked_max_sms_votes_val&&(cur.votesAmountsVal=cur.votesAmountsData.checked_max_sms_votes_val,cur.votesAmountsData.checked_max_sms_votes_val=0,cur.isResetCheckedMaxSmsVotesValue=!0),null==cur.votesAmountsData[cur.votesAmountsVal]&&e){if(!r)return void PaymentsBox.getVotesCharge(e,!0);cur.votesAmountsData[-1]=[e,getLang("global_money_amount_rub",cur._otherAmount),cur.votesAmountsData[0][2],0],cur.votesAmountsVal=-1}void 0===cur.votesAmountsData[cur.votesAmountsVal]&&(cur.votesAmountsVal=0);var o=cur.votesAmountsData[cur.votesAmountsVal][0],i=cur.votesAmountsData[cur.votesAmountsVal][1],a=cur.votesAmountsData[cur.votesAmountsVal][2],s=cur.votesAmountsData[cur.votesAmountsVal][3],c=cur.votesAmountsData[cur.votesAmountsVal][6];if(0==a){cur.smsChkData={oid:s,qid:0,hash:cur.votesAmountsData.check_hash};var u=getLang("payments_to_get_send_sms",o);cur.paymentsWideBox||(u+="<br/>"+getLang("payments_service_cost"));var l=cur.votesAmountsData[cur.votesAmountsVal];if(u=(u=(u=u.replace("{number}",cur.votesAmountsData[cur.votesAmountsVal][4])).replace("{text}",`<nobr>${cur.votesAmountsData[cur.votesAmountsVal][5]}${vk.id}</nobr>`)).replace("{amount}",cur.votesAmountsData[cur.votesAmountsVal][1]),l.invoice_hash&&cur.statSessionId){PaymentsBox.showWaiting("");var d={act:"a_getvotes_invoice",type:cur.votesType,oid:s,votes:o,invoice_hash:l.invoice_hash,stat_session_id:cur.statSessionId};ajax.post("al_payments.php",d,{onDone:function(){ge("payments_getvotes_waiting_msg").innerHTML=u},onFail:function(e){return clearInterval(cur.smsChkStatInt),PaymentsBox.needContinue=0,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_getvotes_waiting")||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_getvotes_confirm")?PaymentsBox.showVotesAmounts():PaymentsBox.setButtons(cur.payments_get_votes,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_getvotes_confirm")?PaymentsBox.getVotesCharge:PaymentsBox.showConfirm,cur.paymentsChangeType,PaymentsBox.showTypes),PaymentsBox.showBoxError(e),!0}})}else PaymentsBox.showWaiting(u)}else if(5==a||6==a||8==a)PaymentsBox.getVotesCharge();else if(7==a){PaymentsBox.getVotesCharge(),cur._popup_text=PaymentsBox.popupHtml(getLang("payments_cards_redirect"),"",""),cur._popup_callback=!1,cur._popup_href=!1;var _="/payments?act=go_gate&type=sms",p=Math.floor(window.screen.width/2)-350,h=Math.floor(window.screen.height/2)-300;Object(_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_14__.debugLog)(_),cur._popup=window.open(_,"_blank",`scrollbars=1, resizable=1, menubar=0, left=${p}, top=${h}, width=700, height=600`)}else if(1!=a&&4!=a&&1!=r)PaymentsBox.getVotesCharge(!1,!0);else{if(val("payments_box_votes_num",o),val("payments_box_amount",i),val("payments_box_votes_money",c),3==s&&(PaymentsBox.checkStatusCallback=function(e){cur.isResetCheckedMaxSmsVotesValue=!1,cur.checkedMaxVotes=e,PaymentsBox.getVotesAmounts(!0)}),2==r&&o<=cur.votesAmountsData.confirm_max_votes){if(cur.paymentsWideBox)return void PaymentsBox.getVotesCharge();hide("payments_box_confcode_wrap"),PaymentsBox.refreshBox(),show("payments_getvotes_confirm"),PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.getVotesCharge,getLang("global_back"),PaymentsBox.showVotesAmounts)}else show("payments_box_confcode_wrap"),PaymentsBox.smsGetCode();cur.votesAmountsData.resend_msg&&val("payments_getvotes_sms_resend",cur.votesAmountsData.resend_msg),cur.votesAmountsData.confirm_wait_comment&&cur.votesAmountsData.confirm_wait_comment[s]?(val("payments_getvotes_confirm_comm",cur.votesAmountsData.confirm_wait_comment[s]),show("payments_getvotes_confirm_comm_wrap")):(ge("payments_getvotes_confirm_comm").innerHTML="",hide("payments_getvotes_confirm_comm_wrap"))}}else{var f;f=cur.votesAmountsData[cur.votesAmountsVal]?cur.votesAmountsData[cur.votesAmountsVal][0]:e,cur.checkoutEnabled?PaymentsBox.submitDmrCheckout(f):"card"===cur.votesType?PaymentsBox.submitCard(f):PaymentsBox.submitPaymentSystem(f)}}}static offerOnLoad(html,js){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.unlockButton)("payments_getvotes_submit"),hide("payments_offers_list");var offerView=ge("payments_offer_view");if(offerView){offerView.innerHTML=html,show(offerView);try{eval(js)}catch(e){Object(_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_14__.logEvalError)(e,js)}}}static showWaiting(e){var t=cur.votesAmountsData[cur.votesAmountsVal]?cur.votesAmountsData[cur.votesAmountsVal][3]:0;ge("payments_getvotes_waiting_msg").innerHTML=e,t&&cur.votesAmountsData.confirm_wait_comment&&cur.votesAmountsData.confirm_wait_comment[t]?(ge("payments_getvotes_waiting_comm").innerHTML=cur.votesAmountsData.confirm_wait_comment[t],show("payments_getvotes_waiting_comm")):(ge("payments_getvotes_waiting_comm").innerHTML="",hide("payments_getvotes_waiting_comm")),PaymentsBox.refreshBox(),show("payments_getvotes_waiting"),hide("payments_getvotes_buttons"),cur.paymentsWideBox&&cur.votesAmountsData[cur.votesAmountsVal]&&cur.votesAmountsData[cur.votesAmountsVal][7]?(ge("payments_getvotes_waiting_amount").innerHTML=cur.votesAmountsData[cur.votesAmountsVal][6],ge("payments_getvotes_waiting_phone").innerHTML=cur.votesAmountsData[cur.votesAmountsVal][7],show("payments_getvotes_waiting_mo")):hide("payments_getvotes_waiting_mo"),delete cur.paymentsWaitingCache[cur.votesType],cur.smsChkStatInt&&clearInterval(cur.smsChkStatInt),cur.smsChkStatCnt=0,cur.smsChkStatInt=setInterval(PaymentsBox.checkStatus.pbind(cur.votesType,cur.smsChkData),2e3)}static showPhoneForm(e,t){geByClass1("_msg","payments_getvotes_phone").innerHTML=t||getLang("payments_get_votes_input_phone"),ge("phone").value="",PaymentsBox.refreshBox(),t&&cur.paymentsWideBox?PaymentsBox.setButtons(getLang("payments_save_phone"),PaymentsBox.saveSmsPhone):PaymentsBox.setButtons(getLang("payments_save_phone"),PaymentsBox.saveSmsPhone,getLang("global_back"),2==e?PaymentsBox.getVotesAmounts:e?PaymentsBox.showVotesAmounts:PaymentsBox.showTypes),show("payments_getvotes_phone");var n=cur.uiPhoneCountry.container;if("spasibo"===cur.votesType)hide(n),val("payments_phone_prefix","+79");else{var r=cur.uiPhoneCountry.selectedItems();if(r.length>0)val("payments_phone_prefix",r[0][3]);else for(var o=0,i=cur.countries.length;o<i;++o)cur.countries[o][0]==cur.defCountry&&val("payments_phone_prefix",cur.countries[o][3]);show(n)}return cur.paymentsBoxClass=ge("payments_box").className,addClass("payments_box","payments_phone_form"),!1}static showPaySystemsList(){return PaymentsBox.refreshBox(),hide("payments_getvotes_title"),show("payments_getvotes_ps","payments_votes_vkpay_promo_banner"),cur.votesType=!1,PaymentsBox.setButtons(!1,!1,cur.paymentsChangeType,PaymentsBox.showTypes),!1}static showVotesAmounts(){return PaymentsBox.refreshBox(),cur.checkoutEnabled?PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.showConfirm):"card"!==cur.votesType&&cur.psList[cur.votesType]&&!cur.psList[cur.votesType].in_menu?PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.showConfirm,getLang("payments_go_ps_list"),PaymentsBox.showPaySystemsList):PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.showConfirm,cur.paymentsChangeType,PaymentsBox.showTypes),show("payments_getvotes_cont","payments_getvotes_wrap","payments_getvotes_buttons"),cur.paymentsWideBox&&cur.paymentsOrderNotice&&(Object(_web_lib_ui_util__WEBPACK_IMPORTED_MODULE_15__.showMsg)("payments_box_error",cur.paymentsOrderNotice,"info_msg",null),show("payments_box_error")),Object(_web_lib_accessibility__WEBPACK_IMPORTED_MODULE_16__.updateAriaElements)(),delete cur.votesAmountsData.appoveCode,!1}static showTypes(){if(cur.paymentsWideBox)return PaymentsBox.showVotesAmounts(),!1;(PaymentsBox.refreshBox(),cur.votesAmountsVal=void 0,cur.votesAmountsData=[],hide("payments_getvotes_buttons"),show("payments_getvotes_method","payments_votes_vkpay_promo_banner"),cur.paymentBoxTitle)&&Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_5__.curBox)().setOptions({title:cur.paymentBoxTitle});return!1}static setButtons(e,t,n,r){if(!cur.paymentsWideBox||e){if(e){var o=ge("payments_getvotes_submit");o&&(o.innerHTML=e,o.onclick=t,o.dataset.taskClick="",show(o,"payments_getvotes_buttons"))}else hide("payments_getvotes_buttons");if(cur.paymentsWideBox){var i=ge("payments_getvotes_back");i&&(i.innerHTML="",n&&i.appendChild(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ce)("div",{className:"button",innerHTML:n,onclick:r,"data-task-click":""})))}else{var a=Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_5__.curBox)();a&&(cur.paymentBoxTitle||(cur.paymentBoxTitle=a.getOptions().title),n?(geByClass1("box_title",a.titleWrap).innerHTML=`<div class="back">${getLang("global_box_title_back")}</div>`,geByClass1("back",a.titleWrap).onclick=r,geByClass1("back",a.titleWrap).dataset.taskClick=""):geByClass1("box_title",a.titleWrap).innerHTML=cur.paymentBoxTitle)}}else hide("payments_getvotes_buttons")}static showBoxError(e,t){if("object"==typeof e&&(e=getLang("global_error_occured")),e&&cur.paymentsWideBox&&cur.checkoutEnabled){var n=new MessageBox({title:getLang("global_error"),hideButtons:!0});Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_5__.curBox)().hide(),n.content(e).show()}else{if(e){var r=ge("payments_box_error");r&&(val(r,""),Object(_web_lib_ui_util__WEBPACK_IMPORTED_MODULE_15__.showMsg)(r,e,t||"error"),show(r))}hide("payments_box_progress","payments_iframe_container"),show("payments_getvotes_wrap"),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.unlockButton)("payments_getvotes_submit"),PaymentsBox.hideRowProgress(),PaymentsBox.enablePaymentTypesRows()}}static showProgress(e){val("payments_box_progress_msg","string"==typeof e?e:getLang("payments_waiting_payment_complete")),hide("payments_box_error","payments_getvotes_wrap","payments_getvotes_buttons"),cur.paymentsWideBox&&e?show("payments_box_progress_link"):e||hide("payments_box_progress_link"),show("payments_box_progress")}static hideRowProgress(){["payments_getvotes_ps",cur.paymentsWideBox?"payments_box_menu":"payments_getvotes_method"].forEach(e=>{Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)(e)&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.geByClass)("payments_getvotes_active_row",ge(e)).forEach(t=>{"payments_box_menu"!==e?removeClass(t,"payments_getvotes_active_row"):removeClass(t,"payments_progress")})})}static refreshBox(){hide("payments_box_progress","payments_box_error","payments_getvotes_method","payments_getvotes_cont","payments_getvotes_phone","payments_getvotes_confirm","payments_getvotes_waiting","payments_getvotes_other","payments_getvotes_terminals","payments_getvotes_ps","payments_iframe_container"),show("payments_getvotes_wrap"),cur.smsChkStatInt&&!cur.paymentsWideBox&&clearInterval(cur.smsChkStatInt),cur.paymentsBoxClass&&(ge("payments_box").className=cur.paymentsBoxClass,cur.paymentsBoxClass=""),PaymentsBox.enablePaymentTypesRows()}static saveSmsPhone(){var e=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.trim)(val("phone")),t=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.trim)(val(ge("payments_phone_prefix")||{})||"");e&&(cur.paymentsWaitingCache.sms&&(clearInterval(cur.paymentsWaitingCache.sms[2]),delete cur.paymentsWaitingCache.sms),cur.newSmsPhone=t+e,PaymentsBox.getVotesAmounts())}static startFormMeasure(){cur.formMeasureTime=Date.now(),vk.dev&&Object(_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_14__.debugLog)(cur.formMeasureTime)}static finishFormMeasure(e){if(cur.formMeasureTime){var t=Date.now()-cur.formMeasureTime;vk.dev&&Object(_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_14__.debugLog)(t),delete cur.formMeasureTime,Object(_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_12__.statlogsValueEvent)("payments_frame_load_time",t,e)}}static frameMessage(e){if(!e.origin.match(/^https?:\/\/([a-zA-Z0-9\-\.]+\.)?paymentgate\.ru$/)&&!e.origin.match(/^https?:\/\/([a-zA-Z0-9\-\.]+\.)?money\.mail\.ru$/))return!1;var t={};if(!e.data||"{"!==e.data.substr(0,1)||"billing"===(t=Object(_web_lib_utils__WEBPACK_IMPORTED_MODULE_17__.parseJSON)(e.data)).type)if("pageLoad"===t.action)cur.paymentsIgnoreResize=!1;else if("paySuccess"===t.action)cur.paymentsIgnoreResize=!0,cur.checkoutEnabled&&(PaymentsBox.showProgress(),hide("payments_iframe_container"));else if("submit"===e.data||"3dsPage"===t.action)setTimeout(PaymentsBox.frameHeight.pbind(600,!0),200),addClass("payments_iframe_container",cur.checkoutEnabled?"payments_threeds_checkout_frame":"payments_threeds_frame");else if("3dsFinish"===t.action)PaymentsBox.frameHeight(),removeClass("payments_iframe_container",cur.checkoutEnabled?"payments_threeds_checkout_frame":"payments_threeds_frame");else if("resizeFrame"===t.action)if(t.action_params.height<10&&cur.paymentsIgnoreResize)cur.paymentsIgnoreResize=!1;else{var n=ge("payments_iframe_container");n&&!hasClass(n,"payments_threeds_checkout_frame")&&setTimeout(PaymentsBox.frameHeight.pbind(t.action_params.height),200)}else"putPixel"===t.action&&"page_load"===t.action_params.alias?(PaymentsBox.finishFormMeasure("dmr"),Object(_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_12__.statlogsValueEvent)("payments",0,"votes","dmr","iframe_loaded")):"session_fail"===t.action?Object(_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_12__.statlogsValueEvent)("payments",0,"votes","dmr","iframe_session_fail"):"payError"===t.action&&cur.checkoutEnabled?PaymentsBox.checkoutDecline(t.action_params):"typePaymentMethod"===t.action&&cur.checkoutEnabled&&(removeClass("payments_iframe_container","payments_threeds_checkout_frame"),t.action_params&&t.action_params.system&&PaymentsBox.checkoutPayMethodChanged(t.action_params.system))}static frameHeight(e,t){var n=ge("card_iframe");n&&(e?(cur.prevFrameHeight=n.style.height,n.style.height=e+"px"):(n.style.height=cur.prevFrameHeight,removeClass("payments_iframe_container",cur.checkoutEnabled?"payments_threeds_checkout_frame":"payments_threeds_frame")));var r=ge("payments_iframe_container");r&&(cur.paymentsWideBox&&!cur.checkoutEnabled||t||(r.style.height=(e||cur.prevFrameHeight)+(cur.checkoutEnabled?0:10)+"px"),r.scrollTop=0)}static paymentCanceled(e){e?cur.isPaymentFailed=!0:cur.isPaymentCanceled=!0,PaymentsBox.frameHeight()}static checkoutDecline(e){var t=e||{};t.act="checkout_decline",t.qid=cur.smsChkData.qid,t.hash=cur.smsChkData.declineHash,ajax.post("payments",t,{onDone:function(e){return PaymentsBox.stopCheckAndShowError(e),!0},onFail:function(e){return PaymentsBox.stopCheckAndShowError(e),!0}})}static checkoutPayMethodChanged(e){e&&ajax.post("payments",{act:"checkout_ps_choose",qid:cur.smsChkData.qid,pay_method:e})}static stopCheckAndShowError(e){clearInterval(cur.smsChkStatInt),PaymentsBox.needContinue=0,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_getvotes_waiting")||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_getvotes_confirm")?PaymentsBox.showVotesAmounts():cur.checkoutEnabled?PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.showConfirm):PaymentsBox.setButtons(cur.payments_get_votes,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_getvotes_confirm")?PaymentsBox.getVotesCharge:PaymentsBox.showConfirm,cur.paymentsChangeType,PaymentsBox.showTypes),PaymentsBox.showBoxError(e)}static complete(e,t){cur.paymentCompleteParams=t,cur.isPaymentComplete=!0}static checkStatus(e,t,n,r){if("sms"===e&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_box_progress")&&!cur.paymentsWideBox&&7!=cur.votesAmountsData[cur.votesAmountsVal][2])if(15==cur.smsChkStatCnt)ge("payments_box_progress_msg").innerHTML=getLang("payments_waiting_payment_complete_still");else if(cur.smsChkStatCnt>30){return clearInterval(cur.smsChkStatInt),cur.isPaymentAttemted=!0,Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_5__.curBox)().hide(),void Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_8__.showFastBox)(getLang("payments_internet_getting_votes"),getLang("payments_get_votes_delay"))}var o={act:"a_getvotes_check",type:e,votes_purchase:cur.isPaymentsAppOrder||cur.paymentsWideBox||cur.paymentsInstantPayType?0:1};t&&(t.oid||t.qid)?(o.oid=t.oid,o.qid=t.qid,o.hash=t.hash):o.hash=cur.psList[e].check_hash,0==cur.smsChkStatCnt&&(o.start=1),cur.statSessionId&&(o.stat_session_id=cur.statSessionId),t.test&&(o.test=1);var i=r||Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_5__.curBox)();ajax.post("al_payments.php",o,{onDone:function(n,r,o){if("sms"===e&&cur._popup&&cur._popup.closed)return clearInterval(cur.smsChkStatInt),cur.smsChkStatCnt=0,PaymentsBox.showBoxError(getLang("payments_payment_cancelled"),"info_msg"),void PaymentsBox.setConfirmButtons();if(n){if(1==n){for("mailmoney_vkpay"===e&&WkView&&(i._show(),cur.onExternalAppDone=null,WkView.hide(!1,!0)),cur.isPaymentAttemted=!0,PaymentsBox.needContinue&&(cur.needContinue=1,PaymentsBox.needContinue=0);boxQueue.count();)boxQueue.hideLast(!1);if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.re)("left_block10_0"),r&&!cur.isPaymentsAppOrder&&(!cur.paymentsTryCompleteOrder||!i.onDone)){var a=new MessageBox({width:400,hideButtons:!0,bodyStyle:"padding: 0; border-radius: 8px;"});a.content(r),a.show()}o&&Object(_web_lib_utils__WEBPACK_IMPORTED_MODULE_17__.updateMoney)(o)}else if(2==n||10==n)Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_getvotes_waiting")||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_getvotes_confirm")||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_iframe_container")?PaymentsBox.showVotesAmounts():PaymentsBox.setButtons(cur.payments_get_votes,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_getvotes_confirm")?PaymentsBox.getVotesCharge:PaymentsBox.showConfirm,cur.paymentsChangeType,PaymentsBox.showTypes),PaymentsBox.showBoxError(r);else if(3==n){var s="sms"===e;cur.votesAmountsData[cur.votesAmountsVal]?(val("payments_box_votes_num",cur.votesAmountsData[cur.votesAmountsVal][0]),val("payments_box_amount",cur.votesAmountsData[cur.votesAmountsVal][1]),val("payments_box_votes_money",s?cur.votesAmountsData[cur.votesAmountsVal][6]:cur.votesAmountsData[cur.votesAmountsVal][1])):(val("payments_box_votes_num",cur._otherVotes),val("payments_box_amount",cur._otherAmount+" "+Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_10__.langNumeric)(cur._otherAmount,cur.votesAmountsData.currency_price_str)),val("payments_box_votes_money",cur._otherAmount+" "+Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_10__.langNumeric)(cur._otherAmount,cur.votesAmountsData.currency_price_str))),s||(val("payments_getvotes_confirm_msg",getLang("payments_get_votes_ps_enter_code")),hide("payments_getvotes_confirm_amount")),cur.votesAmountsData.confirm_wait_comment&&cur.votesAmountsData.confirm_wait_comment[t.oid]?(ge("payments_getvotes_confirm_comm").innerHTML=cur.votesAmountsData.confirm_wait_comment[t.oid],show("payments_getvotes_confirm_comm_wrap")):s&&(ge("payments_getvotes_confirm_comm").innerHTML="",hide("payments_getvotes_confirm_comm_wrap")),"spasibo"===e&&(cur.updateTnxHash=r),PaymentsBox.refreshBox(),show("payments_box_confcode_wrap","payments_getvotes_confirm"),s&&r&&PaymentsBox.showBoxError(r),ge("confcode").onkeypress=s?"":PaymentsBox.checkPinKeyPress,PaymentsBox.setButtons(cur.payments_get_votes,s?PaymentsBox.smsSendCode:PaymentsBox.confirmPinCode,cur.paymentsChangeType,PaymentsBox.showTypes)}else{if(4==n){if(!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_getvotes_waiting")&&!cur.paymentsWaitingCache.sms){var c=getLang("payments_to_get_send_sms",cur.votesAmountsData[cur.votesAmountsVal][0]);cur.paymentsWideBox||(c+="<br/>"+getLang("payments_service_cost")),c=(c=(c=c.replace("{number}",r.service_number)).replace("{text}",`<nobr>${r.message_text}</nobr>`)).replace("{amount}",cur.votesAmountsData[cur.votesAmountsVal][1]),PaymentsBox.showWaiting(c)}return}if(5==n)PaymentsBox.refreshBox(),PaymentsBox.showConfirm();else if(6==n)delete cur.votesAmountsData.oauth_url,delete cur.paymentsInstantPayType,PaymentsBox.showVotesAmounts(),PaymentsBox.showBoxError(getLang("payments_instant_pay_amount_limit_error")),PaymentsBox.setConfirmButtons(),hide("payments_remember_wallet",geByClass1("payments_getvotes_confirm_descr","payments_getvotes_cont"));else{if(7==n)return void(cur._popup&&!cur._popup_href&&(cur._popup_href=r,cur._popup.location.href=r));if(8==n)return void PaymentsBox.checkStatusCallback(r);if(9==n)return void PaymentsBox.show3DsFrame(r,o)}}clearInterval(cur.smsChkStatInt),cur.smsChkStatCnt=0}},onFail:function(e){return PaymentsBox.stopCheckAndShowError(e),!0}}),cur.smsChkStatCnt++}static checkStatusCallback(e){}static getVotesCharge(e,t){if(!Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.isButtonLocked)("payments_getvotes_submit")&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_box_progress")&&((e=parseInt(e,10))||null!=cur.votesAmountsVal&&cur.votesAmountsData[cur.votesAmountsVal])){var n={act:"a_getvotes_charge",type:cur.votesType,hash:cur.paymentsHash,stat_session_id:cur.statSessionId},r=PaymentsBox.getEmail();""!==r&&(r&&(n.email=r),t?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.lockButton)("payments_getvotes_submit"):PaymentsBox.showProgress(),e?(n.pid=-1,n.votes=e):(n.pid=cur.votesAmountsVal,-1==cur.votesAmountsVal&&(n.votes=cur.votesAmountsData[cur.votesAmountsVal][0])),cur.isResetCheckedMaxSmsVotesValue&&(n.pay_by_repay_status=1),PaymentsBox.disablePaymentTypesRows(),ajax.post("al_payments.php",n,{onDone:n=>{PaymentsBox.votesChargeOnDone(n,e,t)},onFail:e=>(Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.unlockButton)("payments_getvotes_submit"),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_box_progress")&&PaymentsBox.setButtons(cur.payments_get_votes,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_getvotes_confirm")?PaymentsBox.getVotesCharge:PaymentsBox.showConfirm,cur.paymentsChangeType,PaymentsBox.showTypes),PaymentsBox.showBoxError(e),!0)}))}}static votesChargeOnDone(e,t,n){if(e)if(Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.unlockButton)("payments_getvotes_submit"),-1==e)PaymentsBox.getVotesAmounts(!0);else if(e.qid)if(cur.smsChkData=e,n){var r=getLang("payments_for_get_n_votes",t||cur.votesAmountsData[cur.votesAmountsVal][0]),o=cur.votesAmountsData.confirm_wait_msg.replace("{amount}",r);if(o+=t?"<br/>"+getLang("payments_service_cost_rubles",cur._otherAmount):"<br/>"+getLang("payments_service_cost").replace("{amount}",cur.votesAmountsData[cur.votesAmountsVal][1]),cur.paymentsWideBox)o+=`<br><br/><a onclick="return PaymentsBox.showPhoneForm(1);">${getLang("payments_change_phone_number")}</a>`;PaymentsBox.showWaiting(o)}else cur.smsChkStatCnt=0,cur.smsChkStatInt=setInterval(PaymentsBox.checkStatus.pbind(cur.votesType,e),2e3)}static getVotesAmounts(e,t,n){if(null!=t&&cur.paymentsWideBox){if(cur.votesType==t&&cur.votesTypeInit!=t&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_getvotes_cont")||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_getvotes_terminals")||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_getvotes_ps")))return;if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_getvotes_waiting")?cur.paymentsWaitingCache[cur.votesType]=[ge("payments_getvotes_title").innerHTML,ge("payments_getvotes_waiting").innerHTML,cur.smsChkStatInt]:cur.smsChkStatInt&&!cur.paymentsWaitingCache[t]&&clearInterval(cur.smsChkStatInt),"ps"===t&&cur.forcedPaymentMethod)return;cur.votesType=t}else null!=t&&(cur.votesType=t);if(cur.votesType){if(cur.paymentsWideBox&&!n&&(n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.domPN)(geByClass1("payments_method_"+cur.votesType,ge("payments_box_menu")))),cur.paymentsWideBox&&cur.paymentsTypesSum&&cur.paymentsTypesSum[t]){var r=ge("payments_summary_bill");r?r.innerHTML=cur.paymentsTypesSum[t]:val("payments_order_sum",cur.paymentsTypesSum[t]),each(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.geByClass)("payments_tt"),(e,t)=>{Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.re)(t)})}var o="term"===cur.votesType||"ps"===cur.votesType;if(!o||(PaymentsBox.refreshBox(),hide("payments_getvotes_method","payments_getvotes_title"),"term"===cur.votesType?(show("payments_getvotes_terminals"),hide("payments_votes_vkpay_promo_banner")):show("payments_getvotes_ps"),PaymentsBox.setButtons(!1,!1,cur.paymentsChangeType,PaymentsBox.showTypes),cur.paymentsWideBox)){for(var i=["payments_getvotes_ps",cur.paymentsWideBox?"payments_box_menu":"payments_getvotes_method"],a=0;a<i.length;a++){var s=i[a];if(!(!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)(s)||cur.paymentsWideBox&&!n||"payments_box_menu"===s&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_getvotes_ps")&&n&&hasClass(n.parentNode,"payments_getvotes_ps_list"))){var c=ge(s),u=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.geByClass)("payments_getvotes_active_row",c);if(!e&&u.length&&!cur.paymentsWideBox)return;u.forEach(e=>{removeClass(e,"payments_getvotes_active_row"),cur.paymentsWideBox&&!o&&removeClass(e,"payments_progress")})}}if(n&&(!cur.paymentsWideBox||"payments_box_menu"!==n.parentNode.id||o||e||addClass(n,"payments_progress"),addClass(n,"payments_getvotes_active_row")),cur.paymentsWideBox&&cur.paymentsWaitingCache[t])return ge("payments_getvotes_title").innerHTML=cur.paymentsWaitingCache[t][0],ge("payments_getvotes_waiting").innerHTML=cur.paymentsWaitingCache[t][1],PaymentsBox.refreshBox(),show("payments_getvotes_waiting","payments_getvotes_title"),hide("payments_getvotes_buttons"),void PaymentsBox.hideRowProgress();if(!o){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_getvotes_buttons")&&!cur.paymentsWideBox&&Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.lockButton)("payments_getvotes_submit");var l={act:"a_getvotes_amounts",type:cur.votesType,prefer_votes:cur.paymentsPreferVotes,hash:cur.paymentsHash};if(cur.statSessionId&&(l.stat_session_id=cur.statSessionId),cur.isPaymentsAppOrder&&cur.paymentsOrderAppId&&(l.aid=cur.paymentsOrderAppId,cur.paymentsOrderBillPeriod&&(l.bill_period=cur.paymentsOrderBillPeriod),cur.paymentsOrderDiscount&&(l.discount=cur.paymentsOrderDiscount)),"sms"===l.type)cur.checkedMaxVotes&&(l.checked_max_votes=cur.checkedMaxVotes,cur.checkedMaxVotes=0),cur.newSmsPhone&&(l.phone=cur.newSmsPhone,cur.newSmsPhone=!1),cur.isCorpPhone&&(l.corp=cur.isCorpPhone,cur.isCorpPhone=!1);else if("offers"===l.type){if(cur.app&&cur.app.options&&(l.isAppOrder=cur.paymentsOfferApp?1:0,l.aid=cur.app.options.aid,l.orderBox=cur.isPaymentsAppOrder?1:0),cur.paymentsPreload)return PaymentsBox.getVotesAmountsOnDone.apply(this,cur.paymentsPreload),cur.paymentsPreload=!1,void(cur.paymentsOfferPreload&&(PaymentsBox.offerOnLoad.apply(this,cur.paymentsOfferPreload),cur.paymentsOfferPreload=!1,cur.paymentsOneOffer=!0))}else if("spasibo"===l.type)cur.newSmsPhone&&(l.phone=cur.newSmsPhone,cur.newSmsPhone=!1),cur.needContinue&&(l.continue=1,cur.needContinue=0);else if(cur.psList[l.type]&&cur.psList[l.type].simple_redirect)return PaymentsBox.hideRowProgress(),void PaymentsBox.submitPaymentSystem();ajax.post("al_payments.php",l,{onDone:PaymentsBox.getVotesAmountsOnDone,onFail:e=>(PaymentsBox.showBoxError(e),!0)})}}}}static getVotesAmountsOnDone(result,html,data,js,title){if(PaymentsBox.hideRowProgress(),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.unlockButton)("payments_getvotes_submit"),cur.paymentsWideBox&&(title&&(val("payments_getvotes_title",title),show("payments_getvotes_title")),data&&data.menu_money)){var sumWrap=ge("payments_summary_bill");sumWrap?sumWrap.innerHTML=data.menu_money:val(`payments_method_${cur.votesType}_descr`,data.menu_money)}if(hide("payments_votes_vkpay_promo_banner"),-1!=result)if(-2!=result)if(-3!=result){if(!result)return PaymentsBox.showProgress(""),void(cur.smsAmountsInt=setTimeout(()=>{PaymentsBox.getVotesAmounts(!0)},1e3));if(html){var other;if(2==result?(other=ge("payments_getvotes_other"),val(other,html)):val("payments_getvotes_cont",html),cur.votesAmountsData=data,(cur.fromInstantPay&&2==cur.votesAmountsData.confirm_type||2!=cur.votesAmountsData.confirm_type||!cur.votesAmountsData.checked_max_sms_votes_val)&&PaymentsBox.showVotesAmounts(),cur.paymentsPreload&&"offers"===cur.votesType?PaymentsBox.setButtons(!1):"offers"===cur.votesType?PaymentsBox.setButtons(!1,!1,cur.paymentsChangeType,PaymentsBox.showTypes):cur.paymentsPreload&&PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.showConfirm),window.radioBtns.payments_getvotes_amounts={els:Array.prototype.slice.apply(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.geByClass)("radiobtn",ge("payments_getvotes_amounts")))},data.confirm_msg&&data.confirm_type&&val("payments_getvotes_confirm_msg",data.confirm_msg),2==result&&(hide("payments_getvotes_wrap"),show(other)),js)try{eval(js)}catch(e){Object(_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_14__.logEvalError)(e,js)}cur.instantNeedCVV&&(PaymentsBox.showConfirm(),cur.instantNeedCVV=!1),cur.paymentsEmailInput=ge("payments_receipt_email"),cur.paymentsEmailCheckbox=!!cur.paymentsEmailInput&&geByClass1("_checkbox",Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.domPN)(cur.paymentsEmailInput))}}else{var rows=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.geByClass)("payments_getvotes_method_opt","payments_box_menu");hide(geByClass1("payments_getvotes_active_row","payments_box_menu"));for(var i=0;i<rows.length;i++){var row=rows[i];if(!hasClass(row,"payments_getvotes_active_row")){row.onclick();break}}}else PaymentsBox.showPhoneForm(!1,html);else PaymentsBox.showPhoneForm()}static popupHtml(e,t,n){return`<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">\n<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">\n<head>\n    <meta http-equiv="content-type" content="text/html; charset=windows-1251" />\n    <meta http-equiv="X-UA-Compatible" content="IE=edge" />\n    <style>\n        body {font-family:tahoma,verdana,arial,sans-serif,Lucida Sans; font-size:11px;}\n        .text {position:relative; top:40%; text-align:center; line-height:24px;}\n        .text img {margin-bottom:8px;}\n        .text_container {position:absolute; top:0; left:0; right:0; bottom:0; line-height:150%; height: 100%;}\n    </style>\n    <script type="text/javascript">\n      if (!window.vk) window.vk = {loginscheme: '${vk.loginscheme}'}, ip_h: '${vk.ip_h}'};\n    <\/script>\n    <script type="text/javascript" src="/js/cmodules/workers/payments.js"><\/script>\n</head>\n<body>\n${t}\n<div id="wait_text_container" class="text_container">\n    <div class="text">\n        <img src="/images/progress.gif" /><br/>${e}\n    </div>\n</div>\n<script type="text/javascript">\n  var st = setTimeout(function() {try {${n}; clearTimeout(st)} catch(e) {}}, 100)\n<\/script>\n</body>\n</html>`}static viewOffer(e){this.setButtons(e,()=>{ge("start_offer").submit(),PaymentsBox.setButtons(getLang("payments_back_to_offers_list"),PaymentsBox.backToOffersList,getLang("global_cancel"),PaymentsBox.backToOffersList)},getLang("global_cancel"),PaymentsBox.backToOffersList)}static backToOffersList(){if(cur.paymentsOneOffer)return Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_5__.curBox)().hide();hide("payments_offer_view"),show("payments_offers_list"),cur.votesTypeInit||!1===cur.votesTypeInit?PaymentsBox.setButtons(!1):PaymentsBox.setButtons(!1,!1,cur.paymentsChangeType,PaymentsBox.showTypes)}static initializeOfferChecker(e,t,n,r){cur.offersOffset=e,cur.offersAppCurrency=t,PaymentsBox.checkOffersList=[],PaymentsBox.checkOffersDo=()=>{if(!n){var e=PaymentsBox.checkOffersList.join(",");PaymentsBox.checkOffersList=[],ajax.post("al_payments.php",{act:"a_offers_stat",offers:e,hash:r}),PaymentsBox.checkOffersTO=!1}},PaymentsBox.checkOffers(),addEvent(ge("box_layer_wrap"),"scroll",PaymentsBox.checkOffers)}static removeCheckOffersEvent(){removeEvent(ge("box_layer_wrap"),"scroll",PaymentsBox.checkOffers)}static checkOffers(){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.geByClass)("payments_offer",ge("payments_offers_wrap")),t=ge("box_layer_wrap").scrollTop,n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.getSize)("box_layer_wrap")[1];e.forEach(e=>{var r=e,o=r.offsetTop;o+30<t+n&&o+Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.getSize)(r)[1]-20>t&&!r.getAttribute("checked")&&(r.setAttribute("checked",1),PaymentsBox.checkOffersList.push(r.id.substr(15)),PaymentsBox.checkOffersTO||(PaymentsBox.checkOffersTO=setTimeout(PaymentsBox.checkOffersDo,1e3)))})}static offersRemoveButtons(){cur.votesTypeInit?PaymentsBox.setButtons(!1):PaymentsBox.setButtons(cur.paymentsChangeType,PaymentsBox.showTypes,getLang("global_close"),Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_5__.curBox)().hide)}static disablePaymentTypesRows(){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.geByClass)("payments_getvotes_method_opt");if(e&&e.length>0)for(var t=0;t<e.length;t++){var n=e[t];n.classList.contains("payments_getvotes_active_row")?n.classList.add("payments_getvotes_noevents_row"):n.classList.add("payments_getvotes_disabled_row","payments_getvotes_noevents_row")}}static enablePaymentTypesRows(){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.geByClass)("payments_getvotes_method_opt");if(e&&e.length>0)for(var t=0;t<e.length;t++)e[t].classList.remove("payments_getvotes_disabled_row","payments_getvotes_noevents_row")}}},XHVZ:function(e,t,n){"use strict";n.r(t),n.d(t,"ModuleNavigationStatMarks",(function(){return a})),n.d(t,"ModuleNavigationStatCollector",(function(){return s}));var r=n("o5u5"),o=n("XMCv"),i=n("T3FL"),a={web:{PERF_MARK:"__navmark",PERF_MEASURE:"__navmeasure"},mvk:{PERF_MARK:"__navmark_mvk",PERF_MEASURE:"__navmeasure_mvk"}},s=function(){function e(e){this.moduleNavigationStatCollector=e}return e.prototype.logEvent=function(e){var t,n,s,c=a[e],u=c.PERF_MARK,l=c.PERF_MEASURE,d=o.default.getConnectionEffectiveType(),_=i.navigationStat.getModule();try{window.performance.measure(l,u),s=null===(n=window.performance.getEntriesByType("measure").find((function(e){return e.name===l})))||void 0===n?void 0:n.duration}catch(e){}"performance"in window&&(window.performance.clearMeasures(l),window.performance.clearMarks(u)),s&&[d,_].every(Boolean)&&"unknown"!==_&&this.moduleNavigationStatCollector.logEvent(((t={network_type:"UNKNOWN",network_effective_type:d,type:r.NetworkStatEventTypes.TYPE_MODULE_NAVIGATION_STATS_ITEM})[r.NetworkStatEventTypes.TYPE_MODULE_NAVIGATION_STATS_ITEM]={value:Math.round(s).toString(),module:_},t))},e}()},XKFU:function(e,t,n){var r=n("dyZX"),o=n("g3g5"),i=n("Mukb"),a=n("KroJ"),s=n("m0Pp"),c=function(e,t,n){var u,l,d,_,p=e&c.F,h=e&c.G,f=e&c.S,m=e&c.P,g=e&c.B,v=h?r:f?r[t]||(r[t]={}):(r[t]||{}).prototype,b=h?o:o[t]||(o[t]={}),y=b.prototype||(b.prototype={});for(u in h&&(n=t),n)d=((l=!p&&v&&void 0!==v[u])?v:n)[u],_=g&&l?s(d,r):m&&"function"==typeof d?s(Function.call,d):d,v&&a(v,u,d,e&c.U),b[u]!=d&&i(b,u,_),m&&y[u]!=d&&(y[u]=d)};r.core=o,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},XLUH:function(e,t,n){"use strict";n.r(t),n.d(t,"UNKNOWN_STATE",(function(){return o})),n.d(t,"BACKGROUND_STATE",(function(){return i})),n.d(t,"FULL_SCREEN_STATE",(function(){return a})),n.d(t,"APP_STATE",(function(){return s})),n.d(t,"AudioStatsPlayerAdapter",(function(){return c}));var r=n("rEJs"),o=0,i=1,a=2,s=3;class c{constructor(e){this.player=e,this.listeners=[]}listen(e,t,n){var r=t.bind(n||this);this.listeners.push({event:e,fn:t,listener:r}),this.playerListen(e,r)}unListen(e,t){var n=-1;if(each(this.listeners,(r,o)=>{if(o.event===e&&o.listener===t)return n=r,!1}),!(n<0)){var r=this.listeners[n];this.playerUnListen(e,r.listener),this.listeners.splice(n,1)}}unListenAll(){for(var e;e=this.listeners[0];)this.unListen(e.event,e.listener)}listenPlay(e,t){this.listen(r.events.PLAY,e,t)}listenPause(e,t){this.listen(r.events.PAUSE,e,t)}listenStop(e,t){this.listen("stop",e,t)}listenProgress(e,t){this.listen(r.events.PROGRESS,e,t)}listenVolume(e,t){this.listen(r.events.VOLUME,e,t)}listenSeek(e,t){this.listen(r.events.SEEK,e,t)}listenPlaylistChanged(e,t){this.listen(r.events.PLAYLIST_CHANGED,e,t)}listenEnded(e,t){this.listen(r.events.ENDED,e,t)}listenPlayNext(e,t){this.listen(r.events.PLAY_NEXT,e,t)}listenAdCompleted(e,t){this.listen(r.events.AD_COMPLETED,e,t)}playerListen(e,t){this.player.subscribe(e,t)}playerUnListen(e,t){this.player.unsubscribe(e,t)}getPausedBy(){return null}getState(){return document.hidden?i:s}getProgress(){return this.player.playerGetProgress()}getProgressInSeconds(){return this.player.getProgressInSeconds()}getVolume(){return this.player.getVolume()}getAudioId(){return this.player.getAudioId()}getAudio(){return this.player.getAudio()}getAudioTrackCode(){return this.player.getAudioTrackCode()}getPrevAudioId(){return this.player.getPrevAudioId()}getPrevPlaylistId(){return this.player.getPrevPlaylistId()}getPlaylistId(){return this.player.getPlaylistId()}getContext(){return this.player.getContext()}getSequence(){return this.player.getSequence()}getType(){return this.player.getType()}getListenedTime(){return isNaN(this.player.getListenedTime())?0:Math.round(this.player.getListenedTime())}getSearchParams(){return this.player.getSearchParams()}isPlaying(){return this.player.isPlaying()}isAutoPlayed(){return this.player.isAutoPlayed()}isRepeatCurrentAudio(){return this.player.isRepeatCurrentAudio()}isRepeatAll(){return this.player.isRepeatAll()}isShuffledPlaylist(){return this.player.isShuffledPlaylist()}isRealPlaylist(){return this.player.isRealPlaylist()}isRealPrevPlaylist(){return this.player.isRealPrevPlaylist()}isPodcast(){return this.player.isPodcast()}isAdPlaying(){return this.player.ads.isPlaying()}isLastTrack(){return this.player.isLastTrack()}hasPrevAudio(){return this.player.hasPrevAudio()}hasPrevPlaylist(){return this.player.hasPrevPlaylist()}hasPlaylist(){return this.player.hasPlaylist()}hasSearchParams(){return this.player.hasSearchParams()}isDebug(){return!1}sendListenedData(e){return this.player.sendListenedData(e)}}},XMCv:function(e,t,n){"use strict";function r(){return navigator.connection||navigator.mozConnection||navigator.webkitConnection}function o(){var e=r();return e&&e.type||"unknown"}function i(){var e=r();return e&&e.effectiveType||"unknown"}n.r(t),t.default={getConnection:r,getConnectionType:o,getConnectionEffectiveType:i,getConnectionTypeID:function(){return{unknown:0,bluetooth:1,cellular:2,ethernet:3,none:4,wifi:5,wimax:6,other:7}[o()]||0},getConnectionEffectiveTypeID:function(){return{unknown:0,"slow-2g":1,"2g":2,"3g":3,"4g":4}[i()]||0}}},XMVh:function(e,t,n){var r=n("K0xU")("iterator"),o=!1;try{var i=[7][r]();i.return=function(){o=!0},Array.from(i,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var i=[7],a=i[r]();a.next=function(){return{done:n=!0}},i[r]=function(){return a},e(i)}catch(e){}return n}},Xbzi:function(e,t,n){var r=n("0/R4"),o=n("i5dc").set;e.exports=function(e,t,n){var i,a=t.constructor;return a!==n&&"function"==typeof a&&(i=a.prototype)!==n.prototype&&r(i)&&o&&o(e,i),e}},Xrg9:function(e,t,n){"use strict";n.r(t);var r=n("tGJf");function o(e){try{r.vkLocalStorage.removeItem(e)}catch(e){}}t.default={checkVersion:function(){try{return void 0!==window.localStorage&&null!==window.localStorage&&void 0!==window.JSON}catch(e){return!1}},remove:o,get:function(e){try{return JSON.parse(r.vkLocalStorage.getItem(e))}catch(e){return!1}},set:function(e,t){o(e);try{return r.vkLocalStorage.setItem(e,JSON.stringify(t))}catch(e){return!1}}}},XuKo:function(e,t,n){"use strict";n.r(t),n.d(t,"showStory",(function(){return u})),n.d(t,"showNarrative",(function(){return l})),n.d(t,"storiesPreloadStatic",(function(){return _})),n.d(t,"sendMask",(function(){return h}));var r=n("EasH"),o=n("kcIO"),i=n("4+be"),a=n("El3O"),s=n("zxIV"),c=!1;function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(cur.storiesNotSupported)return Object(r.showFastBox)(Object(i.getLang)("global_error"),Object(i.getLang)("stories_bad_browser"));clearTimeout(c),c=setTimeout((function(){bodyNode.appendChild(Object(s.ce)("div",{id:"stories_loader",innerHTML:Object(a.getProgressHtml)("stories_loader_pr","pr_baw pr_medium")+'<div class="back"></div>'}))}),1e3);var n=[jsc("web/stories.js"),"stories.css",jsc("web/emoji.js"),"videoview.js","videoplayer.js","videoplayer.css","hls.min.js"];stManager.add(n,(function(){var n=window.Stories;clearTimeout(c),Object(s.re)("stories_loader"),n.show(e,t)}))}function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i="narrative"+t,a=`${e}${n=n?"_"+n:""}&${i}/${r=r||`narrative${e}_${t}`}`;u(a,o)}var d=!1;function _(){d||cur.storiesNotSupported||(d=!0,stManager.add([jsc("web/stories.js"),"stories.css",jsc("web/story_publisher.js"),"photo_editor.css"]))}var p=!1;function h(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];p||(p=!0,ajax.post("al_stories.php",{act:"send_mask",mask_id:e,hash:t,is_short_video:n},{loader:!0,onDone:(e,t,n,a)=>{"cant_send"===e?Object(r.showFastBox)({title:t,width:460},n,a):Object(o.showDoneBox)(Object(i.getLang)("stories_mask_sent")),p=!1},onFail:()=>(p=!1,Object(r.showFastBox)({title:Object(i.getLang)("global_box_error_title")},Object(i.getLang)("global_unknown_error")),!0)}))}},Xxuz:function(e,t,n){"use strict";var r=n("I8a+"),o=RegExp.prototype.exec;e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var i=n.call(e,t);if("object"!=typeof i)throw new TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==r(e))throw new TypeError("RegExp#exec called on incompatible receiver");return o.call(e,t)}},XzvV:function(e,t,n){"use strict";n.r(t),n.d(t,"serviceGroups",(function(){return d})),n.d(t,"serviceGroupsCatalog",(function(){return _})),n.d(t,"serviceSearchCommunities",(function(){return p})),n.d(t,"serviceEvents",(function(){return h})),n.d(t,"serviceFriends",(function(){return f})),n.d(t,"serviceSearchPeople",(function(){return m})),n.d(t,"serviceFriendsFind",(function(){return g})),n.d(t,"serviceWallUsers",(function(){return v})),n.d(t,"serviceWallGroups",(function(){return b})),n.d(t,"serviceWall",(function(){return y})),n.d(t,"serviceSearchStatuses",(function(){return E})),n.d(t,"serviceNews",(function(){return w})),n.d(t,"serviceSearchAudio",(function(){return O})),n.d(t,"serviceBookmarksGroups",(function(){return C})),n.d(t,"serviceBookmarksUsers",(function(){return T})),n.d(t,"serviceAppsList",(function(){return S})),n.d(t,"serviceApps",(function(){return D})),n.d(t,"serviceAppsManage",(function(){return P})),n.d(t,"serviceSearchVideo",(function(){return k})),n.d(t,"serviceTopSearch",(function(){return A})),n.d(t,"servicePhotos",(function(){return I})),n.d(t,"serviceDocs",(function(){return x})),n.d(t,"serviceMessages",(function(){return j})),n.d(t,"serviceAudio",(function(){return M})),n.d(t,"serviceSearchAuto",(function(){return L})),n.d(t,"serviceManage",(function(){return R})),n.d(t,"serviceVideo",(function(){return B})),n.d(t,"serviceMarket",(function(){return N})),n.d(t,"serviceMarketV2",(function(){return U})),n.d(t,"serviceMarketV2Suggester",(function(){return F})),n.d(t,"serviceMarketGroups",(function(){return W})),n.d(t,"serviceUserFriends",(function(){return H})),n.d(t,"serviceGamesCatalog",(function(){return K})),n.d(t,"clickTypeEmpty",(function(){return V})),n.d(t,"clickTypeTap",(function(){return q})),n.d(t,"clickTypeSuggester",(function(){return G})),n.d(t,"clickTypeJoinGroupOut",(function(){return z})),n.d(t,"clickTypeLeaveGroupOut",(function(){return Y})),n.d(t,"clickTypeAddFriendOut",(function(){return $})),n.d(t,"clickTypeRemoveFriendOut",(function(){return X})),n.d(t,"outOfSerpGroup",(function(){return Q})),n.d(t,"outOfSerpProfile",(function(){return J})),n.d(t,"blockNameEmpty",(function(){return Z})),n.d(t,"blockNameOwn",(function(){return ee})),n.d(t,"blockNameSearch",(function(){return te})),n.d(t,"docTypeEmpty",(function(){return re})),n.d(t,"getSearchPosition",(function(){return oe})),n.d(t,"tryLogOutOfSerpClick",(function(){return le})),n.d(t,"removeOutOfSerpClickLogging",(function(){return de})),n.d(t,"logClick",(function(){return _e})),n.d(t,"logSearch",(function(){return pe})),n.d(t,"removeSearchPositionTracker",(function(){return fe})),n.d(t,"logLeftMenuClicks",(function(){return me})),n.d(t,"saveSearchAttemptStats",(function(){return ge})),n.d(t,"generateQID",(function(){return ve}));n("rE2o"),n("ioFf"),n("HEwt"),n("a1Th"),n("rGqo"),n("Btvt"),n("KKXr"),n("pIFo");var r=n("t7n3"),o=n("DM2o");n.d(t,"statlogsValueEvent",(function(){return o.statlogsValueEvent}));var i=n("tGJf");function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=c(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,i=!0,a=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(a)throw o}}}}function c(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l={},d="groups",_="groups_catalog",p="search_communities",h="events",f="friends",m="search_people",g="friends_find",v="wall_users",b="wall_groups",y="wall",E="search_statuses",w="news",O="search_audio",C="bookmarks_groups",T="bookmarks_users",S="apps_list",D="apps",P="apps_manage",k="search_video",A="top_search",I="photos",x="docs",j="messages",M="audio",L="search_auto",R="manage",B="video",N="market",U="market_v2",F="market_v2_suggester",W="market_groups",H="user_friends",K="games_catalog",V="",q="tap",G="click_suggester",z="join_group_out",Y="leave_group_out",$="add_friend_out",X="remove_friend_out",Q="group",J="profile",Z="",ee="own",te="search",ne="SERPS_LOGS_DATA_LOCK",re="";function oe(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,c=0,u="",l=0,d=1,_=0,p=0;return e&&(isArray(n)||(n=[n]),n.some(n=>{var h,f=e.classList.contains(n)?e:gpeByClass(n,e),m=0;if(f&&(h=r?bodyNode.querySelectorAll(r):f.parentNode.children)){if((c=[...h].indexOf(f)+1)&&o)for(var g in o)if(o.hasOwnProperty(g)){var v=bodyNode.querySelectorAll(o[g]);if(v){var b=[...v].indexOf(f)+1;if(b){l=b,u=g;break}}d++,m++}if(i){var y,E=s(i);try{for(E.s();!(y=E.n()).done;){var w=y.value,O=gpeByClass(w,e);O&&(d=O.getAttribute("data-block-num"))}}catch(e){E.e(e)}finally{E.f()}}var C=a(t(f,m),2);return _=C[0],p=C[1],!0}})),[c,_,p,u,l,d]}function ie(e,t,n,r,o,i){if(l[e]){var s=i.target;if(s&&s.classList)switch(e){case d:return void function(e,t,n,r,o,i){var s=i.classList,c=i.outerHTML,u=a(oe(i,e=>{var t=e.getAttribute("id");return[0,"-"+(t=t?t.replace("gl_groups","").replace("gl_admin",""):0)]},"_gl_row","#groups_list_tab_groups ._gl_row, #groups_list_search_wrap ._gl_row",{[ee]:"#groups_list_tab_groups ._gl_row",[te]:"#groups_list_search_wrap ._gl_row"}),5),l=u[1],d=u[2],_=u[3],p=u[4];if(!p)return;_===ee&&(r=0,o="");var h=V;if(s.contains("group_row_title")||s.contains("group_row_img")||s.contains("highlight")){var f=gpeByClass("group_list_row",i);if(!f)return;if(f.hasAttribute("data-clicked"))return;f.setAttribute("data-clicked",!0),h=q}s.contains("flat_button")&&!s.contains("secondary")&&(h="join_group");s.contains("flat_button")&&s.contains("secondary")&&(h="leave_group");if(_===ee&&-1!==c.indexOf("GroupsList.subscribe")){if(s.contains("ui_actions_menu"))return;h="join_group",!cur.scrollList.deleted[-d]&&(h="leave_group")}if(_===ee&&-1!==c.indexOf("GroupsList.toggleFave")){if(s.contains("ui_actions_menu"))return;h="fave","1"===i.getAttribute("data-value")&&(h="unfave")}if(h===V)return;ue(),h===q&&ce(Q,e,_,p,n,t,d,l,r,o);_e(e,_,p,h,n,t,d,l,r,o,re)}(e,t,n,r,o,s);case p:return void function(e,t,n,r,o,i){if(!t)return;var s=i.classList,c=i.outerHTML,u=i.tagName,l=a(oe(i,e=>{var t=e.getAttribute("data-id");return t||(t=0),[0,"-"+t]},"search_row","#results .search_row"),3),d=l[0],_=l[1],p=l[2];if(!d)return;var h=V;if(s.contains("search_item_img")||s.contains("highlight")||"A"===u&&-1!==c.indexOf("return nav.go")){var f=gpeByClass("groups_row",i);if(!f)return;if(f.hasAttribute("data-clicked"))return;f.setAttribute("data-clicked",!0),h=q}s.contains("search_sub_button")&&(h="join_group");s.contains("search_unsub_button")&&(h="leave_group");if(h===V)return;ue(),h===q&&ce(Q,e,Z,d,n,t,p,_,r,o);_e(e,Z,d,h,n,t,p,_,r,o,re)}(e,t,n,r,o,s);case _:return void function(e,t,n,r,o,i){if(!t)return;var s=i.classList,c=i.outerHTML,u=i.tagName,l=a(oe(i,e=>{var t=e.getAttribute("data-id");return t||(t=0),[0,"-"+t]},"search_row","#results .search_row"),3),d=l[0],_=l[1],p=l[2],h=V;if(s.contains("search_item_img")||s.contains("highlight")||"A"===u&&-1!==c.indexOf("return nav.go")){var f=gpeByClass("groups_row",i);if(!f)return;if(f.hasAttribute("data-clicked"))return;f.setAttribute("data-clicked",!0),h=q}s.contains("search_sub_button")&&(h="join_group");s.contains("search_unsub_button")&&(h="leave_group");if(h===V)return;ue(),h===q&&ce(Q,e,Z,d,n,t,p,_,r,o);_e(e,Z,d,h,n,t,p,_,r,o,re)}(e,t,n,r,o,s);case h:return void function(e,t,n,r,o,i){var s=i.classList,c=i.outerHTML,u=i.parentElement?i.parentElement.classList:null,l=a(oe(i,e=>{var t=e.getAttribute("data-id");return t||(t=0),[0,"-"+t]},"search_row","#groups_list_in_tab_search_all .search_row"),3),d=l[0],_=l[1],p=l[2];if(!d)return;var h=V;if(s.contains("search_item_img")||-1!==c.indexOf("return nav.go")&&u&&u.contains("title")){var f=gpeByClass("search_row",i);if(!f)return;if(f.hasAttribute("data-clicked"))return;f.setAttribute("data-clicked",!0),h=q}s.contains("search_sub_button")&&(h="join_group");s.contains("search_unsub_button")&&(h="leave_group");if(h===V)return;ue(),h===q&&ce(Q,e,Z,d,n,t,p,_,r,o);_e(e,Z,d,h,n,t,p,_,r,o,re)}(e,t,n,r,o,s);case f:case H:return void function(e,t,n,r,o,i){var s=i.classList,c=i.outerHTML,u=i.tagName,l=a(oe(i,e=>{var t=e.getAttribute("id");return[0,t=t?t.replace("friends_user_row",""):0]},"friends_user_row","#list_content .friends_user_row, #friends_search_cont .friends_user_row",{[ee]:"#list_content .friends_user_row",[te]:"#friends_search_cont .friends_user_row"}),5),d=l[1],_=l[2],p=l[3],h=l[4];if(!h)return;var f=V;p===ee&&-1!==c.indexOf("showWriteMessageBox")&&(f="write_msg");p===ee&&-1!==c.indexOf("deleteFriend")&&(f="remove_friend");p===ee&&s.contains("friends_restore_link")&&(f="restore_friend");s.contains("ui_zoom_icon")&&(f="show_photo");p===te&&i.id&&-1!==i.id.indexOf("friends_subsc")&&(f="add_friend");p===te&&i.id&&-1!==i.id.indexOf("friends_unsubsc")&&(f="remove_friend");if(s.contains("friends_photo_img")||p===ee&&"A"===u&&-1!==c.indexOf("return nav.go")||p===te&&"A"===u&&0===s.length){var m=gpeByClass("friends_user_row",i);if(!m)return;if(m.hasAttribute("data-clicked"))return;m.setAttribute("data-clicked",!0),f=q}if(f===V)return;ue(),f===q&&ce(J,e,p,h,n,t,_,d,r,o);_e(e,p,h,f,n,t,_,d,r,o,re)}(e,t,n,r,o,s);case g:return void function(e,t,n,r,o,i){var s=i.classList,c=i.outerHTML,u=i.parentElement?i.parentElement.classList:null;if(!t)return;var l=a(oe(i,e=>[0,e.getAttribute("data-id")||0],"search_row","#results .search_row"),3),d=l[0],_=l[1],p=l[2];if(!d)return;var h=V;if(s.contains("search_item_img")||-1!==c.indexOf("return nav.go")&&u&&u.contains("name")){var f=gpeByClass("people_row",i);if(!f)return;if(f.hasAttribute("data-clicked"))return;f.setAttribute("data-clicked",!0),h=q}s.contains("search_sub_button")&&(h="add_friend");s.contains("search_unsub_button")&&(h="remove_friend");if(h===V)return;ue(),h===q&&ce(J,e,Z,d,n,t,p,_,r,o);_e(e,Z,d,h,n,t,p,_,r,o,re)}(e,t,n,r,o,s);case m:return void function(e,t,n,r,o,i){var s=i.classList,c=i.outerHTML,u=i.parentElement?i.parentElement.classList:null;if(!t)return;var l=a(oe(i,e=>[0,e.getAttribute("data-id")||0],"search_row","#results .search_row"),3),d=l[0],_=l[1],p=l[2];if(!d)return;var h=V;if(s.contains("search_item_img")||-1!==c.indexOf("return nav.go")&&u&&u.contains("name")){var f=gpeByClass("people_row",i);if(!f)return;if(f.hasAttribute("data-clicked"))return;f.setAttribute("data-clicked",!0),h=q}s.contains("search_sub_button")&&(h="add_friend");s.contains("search_unsub_button")&&(h="remove_friend");if(h===V)return;ue(),h===q&&ce(J,e,Z,d,n,t,p,_,r,o);_e(e,Z,d,h,n,t,p,_,r,o,re)}(e,t,n,r,o,s);case L:return void function(e,t,n,r,o,i){var s=i.classList,c=i.tagName,u=i.outerHTML,l=a(oe(i,e=>{var t="",n=e.classList;if(n.contains("_audio_row"))t=e.getAttribute("data-full-id");else{if(n.contains("people_row"))return[0,t=e.getAttribute("data-id")||0];if(n.contains("groups_row"))return[0,"-"+(t=e.getAttribute("data-id")||0)];n.contains("_video_item")?t=e.getAttribute("data-id"):n.contains("_post")&&(t=(t=e.getAttribute("id")||"").replace("post",""))}return t&&t.indexOf("_")?t.split("_"):[0,t]},["_audio_row","search_row","_video_item","_post"],"\n      ._search_results ._audio_row,\n      ._search_results .search_row,\n      ._search_results ._video_item,\n      #results ._post\n    ",{search_audio:"._search_results ._audio_row",search_people:"._search_results .people_row",search_groups:"._search_results .groups_row",search_video:"._search_results ._video_item",search_posts:"#results ._post"},["search_audio_media","search_people_media","search_communities_media","search_video_media"]),5),d=l[1],_=l[2],p=l[3],h=l[4];if(!h)return;var f=V;switch(p){case"search_video":s.contains("icon_add")&&(f="add"),s.contains("icon_added")&&(f="remove"),(s.contains("video_thumb_play")||s.contains("video_item_controls")||s.contains("video_item_title"))&&(f="play"),s.contains("al_need_login")&&(f="open_artist"),s.contains("group_link")&&(f="open_author_group"),s.contains("mem_link")&&(f="open_author_user");break;case"search_audio":(s.contains("audio_row__play_btn")||s.contains("audio_row__performer_title")||s.contains("audio_row__title")||s.contains("audio_row__title_inner")||s.contains("audio_row__title_inner_subtitle")||s.contains("audio_row__inner")||s.contains("audio_player__place")||s.contains("audio_row__action_next"))&&(f="play"),s.contains("audio_row__action_add")&&(f="add"),"A"===c&&(f="open_artist");break;case"search_people":"A"===c&&-1!==u.indexOf("searcher.subscribe")&&(f="remove_friend"),s.contains("add_btn")&&(f="add_friend"),s.contains("search_item_img")&&(f=q,ce(J,e,p,h,n,t,_,d,r,o));break;case"search_groups":(s.contains("search_item_img")||"A"===c&&-1!==u.indexOf("return nav.go"))&&(f=q,ce(Q,e,p,h,n,t,_,d,r,o));break;case"search_posts":gpeByClass("post",i,"div#results")&&(f=q)}if(f===V)return;_e(e,p,h,f,n,t,_,d,r,o,re)}(e,t,n,r,o,s);case C:return void function(e,t,n,r,o,i){var s=i.classList,c=i.outerHTML,u=a(oe(i,e=>{var t=e.getAttribute("data-id");return t||(t=0),[0,t]},"_bookmark_page_item"),3),l=u[0],d=u[1],_=u[2];if(!l)return;var p=V;if(s.contains("group_link")||s.contains("bookmark_page_item__image")){var h=gpeByClass("_bookmark_page_item",i);if(!h)return;if(h.hasAttribute("data-clicked"))return;h.setAttribute("data-clicked",!0),p=q}(s.contains("ui_zoom")||s.contains("ui_zoom_icon"))&&(p="show_photo");-1!==c.indexOf("Bookmarks.removeBookmark")&&(p="unfave");if(p===V)return;ue(),p===q&&ce(Q,e,Z,l,n,t,_,d,r,o);_e(e,Z,l,p,n,t,_,d,r,o,re)}(e,t,n,r,o,s);case T:return void function(e,t,n,r,o,i){var s=i.classList,c=i.outerHTML,u=a(oe(i,e=>{var t=e.getAttribute("data-id");return t||(t=0),[0,t]},"_bookmark_page_item"),3),l=u[0],d=u[1],_=u[2];if(!l)return;var p=V;if(s.contains("mem_link")||s.contains("bookmark_page_item__image")){var h=gpeByClass("_bookmark_page_item",i);if(!h)return;if(h.hasAttribute("data-clicked"))return;h.setAttribute("data-clicked",!0),p=q}(s.contains("ui_zoom")||s.contains("ui_zoom_icon"))&&(p="show_photo");-1!==c.indexOf("Bookmarks.removeBookmark")&&(p="unfave");if(p===V)return;ue(),p===q&&ce(J,e,Z,l,n,t,_,d,r,o);_e(e,Z,l,p,n,t,_,d,r,o,re)}(e,t,n,r,o,s);case O:!function(e,t,n,r,o,i){var s=i.classList,c=i.tagName;if(gpeByClass("ap_layer_wrap",i))return;if(!gpeByClass("search_results",i))return;var u=a(oe(i,e=>{var t=e.getAttribute("data-full-id");return t&&t.indexOf("_")?t.split("_"):[0,0]},"_audio_row"),3),l=u[0],d=u[1],_=u[2];if(!l)return;var p=V;(s.contains("audio_row__cover_icon")||s.contains("audio_row__performer_title")||s.contains("audio_row__title")||s.contains("audio_row__title_inner")||s.contains("audio_row__title_inner_subtitle")||s.contains("audio_row__inner")||s.contains("audio_player__place")||s.contains("audio_row__action_next")||s.contains("audio_row__performers"))&&(p="play");s.contains("audio_row__action_add")&&(p="add");"A"===c&&(p="open_artist");if(p===V)return;_e(e,Z,l,p,n,t,_,d,r,o,re)}(e,t,n,r,o,s);break;case k:return void function(e,t,n,r,o,i){var s=i.classList,c=a(oe(i,e=>{var t=e.getAttribute("data-id");return t&&t.indexOf("_")?t.split("_"):[0,0]},"_video_item","#results ._video_item"),3),u=c[0],l=c[1],d=c[2];if(!u)return;var _=V;(s.contains("video_thumb_play")||s.contains("video_item_controls")||s.contains("video_thumb_label_item")||s.contains("video_thumb_label")||s.contains("video_item_title")||s.contains("mv_subtitle"))&&(_="play");(s.contains("icon_add")||s.contains("video_thumb_action_add"))&&(_="add");s.contains("icon_added")&&(_="remove");s.contains("group_link")&&(_="open_author_group");s.contains("al_need_login")&&(_="open_artist");s.contains("mem_link")&&(_="open_author_user");if(_===V)return;_e(e,Z,u,_,n,t,d,l,r,o,re)}(e,t,n,r,o,s);case M:return void function(e,t,n,r,o,i){var s=i.classList,c=i.tagName,u=i.parentElement?i.parentElement.classList:null,l=a(oe(i,(e,t)=>{var n="";switch(t){case 1:case 4:n=e.getAttribute("data-full-id");break;case 0:case 3:n=e.getAttribute("data-raw-id");break;case 2:n=e.getAttribute("data-title")}return n&&n.indexOf("_")?n.split("_"):n?[n,0]:[0,0]},["_audio_pl_item","audio_block_small_item","_audio_row","_video_item"],"\n        ._audio_section__search ._audio_pl_item,\n        ._audio_section__search ._audio_row,\n        ._audio_section__search .audio_block_small_item,\n        ._audio_section__search .video_item,\n        ._audio_search_blocks ._audio_row,\n        ._audio_search_blocks ._video_item,\n        ._audio_search_blocks ._audio_pl_item,\n        ._audio_search_blocks .audio_block_small_item\n      ",{search_playlists:".CatalogBlock__search_global_albums ._audio_pl_item",own_audios:".CatalogBlock__search_owned_audios ._audio_row",search_audios:".CatalogBlock__search_global_audios ._audio_row",search_artists:".CatalogBlock__search_global_artists .audio_block_small_item",global_clips:".CatalogBlock__search_global_clips .video_item",own_playlists:'._audio_page_block__playlists_items[data-audio-context="search_owned_playlist"] ._audio_pl_item'}),5),d=l[1],_=l[2],p=l[3],h=l[4];if(!h)return;var f=V;s.contains("audio_row__action_more")||u&&u.contains("audio_row__actions")||(f="play");s.contains("audio_row__action_next")&&(f="play");"own_audios"===p&&s.contains("audio_row__action_recoms")&&(f="show_similar");"own_audios"===p&&s.contains("audio_row__action_delete")&&(f="remove");"own_audios"===p&&s.contains("audio_row__action_add")&&(f="add");"search_audios"===p&&s.contains("audio_row__action_add")&&(f="add");"global_clips"===p&&s.contains("icon_add")&&(f="add");"global_clips"===p&&s.contains("icon_added")&&(f="remove");"A"===c&&(f="open_artist");if(f===V)return;_e(e,p,h,f,n,t,_,d,r,o,re)}(e,t,n,r,o,s);case A:return void function(e,t,n,r,o,i){var s=i.classList,c=i;s.contains("ts_contact")||(c=gpeByClass("ts_contact",i,"div#ts_cont_wrap"));var u=a(oe(c,()=>[0,(c.id||"").replace("ts_contact","")],"ts_contact","#ts_cont_wrap .ts_contact"),3),l=u[0],d=u[1],_=u[2];if(!l)return;var p=q,h=re;switch(c.getAttribute("hinttype")){case"h_friends":h="user",s.contains("ts_contact_status")&&(p="write_msg");break;case"h_mutual_friends":case"s_people":case"h_mail_peers":h="user";break;case"h_vk_apps":case"h_apps":h="app";break;case"h_events":h="event";break;case"h_publics":h="public";break;case"h_visited":case"s_groups":h="group"}_e(e,Z,l,p,n,t,_,d,r,o,h)}(e,t,n,r,o,s);case B:return void function(e,t,n,r,o,i){var s=i.classList,c=a(oe(i,(e,t)=>{var n="";switch(t){case 1:case 3:n=e.getAttribute("data-id")}return n&&n.indexOf("_")?n.split("_"):[0,0]},["video_playlist_item","_video_item"],"\n        #video_layout_search .video_playlist_item,\n        #video_layout_search ._video_item\n      ",{own_albums:"#video_subtab_pane_search_albums .video_playlist_item",own_videos:"#video_subtab_pane_search_videos ._video_item",search_promo_albums:"#video_subtab_pane_search_promo_albums .video_playlist_item",search_videos:"#video_subtab_pane_search_global_videos ._video_item"}),5),u=c[1],l=c[2],d=c[3],_=c[4];if(!_)return;var p=V;(s.contains("icon_add")||s.contains("video_thumb_action_add"))&&(p="add");s.contains("icon_added")&&(p="remove");"own_videos"===d&&s.contains("video_restore_act")&&(p="add");"own_videos"===d&&s.contains("video_thumb_action_delete")&&(p="remove");(s.contains("video_item_title")||s.contains("video_item_controls")||s.contains("video_thumb_label_item")||s.contains("video_thumb_play"))&&(p="play");s.contains("group_link")&&(p="open_author_group");s.contains("al_need_login")&&(p="open_artist");s.contains("mem_link")&&(p="open_author_user");if(p===V)return;_e(e,d,_,p,n,t,l,u,r,o,re)}(e,t,n,r,o,s);case N:case W:return void function(e,t,n,r,o,i){var s=i.classList,c="grid";gpeByClass("market_row_line",i,".marketplace_content_search")&&(c="list");var u="grid"===c?"_market_row":"market_row_line",l=a(oe(i,e=>[0,e.getAttribute("data-id")||0],u,"#marketplace_content ."+u),3),d=l[0],_=l[1],p=l[2];if(!d)return;var h=V;switch(c){case"list":(s.contains("market_row_img")||s.contains("link"))&&(h=q),s.contains("market_favourite")&&!s.contains("selected")&&(h="fave"),s.contains("market_favourite")&&s.contains("selected")&&(h="unfave"),s.contains("mem_link")&&(h="open_author_user"),s.contains("group_link")&&(h="open_author_group");break;case"grid":h=q,(s.contains("icon")||s.contains("fav"))&&(h="fave"),s.contains("market_row_user_link")&&(h="open_author_user")}if(h===V)return;_e(e,Z,d,h,n,t,p,_,r,o,re)}(e,t,n,r,o,s);case U:return void function(e,t,n,r,o,i){var s=i.classList,c=a(oe(i,e=>[+e.getAttribute("data-owner-id"),+e.getAttribute("data-id")],"MarketCatalogProduct__serpItem"),3),u=c[0],l=c[1],d=c[2];if(!u)return;var _=V;s.contains("MarketCatalogProduct__serpTap")&&(_=q);s.contains("MarketCatalogProduct__serpAddFav")&&(_="fave");s.contains("MarketCatalogProduct__serpRemoveFav")&&(_="unfave");s.contains("MarketCatalogProduct__serpOwnerGroup")&&(_="open_author_group");s.contains("MarketCatalogProduct__serpOwnerUser")&&(_="open_author_user");if(_===V)return;_e(e,Z,u,_,n,t,d,l,r,o,re)}(e,t,n,r,o,s);case j:return void function(e,t,n,r,o,i){var s=a(oe(i,e=>{var t=e.getAttribute("data-peer");return t||(t=0),[0,t]},"_im_dialog","._im_page_dcontent ._im_dialog",{own_conversations:"._im_page_dcontent ._im_dialog:not(._im_search)",own_messages:"._im_page_dcontent ._im_dialog._im_search"}),5),c=s[1],u=s[2],l=s[3],d=s[4];if(!d)return;_e(e,l,d,q,n,t,u,c,r,o,re)}(e,t,n,r,o,s);case x:return void function(e,t,n,r,o,i){var s=i.classList,c=i.outerHTML,u=a(oe(i,e=>{var t=e.getAttribute("id");return t&&(t=t.replace("docs_file_","")),t&&t.indexOf("_")?t.split("_"):[0,0]},"_docs_item","#docs_list ._docs_item, #docs_search_list ._docs_item",{[ee]:"#docs_list ._docs_item",[te]:"#docs_search_list ._docs_item"}),5),l=u[1],d=u[2],_=u[3],p=u[4];if(!p)return;var h=V;_===te&&s.contains("docs_add_row")&&(h="add");_===ee&&s.contains("docs_delete_row")&&(h="remove");_===ee&&-1!==c.indexOf("Docs.restoreItem")&&(h="add");_===ee&&s.contains("docs_edit_row")&&(h="edit");(s.contains("highlight")||s.contains("docs_item_thumb_img")||s.contains("docs_item_icon")||s.contains("docs_item_name"))&&(h=q);-1!==c.indexOf("Docs.tagSearch")&&(h="search_by_tag");if(h===V)return;_e(e,_,p,h,n,t,d,l,r,o,re)}(e,t,n,r,o,s);case S:case D:return void function(e,t,n,r,o,i){var s=a(oe(i,e=>{var t=e.getAttribute("id");return[0,t=t?t.replace("app",""):0]},"_apps_cat_row"),3),c=s[0],u=s[1],l=s[2];if(!c)return;var d=q;if(d===V)return;_e(e,Z,c,d,n,t,l,u,r,o,re)}(e,t,n,r,o,s);case K:return void function(e,t,n,r,o,i){var s=i.classList,c=a(oe(i,e=>[0,e.getAttribute("data-app-id")||0],"GameCatalogSearchCard"),3),u=c[0],l=c[1],d=c[2];if(!u)return;var _=V;(s.contains("GameCatalogSearchCard__screenshotImg")||s.contains("GameCatalogSearchCard__run")||s.contains("GameCatalogSearchCard__avatar")||s.contains("GameCatalogSearchCard__name"))&&(_="play");if(_===V)return;_e(e,Z,u,_,n,t,d,l,r,o,re)}(e,t,n,r,o,s);case I:return void function(e,t,n,r,o,i){var s=a(oe(i,()=>{var e=i.getAttribute("href")||"",t=(e=e.replace("/photo","")).split("_");return 2!==t.length?[0,0]:[t[0],t[1]]},"page_post_thumb_wrap","._feed_rows .page_post_thumb_wrap"),3),c=s[0],u=s[1],l=s[2];if(!c)return;_e(e,Z,c,q,n,t,l,u,r,o,re)}(e,t,n,r,o,s);case v:case b:case y:case E:case w:return void function(e,t,n,r,o,i){var s=i.classList,c=i.outerHTML;if(gpeByClass("replies",i,".post"))return;var u="feed_row",l="";e!==E&&e!==v&&e!==b||(u="post");e!==v&&e!==b||(l="#page_search_posts .post");var d=a(oe(i,e=>{var t;if(e.classList.contains("post"))t=e;else{var n=e.getElementsByClassName("post");if(0===n.length)return[0,0];t=n[0]}if(!t)return[0,0];var r=(t.getAttribute("data-post-id")||"").split("_");return 2===r.length?r:[0,0]},u,l),3),_=d[0],p=d[1],h=d[2];if(!_)return;var f=V;(gpeByClass("wall_text",i,".post")||s.contains("wall_text"))&&(f=q);(s.contains("author")||s.contains("post_img")||s.contains("copy_author")||s.contains("copy_post_img"))&&(f="open_author");(s.contains("rel_date")||s.contains("published_by_date"))&&(f=q);(gpeByClass("like",i,".post")||s.contains("like"))&&(f="like");(gpeByClass("comment",i,".post")||s.contains("comment"))&&(f="comment");(gpeByClass("share",i,".post")||s.contains("share"))&&(f="share");s.contains("ui_actions_menu_item")&&-1!==c.indexOf("bookmarkPost")&&(f="fave");s.contains("ui_actions_menu_item")&&-1!==c.indexOf("wall.markAsSpam")&&(f="mark_as_spam");if(f===V)return;_e(e,Z,_,f,n,t,h,p,r,o,re)}(e,t,n,r,o,s);case R:case P:return void function(e,t,n,r,o,i){var s=i.classList,c=i.tagName,u=a(oe(i,e=>{var t=e.getAttribute("id");return[0,t=t?t.replace("app",""):0]},"_apps_settings_row"),3),l=u[0],d=u[1],_=u[2];if(!l)return;var p=V;s.contains("apps_settings_stats")&&(p="stats");"A"!==c&&"img"!==c||(p=q);if(p===V)return;_e(e,Z,l,p,n,t,_,d,r,o,re)}(e,t,n,r,o,s)}}}function ae(){var e={},t=i.vkLocalStorage.getItem("serps");if(!t)return e;try{e=JSON.parse(t)}catch(t){e={}}return e}function se(e){if("locked"===i.vkLocalStorage.getItem(ne))setTimeout(()=>se(e),100);else{i.vkLocalStorage.setItem(ne,"locked");try{e()}catch(e){}i.vkLocalStorage.setItem(ne,"free")}}function ce(e,t,n,r,o,a,s,c,u,l){se(()=>{var d=Math.round(+new Date/1e3),_=ae();_[e]=_[e]||{};var p=Object.keys(_[e]);if(p.length>=100){var h=p[0],f=_[e][h][0];p.forEach(t=>{var n=_[e][t][0];n<f&&(f=n,h=t)}),delete _[e][h]}_[e][s]=[d,t,n,r,o,a,c,u,l],i.vkLocalStorage.setItem("serps",JSON.stringify(_))})}function ue(){se(()=>{var e=ae();if(e){var t=Math.round(+new Date/1e3);Object.keys(e).forEach(n=>{var r=e[n];Object.keys(r).forEach(e=>{var n=r[e][0];t-n>180&&delete r[e]}),e[n]=r,0===Object.keys(r).length&&delete e[n]}),i.vkLocalStorage.setItem("serps",JSON.stringify(e))}})}function le(e,t,n){var r=ae();r[e]=r[e]||{};var o=r[e][t];o&&(Math.round(+new Date/1e3)-o[0]>180?de(!0,e,t):_e(o[1],o[2],o[3],n,o[4],o[5],t,o[6],o[7],o[8],re))}function de(e,t,n){e&&se(()=>{var e=ae();e[t]=e[t]||{},e[t][n]&&(delete e[t][n],i.vkLocalStorage.setItem("serps",JSON.stringify(e)))})}function _e(e,t,n,r,i,a,s,c,u,l,d){var _=arguments.length>11&&void 0!==arguments[11]?arguments[11]:"";if(n){var p=-(new Date).getTimezoneOffset();Object(o.statlogsValueEvent)("search_position",e,d,r,t,n,"",c,s,a,p,i,u,l,_)}}function pe(e,t,n,r,i,a,s,c){var u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"",l=-(new Date).getTimezoneOffset();Object(o.statlogsValueEvent)("search_attempts",e,"",a,r,l,n,s,i,c,t,u)}function he(){for(var e in l)l.hasOwnProperty(e)&&fe(e)}function fe(e){if(l[e]){var t=l[e];removeEvent(window,"click",t),delete l[e]}}function me(e,t){var n=t||e.target.getAttribute("data-stats-key");n&&n.length>0&&window.statlogsValueEvent("submenu_clicks",0,n)}function ge(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"0",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"0",s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"",c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Z,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:"";n=n?1:0,pe(e,c,o=o&&"0"!==o?o:ve(),r,a,n,i,s,u),l[e]&&fe(e);var d=ie.pbind(e,r,o,i,s);l[e]=d,addEvent(window,"click",d,!1,!1,!0),cur.destroy||(cur.destroy=[]),cur.destroy.some(e=>e===he)||cur.destroy.push(he)}function ve(){return Object(r.rand)(-9223372035,9223372035).toFixed(0).concat(Object(r.rand)(0,999999999).toFixed(0))}},YQfe:function(e,t,n){"use strict";n.r(t),n.d(t,"SILENCE",(function(){return r})),n.d(t,"DEFAULT_VOLUME",(function(){return o}));var r="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA",o=.4761515102104643},YTvA:function(e,t,n){var r=n("VTer")("keys"),o=n("ylqs");e.exports=function(e){return r[e]||(r[e]=o(e))}},Ymqv:function(e,t,n){var r=n("LZWt");e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},YuTi:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},YvCB:function(e,t,n){"use strict";function r(e,t){if(!window.Worker||!window.Blob)return setTimeout(e,t);var n=new Blob([`\n      var timeout;\n      onmessage = function(e) {\n        clearTimeout(timeout);\n        if (e.data == 'start') {\n          timeout = setTimeout(function() { postMessage({}); }, ${t});\n        }\n      }\n    `]);try{var r=new Worker(window.URL.createObjectURL(n));return r.onmessage=function(){r.terminate(),e()},r.postMessage("start"),r}catch(n){return setTimeout(e,t)}}n.r(t),n.d(t,"setWorkerTimeout",(function(){return r}))},Z6vF:function(e,t,n){var r=n("ylqs")("meta"),o=n("0/R4"),i=n("aagx"),a=n("hswa").f,s=0,c=Object.isExtensible||function(){return!0},u=!n("eeVq")((function(){return c(Object.preventExtensions({}))})),l=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},d=e.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,r)){if(!c(e))return"F";if(!t)return"E";l(e)}return e[r].i},getWeak:function(e,t){if(!i(e,r)){if(!c(e))return!0;if(!t)return!1;l(e)}return e[r].w},onFreeze:function(e){return u&&d.NEED&&c(e)&&!i(e,r)&&l(e),e}}},ZD4m:function(e,t,n){"use strict";function r(e){var t=e.getBoundingClientRect();return{left:t.left,top:t.top}}function o(){var e=document.documentElement;return{width:e.clientWidth,height:e.clientHeight}}function i(e){var t=e.getBoundingClientRect(),n=t.width,r=t.height;return n&&r?{width:n,height:r}:{width:e.offsetWidth,height:e.offsetHeight}}n.r(t),n.d(t,"getElementOffset",(function(){return r})),n.d(t,"getViewportSize",(function(){return o})),n.d(t,"getElementSize",(function(){return i})),n.d(t,"getJsonDataValue",(function(){return a})),n.d(t,"setGlobalCustomProperty",(function(){return s}));var a=function(e,t){var n=e.getAttribute(t);if(n)try{return JSON.parse(n)}catch(e){return}},s=function(e,t){document.documentElement.style.setProperty(e,t)}},ZhPi:function(e,t,n){var r=n("WkPL");e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}},ZxpX:function(e,t,n){"use strict";function r(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=[];return e.forEach((function(e){if(e)switch(typeof e){case"string":n.push(e);break;case"object":Object.keys(e).forEach((function(t){e[t]&&n.push(t)}));break;default:n.push(""+e)}})),n.join(" ")}n.r(t),n.d(t,"classNames",(function(){return r}))},a1Th:function(e,t,n){"use strict";n("OEbY");var r=n("y3w9"),o=n("C/va"),i=n("nh4g"),a=/./.toString,s=function(e){n("KroJ")(RegExp.prototype,"toString",e,!0)};n("eeVq")((function(){return"/a/b"!=a.call({source:"a",flags:"b"})}))?s((function(){var e=r(this);return"/".concat(e.source,"/","flags"in e?e.flags:!i&&e instanceof RegExp?o.call(e):void 0)})):"toString"!=a.name&&s((function(){return a.call(this)}))},aALx:function(e,t,n){"use strict";n.r(t),n.d(t,"subscribeOnModuleEvaluated",(function(){return i})),n.d(t,"unsubscribeOnModuleEvaluated",(function(){return a})),n.d(t,"triggerSubscribersOnModuleEvaluated",(function(){return s}));var r=[],o=[];function i(e,t){void 0===t&&(t=!1),"function"==typeof e&&(t?o.push(e):r.push(e))}function a(e){var t=r.indexOf(e),n=o.indexOf(e);t>=0&&r.splice(t,1),n>=0&&o.splice(n,1)}function s(){r.forEach((function(e){return e()})),o.forEach((function(e){return e()})),o.splice(0,o.length)}},aCFj:function(e,t,n){var r=n("Ymqv"),o=n("vhPU");e.exports=function(e){return r(o(e))}},aagx:function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},aong:function(e,t,n){"use strict";n.r(t),n.d(t,"throttleAccumulate",(function(){return f})),n.d(t,"executionStackPop",(function(){return m})),n.d(t,"lplog",(function(){return g})),n.d(t,"toArray",(function(){return v})),n.d(t,"arrayUnique",(function(){return b})),n.d(t,"throttle",(function(){return y})),n.d(t,"shuffle",(function(){return E})),n.d(t,"parallel",(function(){return w})),n.d(t,"hashCode",(function(){return O})),n.d(t,"checkTextLength",(function(){return C})),n.d(t,"getSelectionText",(function(){return T})),n.d(t,"goAway",(function(){return S})),n.d(t,"isFullScreen",(function(){return D})),n.d(t,"updateMoney",(function(){return P})),n.d(t,"toggleOnline",(function(){return k})),n.d(t,"onlinePlatformClass",(function(){return A})),n.d(t,"handleScroll",(function(){return I})),n.d(t,"showErrorBox",(function(){return x})),n.d(t,"getDropdownValue",(function(){return j}));n("KKXr"),n("SRfc"),n("a1Th"),n("rGqo"),n("Btvt");var r=n("t7n3"),o=n("J8bf"),i=n("jE6c"),a=n("EasH"),s=n("zxIV"),c=n("4+be"),u=n("gdug"),l=n("QGEU"),d=n("Egk5"),_=n("lXE5"),p=n("R5GP");n.d(t,"unpackStore",(function(){return p.unpackStore}));var h=n("smNX");function f(e,t){var n=[],r=0;return function(o){n.push(o),r||(r=setTimeout(()=>{r=!1,e(n),n=[]},t))}}function m(e){return e.length>0&&e.pop().func(),e}function g(e,t){var n,r;if(window.__debugMode){switch(t){case"error":n="color: red",r="background: red; color: white";break;case"success":n="color: green",r="background: green; color: white";break;default:n="color: blue;",r="background: #000; color: #fff;"}try{var o=new Date;console.debug(`%cLP:[${o.getHours()}:${o.getMinutes()}:${o.getSeconds()}:${o.getMilliseconds()}]%c ${e}`,r,n)}catch(e){}}}function v(e){var t=[];if(void 0===e.length)return Object.keys(e).map(t=>e[t]);for(var n=0;n<e.length;n++)t.push(e[n]);return t}function b(e){for(var t={},n=[],r=0;r<e.length;r++)t[e[r]]||(n.push(e[r]),t[n[r]]=1);return n}function y(e,t){var n;return function(){n||(e.apply(this,arguments),n=setTimeout((function(){n=!1}),t))}}function E(e){for(var t=e.length;t>0;){var n=Math.floor(Math.random()*t),r=e[--t];e[t]=e[n],e[n]=r}return e}function w(){var e=[].slice.call(arguments),t=e.pop(),n=new CallHub(t,e.length);Object(r.each)(e,(e,t)=>t(()=>n.done()))}function O(e){var t=0;if(0===e.length)return t;for(var n=0,r=e.length;n<r;n++){t=(t<<5)-t+e.charCodeAt(n),t|=0}return t}function C(e,t,n,r,o,i,a){var u=t.getValue?t.getValue():t.value,l=t.lastLen||0;if(t.lastLen!==u.length||i){t.lastLen=u.length;var d={"&":5,"<":4,">":4,'"':6,"\n":r?1:4,"\r":0,"!":5,"'":5,$:6,"\\":6},_={1168:1,1169:1,8211:1,8212:1,8216:1,8217:1,8218:1,8230:1,8240:1,8249:1,8250:1,8364:1,8470:1,8482:1,65533:1},p={1037:1,1104:1,1117:1};o&&(d[","]=5);var h=function(e){for(var t=0,n=0,r=e.length;n<r;n++){var o=d[e.charAt(n)],i=e.charCodeAt(n);t+=void 0!==o?o:!a&&i>=128&&(i<1025||p[i]||i>1119)&&!_[i]&&(i<8220||i>8222)&&(i<8224||i>8226)?("&#"+i+";").length:1}return t}(u);if(n=Object(s.ge)(n),h>Math.max(e-100,.75*e))if(Object(s.show)(n),h>e)if(o){var f=Object(s.val)(t,function(e,t){for(var n=0,r="",o=0,i=e.length;o<i;o++){var s=e.charAt(o),c=d[s],u=e.charCodeAt(o);if((n+=void 0!==c?c:!a&&u>=128&&(u<1025||p[u]||u>1119)&&!_[u]&&(u<8220||u>8222)&&(u<8224||u>8226)?("&#"+u+";").length:1)>t)break;r+=s}return r}(u,Math.min(e,l)));t.lastLen=f.length,n.innerHTML=Object(c.getLang)("text_N_symbols_remain",0)}else n.innerHTML=Object(c.getLang)("text_exceeds_symbol_limit",h-e);else n.innerHTML=Object(c.getLang)("text_N_symbols_remain",e-h);else Object(s.hide)(n)}}function T(){var e="";return window.getSelection?e=window.getSelection().toString():document.selection&&"Control"!==document.selection.type&&(e=document.selection.createRange().text),e}function S(e,t,n){if(-1!==(t||{}).h||Object(d.checkEvent)(n))return!0;if(-1!==(t||{}).h){var s=e.match(/https?:\/\/([a-zA-Z0-9\-_\.]+\.)?(vk\.com|vkontakte\.ru)(\/|$)/i);if(s&&"api."!==s[1].toLowerCase())return location.href=e,!1;var c=Object(r.intval)(Object(o.getCookie)("remixsettings_bits"));if(/https?:\/\/([a-zA-Z0-9\-_]+\.)(vk\.com|vkontakte\.ru)(\/|$)/i.test(Object(i.locBase)())||1&c)return window.open("/away.php?to="+encodeURIComponent(e)+(t&&void 0!==t.h?"&h="+t.h:""),"_blank"),!1}var u=Object(r.extend)({act:"a_go",to:e},t||{});return!Object(a.showBox)("away.php",u,{},n)}function D(){return!!(document.fullscreenElement||document.fullScreenElement||document.msFullscreenElement||document.mozFullScreen||document.webkitIsFullScreen||cur.pvPartScreen)}function P(e,t){if(void 0!==e&&!1!==e){var n="";!0===t?(vk.balanceEx=e,n="_ex"):vk.balance=e;var o=Object(s.geByClass)("votes_balance_nom"+n);Object(r.each)(o,(t,n)=>n.innerHTML=`${e} ${Object(c.getLang)("votes_flex",e)}`);var i=e*(vk.vcost||7),a=Object(s.geByClass)("money_balance_nom"+n);Object(r.each)(a,(e,t)=>t.innerHTML=Object(c.getLang)("global_money_amount_rub",i,!0)),void 0!==t&&!1!==t&&!0!==t&&P(t,!0),window.GamesCatalog&&window.GamesCatalog.updateMoney(e)}}function k(e,t){var n=A(t).split(" "),o=[];["online","mobile","_online"].forEach((function(t){Object(r.inArray)(t,n)&&!Object(s.hasClass)(e,t)?o.push(t):!Object(r.inArray)(t,n)&&Object(s.hasClass)(e,t)&&Object(s.removeClass)(e,t)})),o.length>0&&Object(s.addClass)(e,o.join(" "))}function A(e){var t=" _online";return e&&(t+=" online"),u.mobPlatforms[e]&&(t+=" mobile"),Object(l.updateOnlineText)(),t}function I(e){e=e.split(",");var t=cur.named||{},n=e[0]&&(t[e[0]]||Object(s.ge)(e[0]))||!1,r=e[1]&&(t[e[1]]||Object(s.ge)(e[1]))||!1;if(!n&&!r){if(!(n=document.getElementsByName(e[0])[0]))return;n=n.nextSibling}var o=Object(s.ge)("page_header_wrap")||Object(s.ge)("dev_top_nav_wrap");setTimeout((function(){n&&Object(_.scrollToY)(Object(s.getXY)(n)[1]-(o?Object(s.getSize)(o)[1]:0),0),r&&Object(s.elfocus)(r)}),300)}function x(e,t){return void 0===t&&(t=1e4),setTimeout(Object(a.showFastBox)({title:Object(c.getLang)("global_error")},e).hide,t)}function j(e){var t=Object(s.ge)(e+"_container");if(t||(t=Object(s.ge)(e)),t&&t.dropdown)return t.dropdown.val()}n.d(t,"parseJSON",(function(){return h.parseJSON}))},apmT:function(e,t,n){var r=n("0/R4");e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},bTOO:function(e,t,n){"use strict";n.r(t),n.d(t,"ModalBody",(function(){return a}));var r=n("q1tI"),o=n.n(r),i=n("1Ot2"),a=function(e){var t=e.children,n=e.hasScroll;return void 0===n||n?o.a.createElement(i.Scroll,{className:"ModalBody"},t):o.a.createElement("div",{className:"ModalBody"},t)}},btP0:function(__webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("SRfc"),_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("zxIV"),_web_lib_input_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("o7bv"),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("t7n3"),_web_lib_element_tooltip__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("k487"),_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("Egk5"),_web_legacy_ui_ui_tabs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("hmKL"),_web_lib_browser__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("gdug"),_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("98sY"),_web_lib_scroll__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("lXE5"),uiSearch={destroy:function(e){var t=uiSearch.getFieldEl(e);uiSearch.stopEvents(t),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.removeData)(t)},getWrapEl:function(e){return Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.domClosest)("_wrap",e)},getFieldEl:function(e){return e=ge(e),hasClass("_field",e)?e:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.domByClass)(uiSearch.getWrapEl(e),"_field")},stopEvents:function(e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.data)(e,"eventHandlers")||[];each(t,(function(e,t){t.stop()}))},startEvents:function(e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.data)(e,"eventHandlers")||[];each(t,(function(e,t){t.stop(),t.start()}))},init:function init(el,options){if(el&&(el=uiSearch.getFieldEl(el),el)){var wrapEl=uiSearch.getWrapEl(el),delayedInitOptions=!options&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.domData)(wrapEl,"init-options");if(delayedInitOptions){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.domData)(wrapEl,"init-options",null);var evalScript="(function() { return "+delayedInitOptions+" })()";try{uiSearch.init(el,eval(evalScript))}catch(e){Object(_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_8__.logEvalError)(e,evalScript)}}else if(!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.data)(el,"inited")){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.data)(el,"inited",1);var onKeyDown=uiSearch.onKeyDown.pbind(el),onBuffer=function(e){if("input"===e.type&&_web_lib_browser__WEBPACK_IMPORTED_MODULE_7__.browser.msie){var t=val(el);if(t===(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.domData)(el,"prev-value")||""))return;Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.domData)(el,"prev-value",t)}setTimeout(uiSearch.onChanged.pbind(el,!1,e),0)},onBlur=uiSearch.onBlurred.pbind(el),mainHandler;if(Object(_web_lib_input_utils__WEBPACK_IMPORTED_MODULE_2__.placeholderInit)(el),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.data)(el,"opts",options),options.suggester)options.suggester.instance=new Suggester(el,extend(options.suggester,{type:options.suggester.type,historyItems:!!options.suggester.history&&options.suggester.historyItems,onSearch:function(e,t,n){e||(options.allowFiltersForEmpty||uiSearch.removeAllFilters(el),uiSearch.hideProgress(el)),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.toggleClass)(wrapEl,"ui_search_field_empty",!e),options.onChange&&options.onChange.call(el,e,t,n)}})),mainHandler={start:function(){addEvent(el,"blur",onBlur),options.onBlur&&addEvent(el,"blur",options.onBlur),options.onFocus&&addEvent(el,"focus",options.onFocus)},stop:function(){removeEvent(el,"blur",onBlur),options.onBlur&&removeEvent(el,"blur",options.onBlur),options.onFocus&&removeEvent(el,"focus",options.onFocus)}};else{var searchBtn=geByClass1("_ui_search_button_search",wrapEl),onBtnClick=function(e){uiSearch.onEnter(el,e),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.elfocus)(el)};mainHandler={start:function(){addEvent(el,"keydown",onKeyDown),addEvent(el,"paste cut input",onBuffer),addEvent(el,"blur",onBlur),options.onBlur&&addEvent(el,"blur",options.onBlur),options.onFocus&&addEvent(el,"focus",options.onFocus),searchBtn&&addEvent(searchBtn,"click",onBtnClick)},stop:function(){removeEvent(el,"keydown",onKeyDown),removeEvent(el,"paste cut input",onBuffer),removeEvent(el,"blur",onBlur),options.onBlur&&removeEvent(el,"blur",options.onBlur),options.onFocus&&removeEvent(el,"focus",options.onFocus),searchBtn&&removeEvent(searchBtn,"click",onBtnClick)}}}if(mainHandler.start(),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.data)(el,"eventHandlers",[mainHandler]),options.params){var content=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.se)(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__.trim)(options.params.html));options.paramsTooltip=new _web_lib_element_tooltip__WEBPACK_IMPORTED_MODULE_4__.default(geByClass1("_ui_search_params_button",wrapEl),{appendTo:wrapEl,content,autoShow:!1,customShow:!0,offset:[0,-2],shift:options.params.shift?options.params.shift:0}),options.paramsTooltip.build(),setTimeout((function(){(function initScript(){try{eval(options.params.script)}catch(e){Object(_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_8__.logEvalError)(e,options.params.script)}}).call(el)}))}options.fixed&&uiSearch.setFixed(el),options.noAutoDestroy||cur.destroy.push(uiSearch.stopEvents.pbind(el)),uiSearch.initFilters(el,options),Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__.isFunction)(options.onInit)&&options.onInit(el,options)}}},getOptions:function(e){var t=uiSearch.getWrapEl(e),n=geByClass1("_field",t);return Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.data)(n,"opts")},toggleParameters:function(e){var t=uiSearch.getWrapEl(e),n=geByClass1("_field",t),r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.data)(n,"opts");r.paramsTooltip&&r.paramsTooltip.toggle()},saveHistorySearch:function(e,t,n,r,o,i){t||(t=val(e));var a=uiSearch.getOptions(e);a.suggester&&a.suggester.instance&&a.suggester.instance.saveHistoryItem(t,n,r,o,i)},onEnter:function(e,t){e=uiSearch.getFieldEl(e);var n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.data)(e,"opts"),r=e.getValue?e.getValue():e.value;return n.onEnter&&n.onEnter(e,r,t),Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_5__.cancelEvent)(t)},onKeyDown:function(e,t){if(cur.preventInputActions&&-1!=[KEY.RETURN,KEY.ESC,KEY.DOWN,KEY.UP].indexOf(t.keyCode))return Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_5__.cancelEvent)(t);if(t.keyCode==KEY.RETURN)return uiSearch.onEnter(e,t);if(t.keyCode==KEY.ESC){var n=!!val(e);return uiSearch.reset(e,!1,t),!n||Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_5__.cancelEvent)(t)}setTimeout.pbind(uiSearch.onChanged.pbind(e,!1,t),0)},onBlurred:function(e,t){var n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.data)(e,"opts");n.onBlur&&n.onBlur.call(e,t)},onChanged:function(e,t,n){e=uiSearch.getFieldEl(e);var r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.data)(e,"opts"),o=uiSearch.getWrapEl(e),i=e.getValue?e.getValue():e.value;Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.toggleClass)(o,"ui_search_field_empty",!Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__.trim)(i)),i||r.allowFiltersForEmpty||uiSearch.removeAllFilters(e),t||r.onChange&&r.onChange.call(e,i,n)},focus:function(e){e=uiSearch.getFieldEl(e),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.elfocus)(e)},reset:function(e,t,n){e=uiSearch.getFieldEl(e);var r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.data)(e,"opts")||{},o=uiSearch.getWrapEl(e);(e.getValue?e.getValue():e.value)?(val(e,""),uiSearch.onChanged(e,t,n),t||r.onEnter&&r.onEnter(e,""),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.elfocus)(e)):r.in_tabs&&_web_legacy_ui_ui_tabs__WEBPACK_IMPORTED_MODULE_6__.default.hideSearch(o),window.tooltips&&tooltips.destroyAll()},showProgress:function(e){e=uiSearch.getFieldEl(e);var t=uiSearch.getWrapEl(e);addClass(t,"ui_search_loading");var n=e.getValue?Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__.trim)(e.getValue()):e.value;Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.toggleClass)(t,"ui_search_field_empty",!n)},hideProgress:function(e){e=uiSearch.getFieldEl(e);var t=uiSearch.getWrapEl(e);removeClass(t,"ui_search_loading");var n=e.getValue?Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__.trim)(e.getValue()):e.value;Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.toggleClass)(t,"ui_search_field_empty",!n)},scrollResize:function(e){if(!_web_lib_browser__WEBPACK_IMPORTED_MODULE_7__.browser.mobile){e=uiSearch.getFieldEl(e);var t,n=uiSearch.getWrapEl(e),r=n&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.domPN)(n),o=n&&hasClass(n,"ui_search_fixed"),i=ge(cur.uiSearchPageBlock)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.gpeByClass)("page_block",e),a=vk.staticheader?Math.max(0,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.getSize)(ge("page_header"))[1]-scrollNode.scrollTop):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.getSize)(ge("page_header"))[1],s=n&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.isAncestor)(n,boxLayerWrap);if(n&&r&&(s||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.gpeByClass)("scroll_fix",n))&&(!e.ignoreFixed||o)&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.isVisible)(r))if(s?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.getXY)(r,!0)[1]<0:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.getXY)(r,!0)[1]<a){var c=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__.intval)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.getStyle)(e,"width"));!o&&c&&(setStyle(r,"height",Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.getSize)(n)[1]),setStyle(n,"width",c),addClass(n,"ui_search_fixed"));var u=Math.min(0,Math.max(-bodyNode.scrollLeft,bodyNode.clientWidth-Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.getSize)(ge("page_layout"))[0]));if(setStyle(n,{marginLeft:u}),i){var l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.getXY)(i)[1]+Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.getSize)(i)[1]-Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_9__.scrollGetY)()-e.offsetHeight;(t=Math.min(a,Math.max(-e.offsetHeight,l)))!==cur.lastUISearchPos&&(setStyle(n,"top",t),cur.lastUISearchPos=t)}}else o&&(setStyle(r,"height",""),setStyle(n,{top:"",marginLeft:""}),cur.lastUISearchPos=!1,removeClass(n,"ui_search_fixed"))}},setStatic:function(e){e.ignoreFixed=!0;var t=uiSearch.getWrapEl(e),n=t&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.domPN)(t);t&&n&&(setStyle(n,"height",""),setStyle(t,{top:"",marginLeft:""}),cur.lastUISearchPos=!1,removeClass(t,"ui_search_fixed"))},setFixed:function(e){if(e.ignoreFixed=!1,!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.data)(e,"resizeEventHandler")){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.isAncestor)(e,boxLayerWrap)?boxLayerWrap:window,n=uiSearch.scrollResize.pbind(e),r={stop:removeEvent.pbind(t,"scroll",n),start:addEvent.pbind(t,"scroll",n)};Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.data)(e,"eventHandlers",(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.data)(e,"eventHandlers")||[]).concat([r])),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.data)(e,"resizeEventHandler",!0),r.start()}uiSearch.scrollResize(e)},initFilters:function(e,t){if(e){var n=uiSearch.getWrapEl(e),r=geByClass1("ui_search_fltr_control",n),o={start:function(){addEvent(r,"click",(function(e){hasClass(r,"shown")&&!hasClass(e.target,"ui_search_fltr_control")||a(r)})),addEvent(r,"mouseover",(function(){if(hasClass(r,"shown")){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.data)(r,"hidetimer");e&&(clearTimeout(e),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.data)(r,"hidetimer",0)),a(r,!0)}})),addEvent(r,"mouseout",(function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.data)(r,"hidetimer")||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.data)(r,"hidetimer",setTimeout((function(){a(r,!1),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.data)(r,"hidetimer",0)}),200))}))},stop:removeEvent.pbind(r,"click mouseover mouseout")};Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.data)(e,"eventHandlers",(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.data)(e,"eventHandlers")||[]).concat([o])),o.start();var i=uiSearch._getFiltersPane(e);addEvent(i,"click",(function(t){if(hasClass(t.target,"token_title")||hasClass(t.target,"token_del")){var n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.gpeByClass)("token",t.target),r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.domData)(n,"id");uiSearch.removeFilter(e,r)}}))}function a(e,t){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.toggleClass)(e,"shown",t)}},removeAllFilters:function(e){var t=uiSearch._getFiltersPane(e),n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.data)(t,"cur_filters");each(extend({},n),(function(t){uiSearch.removeFilter(e,t,!0)}))},toggleFilter:function(e,t,n,r){r?uiSearch.addFilter(e,t,n):uiSearch.removeFilter(e,t)},addFilter:function(e,t,n){if(t&&n){var r=uiSearch._getFiltersPane(e),o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.data)(r,"cur_filters")||{};o[t]=n,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.data)(r,"cur_filters",o),uiSearch._renderFilters(e)}},removeFilter:function(e,t,n){var r=uiSearch._getFiltersPane(e),o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.data)(r,"cur_filters")||{};if(o[t]){delete o[t],Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.data)(r,"cur_filters",o);var i=uiSearch.getOptions(e);i.onFilterRemoved&&i.onFilterRemoved(t,e,n),uiSearch._renderFilters(e)}},_getFiltersPane:function(e){var t=uiSearch.getWrapEl(e)||e;return geByClass1("ui_search_filters_pane",t)},_renderFilters:function(e){clearTimeout(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.data)(e,"renderFiltersTO")),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.data)(e,"renderFiltersTO",setTimeout(uiSearch._doRenderFilters.pbind(e)))},_doRenderFilters:function(e){var t=uiSearch._getFiltersPane(e),n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.data)(t,"cur_filters")||{},r=geByClass1("ui_search_filters",t);if(r)if(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__.isEmpty)(n))removeClass(t,"expanded"),setTimeout((function(){r.innerHTML="",hide(t)}),200);else{Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.show)(t),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_1__.addClassDelayed)(t,"expanded");var o=[],i={},a=0;each(n,(function(e,t){var n=!1,r=!1,s=e.match(/(.*?)_([^_]+)$/),c=s&&s[2]||!1;(s=s&&s[1]||!1)&&(void 0!==i[s]&&"from"===c?r=i[s]:void 0!==i[s]&&(n=i[s]+1),i[s]=a);var u=`<div class="token" id="token${e}" data-id="${e}">\n                         <div class="token_title">${Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__.replaceEntities)(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__.clean)(t))}</div>\n                         <div class="token_del"></div>\n                       </div>`;!1!==r?o.splice(r,0,u):!1!==n?o.splice(n,0,u):o.push(u),a++})),r.innerHTML=o.join("")}}};__webpack_exports__.default=uiSearch},c8JK:function(e,t,n){"use strict";function r(e){return navigator.clipboard?function(e){return navigator.clipboard.writeText(e)}(e):(o(e),Promise.resolve())}function o(e){var t=document.createElement("input"),n=document.activeElement;t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),n.focus()}n.r(t),n.d(t,"copyToClipboard",(function(){return r})),n.d(t,"_copyWithFakeElement",(function(){return o}))},cDf5:function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},cGUQ:function(e,t,n){"use strict";n.r(t),n.d(t,"fromQueryString",(function(){return c})),n.d(t,"toQueryString",(function(){return s}));n("KKXr"),n("Vd3H");var r=n("jE6c"),o={},i=function(e){if(o[e])return e;try{return encodeURIComponent(e)}catch(e){return""}},a=function(e){try{return decodeURIComponent(e)}catch(t){return o[e]=1,e}};function s(e,t){var n=[];for(var o in e)if(e.hasOwnProperty(o)&&null!=e[o]&&!Object(r.isFunction)(e[o]))if(Object(r.isArray)(e[o]))for(var a=0,s=0,c=e[o].length;a<c;++a)null==e[o][a]||Object(r.isFunction)(e[o][a])||(n.push(i(o)+"["+s+"]="+i(e[o][a])),++s);else n.push(i(o)+"="+i(e[o]));return t||n.sort(),n.join("&")}function c(e){if(!e)return{};var t={};return e=e.split("&"),Object(r.each)(e,(function(e,n){var r=n.split("=");if(r[0]){var o=a(r[1]+"");if("[]"===r[0].substr(r.length-2)){var i=a(r[0].substr(0,r.length-2));t[i]||(t[i]=[]),t[i].push(o)}else t[a(r[0])]=o}})),t}},clTp:function(e,t,n){"use strict";function r(e){var t=e.getBoundingClientRect(),n=document.body,r=document.documentElement,o=window.pageYOffset||r.scrollTop||n.scrollTop,i=window.pageXOffset||r.scrollLeft||n.scrollLeft,a=r.clientTop||n.clientTop||0,s=r.clientLeft||n.clientLeft||0;return{top:Math.round(t.top+o-a),left:Math.round(t.left+i-s),width:e.offsetWidth,height:e.offsetHeight}}n.r(t),n.d(t,"default",(function(){return r}))},czNK:function(e,t,n){"use strict";var r=n("nh4g"),o=n("DVgA"),i=n("JiEa"),a=n("UqcF"),s=n("S/j/"),c=n("Ymqv"),u=Object.assign;e.exports=!u||n("eeVq")((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=u({},e)[n]||Object.keys(u({},t)).join("")!=r}))?function(e,t){for(var n=s(e),u=arguments.length,l=1,d=i.f,_=a.f;u>l;)for(var p,h=c(arguments[l++]),f=d?o(h).concat(d(h)):o(h),m=f.length,g=0;m>g;)p=f[g++],r&&!_.call(h,p)||(n[p]=h[p]);return n}:u},"d/Gc":function(e,t,n){var r=n("RYi7"),o=Math.max,i=Math.min;e.exports=function(e,t){return(e=r(e))<0?o(e+t,0):i(e,t)}},dAlA:function(e,t,n){(function(e){var r,o=function(e){"use strict";var t=1e7,n=9007199254740992,r=d(n),i="function"==typeof BigInt;function a(e,t,n,r){return void 0===e?a[0]:void 0!==t&&(10!=+t||n)?F(e,t,n,r):q(e)}function s(e,t){this.value=e,this.sign=t,this.isSmall=!1}function c(e){this.value=e,this.sign=e<0,this.isSmall=!0}function u(e){this.value=e}function l(e){return-n<e&&e<n}function d(e){return e<1e7?[e]:e<1e14?[e%1e7,Math.floor(e/1e7)]:[e%1e7,Math.floor(e/1e7)%1e7,Math.floor(e/1e14)]}function _(e){p(e);var n=e.length;if(n<4&&P(e,r)<0)switch(n){case 0:return 0;case 1:return e[0];case 2:return e[0]+e[1]*t;default:return e[0]+(e[1]+e[2]*t)*t}return e}function p(e){for(var t=e.length;0===e[--t];);e.length=t+1}function h(e){for(var t=new Array(e),n=-1;++n<e;)t[n]=0;return t}function f(e){return e>0?Math.floor(e):Math.ceil(e)}function m(e,n){var r,o,i=e.length,a=n.length,s=new Array(i),c=0,u=t;for(o=0;o<a;o++)c=(r=e[o]+n[o]+c)>=u?1:0,s[o]=r-c*u;for(;o<i;)c=(r=e[o]+c)===u?1:0,s[o++]=r-c*u;return c>0&&s.push(c),s}function g(e,t){return e.length>=t.length?m(e,t):m(t,e)}function v(e,n){var r,o,i=e.length,a=new Array(i),s=t;for(o=0;o<i;o++)r=e[o]-s+n,n=Math.floor(r/s),a[o]=r-n*s,n+=1;for(;n>0;)a[o++]=n%s,n=Math.floor(n/s);return a}function b(e,t){var n,r,o=e.length,i=t.length,a=new Array(o),s=0;for(n=0;n<i;n++)(r=e[n]-s-t[n])<0?(r+=1e7,s=1):s=0,a[n]=r;for(n=i;n<o;n++){if(!((r=e[n]-s)<0)){a[n++]=r;break}r+=1e7,a[n]=r}for(;n<o;n++)a[n]=e[n];return p(a),a}function y(e,t,n){var r,o,i=e.length,a=new Array(i),u=-t;for(r=0;r<i;r++)o=e[r]+u,u=Math.floor(o/1e7),o%=1e7,a[r]=o<0?o+1e7:o;return"number"==typeof(a=_(a))?(n&&(a=-a),new c(a)):new s(a,n)}function E(e,t){var n,r,o,i,a=e.length,s=t.length,c=h(a+s);for(o=0;o<a;++o){i=e[o];for(var u=0;u<s;++u)n=i*t[u]+c[o+u],r=Math.floor(n/1e7),c[o+u]=n-1e7*r,c[o+u+1]+=r}return p(c),c}function w(e,n){var r,o,i=e.length,a=new Array(i),s=t,c=0;for(o=0;o<i;o++)r=e[o]*n+c,c=Math.floor(r/s),a[o]=r-c*s;for(;c>0;)a[o++]=c%s,c=Math.floor(c/s);return a}function O(e,t){for(var n=[];t-- >0;)n.push(0);return n.concat(e)}function C(e,n,r){return new s(e<t?w(n,e):E(n,d(e)),r)}function T(e){var t,n,r,o,i=e.length,a=h(i+i);for(r=0;r<i;r++){n=0-(o=e[r])*o;for(var s=r;s<i;s++)t=o*e[s]*2+a[r+s]+n,n=Math.floor(t/1e7),a[r+s]=t-1e7*n;a[r+i]=n}return p(a),a}function S(e,t){var n,r,o,i,a=e.length,s=h(a);for(o=0,n=a-1;n>=0;--n)o=(i=1e7*o+e[n])-(r=f(i/t))*t,s[n]=0|r;return[s,0|o]}function D(e,n){var r,o=q(n);if(i)return[new u(e.value/o.value),new u(e.value%o.value)];var l,m=e.value,g=o.value;if(0===g)throw new Error("Cannot divide by zero");if(e.isSmall)return o.isSmall?[new c(f(m/g)),new c(m%g)]:[a[0],e];if(o.isSmall){if(1===g)return[e,a[0]];if(-1==g)return[e.negate(),a[0]];var v=Math.abs(g);if(v<t){l=_((r=S(m,v))[0]);var y=r[1];return e.sign&&(y=-y),"number"==typeof l?(e.sign!==o.sign&&(l=-l),[new c(l),new c(y)]):[new s(l,e.sign!==o.sign),new c(y)]}g=d(v)}var E=P(m,g);if(-1===E)return[a[0],e];if(0===E)return[a[e.sign===o.sign?1:-1],a[0]];l=(r=m.length+g.length<=200?function(e,n){var r,o,i,a,s,c,u,l=e.length,d=n.length,p=t,f=h(n.length),m=n[d-1],g=Math.ceil(p/(2*m)),v=w(e,g),b=w(n,g);for(v.length<=l&&v.push(0),b.push(0),m=b[d-1],o=l-d;o>=0;o--){for(r=p-1,v[o+d]!==m&&(r=Math.floor((v[o+d]*p+v[o+d-1])/m)),i=0,a=0,c=b.length,s=0;s<c;s++)i+=r*b[s],u=Math.floor(i/p),a+=v[o+s]-(i-u*p),i=u,a<0?(v[o+s]=a+p,a=-1):(v[o+s]=a,a=0);for(;0!==a;){for(r-=1,i=0,s=0;s<c;s++)(i+=v[o+s]-p+b[s])<0?(v[o+s]=i+p,i=0):(v[o+s]=i,i=1);a+=i}f[o]=r}return v=S(v,g)[0],[_(f),_(v)]}(m,g):function(e,t){for(var n,r,o,i,a,s=e.length,c=t.length,u=[],l=[];s;)if(l.unshift(e[--s]),p(l),P(l,t)<0)u.push(0);else{o=1e7*l[(r=l.length)-1]+l[r-2],i=1e7*t[c-1]+t[c-2],r>c&&(o=1e7*(o+1)),n=Math.ceil(o/i);do{if(P(a=w(t,n),l)<=0)break;n--}while(n);u.push(n),l=b(l,a)}return u.reverse(),[_(u),_(l)]}(m,g))[0];var O=e.sign!==o.sign,C=r[1],T=e.sign;return"number"==typeof l?(O&&(l=-l),l=new c(l)):l=new s(l,O),"number"==typeof C?(T&&(C=-C),C=new c(C)):C=new s(C,T),[l,C]}function P(e,t){if(e.length!==t.length)return e.length>t.length?1:-1;for(var n=e.length-1;n>=0;n--)if(e[n]!==t[n])return e[n]>t[n]?1:-1;return 0}function k(e){var t=e.abs();return!t.isUnit()&&(!!(t.equals(2)||t.equals(3)||t.equals(5))||!(t.isEven()||t.isDivisibleBy(3)||t.isDivisibleBy(5))&&(!!t.lesser(49)||void 0))}function A(e,t){for(var n,r,i,a=e.prev(),s=a,c=0;s.isEven();)s=s.divide(2),c++;e:for(r=0;r<t.length;r++)if(!e.lesser(t[r])&&!(i=o(t[r]).modPow(s,e)).isUnit()&&!i.equals(a)){for(n=c-1;0!=n;n--){if((i=i.square().mod(e)).isUnit())return!1;if(i.equals(a))continue e}return!1}return!0}s.prototype=Object.create(a.prototype),c.prototype=Object.create(a.prototype),u.prototype=Object.create(a.prototype),s.prototype.add=function(e){var t=q(e);if(this.sign!==t.sign)return this.subtract(t.negate());var n=this.value,r=t.value;return t.isSmall?new s(v(n,Math.abs(r)),this.sign):new s(g(n,r),this.sign)},s.prototype.plus=s.prototype.add,c.prototype.add=function(e){var t=q(e),n=this.value;if(n<0!==t.sign)return this.subtract(t.negate());var r=t.value;if(t.isSmall){if(l(n+r))return new c(n+r);r=d(Math.abs(r))}return new s(v(r,Math.abs(n)),n<0)},c.prototype.plus=c.prototype.add,u.prototype.add=function(e){return new u(this.value+q(e).value)},u.prototype.plus=u.prototype.add,s.prototype.subtract=function(e){var t=q(e);if(this.sign!==t.sign)return this.add(t.negate());var n=this.value,r=t.value;return t.isSmall?y(n,Math.abs(r),this.sign):function(e,t,n){var r;return P(e,t)>=0?r=b(e,t):(r=b(t,e),n=!n),"number"==typeof(r=_(r))?(n&&(r=-r),new c(r)):new s(r,n)}(n,r,this.sign)},s.prototype.minus=s.prototype.subtract,c.prototype.subtract=function(e){var t=q(e),n=this.value;if(n<0!==t.sign)return this.add(t.negate());var r=t.value;return t.isSmall?new c(n-r):y(r,Math.abs(n),n>=0)},c.prototype.minus=c.prototype.subtract,u.prototype.subtract=function(e){return new u(this.value-q(e).value)},u.prototype.minus=u.prototype.subtract,s.prototype.negate=function(){return new s(this.value,!this.sign)},c.prototype.negate=function(){var e=this.sign,t=new c(-this.value);return t.sign=!e,t},u.prototype.negate=function(){return new u(-this.value)},s.prototype.abs=function(){return new s(this.value,!1)},c.prototype.abs=function(){return new c(Math.abs(this.value))},u.prototype.abs=function(){return new u(this.value>=0?this.value:-this.value)},s.prototype.multiply=function(e){var n,r,o,i=q(e),c=this.value,u=i.value,l=this.sign!==i.sign;if(i.isSmall){if(0===u)return a[0];if(1===u)return this;if(-1===u)return this.negate();if((n=Math.abs(u))<t)return new s(w(c,n),l);u=d(n)}return r=c.length,o=u.length,new s(-.012*r-.012*o+15e-6*r*o>0?function e(t,n){var r=Math.max(t.length,n.length);if(r<=30)return E(t,n);r=Math.ceil(r/2);var o=t.slice(r),i=t.slice(0,r),a=n.slice(r),s=n.slice(0,r),c=e(i,s),u=e(o,a),l=e(g(i,o),g(s,a)),d=g(g(c,O(b(b(l,c),u),r)),O(u,2*r));return p(d),d}(c,u):E(c,u),l)},s.prototype.times=s.prototype.multiply,c.prototype._multiplyBySmall=function(e){return l(e.value*this.value)?new c(e.value*this.value):C(Math.abs(e.value),d(Math.abs(this.value)),this.sign!==e.sign)},s.prototype._multiplyBySmall=function(e){return 0===e.value?a[0]:1===e.value?this:-1===e.value?this.negate():C(Math.abs(e.value),this.value,this.sign!==e.sign)},c.prototype.multiply=function(e){return q(e)._multiplyBySmall(this)},c.prototype.times=c.prototype.multiply,u.prototype.multiply=function(e){return new u(this.value*q(e).value)},u.prototype.times=u.prototype.multiply,s.prototype.square=function(){return new s(T(this.value),!1)},c.prototype.square=function(){var e=this.value*this.value;return l(e)?new c(e):new s(T(d(Math.abs(this.value))),!1)},u.prototype.square=function(e){return new u(this.value*this.value)},s.prototype.divmod=function(e){var t=D(this,e);return{quotient:t[0],remainder:t[1]}},u.prototype.divmod=c.prototype.divmod=s.prototype.divmod,s.prototype.divide=function(e){return D(this,e)[0]},u.prototype.over=u.prototype.divide=function(e){return new u(this.value/q(e).value)},c.prototype.over=c.prototype.divide=s.prototype.over=s.prototype.divide,s.prototype.mod=function(e){return D(this,e)[1]},u.prototype.mod=u.prototype.remainder=function(e){return new u(this.value%q(e).value)},c.prototype.remainder=c.prototype.mod=s.prototype.remainder=s.prototype.mod,s.prototype.pow=function(e){var t,n,r,o=q(e),i=this.value,s=o.value;if(0===s)return a[1];if(0===i)return a[0];if(1===i)return a[1];if(-1===i)return o.isEven()?a[1]:a[-1];if(o.sign)return a[0];if(!o.isSmall)throw new Error("The exponent "+o.toString()+" is too large.");if(this.isSmall&&l(t=Math.pow(i,s)))return new c(f(t));for(n=this,r=a[1];!0&s&&(r=r.times(n),--s),0!==s;)s/=2,n=n.square();return r},c.prototype.pow=s.prototype.pow,u.prototype.pow=function(e){var t=q(e),n=this.value,r=t.value,o=BigInt(0),i=BigInt(1),s=BigInt(2);if(r===o)return a[1];if(n===o)return a[0];if(n===i)return a[1];if(n===BigInt(-1))return t.isEven()?a[1]:a[-1];if(t.isNegative())return new u(o);for(var c=this,l=a[1];(r&i)===i&&(l=l.times(c),--r),r!==o;)r/=s,c=c.square();return l},s.prototype.modPow=function(e,t){if(e=q(e),(t=q(t)).isZero())throw new Error("Cannot take modPow with modulus 0");var n=a[1],r=this.mod(t);for(e.isNegative()&&(e=e.multiply(a[-1]),r=r.modInv(t));e.isPositive();){if(r.isZero())return a[0];e.isOdd()&&(n=n.multiply(r).mod(t)),e=e.divide(2),r=r.square().mod(t)}return n},u.prototype.modPow=c.prototype.modPow=s.prototype.modPow,s.prototype.compareAbs=function(e){var t=q(e),n=this.value,r=t.value;return t.isSmall?1:P(n,r)},c.prototype.compareAbs=function(e){var t=q(e),n=Math.abs(this.value),r=t.value;return t.isSmall?n===(r=Math.abs(r))?0:n>r?1:-1:-1},u.prototype.compareAbs=function(e){var t=this.value,n=q(e).value;return(t=t>=0?t:-t)===(n=n>=0?n:-n)?0:t>n?1:-1},s.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var t=q(e),n=this.value,r=t.value;return this.sign!==t.sign?t.sign?1:-1:t.isSmall?this.sign?-1:1:P(n,r)*(this.sign?-1:1)},s.prototype.compareTo=s.prototype.compare,c.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var t=q(e),n=this.value,r=t.value;return t.isSmall?n==r?0:n>r?1:-1:n<0!==t.sign?n<0?-1:1:n<0?1:-1},c.prototype.compareTo=c.prototype.compare,u.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var t=this.value,n=q(e).value;return t===n?0:t>n?1:-1},u.prototype.compareTo=u.prototype.compare,s.prototype.equals=function(e){return 0===this.compare(e)},u.prototype.eq=u.prototype.equals=c.prototype.eq=c.prototype.equals=s.prototype.eq=s.prototype.equals,s.prototype.notEquals=function(e){return 0!==this.compare(e)},u.prototype.neq=u.prototype.notEquals=c.prototype.neq=c.prototype.notEquals=s.prototype.neq=s.prototype.notEquals,s.prototype.greater=function(e){return this.compare(e)>0},u.prototype.gt=u.prototype.greater=c.prototype.gt=c.prototype.greater=s.prototype.gt=s.prototype.greater,s.prototype.lesser=function(e){return this.compare(e)<0},u.prototype.lt=u.prototype.lesser=c.prototype.lt=c.prototype.lesser=s.prototype.lt=s.prototype.lesser,s.prototype.greaterOrEquals=function(e){return this.compare(e)>=0},u.prototype.geq=u.prototype.greaterOrEquals=c.prototype.geq=c.prototype.greaterOrEquals=s.prototype.geq=s.prototype.greaterOrEquals,s.prototype.lesserOrEquals=function(e){return this.compare(e)<=0},u.prototype.leq=u.prototype.lesserOrEquals=c.prototype.leq=c.prototype.lesserOrEquals=s.prototype.leq=s.prototype.lesserOrEquals,s.prototype.isEven=function(){return 0==(1&this.value[0])},c.prototype.isEven=function(){return 0==(1&this.value)},u.prototype.isEven=function(){return(this.value&BigInt(1))===BigInt(0)},s.prototype.isOdd=function(){return 1==(1&this.value[0])},c.prototype.isOdd=function(){return 1==(1&this.value)},u.prototype.isOdd=function(){return(this.value&BigInt(1))===BigInt(1)},s.prototype.isPositive=function(){return!this.sign},c.prototype.isPositive=function(){return this.value>0},u.prototype.isPositive=c.prototype.isPositive,s.prototype.isNegative=function(){return this.sign},c.prototype.isNegative=function(){return this.value<0},u.prototype.isNegative=c.prototype.isNegative,s.prototype.isUnit=function(){return!1},c.prototype.isUnit=function(){return 1===Math.abs(this.value)},u.prototype.isUnit=function(){return this.abs().value===BigInt(1)},s.prototype.isZero=function(){return!1},c.prototype.isZero=function(){return 0===this.value},u.prototype.isZero=function(){return this.value===BigInt(0)},s.prototype.isDivisibleBy=function(e){var t=q(e);return!t.isZero()&&(!!t.isUnit()||(0===t.compareAbs(2)?this.isEven():this.mod(t).isZero()))},u.prototype.isDivisibleBy=c.prototype.isDivisibleBy=s.prototype.isDivisibleBy,s.prototype.isPrime=function(e){var t=k(this);if(void 0!==t)return t;var n=this.abs(),r=n.bitLength();if(r<=64)return A(n,[2,3,5,7,11,13,17,19,23,29,31,37]);for(var i=Math.log(2)*r.toJSNumber(),a=Math.ceil(!0===e?2*Math.pow(i,2):i),s=[],c=0;c<a;c++)s.push(o(c+2));return A(n,s)},u.prototype.isPrime=c.prototype.isPrime=s.prototype.isPrime,s.prototype.isProbablePrime=function(e,t){var n=k(this);if(void 0!==n)return n;for(var r=this.abs(),i=void 0===e?5:e,a=[],s=0;s<i;s++)a.push(o.randBetween(2,r.minus(2),t));return A(r,a)},u.prototype.isProbablePrime=c.prototype.isProbablePrime=s.prototype.isProbablePrime,s.prototype.modInv=function(e){for(var t,n,r,i=o.zero,a=o.one,s=q(e),c=this.abs();!c.isZero();)t=s.divide(c),n=i,r=s,i=a,s=c,a=n.subtract(t.multiply(a)),c=r.subtract(t.multiply(c));if(!s.isUnit())throw new Error(this.toString()+" and "+e.toString()+" are not co-prime");return-1===i.compare(0)&&(i=i.add(e)),this.isNegative()?i.negate():i},u.prototype.modInv=c.prototype.modInv=s.prototype.modInv,s.prototype.next=function(){var e=this.value;return this.sign?y(e,1,this.sign):new s(v(e,1),this.sign)},c.prototype.next=function(){var e=this.value;return e+1<n?new c(e+1):new s(r,!1)},u.prototype.next=function(){return new u(this.value+BigInt(1))},s.prototype.prev=function(){var e=this.value;return this.sign?new s(v(e,1),!0):y(e,1,this.sign)},c.prototype.prev=function(){var e=this.value;return e-1>-n?new c(e-1):new s(r,!0)},u.prototype.prev=function(){return new u(this.value-BigInt(1))};for(var I=[1];2*I[I.length-1]<=t;)I.push(2*I[I.length-1]);var x=I.length,j=I[x-1];function M(e){return Math.abs(e)<=t}function L(e,t,n){t=q(t);for(var r=e.isNegative(),i=t.isNegative(),a=r?e.not():e,s=i?t.not():t,c=0,u=0,l=null,d=null,_=[];!a.isZero()||!s.isZero();)c=(l=D(a,j))[1].toJSNumber(),r&&(c=j-1-c),u=(d=D(s,j))[1].toJSNumber(),i&&(u=j-1-u),a=l[0],s=d[0],_.push(n(c,u));for(var p=0!==n(r?1:0,i?1:0)?o(-1):o(0),h=_.length-1;h>=0;h-=1)p=p.multiply(j).add(o(_[h]));return p}s.prototype.shiftLeft=function(e){var t=q(e).toJSNumber();if(!M(t))throw new Error(String(t)+" is too large for shifting.");if(t<0)return this.shiftRight(-t);var n=this;if(n.isZero())return n;for(;t>=x;)n=n.multiply(j),t-=x-1;return n.multiply(I[t])},u.prototype.shiftLeft=c.prototype.shiftLeft=s.prototype.shiftLeft,s.prototype.shiftRight=function(e){var t,n=q(e).toJSNumber();if(!M(n))throw new Error(String(n)+" is too large for shifting.");if(n<0)return this.shiftLeft(-n);for(var r=this;n>=x;){if(r.isZero()||r.isNegative()&&r.isUnit())return r;r=(t=D(r,j))[1].isNegative()?t[0].prev():t[0],n-=x-1}return(t=D(r,I[n]))[1].isNegative()?t[0].prev():t[0]},u.prototype.shiftRight=c.prototype.shiftRight=s.prototype.shiftRight,s.prototype.not=function(){return this.negate().prev()},u.prototype.not=c.prototype.not=s.prototype.not,s.prototype.and=function(e){return L(this,e,(function(e,t){return e&t}))},u.prototype.and=c.prototype.and=s.prototype.and,s.prototype.or=function(e){return L(this,e,(function(e,t){return e|t}))},u.prototype.or=c.prototype.or=s.prototype.or,s.prototype.xor=function(e){return L(this,e,(function(e,t){return e^t}))},u.prototype.xor=c.prototype.xor=s.prototype.xor;function R(e){var n=e.value,r="number"==typeof n?n|1<<30:"bigint"==typeof n?n|BigInt(1<<30):n[0]+n[1]*t|1073758208;return r&-r}function B(e,t){return e=q(e),t=q(t),e.greater(t)?e:t}function N(e,t){return e=q(e),t=q(t),e.lesser(t)?e:t}function U(e,t){if(e=q(e).abs(),t=q(t).abs(),e.equals(t))return e;if(e.isZero())return t;if(t.isZero())return e;for(var n,r,o=a[1];e.isEven()&&t.isEven();)n=N(R(e),R(t)),e=e.divide(n),t=t.divide(n),o=o.multiply(n);for(;e.isEven();)e=e.divide(R(e));do{for(;t.isEven();)t=t.divide(R(t));e.greater(t)&&(r=t,t=e,e=r),t=t.subtract(e)}while(!t.isZero());return o.isUnit()?e:e.multiply(o)}s.prototype.bitLength=function(){var e=this;return e.compareTo(o(0))<0&&(e=e.negate().subtract(o(1))),0===e.compareTo(o(0))?o(0):o(function e(t,n){if(n.compareTo(t)<=0){var r=e(t,n.square(n)),i=r.p,a=r.e,s=i.multiply(n);return s.compareTo(t)<=0?{p:s,e:2*a+1}:{p:i,e:2*a}}return{p:o(1),e:0}}(e,o(2)).e).add(o(1))},u.prototype.bitLength=c.prototype.bitLength=s.prototype.bitLength;var F=function(e,t,n,r){n=n||"0123456789abcdefghijklmnopqrstuvwxyz",e=String(e),r||(e=e.toLowerCase(),n=n.toLowerCase());var o,i=e.length,a=Math.abs(t),s={};for(o=0;o<n.length;o++)s[n[o]]=o;for(o=0;o<i;o++){if("-"!==(l=e[o])&&(l in s&&s[l]>=a)){if("1"===l&&1===a)continue;throw new Error(l+" is not a valid digit in base "+t+".")}}t=q(t);var c=[],u="-"===e[0];for(o=u?1:0;o<e.length;o++){var l;if((l=e[o])in s)c.push(q(s[l]));else{if("<"!==l)throw new Error(l+" is not a valid character");var d=o;do{o++}while(">"!==e[o]&&o<e.length);c.push(q(e.slice(d+1,o)))}}return W(c,t,u)};function W(e,t,n){var r,o=a[0],i=a[1];for(r=e.length-1;r>=0;r--)o=o.add(e[r].times(i)),i=i.times(t);return n?o.negate():o}function H(e,t){if((t=o(t)).isZero()){if(e.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(t.equals(-1)){if(e.isZero())return{value:[0],isNegative:!1};if(e.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-e.toJSNumber())).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var n=Array.apply(null,Array(e.toJSNumber()-1)).map(Array.prototype.valueOf,[0,1]);return n.unshift([1]),{value:[].concat.apply([],n),isNegative:!1}}var r=!1;if(e.isNegative()&&t.isPositive()&&(r=!0,e=e.abs()),t.isUnit())return e.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(e.toJSNumber())).map(Number.prototype.valueOf,1),isNegative:r};for(var i,a=[],s=e;s.isNegative()||s.compareAbs(t)>=0;){i=s.divmod(t),s=i.quotient;var c=i.remainder;c.isNegative()&&(c=t.minus(c).abs(),s=s.next()),a.push(c.toJSNumber())}return a.push(s.toJSNumber()),{value:a.reverse(),isNegative:r}}function K(e,t,n){var r=H(e,t);return(r.isNegative?"-":"")+r.value.map((function(e){return function(e,t){return e<(t=t||"0123456789abcdefghijklmnopqrstuvwxyz").length?t[e]:"<"+e+">"}(e,n)})).join("")}function V(e){if(l(+e)){var t=+e;if(t===f(t))return i?new u(BigInt(t)):new c(t);throw new Error("Invalid integer: "+e)}var n="-"===e[0];n&&(e=e.slice(1));var r=e.split(/e/i);if(r.length>2)throw new Error("Invalid integer: "+r.join("e"));if(2===r.length){var o=r[1];if("+"===o[0]&&(o=o.slice(1)),(o=+o)!==f(o)||!l(o))throw new Error("Invalid integer: "+o+" is not a valid exponent.");var a=r[0],d=a.indexOf(".");if(d>=0&&(o-=a.length-d-1,a=a.slice(0,d)+a.slice(d+1)),o<0)throw new Error("Cannot include negative exponent part for integers");e=a+=new Array(o+1).join("0")}if(!/^([0-9][0-9]*)$/.test(e))throw new Error("Invalid integer: "+e);if(i)return new u(BigInt(n?"-"+e:e));for(var _=[],h=e.length,m=h-7;h>0;)_.push(+e.slice(m,h)),(m-=7)<0&&(m=0),h-=7;return p(_),new s(_,n)}function q(e){return"number"==typeof e?function(e){if(i)return new u(BigInt(e));if(l(e)){if(e!==f(e))throw new Error(e+" is not an integer.");return new c(e)}return V(e.toString())}(e):"string"==typeof e?V(e):"bigint"==typeof e?new u(e):e}s.prototype.toArray=function(e){return H(this,e)},c.prototype.toArray=function(e){return H(this,e)},u.prototype.toArray=function(e){return H(this,e)},s.prototype.toString=function(e,t){if(void 0===e&&(e=10),10!==e)return K(this,e,t);for(var n,r=this.value,o=r.length,i=String(r[--o]);--o>=0;)n=String(r[o]),i+="0000000".slice(n.length)+n;return(this.sign?"-":"")+i},c.prototype.toString=function(e,t){return void 0===e&&(e=10),10!=e?K(this,e,t):String(this.value)},u.prototype.toString=c.prototype.toString,u.prototype.toJSON=s.prototype.toJSON=c.prototype.toJSON=function(){return this.toString()},s.prototype.valueOf=function(){return parseInt(this.toString(),10)},s.prototype.toJSNumber=s.prototype.valueOf,c.prototype.valueOf=function(){return this.value},c.prototype.toJSNumber=c.prototype.valueOf,u.prototype.valueOf=u.prototype.toJSNumber=function(){return parseInt(this.toString(),10)};for(var G=0;G<1e3;G++)a[G]=q(G),G>0&&(a[-G]=q(-G));return a.one=a[1],a.zero=a[0],a.minusOne=a[-1],a.max=B,a.min=N,a.gcd=U,a.lcm=function(e,t){return e=q(e).abs(),t=q(t).abs(),e.divide(U(e,t)).multiply(t)},a.isInstance=function(e){return e instanceof s||e instanceof c||e instanceof u},a.randBetween=function(e,n,r){e=q(e),n=q(n);var o=r||Math.random,i=N(e,n),s=B(e,n).subtract(i).add(1);if(s.isSmall)return i.add(Math.floor(o()*s));for(var c=H(s,t).value,u=[],l=!0,d=0;d<c.length;d++){var _=l?c[d]:t,p=f(o()*_);u.push(p),p<_&&(l=!1)}return i.add(a.fromArray(u,t,!1))},a.fromArray=function(e,t,n){return W(e.map(q),q(t||10),n)},a}();e.hasOwnProperty("exports")&&(e.exports=o),void 0===(r=function(){return o}.call(t,n,t,e))||(e.exports=r)}).call(this,n("YuTi")(e))},dV62:function(e,t,n){"use strict";n.r(t),n.d(t,"rootId",(function(){return i})),n.d(t,"registerReactApplication",(function(){return a})),n.d(t,"showComponentInBox",(function(){return s})),n.d(t,"updateCurrentComponentInBox",(function(){return c})),n.d(t,"destroyComponentInBox",(function(){return u})),n.d(t,"renderCommonBox",(function(){return d}));var r=n("i8i4"),o=n("q1tI"),i="react_root";function a(e,t){window.applicationInitFunctions[e]=t,window.reactInitQueue[e]&&window.reactInitQueue[e].length&&(window.reactInitQueue[e].forEach(t=>{window.initReactApplication(e,t)}),window.reactInitQueue[e]=[])}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.onDestroy||(t.onDestroy=u);var n=window.showFastBox(t),o=document.querySelectorAll(".box_layout"),i=o[o.length-1];return r.render(e,i),l(),n}function c(e){var t=document.querySelectorAll(".box_layout"),n=t[t.length-1];r.render(e,n)}function u(e){var t=document.querySelectorAll(".box_layout"),n=t[t.length-1];n&&r.unmountComponentAtNode(n);var o=window.curBox();o&&o.hide(e)}function l(){var e=document.querySelectorAll(".popup_box_container"),t=e[e.length-1];boxRefreshCoords(t)}function d(e,t,n){var r=n?o.createElement("div",{className:"box_controls ta_r"},n):null,i=n?"":" box_no_buttons";return o.createElement(o.Fragment,null,o.createElement("div",{className:"box_title_wrap"},o.createElement("div",{className:"box_x_button",role:"button",onClick:u}),o.createElement("div",{className:"box_title"},e)),o.createElement("div",{className:"box_body"+i},t),r)}window.applicationInitFunctions||(window.applicationInitFunctions={}),window.reactInitQueue||(window.reactInitQueue={}),window.initReactApplication=(e,t)=>{window.applicationInitFunctions[e]?window.applicationInitFunctions[e](t):(window.reactInitQueue[e]||(window.reactInitQueue[e]=[]),window.reactInitQueue[e].push(t))}},dyZX:function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},e7yV:function(e,t,n){var r=n("aCFj"),o=n("kJMx").f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==i.call(e)?function(e){try{return o(e)}catch(e){return a.slice()}}(e):o(r(e))}},e87a:function(e,t,n){"use strict";n.r(t);var r=n("q1tI"),o=n("i8i4"),i=(n("17x9"),n("xt6h"));class a extends r.Component{constructor(){super(...arguments),this.getScrollbarWidth=()=>{var e=document.createElement("div");e.classList.add(this._scrollbarMeasureClass),document.body.appendChild(e);var t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t},this.hideScrollBar=()=>{var e=document.body.getBoundingClientRect(),t=e.left+e.right<window.innerWidth,n=this.getScrollbarWidth();this.calculatedPadding=window.getComputedStyle(document.body)["padding-right"],t&&(document.body.style.paddingRight=parseFloat(this.calculatedPadding)+n+"px"),document.body.classList.add(this._bodyHiddenOverflowClass)},this.showScrollBar=()=>{document.body.style.paddingRight=this.calculatedPadding,document.body.classList.remove(this._bodyHiddenOverflowClass)},this.onDocumentKeyDown=e=>{var t=this.props.onClose;"Escape"===e.key&&t()},this.onBackdropClick=()=>{var e=this.props,t=e.onClose,n=e.onBackdropClick;e.disableBackdropClick||(n?n():t())}}componentDidMount(){var e=this.props,t=e.disableEscapeClose,n=e.disableBodyScroll;t||document.body.addEventListener("keydown",this.onDocumentKeyDown),n&&(this._scrollbarMeasureClass=r.createElement("div",{className:"BaseModal__scrollbarMeasure"}).props.className,this._bodyHiddenOverflowClass=r.createElement("div",{className:"BaseModal__bodyHiddenOverflow"}).props.className,this.hideScrollBar())}componentWillUnmount(){var e=this.props,t=e.disableEscapeClose,n=e.disableBodyScroll;t||document.body.removeEventListener("keydown",this.onDocumentKeyDown),n&&this.showScrollBar()}renderModal(){var e=this.props.className,t=Object(i.classNames)("BaseModal",e);return r.createElement("div",{className:t,"aria-modal":"true"},r.createElement("div",{className:"BaseModal__backdrop",onClick:this.onBackdropClick}),r.createElement("div",{className:"BaseModal__content"},this.props.children))}render(){return o.createPortal(this.renderModal(),document.body)}}a.defaultProps={className:"",children:null,disableBackdropClick:!1,disableEscapeClose:!1,disableBodyScroll:!1},t.default=a},eH33:function(e,t,n){"use strict";n.r(t),n.d(t,"UnauthorizedSourceType",(function(){return r}));var r={PHOTO:"photo",VIDEO:"video",AUDIO:"audio",COMMENTS:"comments"}},eNQP:function(e,t,n){"use strict";n.r(t),n.d(t,"collectMemoryStats",(function(){return a})),n.d(t,"statDurationsLoadImage",(function(){return s})),n.d(t,"statNavigationTiming",(function(){return c}));var r=n("XzvV"),o=n("t7n3");function i(e,t){for(var n,r=0;r<t.length;r++)if(">"===(n=t[r]))n=">"+t[r-1];else{if(1e3*n>e){n="<"+n;break}n=!1}return n}function a(){var e={},t=[15,60,300,1500,5e3,1e4,15e3,2e4,25e3,3e4],n=[300,1500,5e3,3e4,6e4,12e4,">"],o=!1;setInterval((function(){var a=window.cur&&window.cur.module;a!==o&&(e={},o=a);var s=window.vkLastNav;if(a&&s){var c=i(Date.now()-s,t);if(c&&!e[c]){var u=i(Date.now()-window.vkTabLoaded,n);e[c]=!0;var l=performance.memory.usedJSHeapSize;Object(r.statlogsValueEvent)("js_memory_stats_modules",l,a,c,u)}}}),5e3)}function s(){if(Math.random()<.001&&window.performance&&window.performance.getEntriesByType){if(window.clientStatsInited)return!1;var e=window.performance.getEntriesByType("resource");if(!e)return!1;for(var t={},n={},i=0;i<e.length;i++)if(e[i]&&"img"===e[i].initiatorType)if(e[i].duration<100)t["<100"]=(t["<100"]||0)+1;else if(e[i].duration<250)t["100-250"]=(t["100-250"]||0)+1;else if(e[i].duration<500)t["250-500"]=(t["250-500"]||0)+1;else if(e[i].duration<1e3)t["500-1000"]=(t["500-1000"]||0)+1;else if(e[i].duration<2e3)t["1000-2000"]=(t["1000-2000"]||0)+1;else if(e[i].duration<5e3)t["2000-5000"]=(t["2000-5000"]||0)+1;else if(t[">5000"]=(t[">5000"]||0)+1,e[i].name&&e[i].name.indexOf("pp.vk.me")>0){var a="";(a=(a=e[i].name).substr(a.indexOf("pp.vk.me")+9)).indexOf("/")>0&&(n[a=a.substr(0,a.indexOf("/"))]=(n[a]||0)+1)}Object(o.each)(t,(e,t)=>Object(r.statlogsValueEvent)("img_load",t,e)),Object(o.each)(n,(e,t)=>Object(r.statlogsValueEvent)("img_slow",t,e)),window.clientStatsInited=!0}}function c(){if(window.clientStatsInitedNT)return!1;if(window.performance&&performance.timing){if(Math.random()>.001&&!__dev)return!1;var e={},t=window.cur&&window.cur.module;performance.timing.redirectStart&&performance.timing.redirectEnd&&(e.redirect=performance.timing.redirectEnd-performance.timing.redirectStart),performance.timing.domainLookupStart&&performance.timing.domainLookupEnd&&(e.domainLookup=performance.timing.domainLookupEnd-performance.timing.domainLookupStart),performance.timing.connectStart&&performance.timing.connectEnd&&(e.connect=performance.timing.connectEnd-performance.timing.connectStart,performance.timing.secureConnectionStart&&(e.secureConnection=performance.timing.connectEnd-performance.timing.secureConnectionStart)),performance.timing.requestStart&&performance.timing.responseStart&&(e.request=performance.timing.responseStart-performance.timing.requestStart,performance.timing.responseEnd&&(e.response=performance.timing.responseEnd-performance.timing.responseStart)),performance.timing.unloadEventStart&&performance.timing.unloadEventEnd&&(e.unloadEvent=performance.timing.unloadEventEnd-performance.timing.unloadEventStart),performance.timing.domLoading&&performance.timing.domComplete&&(e.processing=performance.timing.domComplete-performance.timing.domLoading),performance.timing.domContentLoadedEventStart&&performance.timing.domContentLoadedEventEnd&&(e.domContentLoadedEvent=performance.timing.domContentLoadedEventEnd-performance.timing.domContentLoadedEventStart),performance.timing.loadEventStart&&performance.timing.loadEventEnd&&(e.loadEvent=performance.timing.loadEventEnd-performance.timing.loadEventStart),performance.timing.loadEventEnd&&performance.timing.responseEnd&&(e.resource=performance.timing.loadEventEnd-performance.timing.responseEnd),Object(o.each)(e,(e,n)=>Object(r.statlogsValueEvent)("navigation_timing",n,e,t)),window.clientStatsInitedNT=!0}}},"eQf/":function(e,t,n){"use strict";n.r(t),n.d(t,"requestBox",(function(){return o})),n.d(t,"activateMobileBox",(function(){return i})),n.d(t,"validateMobileBox",(function(){return a})),n.d(t,"validatePassBox",(function(){return s})),n.d(t,"validateOtpBox",(function(){return c}));var r=n("EasH");function o(e,t,n){return e.setOptions({onDestroy:n}),e.onDone=function(){t&&t.apply(null,arguments)},e}function i(e){return o(Object(r.showBox)("activation.php",{act:"activate_mobile_box",hash:e.hash}),(function(){vk.nophone=0,e.onDone()}),e.onFail)}function a(e){return o(Object(r.showBox)("activation.php",{act:"validate_box",captcha:e.acceptCaptcha?1:"",skip_push:e.skip_push?e.skip_push:"",from:e.from||"",hash:e.hash,ahash:e.ahash},{stat:["uncommon.css"]}),e.onDone,e.onFail)}function s(e){return o(Object(r.showBox)("activation.php",{act:"pass_validate_box",hash:e.hash},{stat:["uncommon.css"]}),e.onDone,e.onFail)}function c(e){return o(Object(r.showBox)("activation.php",{act:"otp_validate_box",hash:e.hash},{stat:["uncommon.css"]}),e.onDone,e.onFail)}},eVa8:function(e,t,n){"use strict";n.r(t),n.d(t,"getAudioPerformers",(function(){return a}));n("pIFo");var r=n("W0fz"),o=n("TGUg"),i=n("uk5P");function a(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n="",a=!Object(r.isPodcast)(e)&&t;if(isArray(e[i.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_MAIN_ARTISTS])&&(n=Object(o.getAudioArtistsString)(e[i.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_MAIN_ARTISTS],a)),isArray(e[i.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_FEAT_ARTISTS])&&(n+=" feat. ",n+=Object(o.getAudioArtistsString)(e[i.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_FEAT_ARTISTS],a)),!n){var s=e[i.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_PERFORMER]?e[i.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_PERFORMER].replace(/<\/?em>/g,""):"";if(a){var c="/audio?performer=1&q="+encodeURIComponent(s);n=`<a class="artist_link" data-performer="${s}" href="${c}">${s}</a>`}else n=s}return n}},eeVq:function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},egla:function(e,t,n){"use strict";n.r(t),n.d(t,"NetworkStatCollector",(function(){return i})),n.d(t,"NetworkStatCollectorInstance",(function(){return a})),n.d(t,"AudioNetworkStatCollector",(function(){return c})),n.d(t,"AudioNetworkType",(function(){return s.AudioNetworkType}));var r=n("HLtZ"),o=n("Bj12"),i=function(){function e(){}return e.prototype.logEvent=function(e){e.type&&e[e.type]?Object(o.saveNetworkStats)(e):Object(r.logError)(new Error("NetworkStatCollector: invalid event."))},e}(),a=new i,s=n("o5u5"),c=function(){function e(e){this.networkStatCollector=e}return e.prototype.logEvent=function(e,t,n){var r,o=((r={network_type:t,network_effective_type:n,type:s.NetworkStatEventTypes.TYPE_NETWORK_AUDIO_ITEM})[s.NetworkStatEventTypes.TYPE_NETWORK_AUDIO_ITEM]=e,r);this.networkStatCollector.logEvent(o)},e}()},elZq:function(e,t,n){"use strict";var r=n("dyZX"),o=n("hswa"),i=n("nh4g"),a=n("K0xU")("species");e.exports=function(e){var t=r[e];i&&t&&!t[a]&&o.f(t,a,{configurable:!0,get:function(){return this}})}},euvX:function(e,t,n){"use strict";n.r(t),n.d(t,"ModalHeader",(function(){return a}));var r=n("q1tI"),o=n.n(r),i=n("xt6h"),a=function(e){var t=e.className,n=e.title,r=e.onClose,a=e.appearance,s=void 0===a?"white":a,c=e.backText,u=e.onBack,l=Object(i.classNames)("ModalHeader","ModalHeader--"+s,t);return o.a.createElement("div",{className:l},c&&o.a.createElement("button",{className:"ModalHeader__back",onClick:u},c),o.a.createElement("h1",{className:"ModalHeader__title"},n),o.a.createElement("button",{className:"ModalHeader__cross",type:"button",onClick:r},"Закрыть"))}},fyDq:function(e,t,n){var r=n("hswa").f,o=n("aagx"),i=n("K0xU")("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},g10N:function(e,t,n){"use strict";n.r(t),n.d(t,"normalizeUser",(function(){return i})),n.d(t,"createFriendsCache",(function(){return a})),n.d(t,"getMe",(function(){return s}));var r=n("oRRD"),o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},i=function(e){var t=e.id,n=e.photo_400_orig,i=e.sex,a=e.first_name,s=e.last_name,c=e.screen_name,u=e.name,l=e.photo_400;return o({id:+t,peerId:+t,name:u||a+" "+s,firstName:a,shortName:Object(r.fetchUserShortName)(a,s,u),link:c&&"/"+c,sex:i},n||l?{photo:n||l}:{})};function a(e){return e.reduce((function(e,t){return e[t.id]=!0,e}),{})}function s(e){return e.participants[e.me]}},g3g5:function(e,t){var n=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},g4nd:function(e,t,n){"use strict";n.r(t),n.d(t,"logDonutEvent",(function(){return a}));var r=n("XAlg"),o=n("r0fY"),i=n("smNX");function a(e,t){var n=Object(i.parseJSON)(e),a=n.type,s=n.type_property,c=n.params;s===o.ActionProductionStatEventTypes.TYPE_DONUT_PAYMENT_ITEM?r.donutStats.logEventAction({event_type:c.event_type,source:c.source,owner_id:c.owner_id}):t&&a===o.ProductionStatEventTypes.TYPE_NAVGO&&function(e,t){var n=t.params;if(t.typeProperty===o.NavigationProductionStatEventTypes.TYPE_DONUT_DESCRIPTION_NAV_ITEM){var i=n.owner_id,a=n.track_code;if(!n||"number"!=typeof i||"string"!=typeof a)return;r.donutStats.logEventDescriptionClick({ownerId:i,trackCode:a})}}(0,{typeProperty:s,params:c})}},g65Y:function(e,t,n){"use strict";var r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;function a(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,c=a(e),u=1;u<arguments.length;u++){for(var l in n=Object(arguments[u]))o.call(n,l)&&(c[l]=n[l]);if(r){s=r(n);for(var d=0;d<s.length;d++)i.call(n,s[d])&&(c[s[d]]=n[s[d]])}}return c}},g6HL:function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},gHnn:function(e,t,n){var r=n("dyZX"),o=n("GZEu").set,i=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,c="process"==n("LZWt")(a);e.exports=function(){var e,t,n,u=function(){var r,o;for(c&&(r=a.domain)&&r.exit();e;){o=e.fn,e=e.next;try{o()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(c)n=function(){a.nextTick(u)};else if(!i||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var l=s.resolve(void 0);n=function(){l.then(u)}}else n=function(){o.call(r,u)};else{var d=!0,_=document.createTextNode("");new i(u).observe(_,{characterData:!0}),n=function(){_.data=d=!d}}return function(r){var o={fn:r,next:void 0};t&&(t.next=o),e||(e=o,n()),t=o}}},gdug:function(e,t,n){"use strict";n.r(t),n.d(t,"browser",(function(){return d})),n.d(t,"mobPlatforms",(function(){return _})),n.d(t,"browserFeatures",(function(){return p})),n.d(t,"redirectToMVK",(function(){return h})),n.d(t,"initBrowserUtils",(function(){return f}));n("HEwt"),n("rGqo"),n("rE2o"),n("ioFf"),n("a1Th"),n("Btvt"),n("pIFo"),n("KKXr"),n("SRfc");var r=n("t7n3"),o=n("2W9W"),i=n("J8bf"),a=n("cGUQ");function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l=navigator.userAgent.toLowerCase(),d={version:(l.match(/.+(?:me|ox|on|rv|it|era|opr|ie|edge)[\/: ]([\d.]+)/)||[0,"0"])[1],opera:/opera/i.test(l)||/opr/i.test(l),vivaldi:/vivaldi/i.test(l),amigo:/amigo.*mrchrome soc/i.test(l),msie:/msie/i.test(l)&&!/opera/i.test(l)||/trident\//i.test(l)||/edge/i.test(l),msie6:/msie 6/i.test(l)&&!/opera/i.test(l),msie7:/msie 7/i.test(l)&&!/opera/i.test(l),msie8:/msie 8/i.test(l)&&!/opera/i.test(l),msie9:/msie 9/i.test(l)&&!/opera/i.test(l),msie_edge:/edge/i.test(l)&&!/opera/i.test(l),mozilla:/firefox/i.test(l),yabrowser:/yabrowser/i.test(l),whale:/whale/i.test(l),chrome:/chrome/i.test(l)&&!/edge/i.test(l),safari:!/chrome/i.test(l)&&/webkit|safari|khtml/i.test(l),iphone:/iphone/i.test(l),ipod:/ipod/i.test(l),iphone4:/iphone.*OS 4/i.test(l),ipod4:/ipod.*OS 4/i.test(l),ipad:/ipad/i.test(l),android:/android/i.test(l),bada:/bada/i.test(l),mobile:/iphone|ipod|ipad|opera mini|opera mobi|iemobile|android/i.test(l),msie_mobile:/iemobile/i.test(l),safari_mobile:/iphone|ipod|ipad/i.test(l),opera_mobile:/opera mini|opera mobi/i.test(l),opera_mini:/opera mini/i.test(l),mac:/mac/i.test(l),windows7:/windows nt 6.1/i.test(l),windowsVista:/windows nt 6.0/i.test(l),windowsXp:/windows nt (5.2|5.1)/i.test(l),search_bot:/(yandex|google|stackrambler|aport|slurp|msnbot|bingbot|twitterbot|ia_archiver|facebookexternalhit)/i.test(l),smart_tv:/smart-tv|smarttv/i.test(l)},_={1:1,2:1,3:1,4:1,5:1,8:1},p={wheelEvent:"onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":d.mozilla?"MozMousePixelScroll":"DOMMouseScroll",hasBoundingClientRect:"getBoundingClientRect"in document.createElement("div"),cmaEnabled:navigator.credentials&&navigator.credentials.preventSilentAccess&&window.vk&&vk.cma};function h(){var e,t=s(location.href.split("?"),2),n=t[0],o=t[1],i={},u=function(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=c(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,i=!0,a=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(a)throw o}}}}(new URLSearchParams(o));try{for(u.s();!(e=u.n()).done;){var l=e.value;i[l[0]]=l[1]}}catch(e){u.e(e)}finally{u.f()}if(i){if("1"===i.m)return;if(i.force_redirect_to_mvk){delete i.force_redirect_to_mvk;var d=Object(a.toQueryString)(i);return void(window.location=n.replace(/vk\.com/,"m.vk.com")+(d?"?"+d:""))}}if(/vk\.com/.test(n)&&!/vk\.com\/@/.test(n)){var _=Object(r.extend)(i,{force_redirect_to_mvk:1}),p=n+"?"+Object(a.toQueryString)(_);window.location=p}}function f(){Object(o.isIPadOS)(d)&&!Object(i.getCookie)("remixforce_full")&&h(),window._ua||(window._ua=navigator.userAgent.toLowerCase()),window.locDomain||(window.locDomain=location.host.toString().match(/[a-zA-Z]+\.[a-zA-Z]+\.?$/)[0]),window.locHost=location.host,window.locProtocol=location.protocol,window.locHash=location.hash.replace("#/","").replace("#!","")}},h7Kf:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return s}));n("91GP"),n("ioFf"),n("rGqo"),n("Btvt");var r=n("q1tI"),o=(n("17x9"),n("xt6h"));function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}class s extends r.Component{constructor(e){super(e),this.onChange=e=>{this.isControlledOutside||this.setState({value:e.target.value}),this.props.onChange&&this.props.onChange(e)},this.getRef=e=>{this.element=e},this.onFocus=e=>{this.props.onFocus&&this.props.onFocus(e)},void 0!==e.value||e.isControlledOutside?this.isControlledOutside=!0:this.state={value:e.initialValue||""}}render(){var e=this.props,t=e.alignment,n=e.value,s=(e.onChange,e.initialValue,e.className),c=(e.isControlledOutside,a(e,["alignment","value","onChange","initialValue","className","isControlledOutside"])),u={"Input--left":"left"===t,"Input--center":"center"===t,"Input--right":"right"===t};return r.createElement("input",i({},c,{className:Object(o.classNames)("Input",u,s),ref:this.getRef,value:this.isControlledOutside?n:this.state.value,onChange:this.onChange,onFocus:this.onFocus}))}}s.defaultProps={type:"text",initialValue:"",alignment:"left"}},hPIQ:function(e,t){e.exports={}},hhXQ:function(e,t,n){var r=n("XKFU"),o=n("UExd")(!1);r(r.S,"Object",{values:function(e){return o(e)}})},hmKL:function(e,t,n){"use strict";n.r(t);var r=n("zxIV"),o=n("t7n3"),i=n("gdug"),a=n("Egk5"),s={initTabs:function(e,t){if(!(i.browser.msie&&Object(o.intval)(i.browser.version)<10||i.browser.opera&&Object(o.intval)(i.browser.version)<15||hasClass(e,"ui_tabs_sliding"))){var n=Object(r.getSize)(t)[0],a=t.offsetLeft,s=Object(r.geByClass1)("_ui_tabs_slider",e);if(!Object(r.domData)(e,"inited"))setStyle(s,{width:n+"px",marginLeft:a})}},tryInit:function(e){if(!Object(r.domData)(e,"inited")){var t=Object(r.geByClass1)("ui_tab_group_sel",e)||Object(r.geByClass1)("ui_tab_sel",e);t&&s.initTabs(e,t),Object(r.domData)(e,"inited",1)}},goTab:function(e,t,n){if(Object(a.checkEvent)(t))return!0;var o=Object(r.gpeByClass)("ui_tabs",e);return!(!n&&Object(r.geByClass1)("ui_tab_sel",o)==e)&&(s.switchTab(e),s.showProgress(o),nav.go(e,t,{tab:e}))},switchTab:function(e,t){var n=Object(r.gpeByClass)("ui_tabs",e),i=Object(r.geByClass1)("ui_tab_sel",n),a=null,c=null,u=hasClass(i,"ui_tab_group_item")?c=Object(r.gpeByClass)("ui_tab_group",i):i,l=hasClass(e,"ui_tab_group_item")?a=Object(r.gpeByClass)("ui_tab_group",e):e;if(e!=i){if(e!=l&&(s.toggleGroup(l,!1),s.resetLabel(l,e)),u){s.initTabs(n,u),(t=t||{}).noAnim||l===u||(addClass(n,"ui_tabs_sliding"),clearTimeout(cur.tabSlidingTO),cur.tabSlidingTO=setTimeout(removeClass.pbind(n,"ui_tabs_sliding"),300));var d=Object(r.geByClass1)("_ui_tabs_slider",n),_=Object(o.intval)(d.style.marginLeft),p={width:Object(r.getSize)(l)[0]+"px"};p[cssTransformProp]="translateX("+(l.offsetLeft-_)+"px)",setStyle(d,p),i!=u&&l!=u&&s.resetLabel(u),u!=i&&removeClass(u,"ui_tab_group_sel"),removeClass(i,"ui_tab_sel")}if(l!=e&&addClass(l,"ui_tab_group_sel"),addClass(e,"ui_tab_sel"),c&&removeClass(c,"ui_tab_hide_separator"),a){n=Object(r.geByClass1)("ui_tab_group_items",a,"div").children;var h=null;each(n,(function(e,t){"SPAN"===t.tagName?h=t:hasClass(Object(r.domFC)(t),"ui_tab_sel")||hasClass(t,"unshown")||(h=null)})),h&&addClass(a,"ui_tab_hide_separator")}}return!1},resetLabel:function(e,t){var n=Object(r.geByClass1)("ui_tab_group_label",e,"span");n&&(n.innerHTML=(t||n).getAttribute("data-default-label"))},toggleGroup:function(e,t){var n=Object(r.data)(e,"visibletimer");n&&clearTimeout(n),Object(r.data)(e,"visibletimer",setTimeout(r.toggleClass.pbind(e,"visible",t),t?0:100)),Object(r.toggleClass)(e,"shown",t)},showGroup:function(e){var t=Object(r.data)(e,"hidetimer");t&&(clearTimeout(t),Object(r.data)(e,"hidetimer",0)),s.toggleGroup(e,!0)},hideGroup:function(e){Object(r.data)(e,"hidetimer")||Object(r.data)(e,"hidetimer",setTimeout((function(){s.toggleGroup(e,!1),Object(r.data)(e,"hidetimer",0)}),200))},showProgress:function(e){hasClass(e,"ui_tabs")||(e=Object(r.gpeByClass)("ui_tabs",e)),addClass(e,"ui_tabs_loading")},hideProgress:function(e){hasClass(e,"ui_tabs")||(e=Object(r.gpeByClass)("ui_tabs",e)),removeClass(e,"ui_tabs_loading")},showSearch:function(e,t){if(cur.viewAsBox)return cur.viewAsBox();if(Object(a.checkEvent)(t))return!0;var n=Object(r.gpeByClass)("ui_tabs",e),o=Object(r.domByClass)(n,"_field");return addClass(n,"ui_tabs_search_opened"),uiSearch.focus(o),!1},hideSearch:function(e,t){if(Object(a.checkEvent)(t))return!0;var n=Object(r.gpeByClass)("ui_tabs",e);return removeClass(n,"ui_tabs_search_opened"),!1}};t.default=s},hswa:function(e,t,n){var r=n("y3w9"),o=n("xpql"),i=n("apmT"),a=Object.defineProperty;t.f=n("nh4g")?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},i5dc:function(e,t,n){var r=n("0/R4"),o=n("y3w9"),i=function(e,t){if(o(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=n("m0Pp")(Function.call,n("EemH").f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return i(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:i}},i6oL:function(e,t,n){"use strict";n.r(t),n.d(t,"initStl",(function(){return p})),n.d(t,"updateSTL",(function(){return g}));var r=n("v+DW"),o=n("El3O"),i=n("kHqu"),a=n("Egk5"),s=n("lXE5"),c=n("zxIV"),u=n("t7n3"),l=n("4+be"),d=!1,_=!0;function p(){var e={onclick:h,onmousedown:f,onmouseover:m,onmouseout:m};Object(c.val)(_stlLeft,'<div id="stl_bg"><nobr id="stl_text">'+Object(l.getLang)("global_to_top")+"</nobr></div>"),Object(u.extend)(_stlLeft,e),Object(u.extend)(_stlSide,e),window._stlBg=_stlLeft.firstChild,window._stlText=window._stlBg.firstChild,Object(a.addEvent)(window,"blur",(function(){window._wf=-1,d=!1})),Object(a.addEvent)(window,"focus",(function(){window._wf=1,d||(window.__afterFocus=!0,d=!0,setTimeout((function(){window.__afterFocus=!1}),10),_&&(Object(r.sbWidth)(!0),Object(o.onBodyResize)(!0),_=!1))}))}function h(e){return Object(a.checkEvent)(e)||Object(a.cancelEvent)(e)}function f(e){if(e=e||window.event,!Object(a.checkEvent)(e)&&!__afterFocus)if(_stlWasSet&&_stlWas){var t=_stlWas;window._stlWas=0,Object(s.scrollToY)(t,0,!0,!0),Object(i.updateLeftMenu)(!0)}else 1===_stlBack?_tbLink.onclick():(window._stlWas=Object(s.scrollGetY)(),Object(s.scrollToY)(0,0,!0,!0),Object(i.updateLeftMenu)())}function m(e){var t=e?e.originalEvent||e:window.event||{},n="mouseover"===t.type&&(t.pageX>0||t.clientX>0);Object(c.toggleClass)(_stlLeft,"over",n),Object(c.toggleClass)(_stlLeft,"over_fast",n&&(0===_stlBack||_tbLink.fast)&&0===_stlWasSet),Object(c.toggleClass)(_stlSide,"over",n)}function g(){var e=window.innerWidth,t=document.documentElement.clientWidth,n=Math.max(Object(u.intval)(e),Object(u.intval)(t));Object(c.toggleClass)(bodyNode,"no_stl",n<vk.width+280),Object(c.toggleClass)(bodyNode,"no_sett",n<vk.width+62)}},i8i4:function(e,t,n){"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}}(),e.exports=n("yl30")},icuC:function(e,t,n){"use strict";n.r(t),n.d(t,"UserRole",(function(){return r})),n.d(t,"MediaOption",(function(){return o})),n.d(t,"NoiseCancellationTypes",(function(){return i})),n.d(t,"VideoResolutionTypes",(function(){return a})),n.d(t,"VIDEO_RESOLUTION_STORAGE_KEY",(function(){return b})),n.d(t,"VideoHeight",(function(){return u})),n.d(t,"VideoWidth",(function(){return l})),n.d(t,"ParticipantsManagementMode",(function(){return d})),n.d(t,"MediaPermissionType",(function(){return _})),n.d(t,"ErrorHandleType",(function(){return p})),n.d(t,"CallErrorType",(function(){return h})),n.d(t,"MediaError",(function(){return f})),n.d(t,"FatalError",(function(){return m})),n.d(t,"SearchResultType",(function(){return g})),n.d(t,"Mode",(function(){return v})),n.d(t,"LOAD_PEERS",(function(){return S})),n.d(t,"CHANGE_MODE",(function(){return D})),n.d(t,"CALL_STATE",(function(){return P})),n.d(t,"REMOVE_USER",(function(){return k})),n.d(t,"TIME_START",(function(){return A})),n.d(t,"LOCAL_TIME_START",(function(){return I})),n.d(t,"HANGUP",(function(){return x})),n.d(t,"SET_CHAT_INFO",(function(){return j})),n.d(t,"GROUP_CALL_SETUP",(function(){return M})),n.d(t,"TOGGLE_POPUP",(function(){return L})),n.d(t,"UPDATE_HASH",(function(){return R})),n.d(t,"CHANGE_UI_MODE",(function(){return B})),n.d(t,"SET_ORATOR",(function(){return N})),n.d(t,"TOGGLE_ORATOR_MODE",(function(){return U})),n.d(t,"TOGGLE_PARTICIPANTS_ASIDE",(function(){return F})),n.d(t,"SET_PINNED_PARTICIPANT",(function(){return W})),n.d(t,"SET_ADMIN_PINNED_PARTICIPANT",(function(){return H})),n.d(t,"SET_SCREEN_SHARING_PINNED_PARTICIPANT",(function(){return K})),n.d(t,"MANAGEMENT",(function(){return V})),n.d(t,"CALL_NOTIFICATION",(function(){return q})),n.d(t,"JOIN",(function(){return G})),n.d(t,"ERROR",(function(){return z})),n.d(t,"CHANGE_PARTICIPANT_STATE",(function(){return Y})),n.d(t,"CHANGE_PARTICIPANT_ROLES",(function(){return $})),n.d(t,"CHANGE_PARTICIPANT_PERMISSIONS",(function(){return X})),n.d(t,"SET_SCREEN_SHARER",(function(){return Q})),n.d(t,"SET_FRIENDS",(function(){return J})),n.d(t,"SET_SPEAKERS",(function(){return Z})),n.d(t,"UPDATE_PARTICIPANTS_BATCH",(function(){return ee})),n.d(t,"SET_UNREAD_COUNT",(function(){return te})),n.d(t,"SHOW_CAUTION_BOX",(function(){return ne})),n.d(t,"SHOW_LOADER",(function(){return re})),n.d(t,"SET_TOOLTIP",(function(){return oe})),n.d(t,"MANUAL_ADD_PARTICIPANTS",(function(){return ie})),n.d(t,"SET_VISIBLE_PARTICIPANTS",(function(){return ae})),n.d(t,"SET_TRANSLATION",(function(){return se})),n.d(t,"SET_FUTURE_TRANSLATION_DATA",(function(){return ce})),n.d(t,"UPDATE_ANON_SECRET",(function(){return ue})),n.d(t,"TOGGLE_PARTICIPANTS_MANAGEMENT",(function(){return le})),n.d(t,"TOGGLE_PARTICIPANTS_KICK",(function(){return de})),n.d(t,"TOGGLE_UNMUTE_REQUEST",(function(){return _e})),n.d(t,"TOGGLE_ADMIN_ASSIGNMENT",(function(){return pe})),n.d(t,"SET_NOISE_CANCELLATION",(function(){return he})),n.d(t,"CHANGE_LOCAL_VIDEO_RESOLUTION",(function(){return fe})),n.d(t,"SET_CONVERSATION_OPTIONS",(function(){return me})),n.d(t,"SET_PRIVACY_SETTINGS",(function(){return ge})),n.d(t,"CallType",(function(){return y})),n.d(t,"UIMode",(function(){return E})),n.d(t,"CallStatus",(function(){return w})),n.d(t,"NotificationType",(function(){return O})),n.d(t,"SdkHandType",(function(){return C})),n.d(t,"SdkErrorType",(function(){return T})),n.d(t,"defaultNotificationLifeSpan",(function(){return ve})),n.d(t,"VOLUME_LEVEL_DETECTION",(function(){return be})),n.d(t,"DEFAULT_AVATAR",(function(){return ye})),n.d(t,"BAD_CONNECTION_DISABLED_CAMERA_LEVEL",(function(){return Ee})),n.d(t,"HANGUP_DELAY",(function(){return we})),n.d(t,"CLIENT_ERROR_NOT_AUTHORIZED",(function(){return Oe})),n.d(t,"CLIENT_ERROR_UNKNOWN",(function(){return Ce})),n.d(t,"OK_SERVER_IS_TEMPORARY_UNAVAILABLE",(function(){return Te})),n.d(t,"SERVER_ERROR_UNKNOWN",(function(){return Se})),n.d(t,"SERVER_ERROR_INVALID_REQUEST",(function(){return De})),n.d(t,"SERVER_ERROR_FLOOD_CONTROL",(function(){return Pe})),n.d(t,"SERVER_ERROR_INTERNAL",(function(){return ke})),n.d(t,"SERVER_ERROR_OLD_RECEIVER_APP",(function(){return Ae})),n.d(t,"SERVER_ERROR_PRIVACY",(function(){return Ie})),n.d(t,"SERVER_ERROR_BUSY",(function(){return xe})),n.d(t,"SERVER_ERROR_REQUIRE_AUTH",(function(){return je})),n.d(t,"POPUP_SETTINGS",(function(){return Me})),n.d(t,"POPUP_TRANSLATION",(function(){return Le})),n.d(t,"POPUP_TRANSLATION_START_COUNTDOWN",(function(){return Re})),n.d(t,"POPUP_TRANSLATION_STOP",(function(){return Be})),n.d(t,"POPUP_TRANSLATION_SHARE",(function(){return Ne})),n.d(t,"POPUP_EXIT",(function(){return Ue})),n.d(t,"POPUP_UNMUTE_REQUEST",(function(){return Fe})),n.d(t,"POPUP_ADMIN_PIN_UNMUTE_REQUEST",(function(){return We})),n.d(t,"POPUP_TRANSFER_ADMIN_RIGHTS",(function(){return He})),n.d(t,"HANGUP_TYPE_BUSY",(function(){return Ke})),n.d(t,"HANGUP_TYPE_CALLEE_IS_OFFLINE",(function(){return Ve})),n.d(t,"HANGUP_TYPE_CALLER_IS_BLOCKED",(function(){return qe})),n.d(t,"HANGUP_TYPE_CANCELED",(function(){return Ge})),n.d(t,"HANGUP_TYPE_EXTERNAL_API_ERROR",(function(){return ze})),n.d(t,"HANGUP_TYPE_FAILED",(function(){return Ye})),n.d(t,"HANGUP_TYPE_HUNGUP",(function(){return $e})),n.d(t,"HANGUP_TYPE_MISSED",(function(){return Xe})),n.d(t,"HANGUP_TYPE_NOT_FRIENDS",(function(){return Qe})),n.d(t,"HANGUP_TYPE_OLD_VERSION",(function(){return Je})),n.d(t,"HANGUP_TYPE_REJECTED",(function(){return Ze})),n.d(t,"HANGUP_TYPE_REMOVED",(function(){return et})),n.d(t,"HANGUP_TYPE_SERVICE_DISABLED",(function(){return tt})),n.d(t,"HANGUP_TYPE_UNKNOWN_ERROR",(function(){return nt})),n.d(t,"HANGUP_TYPE_UNSUPPORTED",(function(){return rt})),n.d(t,"FLAG_OUTBOUND",(function(){return ot})),n.d(t,"FLAG_DELETED",(function(){return it})),n.d(t,"FLAG_SPAM",(function(){return at})),n.d(t,"INCOMING_CALL",(function(){return st})),n.d(t,"ADD_MESSAGE",(function(){return ct})),n.d(t,"CONVERSATION_UPDATED",(function(){return ut})),n.d(t,"MAIL_CHAT_UPDATE_TYPE_CALL_IN_PROGRESS_CHANGED",(function(){return lt})),n.d(t,"READ_INBOUND",(function(){return dt})),n.d(t,"SET_FLAGS",(function(){return _t})),n.d(t,"EDIT_MESSAGE",(function(){return pt})),n.d(t,"REPLACE_MESSAGE",(function(){return ht})),n.d(t,"DELETE_DIALOG",(function(){return ft}));var r,o,i,a,s=n("o4aG"),c=n("tEnI");n.d(t,"CallStatReachedType",(function(){return c.CallStatReachedType})),n.d(t,"CallStatResult",(function(){return c.CallStatResult})),n.d(t,"CallStatFailReason",(function(){return c.CallStatFailReason})),n.d(t,"CallStatSource",(function(){return c.CallStatSource})),n.d(t,"CallActionEventType",(function(){return c.CallActionEventType})),n.d(t,"CallStatMuteType",(function(){return c.CallStatMuteType})),function(e){e.CREATOR="CREATOR",e.ADMIN="ADMIN"}(r||(r={})),function(e){e.AUDIO="AUDIO",e.VIDEO="VIDEO"}(o||(o={})),function(e){e.NEURAL="NEURAL",e.SIMPLE="SIMPLE",e.NONE="NONE"}(i||(i={})),function(e){e.SD="SD",e.HD="HD",e.FHD="FHD"}(a||(a={}));var u,l,d,_,p,h,f,m,g,v,b="calls_video_resolution";!function(e){e[e.SD=360]="SD",e[e.HD=720]="HD",e[e.FHD=1080]="FHD"}(u||(u={})),function(e){e[e.SD=640]="SD",e[e.HD=1280]="HD",e[e.FHD=1920]="FHD"}(l||(l={})),function(e){e[e.SINGLE=0]="SINGLE",e[e.ALL=1]="ALL"}(d||(d={})),function(e){e[e.DENY=0]="DENY",e[e.ONCE=1]="ONCE",e[e.ALLOW=1/0]="ALLOW"}(_||(_={})),function(e){e[e.DECLINE=0]="DECLINE",e[e.PROCESS=1]="PROCESS",e[e.FATAL=2]="FATAL"}(p||(p={})),function(e){e.ALREADY_IN_CALL="already_in_call"}(h||(h={})),function(e){e.MIC_CAMERA_PERMISSION="mic_camera",e.CAMERA_PERMISSION="camera",e.MIC_PERMISSION="mic",e.CAMERA_ACCESS="cameralock",e.MIC_ACCESS="miclock",e.MIC_NOT_FOUND="nomic",e.SCREEN_PERMISSION="screenpermission",e.SCREEN_ACCESS="screenlock"}(f||(f={})),function(e){e.AUTH="auth"}(m||(m={})),function(e){e[e.HEADER=0]="HEADER",e[e.CALL_ALL_IN_CHAT=1]="CALL_ALL_IN_CHAT",e[e.MEMBERS_MORE=2]="MEMBERS_MORE",e[e.FRIENDS_MORE=3]="FRIENDS_MORE"}(g||(g={})),function(e){e[e.READY=0]="READY",e[e.CALL=1]="CALL",e[e.INCOMING=2]="INCOMING",e[e.JOIN=3]="JOIN",e[e.ERROR=4]="ERROR"}(v||(v={}));var y,E,w,O,C,T,S="load_peer",D="change_mode",P="call_state",k="remove_user",A="time_start",I="local_time_start",x="hangup",j="set_chat_info",M="group_call_setup",L="toggle_popup",R="update_hash",B="change_ui_mode",N="set_orator",U="toggle_orator_mode",F="toggle_participants_aside",W="set_pinned_participant",H="set_admin_pinned_participant",K="set_screen_sharing_pinned_participant",V="management",q="call_notification",G="join",z="error",Y="change_participant_state",$="change_participant_roles",X="change_participant_permissions",Q="set_screen_sharer",J="set_friends",Z="set_speakers",ee="update_participants_batch",te="set_unread_count",ne="show_caution_box",re="show_loader",oe="set_tooltip",ie="manual_add_participants",ae="set_visible_participants",se="set_translation",ce="set_future_translation_data",ue="update_anon_token",le="toggle_participants_management",de="toggle_participants_kick",_e="toggle_unmute_request",pe="toggle_admin_assignment",he="set_noise_cancellation",fe="change_local_video_resolution",me="set_conversation_options",ge="set_privacy_settings";!function(e){e.AUDIO="audio",e.VIDEO="video"}(y||(y={})),function(e){e.DEFAULT="default",e.COLLAPSED="collapsed",e.FULLSCREEN="fullscreen"}(E||(E={})),function(e){e.WAITING="WAITING",e.CONNECTING="CONNECTING",e.CONNECTED="CONNECTED",e.RECONNECT="RECONNECT",e.ERROR="ERROR",e.HANGUP="HANGUP",e.PERMISSIONS="PERMISSIONS"}(w||(w={})),function(e){e.SPEAKING_ON_MUTE="SPEAKING_ON_MUTE",e.RAISED_HAND="RAISED_HAND",e.SCREEN_SHARING_STARTED="SCREEN_SHARING_STARTED",e.BAD_NETWORK_CONNECTION="BAD_NETWORK_CONNECTION",e.BAD_NETWORK_CONNECTION_DISABLE_CAMERA="BAD_NETWORK_CONNECTION_DISABLE_CAMERA",e.ADMIN_MUTE="ADMIN_MUTE",e.ADMIN_MUTE_PERMANENT="ADMIN_MUTE_PERMANENT",e.ADMIN_ROLE_GRANTED="ADMIN_ROLE_GRANTED",e.USER_GRANTED_WITH_ADMIN_ROLE="USER_GRANTED_WITH_ADMIN_ROLE",e.PINNED_BY_ADMIN="PINNED_BY_ADMIN",e.USER_PINNED_BY_ADMIN="USER_PINNED_BY_ADMIN"}(O||(O={})),function(e){e.LOWERED="0",e.RAISED="1"}(C||(C={})),function(e){e.NETWORK="network_error",e.API="api_error"}(T||(T={}));var ve=5e3,be=.25,ye="https://vk.com/images/camera_400.png",Ee=3,we=2,Oe=-1,Ce=-2,Te=2,Se=1,De=8,Pe=9,ke=10,Ae=923,Ie=928,xe=948,je=960,Me="settings",Le="translation",Re="translation_start_countdown",Be="translation_stop",Ne="translation_stop_share",Ue="exit",Fe="unmute_request",We="admin_pin_unmute_request",He="transfer_admin_rights",Ke=s.HangupType.BUSY,Ve=s.HangupType.CALLEE_IS_OFFLINE,qe=s.HangupType.CALLER_IS_BLOCKED,Ge=s.HangupType.CANCELED,ze=s.HangupType.EXTERNAL_API_ERROR,Ye=s.HangupType.FAILED,$e=s.HangupType.HUNGUP,Xe=s.HangupType.MISSED,Qe=s.HangupType.NOT_FRIENDS,Je=s.HangupType.OLD_VERSION,Ze=s.HangupType.REJECTED,et=s.HangupType.REMOVED,tt=s.HangupType.SERVICE_DISABLED,nt=s.HangupType.UNKNOWN_ERROR,rt=s.HangupType.UNSUPPORTED,ot=2,it=128,at=64,st="incoming_call",ct="event_add_message",ut="event_chat_updated",lt=19,dt="event_read_inbound",_t="event_set_flags",pt="event_edit_message",ht="event_replace_message",ft="event_delete_dialog"},ioFf:function(e,t,n){"use strict";var r=n("dyZX"),o=n("aagx"),i=n("nh4g"),a=n("XKFU"),s=n("KroJ"),c=n("Z6vF").KEY,u=n("eeVq"),l=n("VTer"),d=n("fyDq"),_=n("ylqs"),p=n("K0xU"),h=n("N8g3"),f=n("OnI7"),m=n("1MBn"),g=n("EWmC"),v=n("y3w9"),b=n("0/R4"),y=n("S/j/"),E=n("aCFj"),w=n("apmT"),O=n("RjD/"),C=n("Kuth"),T=n("e7yV"),S=n("EemH"),D=n("JiEa"),P=n("hswa"),k=n("DVgA"),A=S.f,I=P.f,x=T.f,j=r.Symbol,M=r.JSON,L=M&&M.stringify,R=p("_hidden"),B=p("toPrimitive"),N={}.propertyIsEnumerable,U=l("symbol-registry"),F=l("symbols"),W=l("op-symbols"),H=Object.prototype,K="function"==typeof j&&!!D.f,V=r.QObject,q=!V||!V.prototype||!V.prototype.findChild,G=i&&u((function(){return 7!=C(I({},"a",{get:function(){return I(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=A(H,t);r&&delete H[t],I(e,t,n),r&&e!==H&&I(H,t,r)}:I,z=function(e){var t=F[e]=C(j.prototype);return t._k=e,t},Y=K&&"symbol"==typeof j.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof j},$=function(e,t,n){return e===H&&$(W,t,n),v(e),t=w(t,!0),v(n),o(F,t)?(n.enumerable?(o(e,R)&&e[R][t]&&(e[R][t]=!1),n=C(n,{enumerable:O(0,!1)})):(o(e,R)||I(e,R,O(1,{})),e[R][t]=!0),G(e,t,n)):I(e,t,n)},X=function(e,t){v(e);for(var n,r=m(t=E(t)),o=0,i=r.length;i>o;)$(e,n=r[o++],t[n]);return e},Q=function(e){var t=N.call(this,e=w(e,!0));return!(this===H&&o(F,e)&&!o(W,e))&&(!(t||!o(this,e)||!o(F,e)||o(this,R)&&this[R][e])||t)},J=function(e,t){if(e=E(e),t=w(t,!0),e!==H||!o(F,t)||o(W,t)){var n=A(e,t);return!n||!o(F,t)||o(e,R)&&e[R][t]||(n.enumerable=!0),n}},Z=function(e){for(var t,n=x(E(e)),r=[],i=0;n.length>i;)o(F,t=n[i++])||t==R||t==c||r.push(t);return r},ee=function(e){for(var t,n=e===H,r=x(n?W:E(e)),i=[],a=0;r.length>a;)!o(F,t=r[a++])||n&&!o(H,t)||i.push(F[t]);return i};K||(s((j=function(){if(this instanceof j)throw TypeError("Symbol is not a constructor!");var e=_(arguments.length>0?arguments[0]:void 0),t=function(n){this===H&&t.call(W,n),o(this,R)&&o(this[R],e)&&(this[R][e]=!1),G(this,e,O(1,n))};return i&&q&&G(H,e,{configurable:!0,set:t}),z(e)}).prototype,"toString",(function(){return this._k})),S.f=J,P.f=$,n("kJMx").f=T.f=Z,n("UqcF").f=Q,D.f=ee,i&&!n("LQAc")&&s(H,"propertyIsEnumerable",Q,!0),h.f=function(e){return z(p(e))}),a(a.G+a.W+a.F*!K,{Symbol:j});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)p(te[ne++]);for(var re=k(p.store),oe=0;re.length>oe;)f(re[oe++]);a(a.S+a.F*!K,"Symbol",{for:function(e){return o(U,e+="")?U[e]:U[e]=j(e)},keyFor:function(e){if(!Y(e))throw TypeError(e+" is not a symbol!");for(var t in U)if(U[t]===e)return t},useSetter:function(){q=!0},useSimple:function(){q=!1}}),a(a.S+a.F*!K,"Object",{create:function(e,t){return void 0===t?C(e):X(C(e),t)},defineProperty:$,defineProperties:X,getOwnPropertyDescriptor:J,getOwnPropertyNames:Z,getOwnPropertySymbols:ee});var ie=u((function(){D.f(1)}));a(a.S+a.F*ie,"Object",{getOwnPropertySymbols:function(e){return D.f(y(e))}}),M&&a(a.S+a.F*(!K||u((function(){var e=j();return"[null]"!=L([e])||"{}"!=L({a:e})||"{}"!=L(Object(e))}))),"JSON",{stringify:function(e){for(var t,n,r=[e],o=1;arguments.length>o;)r.push(arguments[o++]);if(n=t=r[1],(b(t)||void 0!==e)&&!Y(e))return g(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!Y(t))return t}),r[1]=t,L.apply(M,r)}}),j.prototype[B]||n("Mukb")(j.prototype,B,j.prototype.valueOf),d(j,"Symbol"),d(Math,"Math",!0),d(r.JSON,"JSON",!0)},jE6c:function(e,t,n){"use strict";n.r(t),n.d(t,"rand",(function(){return o})),n.d(t,"replaceEntities",(function(){return g})),n.d(t,"isArray",(function(){return u})),n.d(t,"isEmpty",(function(){return d})),n.d(t,"isFunction",(function(){return a})),n.d(t,"isFormData",(function(){return s})),n.d(t,"isHttpHref",(function(){return O})),n.d(t,"isNumeric",(function(){return _})),n.d(t,"isObject",(function(){return l})),n.d(t,"isString",(function(){return c})),n.d(t,"isUndefined",(function(){return i})),n.d(t,"irand",(function(){return E})),n.d(t,"escapeAttr",(function(){return f})),n.d(t,"escapeRE",(function(){return p})),n.d(t,"escapeStr",(function(){return v})),n.d(t,"each",(function(){return S})),n.d(t,"htsc",(function(){return h})),n.d(t,"copy",(function(){return D})),n.d(t,"vkNow",(function(){return C})),n.d(t,"locBase",(function(){return r})),n.d(t,"unescapeAttr",(function(){return m})),n.d(t,"utf2win",(function(){return w})),n.d(t,"srand",(function(){return y})),n.d(t,"stripTags",(function(){return b})),n.d(t,"defaults",(function(){return P})),n.d(t,"intval",(function(){return T})),n.d(t,"vkImage",(function(){return k})),n.d(t,"isElement",(function(){return A}));n("91GP"),n("KKXr"),n("a1Th"),n("Btvt"),n("pIFo");var r=()=>location.toString().replace(/#.+$/,""),o=(e,t)=>Math.random()*(t-e+1)+e,i=e=>void 0===e,a=e=>e&&"[object Function]"===Object.prototype.toString.call(e),s=e=>e&&"[object FormData]"===Object.prototype.toString.call(e),c=e=>"string"==typeof e,u=e=>"[object Array]"===Object.prototype.toString.call(e),l=e=>"[object Object]"===Object.prototype.toString.call(e),d=e=>{if(!l(e))return!1;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},_=e=>!isNaN(parseFloat(e))&&isFinite(e)&&!Array.isArray(e),p=e=>e?e.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1"):"",h=e=>e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/\'/g,"&#39;").replace(/%/g,"&#37;"),f=e=>e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/\'/g,"&#39;"),m=e=>e.replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&#39;/g,"'"),g=e=>ce("textarea",{innerHTML:(e||"").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}).value,v=e=>e.replace(/\'/g,"\\'"),b=e=>e.replace(/<[^>]+>/g,""),y=()=>Math.random().toString(36).substr(2),E=(e,t)=>Math.floor(o(e,t)),w=e=>unescape(encodeURIComponent(e));function O(e){var t=(e+"").split(":"),n=t[1]&&t[0]?t[0]+":":location.protocol;return"http:"===n||"https:"===n}var C=()=>+new Date;function T(e){return!0===e?1:parseInt(e)||0}function S(e,t){if(!e)return e;if(l(e)||void 0===e.length){for(var n in e)if(e.hasOwnProperty(n)&&!1===t.call(e[n],n,e[n]))break}else for(var r=0,o=e.length;r<o;r++){var i=e[r];if(!1===t.call(i,r,i))break}return e}function D(e){return u(e)?e.concat([]):l(e)?extend({},e):e}var P=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Object.assign({},e,...n.reverse(),e)},k=()=>window.Image?new Image:ce("img"),A=e=>"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName},jSWr:function(e,t,n){"use strict";n.r(t),n.d(t,"HighlightHint",(function(){return u}));var r,o=n("kefJ"),i=n("Rcri"),a=n("12ku"),s=n("lXE5"),c=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=function(e){function t(t,n){var r=e.call(this,o.HintType.Highlight,t)||this,i={highlight:!0,width:280,offset:[0,-17],scrollOffset:40,side:"bottom"};return t.unskipable?i.ttOnHide=function(){}:i.onBGClick=function(){return r.hide()},r.highlight=new a.default(n,r.generateContent(),i),Object(s.disableBodyScroll)(),r}return c(t,e),t.prototype.show=function(){this.highlight.showTT()},t.prototype.hide=function(){this.highlight.hideTT(),Object(s.enableBodyScroll)(),e.prototype.hide.call(this)},t}(i.Hint)},jXbq:function(e,t,n){"use strict";n.r(t),n.d(t,"UnauthActionBox",(function(){return d}));var r=n("FbVm"),o=n("r0fY"),i=n("OrGp"),a=n("EasH"),s=n("xt6h"),c=n("KkBR"),u=n("LlZA"),l=function(){return(l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};var d={show:function(e,t){var n=e.withForm,d=new a.MessageBox({title:"",width:n?796:450,hideButtons:!0,containerClass:Object(s.classNames)("UnauthActionBoxContainer",{"UnauthActionBoxContainer--form":n}),onHide:function(){t&&t()}});d.content(e.html),d.changed=!0;var _=d.bodyNode.querySelector(".UnauthActionBox__close"),p=d.bodyNode.querySelector(".UnauthActionBox__join"),h=d.bodyNode.querySelector(".UnauthActionBox__login"),f=function(t){r.marketingTransitionItemStat.logEvent(o.MarketingTransitionItemCampaignType.UNAUTH_ACTION_BOX,t,e.action,window.location.href)};null==_||_.addEventListener("click",(function(){f(o.MarketingTransitionItemEventType.CLOSE),d.hide()})),null==p||p.addEventListener("click",(function(){f(o.MarketingTransitionItemEventType.CLICK_SIGN_UP),Object(i.showJoinBox)()})),null==h||h.addEventListener("click",(function(){f(o.MarketingTransitionItemEventType.CLICK_SIGN_IN),Object(i.showQuickLoginBox)()})),f(o.MarketingTransitionItemEventType.OPEN),d.show();var m=d.bodyNode.querySelector(".LoginCombinedBox"),g=d.bodyNode.querySelector(".JoinForm"),v=function(e){e.preventDefault(),f(o.MarketingTransitionItemEventType.CLOSE),d.hide()};return d.bodyNode.querySelectorAll(".LoginBox").forEach((function(e){Object(c.initLoginBoxForm)(e)})),d.bodyNode.querySelectorAll(".LoginBox__notNow").forEach((function(e){e.addEventListener("click",v)})),d.bodyNode.querySelectorAll(".JoinForm__signIn, .LoginRecentBox__alternative").forEach((function(e){e.addEventListener("click",(function(){f(o.MarketingTransitionItemEventType.CLICK_SIGN_IN)}))})),d.bodyNode.querySelectorAll(".LoginBox__buttonSignUp").forEach((function(e){e.addEventListener("click",(function(){f(o.MarketingTransitionItemEventType.CLICK_SIGN_UP)}))})),m?Object(c.initLoginCombinedBoxForm)(m,e.formOptions):g&&Object(u.initJoinForm)(g,l(l({},e.formOptions),{onSignInClick:function(){Object(i.showQuickLoginBox)()},onNotNowClick:v,inBox:!0})),requestAnimationFrame((function(){return window.tooltips&&window.tooltips.hideAll()})),d}}},jmhT:function(e,t,n){"use strict";n.r(t),n.d(t,"BoxModal",(function(){return u}));var r,o=n("q1tI"),i=n.n(o),a=n("ZxpX"),s=n("GSQL"),c=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.appearance,r=e.title,o=e.actionButtons,c=e.onClose,u=e.children,l=e.hint,d=e.hasScroll;return i.a.createElement("div",{className:"BoxModal"},i.a.createElement("div",{className:Object(a.classNames)("Modal","Modal--"+n,t)},i.a.createElement(s.default.Header,{title:r,onClose:c,appearance:n}),Boolean(u)&&i.a.createElement(s.default.Body,{hasScroll:d},u),Boolean(o)&&i.a.createElement(s.default.Footer,{actionButtons:o,hint:l})))},t.defaultProps={appearance:"white",hasScroll:!0},t}(i.a.Component)},k3PD:function(e,t,n){"use strict";function r(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}n.r(t),n.d(t,"isElementInViewport",(function(){return r}))},k487:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var r=n("zxIV"),o=n("t7n3"),i=n("Egk5"),a=n("lXE5"),s=n("El3O");class c{constructor(e,t){if(this.constructor!==c)throw new Error("ElementTooltip was called without 'new' operator");if(!(e=Object(r.ge)(e))||!e.nodeType)throw new Error("First argument not a DOM element");if(Object(r.data)(e,"ett"))return Object(r.data)(e,"ett");if(this._opts=Object(o.extend)({delay:100,offset:[0,0],type:c.TYPE_VERTICAL,id:"",cls:"",width:null,appendToParent:!1,autoAdjustToViewport:!0,autoShow:!0,autoHide:!1,noHideOnClick:!1,arrowSize:"normal",customShow:!1,align:c.ALIGN_CENTER,withCloseButton:!1},t),this._opts.customShow&&(this._opts.autoShow=!1),this._opts.defaultSide||(this._opts.defaultSide=this._opts.type===c.TYPE_VERTICAL?"top":"left"),this._opts.cls+=" eltt_arrow_size_"+this._opts.arrowSize,this._opts.cls+=" eltt_align_"+this._opts.align,this._opts.noBorder&&(this._opts.cls+=" eltt_noborder"),this._opts.setPos&&!this._opts.forceSide)throw new Error("forceSide parameter should be set if you use setPos");if(this._appendToEl=this._opts.appendTo?this._opts.appendTo:this._opts.appendToParent?Object(r.domClosestPositioned)(e,{noOverflow:!0}):e,this._arrowSize={mini:c.ARROW_SIZE_MINI,normal:c.ARROW_SIZE_NORMAL,big:c.ARROW_SIZE_BIG}[this._opts.arrowSize],this._opts.forceSide){var n=c.getType(this._opts.forceSide);if(void 0===n)throw new Error("ElementTooltip: invalid 'forceSide' option provided: ",this._opts.forceSide);0,this._opts.type=n}this._opts.type===c.TYPE_HORIZONTAL&&void 0===(null==t?void 0:t.autoAdjustToViewport)&&(this._opts.autoAdjustToViewport=!1),this._el=e,Object(r.data)(this._el,"ett",this),this._initEvents(e),this._clearTimeouts(),this._isShown=!1}_initEvents(e){this._opts.autoShow&&(this._el_me_event=this._onMouseEnter.bind(this),Object(i.addEvent)(e,"mouseenter",this._el_me_event)),(this._opts.autoShow||this._opts.autoHide)&&(this._el_ml_event=this._onMouseLeave.bind(this),Object(i.addEvent)(e,"mouseleave",this._el_ml_event)),this._opts.autoShow||this._opts.customShow||(this._el_c_event=()=>{this._isShown&&this._opts.noHideOnClick||this.toggle(!this._isShown)},Object(i.addEvent)(e,"click",this._el_c_event))}_onMouseEnter(e){clearTimeout(this._hto),this._hto=!1,!this._isShown&&this._opts.autoShow&&(clearTimeout(this._reTimeout),this._reTimeout=!1,clearTimeout(this._sto),this._sto=setTimeout(this.show.bind(this),this._opts.delay))}_onMouseLeave(e){this._clearTimeouts(),this._hto=setTimeout(this._hide.bind(this),200)}_onMouseWindowClick(e){if(!this._opts.noAutoHideOnWindowClick){for(var t=e.target;t&&t!==this._ttel&&t!==document.body&&t!==this._el;)t=Object(r.domPN)(t);if(!Object(r.hasClass)(e.target,"_ap_layer__close"))return t&&t!==document.body?void 0:Object(o.isFunction)(this._opts.onWindowClick)?(this._opts.onWindowClick(),Object(i.cancelEvent)(e)):(this.hide(!0),Object(i.cancelEvent)(e))}}destroy(){var e;this._el_me_event&&Object(i.removeEvent)(this._el,"mouseenter",this._el_me_event),this._el_ml_event&&Object(i.removeEvent)(this._el,"mouseleave",this._el_ml_event),this._el_c_event&&Object(i.removeEvent)(this._el,"click",this._el_c_event),this._clearTimeouts(),Object(r.removeData)(this._el,"ett"),Object(r.re)(this._ttel),this._ev_wclick&&Object(i.removeEvent)(document,"mousedown",this._ev_wclick),this._ttel&&(e=Object(r.geByClass1)("_eltt_content",this._ttel)),this._opts.onDestroy&&this._opts.onDestroy(e)}hide(e){this._hide(e)}_onTooltipMouseEnter(e){this._clearTimeouts()}_onTooltipMouseLeave(e){this._onMouseLeave()}build(){if(!this._ttel){var e=this._opts.withCloseButton?"eltt_with_close_button":"";this._ttel=Object(r.se)(`\n        <div class="eltt ${this._opts.cls||""} ${e}" id="${this._opts.id}">\n          <div class="eltt_arrow_back _eltt_arrow_back">\n            <div class="eltt_arrow"></div>\n          </div>\n          <div class="eltt_content _eltt_content"></div>\n        </div>`),this._ttArrowEl=Object(r.geByClass1)("_eltt_arrow_back",this._ttel);var t=Object(r.geByClass1)("_eltt_content",this._ttel);if(this._opts.content&&(Object(o.isString)(this._opts.content)?t.innerHTML=this._opts.content:t.appendChild(this._opts.content)),this._opts.withCloseButton){this._ttel.insertAdjacentHTML("beforeend",'\n          <div class="eltt_close_button"></div>\n        '),this._closeButton=this._ttel.lastElementChild;var n=()=>{this.hide(),this._opts.onCloseButtonClick&&this._opts.onCloseButtonClick()};this._closeButton.addEventListener("click",n),cur.destroy.push(()=>this._closeButton.removeEventListener("click",n))}this._appendToEl&&this._appendToEl.appendChild(this._ttel)}}show(){if(this._isShown)this.updatePosition();else{if(this._clearTimeouts(),this._ttel||(this.build(),(this._opts.autoShow||this._opts.autoHide)&&(this._ev_ttenter=this._onTooltipMouseEnter.bind(this),this._ev_ttleave=this._onTooltipMouseLeave.bind(this),Object(i.addEvent)(this._ttel,"mouseenter",this._ev_ttenter),Object(i.addEvent)(this._ttel,"mouseleave",this._ev_ttleave))),this._opts.width){var e=Object(o.isFunction)(this._opts.width)?this._opts.width.call(this):this._opts.width;Object(r.setStyle)(this._ttel,"width",e)}Object(r.show)(this._ttel);var t=Object(r.geByClass1)("_eltt_content",this._ttel);this._opts.onFirstTimeShow&&!this._firstTimeShown&&this._opts.onFirstTimeShow.call(this,t,this._ttel),this._opts.onShow&&this._opts.onShow(t,!this._firstTimeShown),this._firstTimeShown=!0,this.updatePosition(),this._isShown=!0,this._visTO=setTimeout(r.addClass.pbind(this._ttel,"eltt_vis"),10),this._opts.elClassWhenShown&&Object(r.addClass)(this._el,this._opts.elClassWhenShown),this._ev_wclick&&Object(i.removeEvent)(document,"mousedown",this._ev_wclick),this._ev_wclick=this._onMouseWindowClick.bind(this),Object(i.addEvent)(document,"mousedown",this._ev_wclick)}}static getType(e){switch(e){case"top":case"bottom":return c.TYPE_VERTICAL;case"right":case"left":return c.TYPE_HORIZONTAL}}getOptions(){return this._opts}updatePosition(){var e=this._opts.forceSide,t=!!this._opts.getTargetBoundingBox&&this._opts.getTargetBoundingBox(this);if(!t){var n=Object(r.getXY)(this._el),i=Object(r.getSize)(this._el);t={left:n[0],top:n[1],width:i[0],height:i[1]}}var u,l=this._opts.getWrapEl?this._opts.getWrapEl(this):Object(r.gpeByClass)("audio_layer_container",this._ttel),d=l||Object(r.domClosestOverflowHidden)(this._ttel),_=d!==bodyNode?Object(r.getXY)(d):[Object(a.scrollGetX)(),Object(a.scrollGetY)()+Object(s.getPageHeaderHeight)()],p=d!==bodyNode?Object(r.getSize)(d):[window.innerWidth,window.innerHeight],h=Object(r.getSize)(this._ttel),f=this._arrowSize,m=this._opts.noBorder?0:1,g=Object(o.isFunction)(this._opts.offset)?this._opts.offset():this._opts.offset,v=(e,n)=>{var o,i={},a=[vk.rtl?"marginRight":"marginLeft","marginTop"].indexOf(e);o=this._opts.align===(vk.rtl?c.ALIGN_LEFT:c.ALIGN_RIGHT)?h[a]-Math.max(m+f+(n||0),Math.min(h[a],t[a?"height":"width"])/2):this._opts.align===(vk.rtl?c.ALIGN_RIGHT:c.ALIGN_LEFT)?Math.max(m+f+(n||0),Math.min(h[a],t[a?"height":"width"])/2):h[a]/2,i[e]=Math.floor(o)-m-f-(n||0),Object(r.setStyle)(this._ttArrowEl,i)};if(this._opts.setPos)u=this._opts.setPos(this)||{},c.getType(e)===c.TYPE_VERTICAL?void 0!==u.arrowPosition?Object(r.setStyle)(this._ttArrowEl,{marginLeft:u.arrowPosition}):vk.rtl?v("marginRight"):v("marginLeft"):void 0!==u.arrowPosition?Object(r.setStyle)(this._ttArrowEl,{marginTop:u.arrowPosition}):v("marginTop");else{if(!e&&this._prevSide&&this._opts.preventSideChange)e=this._prevSide;else if(!e)if(this._opts.type===c.TYPE_VERTICAL){var b=Object(r.hasClass)(bodyNode,"body_im")?this._opts.bottomGap||60:this._opts.bottomGap||0,y=t.top-_[1]>h[1]+f-g[1],E=Object(a.scrollGetY)()+p[1]-(t.top+t.height+f)-b>h[1];e="top"===this._opts.defaultSide?y?"top":"bottom":E?"bottom":"top"}else e=t.left-_[0]<h[0]?"right":"left";var w,O,C,T,S,D,P=Object(r.getXY)(this._appendToEl),k=[t.left-P[0],t.top-P[1]],A=g[0]+k[0];this._opts.centerShift?(A+=this._opts.centerShift||0,w=this._opts.centerShift):this._opts.rightShift&&(A+=w=-(h[0]/2-this._opts.rightShift)),this._prevSide=e;var I=!this._opts.autoAdjustToViewport;switch(this._opts.align===(vk.rtl?c.ALIGN_LEFT:c.ALIGN_RIGHT)?(O=t.width-h[0],C=t.height-h[1]):this._opts.align===(vk.rtl?c.ALIGN_RIGHT:c.ALIGN_LEFT)?(O=0,C=0):(O=-h[0]/2+t.width/2,C=t.height/2-h[1]/2),e){case"bottom":S=O+A,D=t.height+f-g[1]+k[1],w||I||((T=O+t.left+g[0]+h[0]+20-(_[0]+p[0]))<0&&(T=0),S-=T,w=-T),u={left:S,top:D};break;case"top":S=O+A,D=-h[1]-f+g[1]+k[1],w||I||((T=O+t.left+g[0]+h[0]+20-(_[0]+p[0]))<0&&(T=0),S-=T,w=-T),u={left:S,top:D};break;case"right":S=t.width+f+A,D=C+g[1]+k[1],w||I||((T=C+t.top+g[1]-(_[1]+20))>0&&(T=0),D-=T,w=-T),u={left:S,top:D};break;case"left":S=-h[0]-f+A,D=C+g[1]+k[1],w||I||((T=C+t.top+g[1]-(_[1]+20))>0&&(T=0),D-=T,w=-T),u={left:S,top:D}}this._opts.type===c.TYPE_VERTICAL?vk.rtl?v("marginRight",w):v("marginLeft",w):v("marginTop",w)}Object(o.each)(["top","bottom","left","right"],function(t,n){e!==n&&Object(r.removeClass)(this._ttel,"eltt_"+n)}.bind(this)),Object(r.addClass)(this._ttel,"eltt_"+e),Object(r.setStyle)(this._ttel,u)}_hide(e){if(!this.tempPreventHide){if(this._isShown=!1,this._clearTimeouts(),this._reTimeout=setTimeout(function(){Object(r.hide)(this._ttel),this._opts.elClassWhenShown&&Object(r.removeClass)(this._el,this._opts.elClassWhenShown),this._opts.onHide&&this._opts.onHide(this._ttel,!!e)}.bind(this),c.FADE_SPEED),this._opts.onBeforeHide)try{this._opts.onBeforeHide(this._ttel,!!e)}catch(e){}Object(r.removeClass)(this._ttel,"eltt_vis"),this._ev_wclick&&Object(i.removeEvent)(document,"mousedown",this._ev_wclick)}}isShown(){return this._isShown}toggle(){this.isShown()?this.hide():this.show()}_clearTimeouts(){this._visTO&&clearTimeout(this._visTO),this._visTO=!1,this._sto&&clearTimeout(this._sto),this._sto=!1,this._hto&&clearTimeout(this._hto),this._hto=!1,this._reTimeout&&clearTimeout(this._reTimeout),this._reTimeout=!1}getContent(){return Object(r.geByClass1)("_eltt_content",this._ttel)}}c.TYPE_VERTICAL=0,c.TYPE_HORIZONTAL=1,c.FADE_SPEED=100,c.ARROW_SIZE_MINI=9,c.ARROW_SIZE_NORMAL=8,c.ARROW_SIZE_BIG=16,c.ALIGN_LEFT="left",c.ALIGN_CENTER="center",c.ALIGN_RIGHT="right"},k76L:function(e,t,n){var r=n("leix"),o=n("8Lyy");t.write=o,t.parse=r.parse,t.parseFmtpConfig=r.parseFmtpConfig,t.parseParams=r.parseParams,t.parsePayloads=r.parsePayloads,t.parseRemoteCandidates=r.parseRemoteCandidates,t.parseImageAttributes=r.parseImageAttributes,t.parseSimulcastStreamList=r.parseSimulcastStreamList},kHqu:function(e,t,n){"use strict";n.r(t),n.d(t,"initNavCounters",(function(){return S})),n.d(t,"updateHeaderStyles",(function(){return D})),n.d(t,"updateLeftMenu",(function(){return P})),n.d(t,"handlePageCount",(function(){return A})),n.d(t,"handlePageParams",(function(){return I})),n.d(t,"reloadCheckFlood",(function(){return x})),n.d(t,"globalHistoryDestroy",(function(){return j})),n.d(t,"showBackLink",(function(){return M})),n.d(t,"processDestroy",(function(){return L})),n.d(t,"handlePageView",(function(){return R})),n.d(t,"zNav",(function(){return B}));n("HEwt"),n("rE2o"),n("ioFf"),n("KKXr"),n("SRfc"),n("rGqo"),n("/8Fb"),n("pIFo"),n("a1Th"),n("Btvt");var r=n("zxIV"),o=n("t7n3"),i=n("4+be"),a=n("7jxN"),s=n("XzvV"),c=n("m0N1"),u=n("ryw6"),l=n("v+DW"),d=n("XuKo"),_=n("EasH"),p=n("eQf/"),h=n("kcIO"),f=n("/PiP"),m=n("Ia1d"),g=n("Ieup"),v=n("i6oL"),b=n("aong"),y=n("ZD4m"),E=n("Xrg9");var w=n("821F"),O=n("y/eL");function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function S(){window.vkLastNav=Date.now(),window.vkTabLoaded=Date.now()}function D(e){var t=[Object(r.ge)("dev_top_nav_wrap"),Object(r.ge)("page_header_wrap")];Object(o.each)(t,(function(t,n){n&&Object(r.setStyle)(n,e)}))}function P(e){window.__leftMenu&&window.__leftMenu.handleUpdateRequest(e)}function k(e,t,n){var s="",c="",u='<span class="inl_bl left_count_sign"></span>',l="reqs"===n||n&&n.substr&&"spr"===n.substr(0,3)?5:3,d=Object(r.geByClass1)("left_count_wrap",e),_=Object(r.hasClass)(Object(r.geByClass1)("left_row",e,"a"),"left_nav_over"),p=Object(r.geByClass1)("left_count",e,"span"),h=Object(r.val)(p);t&&((s=t.toString()).length>l&&(c=' title="'+Object(o.stripHTML)(Object(i.langNumeric)(t,"%s",!0))+'"',s=".."+s.substr(s.length-l)),u=`<span class="inl_bl left_count" ${c}>${s}</span>`);var f=function(){Object(r.val)(d,u),(t?r.removeClass:r.addClass)(d,"left_void"),Object(r.setStyle)(d,{opacity:""})};if(h||_)if(s)Object(a.animateCount)(p,s,{str:"auto",onDone:f});else if(_){var m=bodyNode.appendChild(Object(r.se)('<span class="left_count_wrap"><span class="inl_bl left_count_sign"></span></span>')),g=Object(r.getSize)(Object(r.domFC)(m))[0];Object(r.re)(m),h&&"."===h.charAt(0)&&Object(r.val)(p,h.replace("..","")),Object(a.animate)(p,{width:g},100,f)}else Object(a.animate)(d,{opacity:0},100,f);else f(),Object(r.setStyle)(d,{opacity:0}),Object(a.animate)(d,{opacity:1},100)}function A(e,t,n,i){var a,s,c,u=Object(o.intval)(t),l=Math.max(0,u);if(function(e,t,n){void 0===e.counts&&(e.counts={}),e.counts[t]=n}(window.vk,e,u),"ntf"===e)return window.TopNotifier.setCount(l),void window.TopNotifier.createNewEventsBox(l);if("page_menu_group_market"===e)return a="#"+e,s=t,void((c=document.querySelector(a+" .ui_rmenu_count"))&&(c.innerHTML=String(s),s>0?Object(r.removeClass)(c,"unshown"):Object(r.addClass)(c,"unshown")));window.vk.onSetCount&&window.vk.onSetCount(e,t);var d=Object(r.ge)("l_"+e);if(d&&(k(d,l,e),i&&n)){var _=u>0&&i?"?"+i:"";d.firstChild.href="/"+n+_}var p=Object(r.hasClass)(Object(r.domFC)(d),"left_nav_over"),h=u>=0;!h&&p||Object(r.toggle)(d,h),"market_orders"===e&&d&&d.classList.remove("unshown")}function I(e){vk.id=e.id,e.body_class!==bodyNode.className&&(bodyNode.className=e.body_class||""),Object(v.updateSTL)(),P(!0),void 0!==e.pvbig&&(vk.pvbig=e.pvbig),void 0!==e.pvdark&&(vk.pvdark=e.pvdark),cur._level=e.level,vk.id&&vk.id%1e3==1&&setTimeout((function(){window.scrollmarked={},Object(s.statlogsValueEvent)("page_scroll",0,cur.module,"0")}),300),R(e);var t=Object(r.ge)("mvk_footer_lnk");if(t&&(t.firstChild.href=e.mvklnk||"http://m.vk.com/"),vk.nophone=Object(o.intval)(e.nophone),vk.staticheader=Object(o.intval)(e.staticheader),vk.id){var n=Object(r.ge)("left_blocks");n&&(n.innerHTML=e.leftblocks||"")}"leftads"in e&&0!==e.leftads&&window.__adsSet(e.leftads,e.ads_section||"",e.ads_can_show,e.ads_showed);var i=locProtocol+"//"+location.host+"/";e.loc&&("?"===e.loc.charAt(0)?i+=nav.strLoc:i+=e.loc);var a=document.URL===i?"":document.URL;setTimeout(O.updateCounters.pbind(i,a),10);var u=e.counters;if(u.length){var l="",d="";Object(o.intval)(u[9])>0?(l="adsmarket",d="act=overview&status=-1"):Object(o.intval)(u[9])<-1?(u[9]=1,l="ads",d="act=a_comeback_office_redirect"):l="ads?act=office&last=1";var _=Object(r.ge)("l_set"),p=_&&_.nextSibling||!1,h=["fr","ph","vid","msg","nts","gr","vkp","wsh","ap","ads","ntf","fav","doc","apm","mk"],f=["friends","albums"+vk.id,"video","","notes","groups","vkpay","gifts.php?act=wishlist","apps",l,"feed"+(Object(r.ge)("l_nwsf")?"?section=notifications":""),"pages","docs","apps_manage","market"],m=["","act=added","section=tagged","","act=comments","","tab=invitations","","",d,Object(r.ge)("l_nwsf")?"":"section=notifications","","","",""],g=!1;if(e.handlecnts){for(var b=0;b<h.length;b++)A(h[b],u[b],f[b],m[b]);for(var y=p.nextSibling;y;y=y.nextSibling){if(y.tagName&&"li"===y.tagName.toLowerCase()&&Object(r.isVisible)(y)){g=!0;break}if(Object(r.hasClass)(y,"more_div"))break}(g?r.show:r.hide)(p),function(e){if(!Object(o.isObject)(e))return;Object.entries(e).forEach(e=>{var t=C(e,2),n=t[0],r=t[1],i=document.getElementById("l_app"+Object(o.intval)(n));i&&k(i,Object(o.intval)(r))})}(u[17]),setTimeout(c.updSeenAdsInfo,0)}else for(var E=0;E<h.length;E++)vk.counts[h[E]]=u[E]}}function x(e){e=e||{};var t=E.default.get("last_reloaded")||[];t.unshift(Object(o.vkNow)());var n=t.length;return n>5&&(t.splice(5,n-5),n=5),E.default.set("last_reloaded",t),!!(5===n&&t[0]-t[4]<2e4)&&(Object(u.topError)('<b>Reloading error</b>, please check internet connection, <b><a href="/page-777107_43991681">clear your cache</a></b> and restart your browser.<br>If problem remains, please <a href="/support?act=new">report it here</a>.',{dt:15,type:6,msg:"Reload error, from "+(e.from||0)+", forced "+(e.force||0)+", url "+(e.url||"")+", query "+(e.query||"")}),!0)}function j(e){for(var t=0,n=globalHistory.length;t<n;t++)if(globalHistory[t].loc===e){var r=globalHistory.splice(t,1)[0];L(r.cur),r.content.innerHTML="",--t,--n}}function M(e,t,n){if(_tbLink){var i=e;if(e=(e||"").replace(/^\//,""),_tbLink.loc=e,void 0===n&&(n=0,e))for(var a=0,s=globalHistory.length;a<s;a++)if(globalHistory[a].loc===e){n=1;break}if(i){try{_tbLink.style.maxWidth=_tbLink.parentNode.offsetWidth-35+"px"}catch(e){}Object(o.extend)(_tbLink,{href:"/"+e,innerHTML:t,fast:n}),Object(r.show)(_tbLink),window._stlWas=0}else Object(r.hide)(_tbLink);Object(l.updSideTopLink)(1)}}function L(e){if(e._back&&e._back.hide&&e===cur)for(var t in e._back.hide)if(e._back.hide.hasOwnProperty(t))try{e._back.hide[t]()}catch(e){try{console.log(e.stack)}catch(e){}}if(e.destroy&&e.destroy.length)for(var n in e.destroy)if(e.destroy.hasOwnProperty(n))try{e.destroy[n](e)}catch(e){try{console.log(e.stack)}catch(e){}}}function R(e){var t=Object(r.ge)("footer_wrap"),n=Object(r.ge)("page_layout"),i=Object(r.geByClass1)("TopHomeLink"),a=void 0===e.width?vk.width:e.width,s=void 0===e.width_dec?vk.width_dec:e.width_dec,c=void 0===e.width_dec_footer?vk.width_dec_footer:e.width_dec_footer;if(vk.noleftmenu===e.noleftmenu&&vk.nobottommenu===e.nobottommenu&&vk.width===e.width&&vk.width_dec_footer===e.width_dec_footer||(vk.noleftmenu!==e.noleftmenu&&e.noleftmenu&&Object(r.hide)("side_bar"),vk.nobottommenu!==e.nobottommenu&&(e.nobottommenu?Object(r.hide)("bottom_nav"):Object(r.show)("bottom_nav")),e.noleftmenu&&e.nobottommenu?t&&(Object(r.addClass)(t,"simple"),t.style.width="auto"):t&&(Object(r.removeClass)(t,"simple"),t.style.width=a-c+"px")),vk.notopmenu!==e.notopmenu&&(e.notopmenu?Object(r.hide)("quick_search","qsearch_border","top_search","top_invite_link","top_menu_wrap"):Object(r.show)("quick_search","qsearch_border","top_search","top_invite_link","top_menu_wrap")),i&&e.top_home_link_class&&vk.top_home_link_class!==e.top_home_link_class&&(i.className=e.top_home_link_class),n&&(a!==vk.width||s!==vk.width_dec)){Object(y.setGlobalCustomProperty)("--layout-width",a+"px"),Object(r.ge)("page_body").style.width=a-s+"px",Object(r.ge)("ts_wrap")&&Object(r.hasClass)(Object(r.ge)("ts_wrap"),"vk")&&(Object(r.ge)("ts_wrap").style.width=a-191+"px"),setTimeout(l.updSideTopLink.pbind(!0),0),setTimeout(v.updateSTL,0);try{_tbLink.style.maxWidth=_tbLink.parentNode.offsetWidth-35+"px"}catch(e){}}vk.noleftmenu===e.noleftmenu||e.noleftmenu||Object(r.show)("side_bar"),e.to&&Object(r.ge)("quick_login_to")&&Object(r.val)("quick_login_to",e.to),vk.noleftmenu=e.noleftmenu,vk.nobottommenu=e.nobottommenu,vk.top_home_link_class=e.top_home_link_class,vk.notopmenu=e.notopmenu,vk.width=a,vk.width_dec=s,vk.width_dec_footer=c,vk.body_class=e.body_class,vk.staticheader=Object(o.intval)(e.staticheader),vk.no_ads=e.no_ads,vk.ad_preview=e.ad_preview}function B(e,t,n){var i=e.z,a=e.f,s=e.w,c=(i||"").match(/^([a-z_]+)(-?\d+(?:_(?:-)?\d+)?)\/?(.*)/i);if(delete e.z,delete e.f,delete e.w,t||(t={}),Object(o.isEmpty)(e)){if(a&&(Object(b.handleScroll)(a),void 0===i))return!1;if(t.hist)if(i||s){if(layerQueue.back("wiki",s,(c||{})[1],(c||{})[2]))return!1}else if(!1===i&&n.w&&layerQueue.back("wiki",n.w))return!1;if(s){var u="";if(!1===i)layers.fullhide(!!t.hist&&2);else{if(s.match(/^story([0-9\-]+)_(\d+)/))return Object(d.showStory)(s);if(s.match(/^narrative([0-9\-]+)_(\d+)(?:_(\d+))?/)){var l=C(s.match(/^narrative([0-9\-]+)_(\d+)(?:_(\d+))?/),4),v=l[1],y=l[2],E=l[3];return Object(d.showNarrative)(v,y,E,"",{source:"narrative_link"})}if(s.match(/^donut_payment(-\d+)/)){var O=nav.objLoc.source,T=Number(s.match(/^donut_payment(-\d+)/)[1]);return Object(f.showDonutSubscribePopup)(null,null,T,O,"",{type:"subscribe",params:{act:"subscribe_popup"}})}if("stories"===s){if(cur.storyLayer)return cur.storyLayer.doHide(),!1}else n||(n=Object(o.clone)(nav.objLoc)),s&&(n.w=s),a&&(n.f=a),delete n.z,nav.setLoc(n),nav.objLoc.ref&&(u=nav.objLoc.ref,delete nav.objLoc.ref)}return Object(f.showWiki)({w:s},"note_new"===s,!1,{onLoaded:i&&B.pbind({z:i},Object(o.extend)(t,{queue:1})),isZnav:1,customRef:u}),!1}if("giftbox"===i)return!Object(_.showBox)("/al_gifts.php",{act:"get_gift_box",mid:t.id||0,fr:t.is&&t.id!==vk.id?0:1,link:nav.objLoc[0]},{stat:["gifts.css","ui_controls.js","ui_controls.css"],cache:1},window.event);if("validatebox"===i)return!Object(p.validateMobileBox)({closeLink:1,onDone:()=>Object(r.ge)("change_phone_wrap").parentNode.removeChild(Object(r.ge)("change_phone_wrap"))});if("upload_video"===i)return VideoUpload.showBox();if(!1===i||!1===s){var S=!window.wkcur||!wkcur.shown||layers.fullhide!==WkView.hide;!layers.fullhide||!S&&!1!==s||t.asBox||(!t.hist||n.z||n.w||-1!==n[0].indexOf("/")||n[0].match(/^(photo|video)(-?\d+_\d+)$/)||layerQueue.clear(),layers.fullhide(!!t.hist&&2));var D=Object(h.curBox)();return D&&D.wkRaw&&D.hide(),!1}if(i&&c){var P=function(){return delete nav.objLoc.z,nav.setLoc(nav.objLoc),!0};switch(c[1]){case"photo":return Object(f.showPhoto)(c[2],c[3],Object(o.extend)(t,{onFail:P,noHistory:!0})),!1;case"albums":return Object(f.showAlbums)(c[2],Object(o.extend)(t,{onFail:P,noHistory:!0})),!1;case"album":return Object(f.showAlbum)(c[2],Object(o.extend)(t,{onFail:P,noHistory:!0})),!1;case"tag":case"photo_tag":return Object(f.showPhotoTags)(c[2],Object(o.extend)(t,{onFail:P,noHistory:!0})),!1;case"video":case"clip":var k=c[3],A=Object(o.extend)(t,{onFail:P,noLocChange:1,focusPlay:1});if(k){var I=[],x="";if(Object(o.each)(k.split("/"),(function(e,t){0===t.indexOf("pl_")?x=t:I.push(t)})),k=I.join("/"),x){x=x.substr("pl_".length);var j=cur.currentModule?cur.currentModule():cur.module;A=Object(o.extend)(A,{playlistId:x,module:j,addParams:{force_no_repeat:1,show_next:1,playlist_id:x}})}}return"clip"===c[1]&&(A.shortVideo=1),Object(m.showVideo)(c[2],k,A),!1;case"single":return void 0===s&&stManager.add(["single_pv.css",jsc("web/single_pv.js")],Object(r.ge)(i).onclick),!1;case"accept_money":return Object(g.moneyTransferBox)(c[2],c[3]),!1;case"moneysend":var M=w.MoneyTransfer.showMoneyTransferBox({to_id:c[2],from:"public_link"},{},e=>(M.hide(),setTimeout(Object(_.showFastBox)(getLang("global_error"),e).hide,2e3),delete nav.objLoc.z,nav.setLoc(nav.objLoc),!0));return!1;case"audio_playlist":var L=C(c[2].split("_"),2),R=L[0],N=L[1],U=t.context||"";return AudioUtils.showAudioPlaylist(R,N,c[3],U,void 0,t.onDone),!1;case"article_edit":return f.openArticleEditor.apply(null,c[2].split("_")),!1;case"podcast":return stManager.add([jsc("web/podcast.js"),"page.css"],()=>{Podcast.show(null,c[2],null,"url")}),!1;case"apps_achievements":return stManager.add([jsc("web/apps_achievements.js")],()=>{window.AppsAchievementsPage.showFriendAchievements(c[2])}),!1;case"call":return stManager.add(["notifier.js"],()=>{var e=()=>window.Calls&&window.Calls.call(c[2],!1);window.Calls&&window.Calls.isInitialized?e():setTimeout(e,500),delete nav.objLoc.z,nav.setLoc(nav.objLoc)}),!1}}}}},kJMx:function(e,t,n){var r=n("zhAb"),o=n("4R4u").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},kKcY:function(e,t,n){"use strict";n.r(t),n.d(t,"MARKET_ALIEXPRESS_APP_ID",(function(){return r})),n.d(t,"MARKET_ALIEXPRESS_APP_NAME",(function(){return o})),n.d(t,"MARKET_ALIEXPRESS_HOME_URL",(function(){return i})),n.d(t,"MARKET_ALIEXPRESS_GROUP_ID",(function(){return a})),n.d(t,"MARKET_YOULA_GROUP_ID",(function(){return s})),n.d(t,"MARKET_ORDER_TYPE_ALIEXPRESS_CHECKOUT",(function(){return c})),n.d(t,"GROUP_ORDERS_COLUMNS_STORAGE_KEY",(function(){return u})),n.d(t,"GROUP_ORDERS_DEFAULT_COLUMNS",(function(){return l}));var r=6706576,o="ae_app",i="https://aliexpress.com",a=36941068,s=198582766,c="aliexpress_checkout",u="GroupOrdersPageTableSettings",l=["fullId","date","status","userName","deliveryOption","totalPrice","merchantComment","colorTags"]},kcIO:function(e,t,n){"use strict";n.r(t),n.d(t,"curBox",(function(){return u})),n.d(t,"initBoxQueue",(function(){return l})),n.d(t,"boxRefreshCoords",(function(){return d})),n.d(t,"showDoneBox",(function(){return _})),n.d(t,"showDoneBoxFull",(function(){return p})),n.d(t,"getAndCleanBoxQueueData",(function(){return f})),n.d(t,"restoreBoxQueue",(function(){return m}));n("91GP");var r=n("Egk5"),o=n("t7n3"),i=n("zxIV"),a=n("gdug");function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var c={hideAll:function(e,t){if(e)for(;c.count();)c.hideLast();else{if(c.count()){var n=_message_boxes[c._boxes.pop()];n&&(n._in_queue=!1,n._hide(!1,!1,t))}for(;c.count();){_message_boxes[c._boxes.pop()]._in_queue=!1}}},hideLast:function(e,t){if(c.count()){var n=window._message_boxes[c._boxes[c.count()-1]];if(!0===e&&(n.changed||n.preventHideLastWithCheck||c.skip||t&&t.target&&t.target.tagName&&"input"!==t.target.tagName.toLowerCase()&&cur.__mdEvent&&t.target!==cur.__mdEvent.target))return void(c.skip=!1);n.hide()}if(t&&"click"===t.type)return Object(r.cancelEvent)(t)},hideBGClick:function(e){e&&e.target&&/^box_layer/.test(e.target.id)&&c.hideLast()},count:function(){return c._boxes.length},_show:function(e){var t=_message_boxes[e];if(t&&!t._in_queue){c.count()?_message_boxes[c._boxes[c.count()-1]]._hide(!0,!0):window.tooltips&&tooltips.hideAll(),t._in_queue=!0;var n=!!c.count();n&&(n=c._boxes.every(e=>!_message_boxes[e].forceHide)),c.curBox=e,t._show(n||c.currHiding,n),c._boxes.push(e)}},_hide:function(e){var t=_message_boxes[e];if(t&&t._in_queue&&c._boxes[c.count()-1]===e&&t.isVisible()&&(t._in_queue=!1,c._boxes.pop(),t._hide(!!c.count()),c.count())){var n=c._boxes[c.count()-1];c.curBox=n,_message_boxes[n]._show(!0,!0,!0)}},_boxes:[],curBox:0};function u(){var e=window._message_boxes[window.boxQueue.curBox];return e&&e.isVisible()?e:null}function l(){window.boxQueue=c,window.__bq=c,window.curBox=u,window.boxQueue.hideLastCheck=window.boxQueue.hideLast.pbind(!0),window._message_box_guid=0,window._message_boxes=[]}function d(e){var t=window.innerHeight||document.documentElement.clientHeight||boxLayerBG.offsetHeight,n=a.browser.mobile?Object(o.intval)(window.pageYOffset):0,r=Object(i.getSize)(e);e.style.marginTop=Math.max(10,n+(t-r[1])/3)+"px"}function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};window.Notifier?h(e,t,n):window.stManager.add(["notifier.js","notifier.css"],()=>{h(e,t,n)})}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=s({},n,{type:"done_box_full"});_(e,t,r)}function h(e,t,n){window.curNotifier&&window.curNotifier.version||window.Notifier.init({version:-1,instance_id:-1});var r=void 0!==t.onHide?t.onHide:t.callback,o=void 0!==t.timeout?t.timeout:void 0!==t.out?t.out:null,i=null!==t.id&&void 0!==t.id?t.id:++window.curNotifier.showDoneBoxLastId,a=s({version:window.curNotifier.version,type:"done_box",text:e,onclick:t.onClick,top_count:-1,id:i,timeout:o,onHide:r,preventHideByClick:!0,link:t.link},n);t.tooltipHandler&&(a.tooltipHandler=t.tooltipHandler),Notifier.pushEvent(a)}function f(){var e={boxes:window._message_boxes,boxQueueIds:window.boxQueue._boxes,curBoxId:window.boxQueue.curBox};return window.boxQueue._boxes=[],window._message_boxes=[],window.boxQueue.curBox=0,e}function m(e){window._message_boxes=e.boxes,window.boxQueue._boxes=e.boxQueueIds,window.boxQueue.curBox=e.curBoxId}},kefJ:function(e,t,n){"use strict";var r;n.r(t),n.d(t,"HintType",(function(){return r})),function(e){e.Tooltip="tooltip",e.Highlight="highlight"}(r||(r={}))},lSNA:function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},lXE5:function(e,t,n){"use strict";n.r(t),n.d(t,"scrollToY",(function(){return s})),n.d(t,"scrollToTop",(function(){return c})),n.d(t,"scrollGetX",(function(){return u})),n.d(t,"scrollGetY",(function(){return l})),n.d(t,"disableBodyScroll",(function(){return d})),n.d(t,"enableBodyScroll",(function(){return _})),n.d(t,"isBodyScrollEnabled",(function(){return p}));var r=n("v+DW"),o=n("7jxN"),i=n("zxIV");function a(){return bodyNode}function s(e,t,n,c,d){if(null==t&&(t=400),"ontouchstart"in document.documentElement&&(t=0),c||(e=Math.max(0,e-(vk.staticheader?0:Object(i.getSize)("page_header_cont")[1]))),Object(i.data)(a(),"tween")&&Object(i.data)(a(),"tween").stop(!1),Object(i.data)(htmlNode,"tween")&&Object(i.data)(htmlNode,"tween").stop(!1),window.scrollAnimation=!1,t){var _=function(){window.scrollAnimation=!1,2===n&&("profile"!=cur.module&&"public"!=cur.module&&"group"!=cur.module&&"groups"!=cur.module&&"event"!=cur.module||!window.Wall||Wall.scrollCheck(!1,void 0,!0),Object(r.updSideTopLink)()),"function"==typeof d&&d()};window.scrollAnimation=!0,Object(o.animate)(htmlNode,{scrollTop:e},{duration:t,transition:o.Fx.Transitions.sineInOut,onComplete:_}),Object(o.animate)(a(),{scrollTop:e},{duration:t,transition:o.Fx.Transitions.sineInOut,onComplete:_})}else{if(n&&2!==n){"profile"!=cur.module&&"public"!=cur.module&&"group"!=cur.module&&"event"!=cur.module||!window.Wall||Wall.scrollCheck(!1,e,!0);var p=l()-e;return Math.abs(p)>6&&s(e+(p>0?6:-6),0,2,!0),Object(r.updSideTopLink)(),clearTimeout(window.scrlToTO),void(window.scrlToTO=setTimeout(s.pbind(e,100,2,!0,d),0))}window.scroll(u(),e),"function"==typeof d&&d(),n||Object(r.updSideTopLink)()}}function c(e){return s(0,e)}function u(){return window.pageXOffset||scrollNode.scrollLeft||document.documentElement.scrollLeft}function l(){return window.pageYOffset||scrollNode.scrollTop||document.documentElement.scrollTop}function d(){a().style.overflow="hidden"}function _(){a().style.overflow="auto"}function p(){return"hidden"!==a().style.overflow}},ldAL:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return r}));n("KKXr");class r{constructor(e,t){if(this.constructor!==r)throw new Error("AutoList: AutoList was called without 'new' operator");if(r._counter=r._counter||0,this._id=r._counter++,this.setListEl(e,t.scrollNode),this._opts=extend({threshold:0,renderImmediate:!1,fetchImmediate:!0},t),!this._containerEl)throw new Error("AutoList: container not found");this._rowClasses=!!this._opts.rowClass&&this._opts.rowClass.split(" "),delete this._opts.rowClass,this._initialRender=this._opts.renderImmediate,this._isProgressShown=!1,this._prefetched=[],this._initialRender?this._offset=0:this._opts.offset?this._offset=this._opts.offset:this._opts.rowClasses?this._offset=this._countRows(this._containerEl.children):this._offset=this._containerEl.children.length,this._page=this._offset>0?1:0,addEvent(this._scrollNode,"scroll",this._ev_scroll=this._onScroll.bind(this)),addEvent(window,"resize",this._ev_window_resize=this._onScroll.bind(this)),this._setState(this._opts.renderImmediate?"pend_rows":"pend_prefetch"),this._opts.fetchImmediate?this._requestRows():(this._setState("idle"),this._onScroll())}getListEl(){return this._containerEl}setListEl(e,t){var n;this._containerEl=ge(e),this._scrollNode=t||r.closestOverflowParent(this._containerEl),n=this._scrollNode===window?0:getXY(this._scrollNode)[1],this._contentYOffset=getXY(this._containerEl)[1]-n}options(e){extend(this._opts,e)}_countRows(e){var t=this,n=0;return each(e,(function(e,r){"string"==typeof r&&(r=se(r)),t._rowClasses?each(t._rowClasses,(function(e,t){if(hasClass(r,t))return n++,!1})):n++})),n}_drawRows(e){var t=this;this._opts.drawRows?this._opts.drawRows(t._containerEl,e):each(e,(function(e,n){"string"==typeof n&&(n=se(trim(n))),n&&t._containerEl.appendChild(n)})),this.toggleProgress("done"!==this._state),!this._forceDrawCalled&&this._opts.onRendered&&this._opts.onRendered(this._offset)}toggleProgress(e){e?!this._isProgressShown&&this._opts.showProgress&&this._opts.showProgress():this._isProgressShown&&this._opts.hideProgress&&this._opts.hideProgress(),this._isProgressShown=e}drawMore(){inArray(this._state,["idle","done_prefetch"])?(this._forceDrawCalled=!0,this._drawRows(this._prefetched),this._setState("pend_prefetch"),this._prefetched=[],this._requestRows(),this._forceDrawCalled=!1):"done"===this._state&&this._opts.onNoMore&&this._opts.onNoMore(this._containerEl.childElementCount)}destroy(){this._ev_scroll&&(removeEvent(this._scrollNode,"scroll",this._ev_scroll),this._ev_scroll=!1),this._ev_window_resize&&removeEvent(window,"resize",this._ev_window_resize),this._setState("done"),this.toggleProgress(!1)}getOffset(){return this._offset}_requestRows(){if(!this.isDone()&&"done_prefetch"!==this._state){this._initialRender=!1,function(){this._opts.onNeedRows(this._onRowsProvided.bind(this),this._offset,this._page++,"pend_prefetch"===this._state,this)}.apply(this)}}_onRowsProvided(e,t){if(!this.isDone()){if(!1===e)return this._requestRows();e=e||[],this._offset+=void 0===t?this._countRows(e):t;var n=this._containerEl.childElementCount;switch(this._state){case"pend_prefetch":0===e.length?(this._setState("done_prefetch"),this._opts.onNoMore&&this._opts.onNoMore(n),0===this._prefetched.length&&this._setState("done")):(this._setState("idle"),this._prefetched=this._prefetched.concat(e),this._opts.onHasMore&&this._opts.onHasMore(),this._onScroll());break;case"pend_rows":this._drawRows(e),0===e.length?(this._setState("done"),this._opts.onNoMore&&this._opts.onNoMore(n)):(this._setState("pend_prefetch"),this._requestRows()),this.toggleProgress(!1);break;case"idle":this._prefetched=this._prefetched.concat(e)}}}_setState(e){this._state=e}isDone(){return"done"===this._state}static closestOverflowParent(e){for(var t=e;t&&t.tagName&&("visible"===getStyle(t,"overflow")||"page_wrap"===t.id);)t=domPN(t);return t!==window.document&&t!==bodyNode&&t||(t=window),t}_onScroll(){if(!this._forceDrawCalled&&"pend_rows"!==this._state){var e,t,n=this._scrollNode;n===window?(t=Math.max(document.documentElement.clientHeight,window.innerHeight||0),e=scrollGetY()):(t=getSize(n)[1],e=this._scroll?this._scroll.data.scrollTop:n.scrollTop),t<10||this._containerEl.scrollHeight-t-e+this._contentYOffset<10&&("pend_rows"===this._state||!this._prefetched.length&&"pend_prefetch"===this._state?(this.toggleProgress(!0),this._setState("pend_rows")):"pend_prefetch"===this._state||"idle"===this._state?(this._drawRows(this._prefetched),this._prefetched=[],this._setState("pend_prefetch"),this._requestRows()):"done_prefetch"===this._state&&(this._drawRows(this._prefetched),this._prefetched=[],this._setState("done"),this._opts.onNoMore&&this._opts.onNoMore(),this.destroy()))}}}},leix:function(e,t,n){var r=function(e){return String(Number(e))===e?Number(e):e},o=function(e,t,n){var o=e.name&&e.names;e.push&&!t[e.push]?t[e.push]=[]:o&&!t[e.name]&&(t[e.name]={});var i=e.push?{}:o?t[e.name]:t;!function(e,t,n,o){if(o&&!n)t[o]=r(e[1]);else for(var i=0;i<n.length;i+=1)null!=e[i+1]&&(t[n[i]]=r(e[i+1]))}(n.match(e.reg),i,e.names,e.name),e.push&&t[e.push].push(i)},i=n("O6qx"),a=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(e){var t={},n=[],r=t;return e.split(/(\r\n|\r|\n)/).filter(a).forEach((function(e){var t=e[0],a=e.slice(2);"m"===t&&(n.push({rtp:[],fmtp:[]}),r=n[n.length-1]);for(var s=0;s<(i[t]||[]).length;s+=1){var c=i[t][s];if(c.reg.test(a))return o(c,r,a)}})),t.media=n,t};var s=function(e,t){var n=t.split(/=(.+)/,2);return 2===n.length&&(e[n[0]]=r(n[1])),e};t.parseParams=function(e){return e.split(/\;\s?/).reduce(s,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(e){return e.split(" ").map(Number)},t.parseRemoteCandidates=function(e){for(var t=[],n=e.split(" ").map(r),o=0;o<n.length;o+=3)t.push({component:n[o],ip:n[o+1],port:n[o+2]});return t},t.parseImageAttributes=function(e){return e.split(" ").map((function(e){return e.substring(1,e.length-1).split(",").reduce(s,{})}))},t.parseSimulcastStreamList=function(e){return e.split(";").map((function(e){return e.split(",").map((function(e){var t,n=!1;return"~"!==e[0]?t=r(e):(t=r(e.substring(1,e.length)),n=!0),{scid:t,paused:n}}))}))}},lkNA:function(e,t,n){"use strict";function r(e,t){var n,r=t.timeout,o=t.onLoad,i=t.onError,a=document.createElement("script");function s(e){a.readyState&&"loaded"!=a.readyState&&"complete"!=a.readyState||(u(),o&&o())}function c(e){u(),i&&i()}function u(){clearTimeout(n),a.removeEventListener("load",s),a.removeEventListener("readystatechange",s),a.removeEventListener("error",c)}return a.addEventListener("load",s),a.addEventListener("readystatechange",s),a.addEventListener("error",c),a.src=e,document.head.appendChild(a),r&&(n=setTimeout(c,r)),{destroy:function(){u()}}}n.r(t),n.d(t,"loadScript",(function(){return r}))},llQL:function(e,t,n){"use strict";var r,o;n.r(t),n.d(t,"DonutActionEventType",(function(){return r})),n.d(t,"DonutActionEventScreen",(function(){return o})),function(e){e.PAYMENT_FORM="payment_form",e.PAYMENT_FORM_CLICK_OFFER="payment_form_click_offer",e.PAYMENT_FORM_CLICK_PAY="payment_form_click_pay",e.PAYMENT_FORM_CLICK_CLOSE="payment_form_click_close",e.PAYMENT_FORM_CHANGE_CLICK_CHANGE="payment_form_change_click_change",e.CLICK_SHOW_MORE="click_show_more",e.WIDGET_VIEW="widget_view",e.DESCRIPTION_VIEW="description_view"}(r||(r={})),function(e){e.PAYMENT_START="payment_start",e.DATA_ACCESS="data_access",e.RESULT_PAYMENT_SUCCESS_OK="result_payment_success_ok",e.RESULT_PAYMENT_SUCCESS_WAITING="result_payment_success_waiting",e.RESULT_PAYMENT_SUCCESS_WAITING_TIMEOUT="result_payment_success_waiting_timeout",e.RESULT_RESUB_SUCCESS_WAITING="result_resub_success_waiting",e.RESULT_RESUB_SUCCESS_WAITING_OK="result_resub_success_waiting_ok",e.RESULT_PAYMENT_UNAVAILABLE="result_payment_unavailable",e.RESULT_PAYMENT_CANCEL="result_payment_cancel",e.RESULT_ERROR="result_error",e.CHANGE_START="change_start",e.RESULT_CHANGE_ERROR="result_change_error",e.RESULT_CHANGE_SUCCESS_OK="result_change_success_ok",e.RESULT_CHANGE_SUCCESS_WAITING="result_change_success_waiting",e.RESULT_CHANGE_SUCCESS_WAITING_TIMEOUT="result_change_success_waiting_timeout",e.RESULT_CHANGE_UNAVAILABLE="result_change_unavailable",e.UNKNOWN="donut_payment_screen_unknown"}(o||(o={}))},lwsE:function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},m0N1:function(e,t,n){"use strict";n.r(t),n.d(t,"updSeenAdsInfo",(function(){return a})),n.d(t,"__adsGetAjaxParams",(function(){return s})),n.d(t,"__adsUpdate",(function(){return c})),n.d(t,"__adsSet",(function(){return u})),n.d(t,"__adsUpdateExternalStats",(function(){return l})),n.d(t,"initAds",(function(){return d}));var r=n("J8bf"),o=n("t7n3"),i=n("zxIV");function a(){if((Object(i.getXY)("ads_left",!0)||{})[1]&&vk.id){var e=Object(i.getXYRect)(Object(i.geByTag1)("ol",Object(i.ge)("side_bar_inner")),!0),t=e?e.height:0,n=Object(i.getXYRect)(Object(i.ge)("left_blocks"),!0),a=n?n.height:0,s=Math.max(Math.floor(((window.lastWindowHeight||0)-t-a-42-10)/260),0),c=Object(r.getCookie)("remixseenads");window.__seenAds=Object(o.intval)(c),c&&__seenAds===s||(window.__seenAds=s,Object(r.setCookie)("remixseenads",s,30))}}function s(e,t){return!window.noAdsAtAll&&(s=function(){return window.AdsLight&&AdsLight.getAjaxParams.apply(AdsLight.getAjaxParams,arguments)||{al_ad:null}},window.AdsLight?n=s(e,t):(n={al_ad:null},stManager.add([jsc("web/ads_light.js")],s.pbind(e,t))),n);var n}function c(e){if(window.noAdsAtAll)return!1;c=function(){window.AdsLight&&AdsLight.updateBlock.apply(AdsLight.updateBlock,arguments)},stManager.add([jsc("web/ads_light.js")],c.pbind(e))}function u(e,t,n,r,o,i){if(window.noAdsAtAll)return!1;u=function(){var e="";arguments&&arguments[0]&&(e=arguments[0]),"\x3c!--criteo"===e.slice(0,"\x3c!--criteo".length)&&Math.random()<.05&&(window.AdsLight&&AdsLight.setNewBlock?ajax.post("/wkview.php?act=mlet&mt=750",{},{onFail:()=>!0}):ajax.post("/wkview.php?act=mlet&mt=751",{},{onFail:()=>!0})),window.AdsLight&&AdsLight.setNewBlock.apply(AdsLight.setNewBlock,arguments)},stManager.add([jsc("web/ads_light.js")],u.pbind(e,t,n,r,o,i))}function l(e){if(window.noAdsAtAll)return!1;l=function(){window.AdsLight&&AdsLight.updateExternalStats.apply(AdsLight.updateExternalStats,arguments)},stManager.add([jsc("web/ads_light.js")],l.pbind(e))}function d(){window.__seenAds=Object(o.intval)(Object(r.getCookie)("remixseenads")),window.__adsUpdate=c,window.__adsSet=u,window.__adsGetAjaxParams=s,window.__adsUpdateExternalStats=l}window.__adsLoaded=Object(o.vkNow)()},m0Pp:function(e,t,n){var r=n("2OiF");e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},mMuO:function(e,t,n){"use strict";n.r(t),n.d(t,"pullFromWebStats",(function(){return W})),n.d(t,"pushToWebStats",(function(){return H})),n.d(t,"saveJsErrorLogs",(function(){return V})),n.d(t,"saveStatlogEvents",(function(){return q})),n.d(t,"saveProductionStats",(function(){return G})),n.d(t,"saveNetworkStats",(function(){return z})),n.d(t,"saveCustomStats",(function(){return Y})),n.d(t,"saveStoryViewBaseStats",(function(){return $})),n.d(t,"saveStoryViewStats",(function(){return X})),n.d(t,"saveWebPerfStats",(function(){return Q}));var r=n("tGJf"),o=n("W9Tc");function i(e,t,n){Object(o.partConfigEnabled)("web_stats_transport_debugger")&&console.log("[new transport debug] "+e+" "+(n?"(data was transformed)":""),t)}var a="XHR_STATS_TRANSPORT_DATA_web",s="XHR_STATS_TRANSPORT_META_web",c="XHR_STATS_TRANSPORT_DATA_LOCK_web",u=JSON.stringify({jsErrorLogs:[],statlogEvents:[],productionStats:[],storyViewStats:[],networkStats:[],customStats:[],webPerfStats:[]});function l(e){if("locked"!==r.vkSessionStorage.getItem(c)){i("writeLocked","lock"),r.vkSessionStorage.setItem(c,"locked");try{e()}catch(e){}return i("writeLocked","free"),void r.vkSessionStorage.setItem(c,"free")}setTimeout((function(){return l(e)}),100)}var d=function(){return r.vkLocalStorage.getItem(a)||u},_=function(e){return r.vkLocalStorage.setItem(a,JSON.stringify(e))},p=function(e,t){var n;void 0===t&&(t=d());var r,o=Object.keys({jsErrorLogs:[],statlogEvents:[],productionStats:[],storyViewStats:[],networkStats:[],customStats:[],webPerfStats:[]}).filter((function(t){return t!==e})).join("|"),i=(null===(n=null==t?void 0:t.match(new RegExp('"'+e+'":(\\[.*?\\])(?:,"('+o+')":\\[|}$)')))||void 0===n?void 0:n[1])||"";return(r=i).startsWith("[")&&r.endsWith("]")?i:"[]"};function h(){var e,t=!0;try{var n=d();if(!n)throw new Error("empty data");e={jsErrorLogs:[],statlogEvents:[],productionStats:[],storyViewStats:[],networkStats:[],customStats:[],webPerfStats:[]};var r=JSON.parse(n);Object.keys(e).forEach((function(n){Array.isArray(r[n])&&(t=!1,e[n]=r[n])}))}catch(t){e={jsErrorLogs:[],statlogEvents:[],productionStats:[],storyViewStats:[],networkStats:[],customStats:[],webPerfStats:[]}}return{webStatsData:e,isEmpty:t}}function f(e){e&&i("WebStats cleared. "+(e?"Reason: LS is broken.":""),e),l((function(){return r.vkLocalStorage.setItem(a,"")}))}function m(e){void 0===e&&(e=Number(new Date)),r.vkSessionStorage.setItem(s,e.toString())}function g(){return parseInt(""+(r.vkSessionStorage.getItem(s)||0))}var v=n("DM2o"),b=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},y=.2*Math.pow(10,6),E=function(e,t){return[e,t].every((function(e){return e.startsWith("{")&&e.endsWith("}")&&"{}"!==e}))&&e.slice(0,-1)+","+t.substring(1)},w=function(e,t){return e=e||window.vk.wsTransport+"/web-stats/"+(window.vk.statsMeta.st?"s":"p"),new Promise((function(n,r){var o=new XMLHttpRequest;o.open("POST",e),e.includes("tau.vk.com")&&(o.withCredentials=!0),o.onload=function(){return this.status>=200&&this.status<300?n(o.response):r({status:this.status,statusText:o.statusText})},o.onerror=function(){return r({status:this.status,statusText:o.statusText})},o.setRequestHeader("Content-Type","application/json;charset=UTF-8"),o.send("string"==typeof t?t:JSON.stringify(t))}))};function O(e,t,n){Object(v.statlogsValueEvent)("web_stats_batching_time",e,window.vk.statsMeta.platform,t,n)}var C,T=function(){return(T=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},S=1;function D(e){return!!Object(o.partConfigEnabled)("web_stats_send_on_events_limit")&&(1===S&&(t=e,Object.values(t).reduce((function(e,t){return e+=t.length}),0)>300));var t}function P(e){var t=+new Date,n=g();0===n&&m(n=t);var r,a=t-n,s=a/1e3,c=D(e);i("saveStats",{nowMs:t,lastTransferTimeMs:n,timePassed:s+"s",statsData:e}),Object(o.partConfigEnabled)("web_stats_debounce")?(_(e),r=function(e,t){return t?0:0===e||e>6e4?3e3:12e4}(a,c),window.clearTimeout(C),C=window.setTimeout((function(){return l((function(){var e=h().webStatsData,t=+new Date;A(e),f(),m(t)}))}),r)):a>6e4||c?(A(e),f(),m(t)):(_(e),window.setTimeout(k,12e4))}function k(){l((function(){var e=h(),t=e.webStatsData;e.isEmpty||P(t)}))}function A(e){i("send",e);var t=window.vk,n=t.id,r=t.wsTransport,o=t.statsMeta,a=r+(window.vk&&window.vk.statsMeta&&window.vk.statsMeta.st?"/web-stats/s":"/web-stats/p"),s=T(T({},e),{id:n,st:o.st,platform:o.platform,signTime:o.time,sign:o.hash,attempt:S});w(a,s).then((function(e){i("sendStats success",e),S=1})).catch((function(t){return S++,l((function(){i("sendStats try",S),P(e)})),i("sendStats error",t),!0})),m(+new Date)}var I,x=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r},j=function(e){var t=Date.now(),n=function(e){return"{"+(null==e?void 0:e.map((function(e){return'"'+e[0]+'":'+e[1]})).join(","))+"}"},r=Object.keys({jsErrorLogs:[],statlogEvents:[],productionStats:[],storyViewStats:[],networkStats:[],customStats:[],webPerfStats:[]}).reduce((function(t,n){var r=p(n,e);return"[]"===r?t:x(t,[[n,r]])}),[]).sort((function(e,t){var n=e[1];return t[1].length-n.length})).reduce((function(e,t){var r=e[0],o=e[1],i=t[0],a=t[1],s=[[i,a]];return a.length+n(r).length<y?[r.concat(s),o]:[r,o.concat(s)]}),[[],[]]),o=r[0],i=r[1],a=n(o);if(O(Date.now()-t,"chunk"),Date.now()-t<500&&i[0]&&a.length<.1*y){var s=Date.now();try{return function(e,t){var n=t[0],r=t[1],o='{"'+n+'":['+JSON.parse(r).reduce((function(t,n,r){return t.length<y-e.length?t+(0===r?"":",")+JSON.stringify(n):t}),"")+"]}";return"{}"===e?o:E(e,o)||e}(a,i.reverse()[0])}catch(e){return O(Date.now()-s,"batch-fail"),f(!0)}}return a},M=0,L=function(){return 5e3*M},R=function(){!0!==I&&clearTimeout(I),I=window.setTimeout((function(){var e=d();I=void 0,e.length>u.length&&U(e)}),Math.max(5e3,g()+15e3-Date.now()+L()))},B=function(e){return M=e?M+1:0,I=void 0,R()},N=function(e){var t=Date.now(),n=e.length>y,r=n?j(e):e;n&&O(Date.now()-t,r?"batch":"batch-fail"),m(),f(),r?w("",function(e,t){var n=window.vk,r=n.id,o=n.statsMeta,i=o.st,a=o.platform,s=b(o,["st","platform"]);return E(JSON.stringify({id:r,st:i,platform:a,attempt:e,signTime:s.time,sign:s.hash}),t)}(++M,r)).then((function(){O(1,n?"prune":"parse"),B()})).catch((function(e){O(n?1:2,400===(null==e?void 0:e.status)?"parse-fail":"fail",null==e?void 0:e.statusText),B()})):B()};function U(e){return I||!(Date.now()-g()>15e3+L())||e.length<=u.length?(i("WebStats delayed.",I),R()):(I=!0,window.requestIdleCallback((function(){return N(e)}),{timeout:2500}))}var F=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r},W=function(e,t){var n=p(e,t);if("[]"!==n){var o=d().replace(n.slice(1,-1),"").replace(/\[\,/,"[");l((function(){return r.vkLocalStorage.setItem(a,o)}))}},H=function(e,t){var n=p(e);return d().replace('"'+e+'":'+n,'"'+e+'":'+n.replace(/]$/,("[]"===n?"":",")+JSON.stringify(t)+"]"))},K=function(e,t,n,s){if(Object(o.partConfigEnabled)("batchify_web_stats")){var c=H(t,n);l((function(){return r.vkLocalStorage.setItem(a,c)})),U(c)}else l((function(){var e=h().webStatsData;e[t].push(n),P(e)}));i(e,n,Boolean(null==s?void 0:s.eventDataWasModified))},V=function(e){return K("saveJsErrorLogs","jsErrorLogs",e)},q=function(e){var t=e.name,n=e.value,r=e.keys;return K("saveStatlogEvents","statlogEvents",F([Math.round(Number(Date.now())/1e3),t,n],r),{eventDataWasModified:!0})},G=function(e){return K("saveProductionStats","productionStats",e)},z=function(e){return K("saveNetworkStats","networkStats",e)},Y=function(e){return K("saveCustomStats","customStats",e)},$=function(e){return K("saveStoryViewStats","storyViewStats",e)},X=function(e){return $(e)},Q=function(e){var t=e.loc,n=e.events;return K("saveWebPerfStats","webPerfStats",[t,n],{eventDataWasModified:!0})}},mXS3:function(e,t){},mpRv:function(e,t,n){"use strict";n.r(t),n.d(t,"TransferVotesBox",(function(){return u}));n("pIFo");var r=n("kcIO"),o=n("aong"),i=n("t7n3"),a=n("v+DW"),s=n("zxIV"),c=n("MJEz");class u{constructor(e,t){Object(c.tq)().setInteractiveHandler("TransferVotesBox/check_user_message",()=>{this.transferCheckUserMessage()}),Object(c.tq)().setInteractiveHandler("TransferVotesBox/clean_amount",e=>{this.transferCleanAmount(e.payload.event.target)}),Object(c.tq)().setInteractiveHandler("TransferVotesBox/text_keydown",e=>{13===e.payload.event.keyCode&&this.transferSend()}),this.box=Object(r.curBox)(),extend(this,e,{votesTransferMaxTextLength:t,linkCache:{}}),this.uiTransferTo=new Dropdown(ge("transfer_to"),this.friends,{big:!0,introText:getLang("votes_transfer_start_typing_recipient"),noResult:"",placeholder:getLang("votes_transfer_choose_recipients"),placeholderColored:!0,multiselect:!1,enableCustom:!0,autocomplete:!0,selectedItems:this.friends_sel,imageId:"transfer_to_photo",indexkeys:[1,4],noImageSrc:"/images/blank.gif",onChange:e=>{var t=this.uiTransferTo.val_full();if(t[0]&&t[1]!==getLang("votes_transfer_choose_recipients"))if(-1===t[0]){for(var n=0;n<this.uiTransferTo.currentList.length;n++){var r=this.uiTransferTo.currentList[n];if(r[1]===t[1])return this.uiTransferTo.selectItem(r[0]),void this.transferCheckUserAmount(r[0])}this.transferGetUser(t[1])}else this.transferCheckUserAmount(t[0])}}),cur.destroy.push(this.uiTransferTo.destroy.bind(this.uiTransferTo)),this.box.setOptions({width:500,bodyStyle:"padding: 0;"}),this.box.setButtons(getLang("votes_transfer_send"),()=>{this.transferSend()},getLang("global_cancel"))}uiTransferToFocus(){this.uiTransferTo.focus()}transferCleanAmount(e){var t=e.value.replace(/[^0-9]/g,"");e.value!==t&&(e.value=t)}transferShowBoxError(e){ge("payments_box_error").innerHTML=e,show("payments_box_error"),this.box.hideProgress()}transferCheckUserMessage(){Object(o.checkTextLength)(this.votesTransferMaxTextLength,ge("transfer_comment"),ge("transfer_comment_limit_message"),!1,!0)}transferSend(){hide("payments_box_error");var e={act:"a_votes_transfer_send",transfer_to:this.uiTransferTo.val(),transfer_amount:Object(i.intval)(val("transfer_amount")),transfer_comment:Object(i.trim)(val("transfer_comment")),hash:this.transfer_hash};if((parseInt(e.transfer_to)||0)<=0)return this.transferShowBoxError(getLang("votes_transfer_please_select_recipient")),void this.uiTransferTo.focus();e.transfer_amount<=0?Object(a.notaBene)("transfer_amount"):this.user_limit<=0||e.transfer_amount>this.user_limit?this.transferShowBoxError(this.user_limit_err_msg):(this.box.showProgress(),ajax.post("al_payments.php",e,{onDone:(e,t)=>{this.box.hide(),Object(r.showDoneBox)(e,{out:4e3});var n=ge("settings_votes_history");if(n&&n.parentNode){for(var o=n.parentNode;o.firstChild;)o.removeChild(o.firstChild);for(var i=Object(s.domChildren)(Object(s.ce)("div",{innerHTML:t})),a=0;a<i.length;a++)o.appendChild(i[a]);this.historyOffset=5}},onFail:e=>(e&&this.transferShowBoxError(e),this.box.hideProgress(),!0)}))}transferCheckUserAmount(e){this.box.showProgress(),hide("payments_box_error"),ajax.post("al_payments.php",{act:"a_votes_transfer_check",transfer_to:e},{onDone:e=>{this.box.hideProgress(),this.user_limit=e[0],this.user_limit_err_msg=e[2],ge("limit_message")&&(ge("limit_message").innerHTML=e[1],Object(s.elfocus)("transfer_amount"))},onFail:e=>(this.transferShowBoxError(e),!0)})}transferGetUser(e){var t=t=>{this.box.hideProgress(),hide("payments_box_error");for(var n=this.uiTransferTo.currentList,r=!1,o=0;o<n.length;o++)n[o][0]===t[0]&&(r=!0);r||(n.push(t),this.uiTransferTo.setData(n)),this.uiTransferTo.selectItem(t[0]),this.user_limit=t[4],this.user_limit_err_msg=t[6],ge("limit_message").innerHTML=t[5],this.linkCache[e]=t,Object(s.elfocus)("transfer_amount")};Object(i.trim)(e).length&&(void 0!==this.linkCache[e]?t(this.linkCache[e]):(this.box.showProgress(),ajax.post("al_payments.php",{act:"a_votes_transfer_get_person",page:e},{onDone:t,onFail:e=>(this.transferShowBoxError(e),!0)})))}}},n3cE:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return s}));n("91GP"),n("ioFf"),n("rGqo"),n("Btvt");var r=n("q1tI"),o=(n("17x9"),n("xt6h"));function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}class s extends r.Component{render(){var e=this.props,t=e.onClick,n=e.hovered,s=e.className,c=e.children,u=a(e,["onClick","hovered","className","children"]),l=Object(o.classNames)("Link",{"Link--hovered":!!n},s);return this.props.href?r.createElement("a",i({onClick:t},u,{className:l}),c):r.createElement("span",i({onClick:t},u,{className:l}),c)}}s.defaultProps={href:void 0,hovered:!1,onClick:()=>{}}},nAFc:function(e,t,n){"use strict";n.r(t),n.d(t,"encodeHTMLEntities",(function(){return c})),n.d(t,"escape",(function(){return u})),n.d(t,"decodeHTMLEntities",(function(){return l})),n.d(t,"prepareToWriting",(function(){return d}));n("HEwt"),n("a1Th"),n("Btvt"),n("rGqo"),n("rE2o"),n("ioFf"),n("Oyvg"),n("pIFo");var r=n("yqpO"),o=n("vkmG");function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var s=o.symbols,c=o.encodeHTMLEntities,u=o.escape;function l(e){return s.reduce((e,t)=>{var n=i(t,2),r=n[0],o=n[1];return e.replace(new RegExp(r,"ig"),o)},e).replace(/&#(\d+);/g,(e,t)=>String.fromCodePoint(t))}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.lineBreak,o=void 0!==n&&n,i=t.convertEmoji,a=void 0===i||i,s=l(e);return s=s.replace(/\n\r/gi,"\n"),"oneline"===o?s=s.replace(/<br>/gi," ").replace(/\n/gi," "):"html"===o&&(s=s.replace(/\n/gi,"<br>")),s=u(s),a&&(s=Object(r.emojiToHTML)(s,!0)),s}},nCnK:function(e,t,n){n("7DDg")("Uint32",4,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},nGyu:function(e,t,n){var r=n("K0xU")("unscopables"),o=Array.prototype;null==o[r]&&n("Mukb")(o,r,{}),e.exports=function(e){o[r][e]=!0}},nICZ:function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},ne8i:function(e,t,n){var r=n("RYi7"),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},ngxX:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return s}));n("91GP"),n("ioFf"),n("rGqo"),n("Btvt");var r=n("q1tI"),o=(n("17x9"),n("xt6h"));function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}class s extends r.Component{constructor(){super(...arguments),this.onChange=e=>{var t=this.props.onChange;t&&(this.props.native?t(e):t(this.props.name,e.target.checked))}}render(){var e=this.props,t=e.children,n=e.checked,s=e.disabled,c=e.name,u=e.type,l=void 0===u?"checkbox":u,d=e.id,_=a(e,["children","checked","disabled","name","type","id"]),p=Object(o.classNames)("Switch",_.className,{"Switch--disabled":s,"Switch--last":!t});return r.createElement("label",{className:p,htmlFor:d,tabIndex:"-1","aria-checked":!!n,role:"checkbox"},r.createElement("input",i({},_,{className:"Switch__input",id:d,type:l,checked:n,name:c,disabled:s,onChange:this.onChange})),r.createElement("span",{className:"Switch__indicator","aria-hidden":!0}),t)}}},nh4g:function(e,t,n){e.exports=!n("eeVq")((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},nqXl:function(e,t,n){"use strict";n.r(t),n.d(t,"GROUPS_ADMIN_LEVEL_USER",(function(){return r})),n.d(t,"GROUPS_ADMIN_LEVEL_MODERATOR",(function(){return o})),n.d(t,"GROUPS_ADMIN_LEVEL_EDITOR",(function(){return i})),n.d(t,"GROUPS_ADMIN_LEVEL_ADMINISTRATOR",(function(){return a})),n.d(t,"GROUPS_ADMIN_LEVEL_HOST",(function(){return s})),n.d(t,"GROUPS_ADMIN_LEVEL_EVENT_CREATOR",(function(){return c})),n.d(t,"GROUPS_ADMIN_LEVEL_CREATOR",(function(){return u})),n.d(t,"GROUPS_ADMIN_PSEUDO_LEVEL_ADVERTISER",(function(){return l})),n.d(t,"GROUPS_ADMIN_FLAG_ADS",(function(){return d})),n.d(t,"USER_META_FIELD_IS_DONUT_PAID_MEMBER",(function(){return _})),n.d(t,"GROUPS_CLASS_GROUP",(function(){return p})),n.d(t,"GROUPS_CLASS_PUBLIC",(function(){return h})),n.d(t,"GROUPS_CLASS_EVENT",(function(){return f}));var r=0,o=1,i=2,a=3,s=4,c=5,u=6,l=100,d=8,_="is_donut_paid_member";t.default={GROUPS_ADMIN_LEVEL_USER:r,GROUPS_ADMIN_LEVEL_MODERATOR:o,GROUPS_ADMIN_LEVEL_EDITOR:i,GROUPS_ADMIN_LEVEL_ADMINISTRATOR:a,GROUPS_ADMIN_LEVEL_HOST:s,GROUPS_ADMIN_LEVEL_EVENT_CREATOR:c,GROUPS_ADMIN_LEVEL_CREATOR:u,GROUPS_ADMIN_PSEUDO_LEVEL_ADVERTISER:l,GROUPS_ADMIN_FLAG_ADS:d};var p=0,h=1,f=2},o0NX:function(e,t,n){"use strict";n.r(t),n.d(t,"decodeHTMLEntities",(function(){return a})),n.d(t,"encodeHTMLEntities",(function(){return i})),n.d(t,"escape",(function(){return o})),n.d(t,"symbols",(function(){return r}));var r=[["&amp;","&"],["&lt;","<"],["&gt;",">"],["&quot;",'"']];function o(e){return r.reduce((function(e,t){var n=t[0],r=t[1];return e.replace(new RegExp(r,"ig"),n)}),e)}function i(e){return o(e).replace(/[\u00A0-\u9999<>\&]/gim,(function(e){return"&#"+e.charCodeAt(0)+";"}))}function a(e){return r.reduce((function(e,t){var n=t[0],r=t[1];return e.replace(new RegExp(n,"ig"),r)}),e).replace(/&#(\d+);/g,(function(e,t){return String.fromCodePoint(t)}))}},o4aG:function(e,t,n){"use strict";n.r(t),n.d(t,"Api",(function(){return fr})),n.d(t,"BaseApi",(function(){return Ze})),n.d(t,"BaseLogger",(function(){return et})),n.d(t,"BaseSignaling",(function(){return nt})),n.d(t,"CallType",(function(){return ot})),n.d(t,"ConversationOption",(function(){return at})),n.d(t,"DebugMessageType",(function(){return Rt})),n.d(t,"ExternalIdType",(function(){return Tn})),n.d(t,"HangupReason",(function(){return jn})),n.d(t,"HangupType",(function(){return lt})),n.d(t,"ParticipantStatus",(function(){return kt})),n.d(t,"Signaling",(function(){return br})),n.d(t,"SignalingCommandType",(function(){return vr})),n.d(t,"SignalingConnectionType",(function(){return ht})),n.d(t,"Utils",(function(){return Ht})),n.d(t,"acceptCall",(function(){return jr})),n.d(t,"addParticipant",(function(){return Ur})),n.d(t,"addParticipantInternal",(function(){return Fr})),n.d(t,"authorize",(function(){return xr})),n.d(t,"browser",(function(){return Er})),n.d(t,"call",(function(){return Pr})),n.d(t,"callInternal",(function(){return kr})),n.d(t,"callTo",(function(){return Dr})),n.d(t,"captureScreen",(function(){return Vr})),n.d(t,"changeConversationOptions",(function(){return so})),n.d(t,"changeDevice",(function(){return Kr})),n.d(t,"changeParticipantState",(function(){return Xr})),n.d(t,"changePriorities",(function(){return $r})),n.d(t,"changeVideoEffect",(function(){return So})),n.d(t,"chatHistory",(function(){return lo})),n.d(t,"chatMessage",(function(){return co})),n.d(t,"chatMessageInternal",(function(){return uo})),n.d(t,"createJoinLink",(function(){return fo})),n.d(t,"customData",(function(){return _o})),n.d(t,"customDataInternal",(function(){return po})),n.d(t,"debug",(function(){return Co})),n.d(t,"debugMessage",(function(){return To})),n.d(t,"declineCall",(function(){return Mr})),n.d(t,"forceRelayPolicy",(function(){return bo})),n.d(t,"getAnonymTokenByLink",(function(){return go})),n.d(t,"getStreamInfo",(function(){return wo})),n.d(t,"grantRoles",(function(){return Jr})),n.d(t,"grantRolesInternal",(function(){return Zr})),n.d(t,"hangup",(function(){return Nr})),n.d(t,"init",(function(){return Sr})),n.d(t,"joinCall",(function(){return Lr})),n.d(t,"joinCallByLink",(function(){return Br})),n.d(t,"joinCallInternal",(function(){return Rr})),n.d(t,"muteParticipant",(function(){return eo})),n.d(t,"muteParticipantInternal",(function(){return to})),n.d(t,"pinParticipant",(function(){return oo})),n.d(t,"pinParticipantInternal",(function(){return io})),n.d(t,"processPush",(function(){return Ar})),n.d(t,"processPushInternal",(function(){return Ir})),n.d(t,"removeJoinLink",(function(){return mo})),n.d(t,"removeParticipant",(function(){return Wr})),n.d(t,"removeParticipantInternal",(function(){return Hr})),n.d(t,"setApi",(function(){return wr})),n.d(t,"setLocalResolution",(function(){return Yr})),n.d(t,"setLogger",(function(){return Cr})),n.d(t,"setMediaModifiers",(function(){return ao})),n.d(t,"setSignalingFactory",(function(){return Or})),n.d(t,"setStatisticsInterval",(function(){return Oo})),n.d(t,"setVideoEffects",(function(){return Tr})),n.d(t,"setVideoStream",(function(){return qr})),n.d(t,"setVolume",(function(){return vo})),n.d(t,"startConversation",(function(){return ho})),n.d(t,"startStream",(function(){return yo})),n.d(t,"stopStream",(function(){return Eo})),n.d(t,"toggleLocalAudio",(function(){return zr})),n.d(t,"toggleLocalVideo",(function(){return Gr})),n.d(t,"unmuteRequest",(function(){return no})),n.d(t,"unmuteRequestInternal",(function(){return ro})),n.d(t,"updateDisplayLayout",(function(){return Qr}));var r={};n.r(r),n.d(r,"shimGetUserMedia",(function(){return E})),n.d(r,"shimGetDisplayMedia",(function(){return w})),n.d(r,"shimMediaStream",(function(){return O})),n.d(r,"shimOnTrack",(function(){return C})),n.d(r,"shimGetSendersWithDtmf",(function(){return T})),n.d(r,"shimGetStats",(function(){return S})),n.d(r,"shimSenderReceiverGetStats",(function(){return D})),n.d(r,"shimAddTrackRemoveTrackWithNative",(function(){return P})),n.d(r,"shimAddTrackRemoveTrack",(function(){return k})),n.d(r,"shimPeerConnection",(function(){return A})),n.d(r,"fixNegotiationNeeded",(function(){return I}));var o={};n.r(o),n.d(o,"shimGetUserMedia",(function(){return M})),n.d(o,"shimGetDisplayMedia",(function(){return L})),n.d(o,"shimPeerConnection",(function(){return R})),n.d(o,"shimReplaceTrack",(function(){return B}));var i={};n.r(i),n.d(i,"shimGetUserMedia",(function(){return N})),n.d(i,"shimGetDisplayMedia",(function(){return U})),n.d(i,"shimOnTrack",(function(){return F})),n.d(i,"shimPeerConnection",(function(){return W})),n.d(i,"shimSenderGetStats",(function(){return H})),n.d(i,"shimReceiverGetStats",(function(){return K})),n.d(i,"shimRemoveStream",(function(){return V})),n.d(i,"shimRTCDataChannel",(function(){return q})),n.d(i,"shimAddTransceiver",(function(){return G})),n.d(i,"shimGetParameters",(function(){return z})),n.d(i,"shimCreateOffer",(function(){return Y})),n.d(i,"shimCreateAnswer",(function(){return $}));var a={};n.r(a),n.d(a,"shimLocalStreamsAPI",(function(){return X})),n.d(a,"shimRemoteStreamsAPI",(function(){return Q})),n.d(a,"shimCallbacksAPI",(function(){return J})),n.d(a,"shimGetUserMedia",(function(){return Z})),n.d(a,"shimConstraints",(function(){return ee})),n.d(a,"shimRTCIceServerUrls",(function(){return te})),n.d(a,"shimTrackEventTransceiver",(function(){return ne})),n.d(a,"shimCreateOfferLegacy",(function(){return re})),n.d(a,"shimAudioContext",(function(){return oe}));var s={};n.r(s),n.d(s,"shimRTCIceCandidate",(function(){return se})),n.d(s,"shimMaxMessageSize",(function(){return ce})),n.d(s,"shimSendThrowTypeError",(function(){return ue})),n.d(s,"shimConnectionState",(function(){return le})),n.d(s,"removeAllowExtmapMixed",(function(){return de}));let c=!0,u=!0;function l(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function d(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,o=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return o.apply(this,arguments);const i=e=>{const t=n(e);t&&(r.handleEvent?r.handleEvent(t):r(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(r,i),o.apply(this,[e,i])};const i=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return i.apply(this,arguments);if(!this._eventMap[t].has(n))return i.apply(this,arguments);const r=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,i.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}function _(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(c=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function p(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(u=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function h(){if("object"==typeof window){if(c)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function f(e,t){u&&console.warn(e+" is deprecated, please use "+t+" instead.")}function m(e){const t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.mozGetUserMedia)t.browser="firefox",t.version=l(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=l(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(n.mediaDevices&&n.userAgent.match(/Edge\/(\d+).(\d+)$/))t.browser="edge",t.version=l(n.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=l(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}function g(e){return"[object Object]"===Object.prototype.toString.call(e)}function v(e){return g(e)?Object.keys(e).reduce((function(t,n){const r=g(e[n]),o=r?v(e[n]):e[n],i=r&&!Object.keys(o).length;return void 0===o||i?t:Object.assign(t,{[n]:o})}),{}):e}function b(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",o=new Map;if(null===t)return o;const i=[];return e.forEach(e=>{"track"===e.type&&e.trackIdentifier===t.id&&i.push(e)}),i.forEach(t=>{e.forEach(n=>{n.type===r&&n.trackId===t.id&&function e(t,n,r){n&&!r.has(n.id)&&(r.set(n.id,n),Object.keys(n).forEach(o=>{o.endsWith("Id")?e(t,t.get(n[o]),r):o.endsWith("Ids")&&n[o].forEach(n=>{e(t,t.get(n),r)})}))}(e,n,o)})}),o}const y=h;function E(e){const t=e&&e.navigator;if(!t.mediaDevices)return;const n=m(e),r=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;const t={};return Object.keys(e).forEach(n=>{if("require"===n||"advanced"===n||"mediaSource"===n)return;const r="object"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);const o=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];let e={};"number"==typeof r.ideal?(e[o("min",n)]=r.ideal,t.optional.push(e),e={},e[o("max",n)]=r.ideal,t.optional.push(e)):(e[o("",n)]=r.ideal,t.optional.push(e))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[o("",n)]=r.exact):["min","max"].forEach(e=>{void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[o(e,n)]=r[e])})}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},o=function(e,o){if(n.version>=61)return o(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){const t=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};t((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),t(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=r(e.audio)}if(e&&"object"==typeof e.video){let i=e.video.facingMode;i=i&&("object"==typeof i?i:{ideal:i});const a=n.version<66;if(i&&("user"===i.exact||"environment"===i.exact||"user"===i.ideal||"environment"===i.ideal)&&(!t.mediaDevices.getSupportedConstraints||!t.mediaDevices.getSupportedConstraints().facingMode||a)){let n;if(delete e.video.facingMode,"environment"===i.exact||"environment"===i.ideal?n=["back","rear"]:"user"!==i.exact&&"user"!==i.ideal||(n=["front"]),n)return t.mediaDevices.enumerateDevices().then(t=>{let a=(t=t.filter(e=>"videoinput"===e.kind)).find(e=>n.some(t=>e.label.toLowerCase().includes(t)));return!a&&t.length&&n.includes("back")&&(a=t[t.length-1]),a&&(e.video.deviceId=i.exact?{exact:a.deviceId}:{ideal:a.deviceId}),e.video=r(e.video),y("chrome: "+JSON.stringify(e)),o(e)})}e.video=r(e.video)}return y("chrome: "+JSON.stringify(e)),o(e)},i=function(e){return n.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(t.getUserMedia=function(e,n,r){o(e,e=>{t.webkitGetUserMedia(e,n,e=>{r&&r(i(e))})})}.bind(t),t.mediaDevices.getUserMedia){const e=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(t){return o(t,t=>e(t).then(e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach(e=>{e.stop()}),new DOMException("","NotFoundError");return e},e=>Promise.reject(i(e))))}}}function w(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then(t=>{const r=n.video&&n.video.width,o=n.video&&n.video.height,i=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:i||3}},r&&(n.video.mandatory.maxWidth=r),o&&(n.video.mandatory.maxHeight=o),e.navigator.mediaDevices.getUserMedia(n)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}function O(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function C(e){if("object"==typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(e=>e.track&&e.track.id===n.track.id):{track:n.track};const o=new Event("track");o.track=n.track,o.receiver=r,o.transceiver={receiver:r},o.streams=[t.stream],this.dispatchEvent(o)}),t.stream.getTracks().forEach(n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(e=>e.track&&e.track.id===n.id):{track:n};const o=new Event("track");o.track=n,o.receiver=r,o.transceiver={receiver:r},o.streams=[t.stream],this.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else d(e,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function T(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){let o=n.apply(this,arguments);return o||(o=t(this,e),this._senders.push(o)),o};const r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);const t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],n.apply(this,[e]),e.getTracks().forEach(e=>{this._senders.push(t(this,e))})};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],r.apply(this,[e]),e.getTracks().forEach(e=>{const t=this._senders.find(t=>t.track===e);t&&this._senders.splice(this._senders.indexOf(t),1)})}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function S(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,n,r]=arguments;if(arguments.length>0&&"function"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof e))return t.apply(this,[]);const o=function(e){const t={};return e.result().forEach(e=>{const n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach(t=>{n[t]=e.stat(t)}),t[n.id]=n}),t},i=function(e){return new Map(Object.keys(e).map(t=>[t,e[t]]))};if(arguments.length>=2){const r=function(e){n(i(o(e)))};return t.apply(this,[r,e])}return new Promise((e,n)=>{t.apply(this,[function(t){e(i(o(t)))},n])}).then(n,r)}}function D(e){if(!("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then(t=>b(t,e.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e}),d(e,"track",e=>(e.receiver._pc=e.srcElement,e)),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then(t=>b(t,e.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const e=arguments[0];let t,n,r;return this.getSenders().forEach(n=>{n.track===e&&(t?r=!0:t=n)}),this.getReceivers().forEach(t=>(t.track===e&&(n?r=!0:n=t),t.track===e)),r||t&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function P(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(e=>this._shimmedLocalStreams[e][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach(e=>{if(this.getSenders().find(t=>t.track===e))throw new DOMException("Track already exists.","InvalidAccessError")});const t=this.getSenders();n.apply(this,arguments);const r=this.getSenders().filter(e=>-1===t.indexOf(e));this._shimmedLocalStreams[e.id]=[e].concat(r)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};const o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach(t=>{const n=this._shimmedLocalStreams[t].indexOf(e);-1!==n&&this._shimmedLocalStreams[t].splice(n,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]}),o.apply(this,arguments)}}function k(e){if(!e.RTCPeerConnection)return;const t=m(e);if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return P(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=n.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map(e=>this._reverseStreams[e.id])};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach(e=>{if(this.getSenders().find(t=>t.track===e))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[t.id]){const n=new e.MediaStream(t.getTracks());this._streams[t.id]=n,this._reverseStreams[n.id]=t,t=n}r.apply(this,[t])};const o=e.RTCPeerConnection.prototype.removeStream;function i(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(t=>{const r=e._reverseStreams[t],o=e._streams[r.id];n=n.replace(new RegExp(o.id,"g"),r.id)}),new RTCSessionDescription({type:t.type,sdp:n})}function a(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(t=>{const r=e._reverseStreams[t],o=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),o.id)}),new RTCSessionDescription({type:t.type,sdp:n})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},o.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const r=[].slice.call(arguments,1);if(1!==r.length||!r[0].getTracks().find(e=>e===t))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");const o=this.getSenders().find(e=>e.track===t);if(o)throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const i=this._streams[n.id];if(i)i.addTrack(t),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const r=new e.MediaStream([t]);this._streams[n.id]=r,this._reverseStreams[r.id]=n,this.addStream(r)}return this.getSenders().find(e=>e.track===t)},["createOffer","createAnswer"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){const e=arguments;return arguments.length&&"function"==typeof arguments[0]?n.apply(this,[t=>{const n=i(this,t);e[0].apply(null,[n])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):n.apply(this,arguments).then(e=>i(this,e))}};e.RTCPeerConnection.prototype[t]=r[t]}));const s=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=a(this,arguments[0]),s.apply(this,arguments)):s.apply(this,arguments)};const c=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const e=c.get.apply(this);return""===e.type?e:i(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(e._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let t;this._streams=this._streams||{},Object.keys(this._streams).forEach(n=>{this._streams[n].getTracks().find(t=>e.track===t)&&(t=this._streams[n])}),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function A(e){const t=m(e);if(!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),!e.RTCPeerConnection)return;const n=0===e.RTCPeerConnection.prototype.addIceCandidate.length;t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]}));const r=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return n||arguments[0]?t.version<78&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}function I(e){const t=m(e);d(e,"negotiationneeded",e=>{const n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e})}var x=n("8D0k"),j=n.n(x);function M(e){const t=e&&e.navigator,n=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return n(e).catch(e=>Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString(){return this.name}}}(e)))}}function L(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}function R(e){const t=m(e);if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){const t=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set(e){t.set.call(this,e);const n=new Event("enabled");n.enabled=e,this.dispatchEvent(n)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);const n=j()(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=function(e,t){let n=!1;return(e=JSON.parse(JSON.stringify(e))).filter(e=>{if(e&&(e.urls||e.url)){let t=e.urls||e.url;e.url&&!e.urls&&f("RTCIceServer.url","RTCIceServer.urls");const r="string"==typeof t;return r&&(t=[t]),t=t.filter(e=>{if(0===e.indexOf("stun:"))return!1;const t=e.startsWith("turn")&&!e.startsWith("turn:[")&&e.includes("transport=udp");return t&&!n?(n=!0,!0):t&&!n}),delete e.url,e.urls=r?t[0]:t,!!t.length}})}(e.iceServers,t.version),h("ICE servers after filtering:",e.iceServers)),new n(e)},e.RTCPeerConnection.prototype=n.prototype}function B(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}function N(e){const t=m(e),n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,r){f("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,r)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const e=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},t=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(n){return"object"==typeof n&&"object"==typeof n.audio&&(n=JSON.parse(JSON.stringify(n)),e(n.audio,"autoGainControl","mozAutoGainControl"),e(n.audio,"noiseSuppression","mozNoiseSuppression")),t(n)},r&&r.prototype.getSettings){const t=r.prototype.getSettings;r.prototype.getSettings=function(){const n=t.apply(this,arguments);return e(n,"mozAutoGainControl","autoGainControl"),e(n,"mozNoiseSuppression","noiseSuppression"),n}}if(r&&r.prototype.applyConstraints){const t=r.prototype.applyConstraints;r.prototype.applyConstraints=function(n){return"audio"===this.kind&&"object"==typeof n&&(n=JSON.parse(JSON.stringify(n)),e(n,"autoGainControl","mozAutoGainControl"),e(n,"noiseSuppression","mozNoiseSuppression")),t.apply(this,[n])}}}}function U(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){const e=new DOMException("getDisplayMedia without video constraints is undefined");return e.name="NotFoundError",e.code=8,Promise.reject(e)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}function F(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function W(e){const t=m(e);if("object"!=typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;if(!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]})),t.version<68){const t=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?arguments[0]&&""===arguments[0].candidate?Promise.resolve():t.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,o,i]=arguments;return r.apply(this,[e||null]).then(e=>{if(t.version<53&&!o)try{e.forEach(e=>{e.type=n[e.type]||e.type})}catch(t){if("TypeError"!==t.name)throw t;e.forEach((t,r)=>{e.set(r,Object.assign({},t,{type:n[t.type]||t.type}))})}return e}).then(o,i)}}function H(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function K(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e}),d(e,"track",e=>(e.receiver._pc=e.srcElement,e)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function V(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){f("removeStream","removeTrack"),this.getSenders().forEach(t=>{t.track&&e.getTracks().includes(t.track)&&this.removeTrack(t)})})}function q(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function G(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const e=arguments[1],n=e&&"sendEncodings"in e;n&&e.sendEncodings.forEach(e=>{if("rid"in e){if(!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const r=t.apply(this,arguments);if(n){const{sender:t}=r,n=t.getParameters();(!("encodings"in n)||1===n.encodings.length&&0===Object.keys(n.encodings[0]).length)&&(n.encodings=e.sendEncodings,t.sendEncodings=e.sendEncodings,this.setParametersPromises.push(t.setParameters(n).then(()=>{delete t.sendEncodings}).catch(()=>{delete t.sendEncodings})))}return r})}function z(e){if("object"!=typeof e||!e.RTCRtpSender)return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}function Y(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function $(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function X(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach(n=>t.call(this,n,e)),e.getVideoTracks().forEach(n=>t.call(this,n,e))},e.RTCPeerConnection.prototype.addTrack=function(e,...n){return n&&n.forEach(e=>{this._localStreams?this._localStreams.includes(e)||this._localStreams.push(e):this._localStreams=[e]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(-1===t)return;this._localStreams.splice(t,1);const n=e.getTracks();this.getSenders().forEach(e=>{n.includes(e.track)&&this.removeTrack(e)})})}}function Q(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=e=>{e.streams.forEach(e=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(e))return;this._remoteStreams.push(e);const t=new Event("addstream");t.stream=e,this.dispatchEvent(t)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach(t=>{if(e._remoteStreams||(e._remoteStreams=[]),e._remoteStreams.indexOf(t)>=0)return;e._remoteStreams.push(t);const n=new Event("addstream");n.stream=t,e.dispatchEvent(n)})}),t.apply(e,arguments)}}}function J(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,o=t.setLocalDescription,i=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(e,t){const r=arguments.length>=2?arguments[2]:arguments[0],o=n.apply(this,[r]);return t?(o.then(e,t),Promise.resolve()):o},t.createAnswer=function(e,t){const n=arguments.length>=2?arguments[2]:arguments[0],o=r.apply(this,[n]);return t?(o.then(e,t),Promise.resolve()):o};let s=function(e,t,n){const r=o.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r};t.setLocalDescription=s,s=function(e,t,n){const r=i.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.setRemoteDescription=s,s=function(e,t,n){const r=a.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.addIceCandidate=s}function Z(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,n=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=e=>n(ee(e))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))}function ee(e){return e&&void 0!==e.video?Object.assign({},e,{video:v(e.video)}):e}function te(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){const t=[];for(let n=0;n<e.iceServers.length;n++){let r=e.iceServers[n];!r.hasOwnProperty("urls")&&r.hasOwnProperty("url")?(f("RTCIceServer.url","RTCIceServer.urls"),r=JSON.parse(JSON.stringify(r)),r.urls=r.url,delete r.url,t.push(r)):t.push(e.iceServers[n])}e.iceServers=t}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function ne(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function re(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find(e=>"audio"===e.receiver.track.kind);!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const n=this.getTransceivers().find(e=>"video"===e.receiver.track.kind);!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveVideo||n||this.addTransceiver("video")}return t.apply(this,arguments)}}function oe(e){"object"!=typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var ie=n("KCt4"),ae=n.n(ie);function se(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){const n=new t(e),r=ae.a.parseCandidate(e.candidate),o=Object.assign(n,r);return o.toJSON=function(){return{candidate:o.candidate,sdpMid:o.sdpMid,sdpMLineIndex:o.sdpMLineIndex,usernameFragment:o.usernameFragment}},o}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,d(e,"icecandidate",t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t))}function ce(e){if(!e.RTCPeerConnection)return;const t=m(e);"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const n=function(e){if(!e||!e.sdp)return!1;const t=ae.a.splitSections(e.sdp);return t.shift(),t.some(e=>{const t=ae.a.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")})},r=function(e){const t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;const n=parseInt(t[1],10);return n!=n?-1:n},o=function(e){let n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n},i=function(e,n){let r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);const o=ae.a.matchPrefix(e.sdp,"a=max-message-size:");return o.length>0?r=parseInt(o[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r},a=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){const{sdpSemantics:e}=this.getConfiguration();"plan-b"===e&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const e=r(arguments[0]),t=o(e),n=i(arguments[0],e);let a;a=0===t&&0===n?Number.POSITIVE_INFINITY:0===t||0===n?Math.max(t,n):Math.min(t,n);const s={};Object.defineProperty(s,"maxMessageSize",{get:()=>a}),this._sctp=s}return a.apply(this,arguments)}}function ue(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function t(e,t){const n=e.send;e.send=function(){const r=arguments[0],o=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&o>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const e=n.apply(this,arguments);return t(e,this),e},d(e,"datachannel",e=>(t(e.channel,e.target),e))}function le(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(e=>{const n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;const n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}})}function de(e){if(!e.RTCPeerConnection)return;const t=m(e);if("chrome"===t.browser&&t.version>=71)return;if("safari"===t.browser&&t.version>=605)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(e){return e&&e.sdp&&-1!==e.sdp.indexOf("\na=extmap-allow-mixed")&&(e.sdp=e.sdp.split("\n").filter(e=>"a=extmap-allow-mixed"!==e.trim()).join("\n")),n.apply(this,arguments)}}!function({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0}){const n=h,c=m(e),u={browserDetails:c,commonShim:s,extractVersion:l,disableLog:_,disableWarnings:p};switch(c.browser){case"chrome":if(!r||!A||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),u;if(null===c.version)return n("Chrome shim can not determine version, not shimming."),u;n("adapter.js shimming chrome."),u.browserShim=r,E(e),O(e),A(e),C(e),k(e),T(e),S(e),D(e),I(e),se(e),le(e),ce(e),ue(e),de(e);break;case"firefox":if(!i||!W||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),u;n("adapter.js shimming firefox."),u.browserShim=i,N(e),W(e),F(e),V(e),H(e),K(e),q(e),G(e),z(e),Y(e),$(e),se(e),le(e),ce(e),ue(e);break;case"edge":if(!o||!R||!t.shimEdge)return n("MS edge shim is not included in this adapter release."),u;n("adapter.js shimming edge."),u.browserShim=o,M(e),L(e),R(e),B(e),ce(e),ue(e);break;case"safari":if(!a||!t.shimSafari)return n("Safari shim is not included in this adapter release."),u;n("adapter.js shimming safari."),u.browserShim=a,te(e),re(e),J(e),X(e),Q(e),ne(e),Z(e),oe(e),se(e),ce(e),ue(e),de(e);break;default:n("Unsupported browser!")}}({window:"undefined"==typeof window?void 0:window});var _e=n("dAlA"),pe=n.n(_e),he=n("9XzT");function fe(e,t){throw new TypeError(`unexpected tag 0x${e.toString(16)} (${t} expected)`)}function me(e){return 127&e}function ge(e){return 0==(128&e)}function ve(e){return 224==(224&e)}function be(e){return 160==(224&e)}function ye(e){return 144==(240&e)}function Ee(e){return 128==(240&e)}function we(e,t,n){const r=t.byteLength;if(r<=255)e.putUi8(n),e.putUi8(r);else if(r<=65535)e.putUi8(n+1),e.putUi16(r);else{if(!(r<=4294967295))throw new RangeError("length limit exceeded");e.putUi8(n+2),e.putUi32(r)}e.put(t)}function Oe(e){const t=e.getUi8();let n;switch(t){case 192:n=0;break;case 196:case 217:n=e.getUi8();break;case 197:case 218:n=e.getUi16();break;case 198:case 219:n=e.getUi32();break;default:be(t)||fe(t,"bytes or string"),n=function(e){return 31&e}(t)}return e.get(n)}function Ce(e,t){t<16?e.putUi8(144|15&t):Pe(e,220,t)}function Te(e,t){const n=e.getUi8(),r=ye(n)?function(e){return 15&e}(n):ke(e,n,220,"array");if(null!=t&&r!==t)throw new Error("invalid array header size "+r);return r}function Se(e,t){t<16?e.putUi8(128|15&t):Pe(e,222,t)}function De(e,t){const n=e.getUi8(),r=Ee(n)?function(e){return 15&e}(n):ke(e,n,222,"map");if(null!=t&&r!==t)throw new Error("invalid map header size "+r);return r}function Pe(e,t,n){if(n<=65535)e.putUi8(t),e.putUi16(n);else{if(!(n<=4294967295))throw new RangeError("length limit exceeded");e.putUi8(t+1),e.putUi32(n)}}function ke(e,t,n,r){switch(t){case 192:return 0;case n:return e.getUi16();case n+1:return e.getUi32();default:fe(t,r)}}const Ae={enc(e,t){(function(e){switch(typeof e){case"undefined":return Ie;case"boolean":return xe;case"number":return isFinite(e)&&Math.floor(e)===e?e<0?je:Me:Le;case"string":return Be;case"object":return null===e?Ie:Array.isArray(e)?Ue:e instanceof Uint8Array||e instanceof ArrayBuffer?Re:e instanceof Date?Ne:We;default:throw new TypeError("unsupported type "+typeof e)}})(t).enc(e,t)},dec:e=>function(e){switch(e){case 192:return Ie;case 194:case 195:return xe;case 208:case 209:case 210:case 211:return je;case 204:case 205:case 206:case 207:return Me;case 202:case 203:return Le;case 196:case 197:case 198:return Re;case 217:case 218:case 219:return Be;case 220:case 221:return Ue;case 222:case 223:return We;case 214:case 215:case 199:return Ne;default:if(ge(e)||ve(e))return je;if(be(e))return Be;if(ye(e))return Ue;if(Ee(e))return We;throw new TypeError("unsupported tag "+e)}}(e.peek()).dec(e)},Ie={enc(e,t){e.putUi8(192)},dec(e){const t=e.getUi8();return 192!==t&&fe(t,"nil"),null}},xe={enc(e,t){e.putUi8(t?195:194)},dec(e){const t=e.getUi8();switch(t){case 192:case 194:return!1;case 195:return!0;default:fe(t,"bool")}}},je={enc(e,t){-128<=t&&t<=127?t>=0?e.putUi8(me(t)):t>-32?e.putUi8(224|31&t):(e.putUi8(208),e.putUi8(t)):-32768<=t&&t<=32767?(e.putI8(209),e.putI16(t)):-2147483648<=t&&t<=2147483647?(e.putI8(210),e.putI32(t)):(e.putI8(211),e.putI64(t))},dec(e){const t=e.getUi8();if(ge(t))return function(e){return 127&e}(t);if(ve(t))return function(e){return e-256}(t);switch(t){case 192:return 0;case 208:return e.getI8();case 209:return e.getI16();case 210:return e.getI32();case 211:return e.getI64();case 204:return e.getUi8();case 205:return e.getUi16();case 206:return e.getUi32();case 207:return e.getUi64();default:fe(t,"int")}}},Me={enc(e,t){if(t<0)throw new Error("not an uint: "+t);t<=127?e.putUi8(me(t)):t<=255?(e.putUi8(204),e.putUi8(t)):t<=65535?(e.putUi8(205),e.putUi16(t)):t<=4294967295?(e.putUi8(206),e.putUi32(t)):(e.putUi8(207),e.putUi64(t))},dec(e){const t=je.dec(e);if(t<0)throw new RangeError("uint underflow");return t}},Le={enc(e,t){e.putUi8(203),e.putF(t)},dec(e){const t=e.getUi8();switch(t){case 192:return 0;case 202:return e.getF32();case 203:return e.getF64();default:fe(t,"float")}}},Re={enc(e,t){we(e,t,196)},dec:Oe},Be={enc(e,t){const n=function(e){const t=e.length,n=new Uint8Array(4*t);let r,o=0,i=0;for(;i<t;)r=e.charCodeAt(i++),55296==(64512&r)&&(r=(r<<10)+e.charCodeAt(i++)-56613888),r<128?n[o++]=r:r<2048?(n[o++]=192+(r>>6),n[o++]=128+(63&r)):r<65536?(n[o++]=224+(r>>12),n[o++]=128+(r>>6&63),n[o++]=128+(63&r)):(n[o++]=240+(r>>18),n[o++]=128+(r>>12&63),n[o++]=128+(r>>6&63),n[o++]=128+(63&r));return n.buffer.slice(0,o)}(t);n.byteLength<32?(e.putUi8(160|31&n.byteLength),e.put(n)):we(e,n,217)},dec:e=>function(e){return new TextDecoder("utf-8").decode(e)}(Oe(e))},Ne={enc(e,t){const n=t.getTime();e.putUi8(199),e.putUi8(12),e.putI8(-1),e.putUi32(n%1e3*1e6),e.putI64(n/1e3)},dec(e){const t=e.getUi8();switch(t){case 214:if(-1===e.getI8())return new Date(1e3*e.getUi32());break;case 215:if(-1===e.getI8()){const t=e.getUi32(),n=e.getUi32();return new Date(1e3*(n+4294967296*(3&t))+t/4e6)}break;case 199:if(12===e.getUi8()&&-1===e.getI8()){const t=e.getUi32(),n=e.getI64();return new Date(1e3*n+t/1e6)}}fe(t,"time")}},Ue=(Fe=Ae,{encHeader:Ce,decHeader:Te,enc(e,t){Ce(e,t.length),t.forEach(t=>Fe.enc(e,t))},dec(e){const t=[];for(let n=Te(e);n>0;--n)t.push(Fe.dec(e));return t}});var Fe;const We=function(e,t){return{encHeader:Se,decHeader:De,enc(n,r){const o=Object.keys(r);Se(n,o.length),o.forEach(o=>{e.enc(n,o),t.enc(n,r[o])})},dec(n){const r={};for(let o=De(n);o>0;--o){r[e.dec(n)]=t.dec(n)}return r}}}(Ae,Ae);function He(e,t){return(t||Ae).dec(function(e){let t=ArrayBuffer.isView(e)?new DataView(e.buffer,e.byteOffset,e.byteLength):new DataView(e),n=0;return{peek:()=>t.getUint8(n),get(e){n+=e;const r=t.byteOffset;return t.buffer.slice(r+n-e,r+n)},getI8:()=>t.getInt8(n++),getI16:()=>(n+=2,t.getInt16(n-2)),getI32:()=>(n+=4,t.getInt32(n-4)),getI64:()=>(n+=8,4294967296*t.getInt32(n-8)+t.getUint32(n-4)),getUi8:()=>t.getUint8(n++),getUi16:()=>(n+=2,t.getUint16(n-2)),getUi32:()=>(n+=4,t.getUint32(n-4)),getUi64:()=>(n+=8,4294967296*t.getUint32(n-8)+t.getUint32(n-4)),getF32:()=>(n+=4,t.getFloat32(n-4)),getF64:()=>(n+=8,t.getFloat64(n-8))}}(e))}var Ke=n("zvoO"),Ve=n.n(Ke),qe=function(e,t){return(qe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function Ge(e,t){function n(){this.constructor=e}qe(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var ze=function(){return(ze=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function Ye(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}function $e(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function Xe(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}var Qe,Je,Ze=function(){function e(){}return e.prototype.createJoinLink=function(e){return Ye(this,void 0,void 0,(function(){return $e(this,(function(e){return[2,{join_link:"nop"}]}))}))},e.prototype.removeJoinLink=function(e){return Ye(this,void 0,void 0,(function(){return $e(this,(function(e){return[2,{success:!0}]}))}))},e.prototype.getAnonymTokenByLink=function(e,t){return Ye(this,void 0,void 0,(function(){return $e(this,(function(e){return[2,""]}))}))},e.prototype.log=function(e){},e.prototype.prepareUserIds=function(e){return Ye(this,void 0,void 0,(function(){return $e(this,(function(e){return[2]}))}))},e.prototype.hangupConversation=function(e){},e.prototype.cleanup=function(){},e}(),et=function(){function e(){}return e.prototype.log=function(e,t,n){},e.prototype.destroy=function(){},e}(),tt=function(){function e(){this._handlers={},this._listeners=[],this.EVENT_LOG="EVENT_LOG"}return e.prototype._triggerEvent=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this._handlers.hasOwnProperty(e)&&this._handlers[e].slice().forEach((function(e){e.apply(t,n)}))},e.prototype.addEventListener=function(e,t){if("function"!=typeof t)throw new Error("Listener should be a function");return this._handlers.hasOwnProperty(e)||(this._handlers[e]=[]),this._handlers[e].push(t),{dispose:this.removeEventListener.bind(this,e,t)}},e.prototype.removeEventListener=function(e,t){if(this._handlers.hasOwnProperty(e)){t||delete this._handlers[e];var n=this._handlers[e].indexOf(t);n>=0&&this._handlers[e].splice(n,1)}},e.prototype.subscribe=function(e,t,n){var r=e.addEventListener(t,n);this._listeners.push(r)},e.prototype.unsubscribe=function(){this._listeners.forEach((function(e){e.dispose()}))},e.prototype.log=function(e,t,n){void 0===n&&(n=!1),this._triggerEvent(this.EVENT_LOG,e,t,n)},e.prototype.onLog=function(e,t){this.subscribe(e,this.EVENT_LOG,t)},e}(),nt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ge(t,e),t.prototype.setParticipantIdRegistry=function(e){},t.prototype.requestRealloc=function(e){},t.prototype.setEndpoint=function(e){},t.prototype.setConversationId=function(e){},t.prototype.readyToSend=function(){},t}(tt);(Je=Qe||(Qe={})).USER="USER",Je.GROUP="GROUP",Je.CHAT="CHAT";var rt,ot=Qe;!function(e){e.REQUIRE_AUTH_TO_JOIN="REQUIRE_AUTH_TO_JOIN"}(rt||(rt={}));var it,at=rt;!function(e){e.CAMERA_PERMISSION="camera",e.MIC_PERMISSION="mic",e.CAMERA_ACCESS="cameralock",e.MIC_ACCESS="miclock",e.MIC_NOT_FOUND="nomic",e.SCREEN_PERMISSION="screenpermission",e.SCREEN_ACCESS="screenlock",e.CONNECTION="connection",e.NETWORK="network",e.UNKNOWN="unknown",e.UNSUPPORTED="unsupported",e.SIGNALING_FAILED="signalingfailed",e.API="api",e.AUTH="auth"}(it||(it={}));var st,ct=it;!function(e){e.CANCELED="CANCELED",e.REJECTED="REJECTED",e.REMOVED="REMOVED",e.HUNGUP="HUNGUP",e.MISSED="MISSED",e.BUSY="BUSY",e.FAILED="FAILED",e.NETWORK_ERROR="NETWORK_ERROR",e.CALLER_IS_BLOCKED="CALLER_IS_BLOCKED",e.NOT_FRIENDS="NOT_FRIENDS",e.CALLEE_IS_OFFLINE="CALLEE_IS_OFFLINE",e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.UNSUPPORTED="UNSUPPORTED",e.OLD_VERSION="OLD_VERSION",e.SERVICE_DISABLED="SERVICE_DISABLED",e.EXTERNAL_API_ERROR="EXTERNAL_API_ERROR",e.SOCKET_CLOSED="SOCKET_CLOSED"}(st||(st={}));var ut,lt=st;!function(e){e.AUDIO="AUDIO",e.VIDEO="VIDEO"}(ut||(ut={}));var dt,_t=ut;!function(e){e.START="start",e.ACCEPT="accept",e.JOIN="join",e.RETRY="retry"}(dt||(dt={}));var pt,ht=dt;!function(e){e.CREATOR="CREATOR",e.ADMIN="ADMIN"}(pt||(pt={}));var ft=pt;function mt(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e;n<r.length;n++){var o=r[n];if(!t.includes(o))return!1}return!0}var gt,vt,bt,yt=function(){function e(){this._items=[]}return Object.defineProperty(e.prototype,"length",{get:function(){return this._items.length},enumerable:!1,configurable:!0}),e.prototype.push=function(e){this._items.push(e)},e.prototype.shift=function(){return this._items.shift()||null},e.prototype.bisect=function(){var e=this.length>1?Math.floor(this.length/2):1;this._items=this._items.slice(e)},e.prototype.clear=function(){this._items=[]},e.prototype.toString=function(){return this._items.length?JSON.stringify(this._items):""},e}(),Et=function(){function e(){this._items=[],this._itemsSize=0,this._storageSize=2097152;try{for(var e=window.localStorage,t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];if(0===r.indexOf("_okcls_logs_session_")){var o=e.getItem(r);if(o){var i=Ot(o);this.add(r,i)}else Ct(r)}}}catch(e){console.error("Storage is blocked",e),this._storageSize=0}this._items.sort((function(e,t){return e.date-t.date})),this.cleanup(102400)}return Object.defineProperty(e.prototype,"size",{get:function(){return this._itemsSize},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._items.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"available",{get:function(){return Math.max(this._storageSize-this._itemsSize,0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._items},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"storageSize",{set:function(e){this._storageSize=e},enumerable:!1,configurable:!0}),e.prototype.add=function(e,t){var n=parseInt(e.replace("_okcls_logs_session_",""),10);this._itemsSize+=t,this._items.push({key:e,size:t,date:n})},e.prototype.deleteOldestItem=function(){var e=this._items.shift();e&&(Ct(e.key),this._itemsSize-=e.size)},e.prototype.cleanup=function(e){for(;this.length&&(this.size>2097152||this.length>4||this.size+e>this.available);)this.deleteOldestItem()},e}();function wt(){return"_okcls_logs_session_"+Date.now()}function Ot(e){return new Blob([e]).size}function Ct(e){try{window.localStorage.removeItem(e)}catch(e){console.error("Failed to remove log from storage",e)}}function Tt(){gt.available&&vt.length&&function e(){var t=vt.toString();if(gt.available&&t){var n=Ot(t);gt.cleanup(n);try{window.localStorage.setItem(bt,t)}catch(t){return console.warn("Failed to write log to storage",t),gt.storageSize=gt.size+n,gt.cleanup(102400+n),gt.available>=102400+n?void e():n>102400?(vt.bisect(),void e()):void(gt.storageSize=0)}n>524288&&(gt.add(bt,n),bt=wt(),vt.clear(),gt.cleanup(102400))}}()}function St(e,t){gt.available&&(vt.push({t:Date.now(),l:e,d:t}),Pt||(Pt=window.setTimeout((function(){Pt=null,Tt()}),3e4)))}function Dt(){gt||(gt=new Et,vt=new yt,bt=wt(),window.addEventListener("beforeunload",Tt))}var Pt=null;window.__OKCallsSDKLogs__=function(){gt||Dt(),Tt(),function(){var e,t,n,r,o=[];try{for(var i=window.localStorage,a=0,s=gt.items;a<s.length;a++){var c=s[a],u=i.getItem(c.key);o.push(u)}var l=vt.toString();l&&o.push(l)}catch(o){console.error("Storage is blocked",o)}e="["+o.join(",")+"]",t="logs_"+Date.now()+".json",n=document.createElement("a"),r=new Blob([e],{type:"text/json"}),n.href=URL.createObjectURL(r),n.download=t,n.click()}()};var kt,At,It=function(){function e(){}return Object.defineProperty(e,"sessionKey",{get:function(){return e._sessionKey},set:function(t){e._sessionKey=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"sessionSecretKey",{get:function(){return e._sessionSecretKey},set:function(t){e._sessionSecretKey=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"accessToken",{get:function(){return e._accessToken},set:function(t){e._accessToken=t},enumerable:!1,configurable:!0}),e.isEmpty=function(){return!e._sessionKey||!e._sessionSecretKey},e}(),xt=function(){function e(){}return e.set=function(t){t.hasOwnProperty("voiceParams")&&(Object.assign(e._params.voiceParams,t.voiceParams),delete t.voiceParams),t.hasOwnProperty("specListenerParams")&&(Object.assign(e._params.specListenerParams,t.specListenerParams),delete t.specListenerParams),t.hasOwnProperty("unifiedPlanBrowsers")&&(Object.assign(e._params.unifiedPlanBrowsers,t.unifiedPlanBrowsers),delete t.unifiedPlanBrowsers),t.hasOwnProperty("apiAuth")&&(It.accessToken=t.apiAuth.accessToken,It.sessionKey=t.apiAuth.sessionKey,It.sessionSecretKey=t.apiAuth.sessionSecretKey),Object.assign(e._params,t)},e.get=function(t){return e._params[t]},Object.defineProperty(e,"appName",{get:function(){return e._params.appName},enumerable:!1,configurable:!0}),Object.defineProperty(e,"appVersion",{get:function(){return e._params.appVersion},enumerable:!1,configurable:!0}),Object.defineProperty(e,"protocolVersion",{get:function(){return e._params.protocolVersion},enumerable:!1,configurable:!0}),Object.defineProperty(e,"platform",{get:function(){return e._params.platform},set:function(t){e._params.platform=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"clientType",{get:function(){return e._params.clientType},set:function(t){e._params.clientType=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"device",{get:function(){return e._params.device},enumerable:!1,configurable:!0}),Object.defineProperty(e,"apiAppId",{get:function(){return e._params.apiAppId},enumerable:!1,configurable:!0}),Object.defineProperty(e,"apiKey",{get:function(){return e._params.apiKey},enumerable:!1,configurable:!0}),Object.defineProperty(e,"apiEnv",{get:function(){switch(e._params.apiEnv){case"TEST":return{api:"https://apitest.ok.ru/api/",connect:"https://test.ok.ru/"};case"VIDEOTEST":return{api:"https://videotestapi.ok.ru/api/",connect:"https://test.ok.ru/"};case"DEV":return{api:"https://1.api.an-eremeev.devdc.odkl.ru/api/",connect:"https://1.web.an-eremeev.devdc.odkl.ru/"};default:return{api:"https://api.ok.ru/",connect:"https://connect.ok.ru/"}}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"authToken",{get:function(){return e._params.authToken},set:function(t){e._params.authToken=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"anonymToken",{get:function(){return e._params.anonymToken},set:function(t){e._params.anonymToken=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"domain",{get:function(){return e._params.domain},enumerable:!1,configurable:!0}),Object.defineProperty(e,"iceServers",{get:function(){return e._params.iceServers},set:function(t){e._params.iceServers=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"wssBase",{get:function(){return e._params.wssBase},set:function(t){e._params.wssBase=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"wssToken",{get:function(){return e._params.wssToken},set:function(t){e._params.wssToken=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"signalingReconnectDelay",{get:function(){return e._params.signalingReconnectDelay},enumerable:!1,configurable:!0}),Object.defineProperty(e,"signalingReconnectMaxDelay",{get:function(){return e._params.signalingReconnectMaxDelay},enumerable:!1,configurable:!0}),Object.defineProperty(e,"signalingReconnectMaxCount",{get:function(){return e._params.signalingReconnectMaxCount},enumerable:!1,configurable:!0}),Object.defineProperty(e,"waitConnectionDelay",{get:function(){return e._params.waitConnectionDelay},enumerable:!1,configurable:!0}),Object.defineProperty(e,"waitResponseDelay",{get:function(){return e._params.waitResponseDelay},enumerable:!1,configurable:!0}),Object.defineProperty(e,"waitMessageDelay",{get:function(){return e._params.waitMessageDelay},enumerable:!1,configurable:!0}),Object.defineProperty(e,"debugLog",{get:function(){return e._params.debugLog},enumerable:!1,configurable:!0}),Object.defineProperty(e,"forceRelayPolicy",{get:function(){return e._params.forceRelayPolicy},set:function(t){e._params.forceRelayPolicy=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"videoMinWidth",{get:function(){return e._params.videoMinWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e,"videoMaxWidth",{get:function(){return e._params.videoMaxWidth},set:function(t){e._params.videoMaxWidth=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"videoMinHeight",{get:function(){return e._params.videoMinHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e,"videoMaxHeight",{get:function(){return e._params.videoMaxHeight},set:function(t){e._params.videoMaxHeight=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"videoAspectRatio",{get:function(){return e._params.videoAspectRatio},enumerable:!1,configurable:!0}),Object.defineProperty(e,"videoFrameRate",{get:function(){return e._params.videoFrameRate},enumerable:!1,configurable:!0}),Object.defineProperty(e,"videoFacingMode",{get:function(){return e._params.videoFacingMode},enumerable:!1,configurable:!0}),Object.defineProperty(e,"screenFrameRate",{get:function(){return e._params.screenFrameRate},enumerable:!1,configurable:!0}),Object.defineProperty(e,"videoEffects",{get:function(){return e._params.videoEffects},set:function(t){e._params.videoEffects=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"videoEffectMaxWidth",{get:function(){return e._params.videoEffectMaxWidth},set:function(t){e._params.videoEffectMaxWidth=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"videoEffectMaxHeight",{get:function(){return e._params.videoEffectMaxHeight},set:function(t){e._params.videoEffectMaxHeight=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"voiceParams",{get:function(){return e._params.voiceParams},enumerable:!1,configurable:!0}),Object.defineProperty(e,"specListenerParams",{get:function(){return e._params.specListenerParams},enumerable:!1,configurable:!0}),Object.defineProperty(e,"iceRestartWaitTime",{get:function(){return e._params.iceRestartWaitTime},enumerable:!1,configurable:!0}),Object.defineProperty(e,"transportConnectionWaitTime",{get:function(){return e._params.transportConnectionWaitTime},enumerable:!1,configurable:!0}),Object.defineProperty(e,"statisticsInterval",{get:function(){return e._params.statisticsInterval},set:function(t){e._params.statisticsInterval=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"perfStatReportEnabled",{get:function(){return e._params.perfStatReportEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(e,"allowMissingMic",{get:function(){return e._params.allowMissingMic},enumerable:!1,configurable:!0}),Object.defineProperty(e,"producerNotificationDataChannel",{get:function(){return e._params.producerNotificationDataChannel},enumerable:!1,configurable:!0}),Object.defineProperty(e,"producerCommandDataChannel",{get:function(){return e._params.producerCommandDataChannel},enumerable:!1,configurable:!0}),Object.defineProperty(e,"consumerScreenDataChannel",{get:function(){return e._params.consumerScreenDataChannel},set:function(t){e._params.consumerScreenDataChannel=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"badConnectionRating",{get:function(){return e._params.badConnectionRating},enumerable:!1,configurable:!0}),Object.defineProperty(e,"noiseSuppression",{get:function(){return e._params.noiseSuppression},set:function(t){e._params.noiseSuppression=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"preferH264",{get:function(){return e._params.preferH264},enumerable:!1,configurable:!0}),Object.defineProperty(e,"preferVP9",{get:function(){return e._params.preferVP9},enumerable:!1,configurable:!0}),e.isUnifiedPlanSupported=function(t,n){var r=e._params.unifiedPlanBrowsers;return!!r.hasOwnProperty(t)&&n>=r[t]},Object.defineProperty(e,"unifiedPlanInterop",{get:function(){return e._params.unifiedPlanInterop},enumerable:!1,configurable:!0}),Object.defineProperty(e,"onDemandTracks",{get:function(){return e._params.onDemandTracks},enumerable:!1,configurable:!0}),Object.defineProperty(e,"singleSession",{get:function(){return e._params.singleSession},enumerable:!1,configurable:!0}),e._params={appName:"ok.calls.sdk.js",appVersion:1.1,protocolVersion:3,platform:"WEB",clientType:"PORTAL",device:"browser",apiAppId:42,apiKey:"",authToken:"",anonymToken:"",apiEnv:"PROD",domain:"",iceServers:[],wssBase:"",wssToken:"",signalingReconnectDelay:1e3,signalingReconnectMaxDelay:5e3,signalingReconnectMaxCount:20,waitConnectionDelay:1e4,waitResponseDelay:1e4,waitMessageDelay:15e3,debugLog:!1,forceRelayPolicy:!1,videoMinWidth:428,videoMinHeight:240,videoMaxWidth:1280,videoMaxHeight:720,videoAspectRatio:16/9,videoFrameRate:25,screenFrameRate:5,videoEffects:null,videoEffectMaxWidth:640,videoEffectMaxHeight:360,iceRestartWaitTime:2e4,transportConnectionWaitTime:5e3,statisticsInterval:5e3,perfStatReportEnabled:!0,voiceParams:{smoothing:.8,minFreq:200,maxFreq:5e3,interval:500,threshold:.35,speakerLevelMultiplier:1.8},specListenerParams:{connectionTimeout:1e4,volumeTimeout:1e4},unifiedPlanBrowsers:{Firefox:10,Chrome:76,Safari:12},unifiedPlanInterop:!0,allowMissingMic:!1,producerNotificationDataChannel:!1,producerCommandDataChannel:!1,consumerScreenDataChannel:!1,badConnectionDetector:!1,badConnectionAudioBitrate:2e3,badConnectionSilenceBitrate:800,badConnectionVideoBitrate:3e4,badConnectionRating:.65,noiseSuppression:!0,preferH264:!0,preferVP9:!1,onDemandTracks:!1,singleSession:!1},e}();function jt(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=xt.get(e);r&&r.apply(null,t)}function Mt(e){return Object.assign({},e)}function Lt(e){return e.slice()}!function(e){e.WAITING="WAITING",e.CONNECTING="CONNECTING",e.CONNECTED="CONNECTED",e.RECONNECT="RECONNECT",e.ERROR="ERROR",e.HANGUP="HANGUP",e.PERMISSIONS="PERMISSIONS"}(kt||(kt={})),function(e){e.onLocalStream=function(e,t){jt("onLocalStream",e,Mt(t))},e.onLocalStreamUpdate=function(e,t){jt("onLocalStreamUpdate",Mt(e),t)},e.onLocalStatus=function(e){jt("onLocalStatus",e)},e.onRemoteStream=function(e,t){jt("onRemoteStream",e,t)},e.onConversation=function(e,t){jt("onConversation",e,Mt(t))},e.onRemoteMediaSettings=function(e,t){jt("onRemoteMediaSettings",e,Mt(t))},e.onRemoteParticipantState=function(e,t){jt("onRemoteParticipantState",e,Mt(t))},e.onParticipantStatus=function(e,t,n){void 0===n&&(n=null),jt("onParticipantStatus",e,t,n)},e.onPermissionsRequested=function(){jt("onPermissionsRequested")},e.onPermissionsError=function(e){jt("onPermissionsError",e)},e.onRemoteRemoved=function(e){jt("onRemoteRemoved",e)},e.onCallState=function(e,t,n){jt("onCallState",e,t,Mt(n))},e.onDeviceSwitched=function(e,t){jt("onDeviceSwitched",e,t)},e.onUnmuteRequest=function(e){jt("onUnmuteRequest",e)},e.onUnmutePermission=function(e){jt("onUnmutePermission",e)},e.onRolesChanged=function(e,t){jt("onRolesChanged",e,Lt(t))},e.onLocalRolesChanged=function(e){jt("onLocalRolesChanged",Lt(e))},e.onPinnedParticipant=function(e,t){jt("onPinnedParticipant",e,t)},e.onLocalPin=function(e){jt("onLocalPin",e)},e.onOptionsChanged=function(e){jt("onOptionsChanged",Lt(e))},e.onCallAccepted=function(){jt("onCallAccepted")},e.onRateNeeded=function(){jt("onRateNeeded")},e.onSpeakerChanged=function(e){jt("onSpeakerChanged",e)},e.onVolumesDetected=function(e){jt("onVolumesDetected",Lt(e))},e.onLocalVolume=function(e,t){jt("onLocalVolume",e,t)},e.onJoinStatus=function(e,t){jt("onJoinStatus",e,t)},e.onHangup=function(e,t){jt("onHangup",e,t)},e.onMultipartyChatCreated=function(e){jt("onMultipartyChatCreated",Mt(e))},e.onDeviceChange=function(){jt("onDeviceChange")},e.onFingerprintChange=function(e){jt("onFingerprintChange",e)},e.onTokenExpired=function(){jt("onTokenExpired")},e.onChatMessage=function(e,t,n){void 0===n&&(n=!1),jt("onChatMessage",e,t,n)},e.onCustomData=function(e,t,n){void 0===n&&(n=!1),jt("onCustomData",e,t,n)},e.onRecordStarted=function(e,t,n,r,o,i){jt("onRecordStarted",e,t,n,r,o,i)},e.onRecordStopped=function(){jt("onRecordStopped")},e.onNetworkStatus=function(e){jt("onNetworkStatus",e)},e.onLocalNetworkStatusChanged=function(e){jt("onLocalNetworkStatusChanged",e)},e.onNetworkStatusChanged=function(e){jt("onNetworkStatusChanged",e)},e.onDebugMessage=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];jt.apply(void 0,Xe(["onDebugMessage",e],t))},e.onStatistics=function(e,t){jt("onStatistics",Object.assign({},e,{memory:t}))},e.onAutoplayError=function(){jt("onAutoplayError")}}(At||(At={}));var Rt,Bt,Nt=At;!function(e){e.DEBUG="DEBUG",e.LOG="LOG",e.WARN="WARN",e.ERROR="ERROR"}(Rt||(Rt={})),function(e){var t="📞",n=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];Nt.onDebugMessage.apply(Nt,Xe([e],t))},r=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];e.apply(void 0,n),St(t,n)}},o=console.debug.bind(console,t),i=console.log.bind(console,t),a=console.warn.bind(console,t),s=console.error.bind(console,t),c=n.bind(null,Rt.DEBUG),u=n.bind(null,Rt.LOG),l=n.bind(null,Rt.WARN),d=n.bind(null,Rt.ERROR);e.debug=c,e.log=u,e.warn=l,e.error=d,e.toggle=function(t){xt.debugLog&&Dt(),t?(e.debug=xt.debugLog?r(o,Rt.DEBUG):o,e.log=xt.debugLog?r(i,Rt.LOG):i,e.warn=xt.debugLog?r(a,Rt.WARN):a,e.error=xt.debugLog?r(s,Rt.ERROR):s):(e.debug=xt.debugLog?r(c,Rt.DEBUG):c,e.log=xt.debugLog?r(u,Rt.LOG):u,e.warn=xt.debugLog?r(l,Rt.WARN):l,e.error=xt.debugLog?r(d,Rt.ERROR):d)},e.send=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];switch(t){case Rt.DEBUG:e.debug.apply(void 0,n);break;case Rt.LOG:e.log.apply(void 0,n);break;case Rt.WARN:e.warn.apply(void 0,n);break;case Rt.ERROR:e.error.apply(void 0,n)}}}(Bt||(Bt={}));var Ut,Ft=Bt;!function(e){e.patchSDP=function(e,t,n,r){if(!t&&!n&&!r)return e;var o=new RegExp("[\r\n]+");function i(e,t,n){var r,o=e.split(" "),i=o.slice(0,3);for(r=3;r<o.length;r++)n.includes(o[r])&&i.push(o[r]);for(r=3;r<o.length;r++)n.includes(o[r])||t.includes(o[r])||i.push(o[r]);return i.join(" ")}function a(e,t){var n,r=new RegExp("a=rtpmap:(\\d+) ([a-zA-Z0-9-]+)\\/\\d+"),o=[];for(n=0;n<e.length;++n){var i=e[n].match(r);i&&3===i.length&&i[2]===t&&o.push(i[1])}return o}function s(e,t,n,r){var o,a="m="+t;for(o=0;o<e.length;++o)if(e[o].startsWith(a)){e[o]=i(e[o],n,r);break}}var c=[],u=e.split(o);(n||t)&&(c=a(u,"H264"));var l=[];if(r&&(l=a(u,"VP9")),n){var d=c.slice(0),_=new RegExp("a=fmtp:(\\d+) apt=(\\d+)"),p=void 0;for(p=0;p<u.length;++p)(f=u[p].match(_))&&3===f.length&&d.includes(f[2])&&d.push(f[1]);var h=new RegExp("a=(rtpmap|rtcp-fb|fmtp):(\\d+) .*");for(p=u.length;p--;){var f;(f=u[p].match(h))&&3===f.length&&d.includes(f[2])&&u.splice(p,1)}s(u,"video",d,[])}else t&&s(u,"video",[],c);return r&&s(u,"video",[],l),u.join("\r\n")},e.getPeerIdString=function(e){return e?e.type+"_"+e.id:"_"},e.getPeerConnectionHostInfo=function(e){return Ye(this,void 0,void 0,(function(){return $e(this,(function(t){return e&&e.getStats?[2,e.getStats(null).then((function(e){var t=null,n=null;if(e.forEach((function(t){"transport"===t.type&&t.selectedCandidatePairId?n=e.get(t.selectedCandidatePairId):"candidate-pair"!==t.type||"succeeded"!==t.state||n||t.hasOwnProperty("selected")&&!t.selected||(n=t)})),n&&n.localCandidateId){var r=e.get(n.localCandidateId);r&&(t={type:r.candidateType,ip:r.ip||r.ipAddress,port:r.port||r.portNumber})}return t})).catch((function(){return null}))]:[2,Promise.resolve(null)]}))}))};var t=/^[0-9]+$/,n=/^([gu])([0-9]+)$/;function r(e,r){var o=String(e);return n.test(o)?(Ft.warn("Already composite id ["+e+"] type supplied ["+r+"]"),o):"GROUP"===r?"g"+o:"USER"===r?"u"+o:(Ft.warn("Unknown type ["+r+"] for id ["+e+"]"),o.match(t)?"u"+o:o)}function o(e){return r(e.id,e.idType)}function i(e,t,n,r,o){if(e&&n&&"video"===n.kind){var i=n.getSettings();if(i){var a=e.maxBitrateK?1024*e.maxBitrateK:null,s=i.width,c=i.height,u=s&&c&&e.maxDimension?Math.max(1,Math.max(s,c)/e.maxDimension):null,l=e.maxFramerate?e.maxFramerate:null,d=e.degradationPreference?e.degradationPreference:"balanced",_=r[n.id];if(_&&_.bitrate===a&&_.scaleResolutionDownBy===u&&_.maxFramerate===l&&_.degradationPreference===d)return void(o[n.id]=_);o[n.id]={bitrate:a,scaleResolutionDownBy:u,maxFramerate:l,degradationPreference:d};var p=t.getParameters();p.encodings||(p.encodings=[{}]),p.encodings.forEach((function(e){a?e.maxBitrate=a:delete e.maxBitrate,u?e.scaleResolutionDownBy=u:delete e.scaleResolutionDownBy,l?e.maxFramerate=l:delete e.maxFramerate})),p.degradationPreference=d,t.setParameters(p)}}}e.composeId=r,e.composeParticipantId=o,e.composeMessageId=function(e){return e.participant?o(e.participant):r(e.participantId,e.participantType)},e.decomposeId=function(e){var r=String(e),o=r.match(n);return o?{id:String(o[2]),type:"g"===o[1]?"GROUP":"USER"}:(Ft.warn("Unsupported compositeId ["+e+"]"),{id:t.test(r)?r:e,type:"USER"})},e.uuid=function(){var e,t,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),r=new Array(36),o=0;for(t=0;t<36;t++)8===t||13===t||18===t||23===t?r[t]="-":14===t?r[t]="4":(o<=2&&(o=33554432+16777216*Math.random()|0),e=15&o,o>>=4,r[t]=n[19===t?3&e|8:e]);return r.join("")},e.throttle=function(e,t){var n;return function(){var r=this,o=arguments;n&&window.clearTimeout(n),n=window.setTimeout((function(){e.apply(r,o)}),t)}},e.sdpFingerprint=function(e){for(var t="",n=0,r=e.split("\n");n<r.length;n++){var o=r[n];if(o.startsWith("a=fingerprint")){var i=o.split(" ");if(2===i.length){t=i[1];break}}}if(!t)return pe.a.minusOne;for(var a=t.split(":"),s=pe.a.zero,c=Math.min(7,a.length-1);c>=0;c--){var u=pe()(a[c],16);s=s.shiftLeft(8).or(u)}return function(e,t){var n=t.value;if("bigint"==typeof n)return pe()(BigInt.asIntN(64,n));var r=pe.a.one.shiftLeft(64),o=t.and(r.subtract(1));return o.greaterOrEquals(r.subtract(o))?o.subtract(r):o}(0,s)},e.delay=function(e){return Ye(this,void 0,void 0,(function(){return $e(this,(function(t){return[2,new Promise((function(t){return window.setTimeout(t,e)}))]}))}))},e.comparePlainObjects=function(e,t){var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var o=0,i=n;o<i.length;o++){var a=i[o];if(!t.hasOwnProperty(a))return!1;if(t[a]!==e[a])return!1}return!0},e.applySettings=function(e,t,n){var r=[];return e.getSenders().forEach((function(e){return i(t,e,e.track,n,r)})),r},e.applyVideoTrackSettings=i,e.includesOneOf=function(e,t){Array.isArray(t)||(t=[t]);for(var n=0,r=t;n<r.length;n++){var o=r[n];if(e.includes(o))return!0}return!1}}(Ut||(Ut={}));var Wt,Ht=Ut,Kt=function(){try{var e,t=Date.now().toString(),n=window.localStorage;return n.setItem(t,t),e=n.getItem(t)===t,n.removeItem(t),e?n:null}catch(e){return null}}();!function(e){e.get=function(e){return function(e){var t=Kt?Kt.getItem("_okcls_"+e):null;if(null===t)return null;try{return JSON.parse(t)}catch(e){return null}}(e)||null},e.set=function(e,t){!function(e,t){try{Kt&&Kt.setItem("_okcls_"+e,JSON.stringify(t))}catch(e){}}(e,t)},e.remove=function(e){!function(e){Kt&&Kt.removeItem("_okcls_"+e)}(e)}}(Wt||(Wt={}));var Vt,qt,Gt,zt,Yt=Wt,$t=null,Xt=null,Qt=[],Jt=[],Zt=[],en=null,tn=null,nn=null,rn=!1,on=!1,an=!1,sn=!1,cn=null,un="",ln=[],dn=null,_n=navigator.appVersion,pn=navigator.appName,hn=navigator.userAgent;!function(e){e.USER="user",e.ENVIRONMENT="environment",e.LEFT="left",e.RIGHT="right"}(zt||(zt={}));var fn,mn=function(){function e(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=xt.videoMaxWidth),void 0===r&&(r=xt.videoMaxHeight);var o=!1;if(e){o={noiseSuppression:xt.noiseSuppression,echoCancellation:!0,autoGainControl:!0};var i=void 0;tn&&(i=tn.deviceId),"string"==typeof e&&(i=e),i&&(o.deviceId={exact:i})}var a=!1;if(t){a={width:{min:xt.videoMinWidth,max:n,ideal:n},height:{min:xt.videoMinHeight,max:r,ideal:r},aspectRatio:{ideal:xt.videoAspectRatio},frameRate:{ideal:xt.videoFrameRate}};var s=void 0;en&&(s=en.deviceId),"string"==typeof t&&(s=t),s&&(a.deviceId={exact:s}),xt.videoFacingMode&&(a.facingMode={exact:xt.videoFacingMode})}this.audio=o,this.video=a,this.needVideo=!!a}return e.prototype.getNative=function(){return Object.assign({},{audio:this.audio,video:this.video})},e.prototype.simplify=function(){return"object"==typeof this.video&&(this.video.width||this.video.height?(delete this.video.width,delete this.video.height):this.video.aspectRatio?delete this.video.aspectRatio:this.video.frameRate?delete this.video.frameRate:(this.video.deviceId||this.video.facingMode)&&(delete this.video.deviceId,delete this.video.facingMode)),"object"==typeof this.audio&&(this.audio.echoCancellation||this.audio.autoGainControl||this.audio.noiseSuppression?(delete this.audio.echoCancellation,delete this.audio.autoGainControl,delete this.audio.noiseSuppression):this.audio.deviceId&&delete this.audio.deviceId),!0===this.video&&!0===this.audio?this.video=!1:!1===this.video&&!0===this.audio&&xt.allowMissingMic?(this.audio=!1,this.video=this.needVideo):!0===this.video&&!1===this.audio&&(this.video=!1),this.video&&!Object.keys(this.video).length&&(this.video=!0),this.audio&&!Object.keys(this.audio).length&&(this.audio=!0),this},e.prototype.canSimplify=function(){var e="object"==typeof this.video&&(this.video.width||this.video.height||this.video.aspectRatio||this.video.frameRate||this.video.facingMode||this.video.deviceId)||this.video;return!!("object"==typeof this.audio&&(this.audio.deviceId||this.audio.noiseSuppression||this.audio.echoCancellation||this.audio.autoGainControl)||xt.allowMissingMic&&this.audio||e)},e.prototype.isVideo=function(){return!!this.video},e.prototype.isAudio=function(){return!!this.audio},e}(),gn=function(e){function t(t,n){var r=e.call(this,!1,!0)||this;return"object"==typeof r.video?(delete r.video.deviceId,delete r.video.aspectRatio,delete r.video.frameRate,delete r.video.facingMode):r.video={},r.video.cursor="motion",r.video.width=t,r.video.height=n,r.video.frameRate=xt.screenFrameRate,r}return Ge(t,e),t}(mn);function vn(){return Ye(this,void 0,void 0,(function(){return $e(this,(function(e){switch(e.label){case 0:return $t=null,[4,yn()];case 1:return e.sent(),[2]}}))}))}function bn(){$t=null,yn().then((function(){return Nt.onDeviceChange()}))}function yn(){return Ye(this,void 0,void 0,(function(){return $e(this,(function(e){return $t?[2,$t]:navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?(!Xt&&navigator.mediaDevices.addEventListener&&(Xt=Ht.throttle(bn,1e3),navigator.mediaDevices.addEventListener("devicechange",Xt)),[2,$t=navigator.mediaDevices.enumerateDevices().then((function(e){Qt=e.filter((function(e){return"videoinput"===e.kind&&(e.label&&(rn=!0),!0)})),Jt=e.filter((function(e){return"audioinput"===e.kind&&(e.label?on=!0:fn.isMobile()&&"Firefox"===fn.browserName()&&(on=rn),!0)})),Zt=e.filter((function(e){return"audiooutput"===e.kind}));var t=Yt.get("videoinput"),n=Yt.get("audioinput"),r=Yt.get("audiooutput");return en=Qt.find((function(e){return e.deviceId===t}))||null,tn=Jt.find((function(e){return e.deviceId===n}))||null,nn=Zt.find((function(e){return e.deviceId===r}))||null,$t=Promise.resolve(e),e})).catch((function(){return $t=null,[]}))]):[2,[]]}))}))}function En(){return Ye(this,void 0,void 0,(function(){return $e(this,(function(e){return fn.isBrowserSupported()?[2,new Promise((function(e){(new window.RTCPeerConnection).createOffer({offerToReceiveVideo:!0}).then((function(t){/^a=rtpmap:\d+ VP8\/\d+$/m.test(t.sdp)&&(an=!0),/^a=mid:0$/m.test(t.sdp)&&(sn=!0),e()})).catch(e)}))]:[2,Promise.resolve()]}))}))}function wn(e,t){return Ye(this,void 0,void 0,(function(){var n,r,o;return $e(this,(function(i){switch(i.label){case 0:Ft.debug("Try to get media",e.getNative()),(n=fn.hasPermissions(e.isVideo()))||t||Nt.onPermissionsRequested(),i.label=1;case 1:return i.trys.push([1,5,,6]),[4,navigator.mediaDevices.getUserMedia(e.getNative())];case 2:return r=i.sent(),n?[3,4]:[4,vn()];case 3:i.sent(),i.label=4;case 4:return[2,r];case 5:switch(i.sent().name){case"PermissionDeniedError":case"PermissionDismissedError":case"NotAllowedError":case"SecurityError":case"DOMException":t=e.isVideo()?ct.CAMERA_PERMISSION:ct.MIC_PERMISSION;break;case"OverconstrainedError":case"TypeError":case"NotFoundError":break;case"AbortError":case"NotReadableError":t=e.isVideo()?ct.CAMERA_ACCESS:ct.MIC_ACCESS}if(e.canSimplify())return[2,wn(e.simplify(),t)];throw o=t||ct.UNKNOWN,Nt.onPermissionsError(o),o;case 6:return[2]}}))}))}function On(e){return Ye(this,void 0,void 0,(function(){var t,n;return $e(this,(function(r){switch(r.label){case 0:Ft.debug("Try to get screen",e.getNative()),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,navigator.mediaDevices.getDisplayMedia(e.getNative())];case 2:return t=r.sent(),(n=null==t?void 0:t.getVideoTracks()[0])&&(n.contentHint="text"),[2,t];case 3:switch(r.sent().name){case"PermissionDeniedError":case"NotAllowedError":case"SecurityError":throw ct.SCREEN_PERMISSION;default:throw ct.SCREEN_ACCESS}return[3,4];case 4:return[2]}}))}))}function Cn(){return ln.length?ln:ln=function(){var e,t=!1,n=0,r=hn.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(r[1]))return["IE",(e=/\brv[ :]+(\d+)/g.exec(hn))&&e[1]||"Unknown",t,n];if("Safari"===r[1]){if(e=hn.match(/\bEdge\/(\d+)/))return["Edge",e[1]||"Unknown",t,n];if(e=hn.match(/\bCriOS\/(\d+)/))return["Chrome",e[1],!0,e[1]];if(e=hn.match(/\bFxiOS\/(\d+)/))return["Firefox",e[1],!1,n];if(e=hn.match(/\bYaBrowser\/(\d+)/))return["Yandex",e[1],!1,n];if(e=hn.match(/\bOPT\/(\d+)/))return["Opera",e[1],!1,n]}if("Chrome"===r[1]){if(t=!0,n=Number(r[2]),e=hn.match(/\bOPR\/(\d+)/))return["Opera",e[1]||"Unknown",t,n];if(e=hn.match(/\bYaBrowser\/(\d+)/))return["Yandex",e[1]||"Unknown",t,n];if(e=hn.match(/\bSferum\/((\d+)(?:\.\d+)*)/))return["Sferum",e[1]||"Unknown",t,n];if(e=hn.match(/\bEdge?\/(\d+)/))return["Edge",e[1]||"Unknown",t,n];if(void 0!==window.opr&&/^(.+\.)?ok.ru$/.test(window.location.host))return["Opera","Hidden",t,n]}return e=hn.match(/version\/(\d+)/i),[r[2]?r[1]:pn,e&&e[1]||r[2]||_n,t,n]}()}!function(e){function t(){return Qt.length>0}function n(){return rn}function r(){return on}function o(){if(!Gt||"ended"===Gt.readyState){var e=c(),t=e.createMediaStreamDestination(),n=e.createGain();n.gain.value=1e-5,n.connect(t),n.connect(e.destination);var r=e.createOscillator();r.type="sine",r.frequency.value=0,r.connect(n),r.start(),Gt=t.stream.getAudioTracks()[0]}return Object.assign(Gt.clone(),{enabled:!1})}function i(e,t){if(void 0===e&&(e=xt.videoMinWidth),void 0===t&&(t=xt.videoMinHeight),qt||(qt=document.createElement("canvas")).getContext("2d"),qt.width=e,qt.height=t,!Vt||"ended"===Vt.readyState){var n=qt.captureStream(xt.videoFrameRate);Vt=n.getVideoTracks()[0]}return Object.assign(Vt.clone(),{enabled:!1})}function a(){return Cn()[0]}function s(){return Cn()[1]}function c(){return dn||(dn=new(window.AudioContext||window.webkitAudioContext)),dn}e.init=function(){return Ye(this,void 0,void 0,(function(){return $e(this,(function(e){switch(e.label){case 0:return[4,En()];case 1:return e.sent(),[2,yn()]}}))}))},e.getCameras=function(){return Qt},e.getMicrophones=function(){return Jt},e.getOutput=function(){return Zt},e.hasCamera=t,e.hasMicrophone=function(){return Jt.length>0},e.getSavedCamera=function(){return en},e.getSavedMicrophone=function(){return tn},e.getSavedOutput=function(){return nn},e.hasCameraPermission=n,e.hasMicrophonePermission=r,e.hasPermissions=function(e){return void 0===e&&(e=!1),!!r()&&(!t()||!e||n())},e.getUserMedia=function(e,n){return void 0===e&&(e=!1),void 0===n&&(n=!0),Ye(this,void 0,void 0,(function(){var r,a,s,c;return $e(this,(function(u){switch(u.label){case 0:r=n,a=t()&&e,u.label=1;case 1:return u.trys.push([1,3,,4]),[4,wn(new mn(r,a))];case 2:return s=u.sent(),[3,4];case 3:if(c=u.sent(),!xt.allowMissingMic)throw c;return s=new MediaStream,[3,4];case 4:return s.getVideoTracks().length||s.addTrack(i()),s.getAudioTracks().length||s.addTrack(o()),[2,s]}}))}))},e.getScreenMedia=function(){return Ye(this,void 0,void 0,(function(){return $e(this,(function(e){return[2,On(new gn(window.screen.width,window.screen.height))]}))}))},e.getUserVideo=function(e,t){return void 0===t&&(t=!1),Ye(this,void 0,void 0,(function(){var n,r;return $e(this,(function(o){return n=t?xt.videoEffectMaxWidth:xt.videoMaxWidth,r=t?xt.videoEffectMaxHeight:xt.videoMaxHeight,[2,wn(new mn(!1,e||!0,n,r))]}))}))},e.getUserAudio=function(e){return Ye(this,void 0,void 0,(function(){return $e(this,(function(t){return[2,wn(new mn(e||!0,!1))]}))}))},e.saveDeviceId=function(e,t){return Ye(this,void 0,void 0,(function(){var n,r;return $e(this,(function(o){switch(o.label){case 0:return[4,yn()];case 1:return n=o.sent(),(r=n.find((function(n){return n.kind===e&&n.deviceId===t})))?("videoinput"===e?en=r:"audioinput"===e?tn=r:"audiooutput"===e&&(nn=r),Yt.set(e,t),[2,r]):[2,null]}}))}))},e.getSilentMediaTrack=o,e.getBlackMediaTrack=i,e.isBrowserSupported=function(){if("Edge"===a()&&s()<70)return!1;try{var e=window;return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&e.RTCPeerConnection&&e.RTCIceCandidate&&e.RTCSessionDescription&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.captureStream&&e.RTCRtpSender&&e.RTCRtpSender.prototype.replaceTrack&&navigator.sendBeacon&&!0}catch(e){return!1}},e.isScreenCapturingSupported=function(){return!!navigator.mediaDevices.getDisplayMedia},e.canVP8=function(){return an},e.isUnifiedPlan=function(){return sn},e.isBrokenH264=function(){return"Opera"===e.browserName()&&"Windows"===e.os()},e.canPreferH264=function(){return!(e.baseChromeVersion()&&e.isMobile())},e.os=function(){return un||(un=function(){var e={Windows:/Win/,Android:/Android/,OpenBSD:/OpenBSD/,SunOS:/SunOS/,Linux:/(Linux|X11)/,iPad:/(iPad)/,iPhone:/(iPhone)/,iPod:/(iPod)/,MacOS:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh|Mac OS X)/,QNX:/QNX/,UNIX:/UNIX/,BeOS:/BeOS/,OS2:/OS\/2/,Bot:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/};for(var t in e)if(e.hasOwnProperty(t)&&e[t].test(hn))return t;return"Unknown"}()),un},e.isMobile=function(){return null===cn&&(cn=/Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(_n)),cn},e.browserName=a,e.browserVersion=s,e.baseChromeVersion=function(){return Cn()[3]},e.getAudioContext=c}(fn||(fn={}));var Tn,Sn,Dn=fn;function Pn(e,t){return null===e||null===t?null===e&&null===t:e.maxDimension===t.maxDimension&&e.maxBitrateK===t.maxBitrateK&&e.maxFramerate===t.maxFramerate&&e.degradationPreference===t.degradationPreference}function kn(e,t){return!!Pn(e.camera,t.camera)&&!!Pn(e.screenSharing,t.screenSharing)}!function(e){e.USER="USER",e.ANONYM="ANONYM",e.GROUP="GROUP"}(Tn||(Tn={})),function(e){function t(e,t){return void 0===t&&(t=Tn.USER),{id:e,type:t}}function n(e){return'{"id":"'+e.id+'","type":"'+e.type+'"}'}e.fromIds=function(e){return e.length?"object"==typeof e[0]?e:e.map((function(e){return t(e)})):[]},e.fromId=t,e.toString=n,e.fromIdToString=function(e,r){return void 0===r&&(r=Tn.USER),n(t(e,r))},e.fromString=function(e){try{return JSON.parse(e)}catch(t){throw new Error("Failed to parse ExternalId from string '"+e+"'")}},e.compare=function(e,t){return e.id===t.id&&e.type===t.type}}(Sn||(Sn={}));var An=function(){function e(e,t){this._fixNoPacketsApplied=!1,this._fixNoPacketsChecked=!1,this._fixTooManyPacketsApplied=!1,this._fixTooManyPacketsSucceeded=!1,this._fixTooManyPacketsFailed=!1,this._mediaSource=e,this._logger=t}return e.prototype._fixAudioDeviceNoPackets=function(e){if(!this._fixNoPacketsApplied||!this._fixNoPacketsChecked)return this._fixNoPacketsApplied&&!this._fixNoPacketsChecked?(this._fixNoPacketsChecked=!0,void this._logger.log("callError","audio_device_recover_"+(e.bandwidth?"success":"fail"))):void(this._fixNoPacketsApplied||e.bandwidth||(this._fixNoPacketsApplied=!0,this._logger.log("callError","audio_device_recover"),this._mediaSource.toggleAudio(!0)))},e.prototype._fixAudioDeviceTooManyPackets=function(e){if(!this._fixTooManyPacketsSucceeded&&!this._fixTooManyPacketsFailed){var t=Date.now();if(this._lastPacketsSentTime){if(t-this._lastPacketsSentTime>500){var n=1e3*(e.packetsSent-this._lastPacketsSent)/(t-this._lastPacketsSentTime);this._lastPacketsSentTime=t,this._lastPacketsSent=e.packetsSent,this._fixTooManyPacketsApplied?n>75?(Ft.log("Failed to fix RV"),this._logger.log("callError","audio_device_recover_rv_fail"),this._fixTooManyPacketsFailed=!0):t-this._fixTooManyPacketsTime>6e4&&(Ft.log("Fixed RV"),this._logger.log("callError","audio_device_recover_rv_success"),this._fixTooManyPacketsSucceeded=!0):n>75&&(this._fixTooManyPacketsApplied=!0,Ft.log("Trying to fix RV"),this._mediaSource.toggleAudio(!0),this._fixTooManyPacketsTime=t)}}else e.packetsSent>0&&(this._lastPacketsSentTime=t,this._lastPacketsSent=e.packetsSent)}},e.prototype.fix=function(e){if(this._mediaSource){var t=e.find((function(e){return"audio"===e.kind}));t&&(this._fixAudioDeviceNoPackets(t),this._fixAudioDeviceTooManyPackets(t))}},e}(),In=function(){function e(){this._outputs={},this._mixOutput=null,this._volume=1}return e.prototype.add=function(e,t){this.remove(e);var n={};n.audioTrack=t.clone(),this._initAudioElement("participant"+e,n),this._outputs[e]=n},e.prototype.remove=function(e){if(this._outputs.hasOwnProperty(e)){var t=this._outputs[e];this._stopAudioElement(t),delete this._outputs[e]}},e.prototype.addMix=function(e){this.removeMix();var t={};t.audioTrack=e,this._initAudioElement("audio mix",t),this._mixOutput=t},e.prototype.removeMix=function(){this._mixOutput&&(this._stopAudioElement(this._mixOutput),this._mixOutput=null)},Object.defineProperty(e.prototype,"volume",{get:function(){return this._volume},set:function(e){this._volume=Math.max(0,Math.min(1,e));for(var t=0,n=Object.values(this._outputs);t<n.length;t++){var r=n[t];r.audioElement&&(r.audioElement.volume=this._volume)}this._mixOutput&&this._mixOutput.audioElement&&(this._mixOutput.audioElement.volume=this._volume)},enumerable:!1,configurable:!0}),e.prototype._initAudioElement=function(e,t){if(t.audioTrack){var n=new Audio;n.muted=!1,n.volume=this._volume,n.preload="auto";var r=function(){Ft.warn("Error on play audio for participant ["+e+"]"),Nt.onAutoplayError()},o=function(e){n.srcObject=new MediaStream([e]),n.load();var t=n.play();t?t.catch(r):r()},i=function(){Ft.debug("Recover audio playback for participant ["+e+"]");var n=t.audioTrack;n?o(n):Ft.warn("Broken audio track for participant ["+e+"]")};n.onpause=i,n.onstalled=i,n.onerror=i,o(t.audioTrack),t.audioElement=n}},e.prototype._stopAudioElement=function(e){var t;e.audioElement&&(e.audioElement.pause(),e.audioElement.srcObject=null),null===(t=e.audioTrack)||void 0===t||t.stop()},e.prototype.destroy=function(){for(var e=0,t=Object.keys(this._outputs);e<t.length;e++){var n=t[e];this.remove(n)}this.removeMix()},e}(),xn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._lastMemoryStat={percent:0,bytes:0},t}return Ge(t,e),t.prototype.onRemoteDataStats=function(e,t,n){var r;this._calcMemory(),n&&(null===(r=e.inbound.rtps)||void 0===r||r.map((function(e){var n=t[e.userId];e.userId=null==n?void 0:n.externalId})),Nt.onStatistics(e,this._lastMemoryStat))},t.prototype._calcMemory=function(){var e=window.performance&&window.performance.memory;if(e&&e.usedJSHeapSize&&e.jsHeapSizeLimit){var t=Number((100*e.usedJSHeapSize/e.jsHeapSizeLimit).toFixed(2)),n=Number((e.usedJSHeapSize/1024/1024).toFixed(1));t>90?Ft.warn("High memory usage: "+t+"% ("+n+" MiB)"):(!this._lastMemoryStat.percent||Math.abs(t-this._lastMemoryStat.percent)>=3)&&(Ft.debug("Memory usage: "+t+"% ("+n+" MiB)"),this._lastMemoryStat.percent=t,this._lastMemoryStat.bytes=e.usedJSHeapSize)}},t}(tt),jn=function(e){function t(n,r){var o=e.call(this)||this;o.name="HangupReason",o.code=r&&r.code||0,o.remote=r&&r.remote||!1,Object.values(lt).indexOf(n)>-1?o.hangup=n:o.error=n;var i=[];return o.error&&i.push("error"),o.remote&&i.push("remote"),o.code&&i.push("code: "+o.code),r&&r.message&&i.push("message: '"+r.message+"'"),o.message=n+(i.length?" ("+i.join(", ")+")":""),Error.captureStackTrace&&Error.captureStackTrace(o,t),o}return Ge(t,e),t}(Error),Mn=function(){function e(e){this._analyser=null,this._gainNode=null,this._fftBins=null,this._mediaStreamSource=null,this._lastSmoothedLevel=0,this._stream=e;try{var t=Dn.getAudioContext();this._gainNode=t.createGain(),this._gainNode.gain.value=1e-5,this._gainNode.connect(t.destination),this._analyser=t.createAnalyser(),this._analyser.fftSize=1024,this._analyser.smoothingTimeConstant=0,this._analyser.connect(this._gainNode),this._fftBins=new Uint8Array(this._analyser.frequencyBinCount),this._mediaStreamSource=t.createMediaStreamSource(e),this._mediaStreamSource.connect(this._analyser)}catch(e){}}return Object.defineProperty(e.prototype,"stream",{get:function(){return this._stream},enumerable:!1,configurable:!0}),e.prototype._getBins=function(){if(!this._fftBins||!this._analyser)return new Uint8Array;this._analyser.getByteFrequencyData(this._fftBins);var e=44100/this._fftBins.length,t=Math.ceil(xt.voiceParams.minFreq/e),n=Math.floor(xt.voiceParams.maxFreq/e);return this._fftBins.subarray(t,n)},e.prototype.getLevel=function(){var e=this._getBins(),t=e.reduce((function(e,t){return e+t}),0)/e.length/255,n=this._lastSmoothedLevel*xt.voiceParams.smoothing+t*(1-xt.voiceParams.smoothing);return this._lastSmoothedLevel=n,{real:t,smoothed:n}},e.prototype.destroy=function(){this._mediaStreamSource&&(this._mediaStreamSource.disconnect(),this._mediaStreamSource=null),this._gainNode&&(this._gainNode.disconnect(),this._gainNode=null),this._analyser&&(this._analyser.disconnect(),this._analyser=null,this._fftBins=null,this._lastSmoothedLevel=0)},e}(),Ln=function(e){function t(t){var n=e.call(this)||this;n._detector=null,n._track=null,n._interval=null;var r=function(){n._detector&&Nt.onLocalVolume(n._detector.getLevel().real,t.getMediaSettings().isAudioEnabled),n._interval=window.setTimeout(r,xt.voiceParams.interval)};n._interval=window.setTimeout(r,xt.voiceParams.interval);var o=function(){var e=t.getStream();e&&n.init(e)};return n.subscribe(t,"SOURCE_CHANGED",(function(e){"audio"===e.kind&&e.mediaSettings.isAudioEnabled&&o()})),o(),n}return Ge(t,e),t.prototype.init=function(e){this._stopDetector();var t=e.getAudioTracks();t.length&&(this._track=t[0].clone(),this._detector=new Mn(new MediaStream([this._track])))},t.prototype._stopDetector=function(){this._detector&&(this._detector.destroy(),this._detector=null),this._track&&(this._track.stop(),this._track=null)},t.prototype.destroy=function(){this.unsubscribe(),this._interval&&(window.clearTimeout(this._interval),this._interval=null),this._stopDetector()},t}(tt),Rn=function(e){function t(t,n){var r=e.call(this)||this;return r._batchInterval=3e3,r._batch=[],r._batchTimeout=null,r._api=t,r._externalLogger=n,r}return Ge(t,e),t.prototype._send=function(e){this._api.log(e)},t.prototype._sendBatch=function(){this._stopTimeout(),this._batch.length>0&&(this._send(this._batch),this._batch=[],this._startTimeout())},t.prototype._startTimeout=function(){var e=this;this._batchTimeout=window.setTimeout((function(){return e._sendBatch()}),this._batchInterval)},t.prototype._stopTimeout=function(){this._batchTimeout&&(clearTimeout(this._batchTimeout),this._batchTimeout=null)},t.prototype._onUnload=function(){this._sendBatch(),this._stopTimeout()},t.prototype.log=function(e,t,n){void 0===n&&(n=!1);var r={type:1,time:0,operation:e,timestamp:Date.now(),custom:{},uid:this._api.getUserId()};void 0!==t&&(r.custom.param=t),this._batch.push(r),!n&&this._batchTimeout||this._sendBatch(),this._externalLogger&&this._externalLogger.log(e,t,n)},t.prototype.destroy=function(){this._sendBatch(),this._stopTimeout(),this._externalLogger&&this._externalLogger.destroy()},t}(et),Bn=function(e){function t(){var t=e.call(this)||this;return t._stream=null,t._sendVideoTrack=null,t._mediaSettings={isAudioEnabled:!0,isVideoEnabled:!0,isDataEnabled:!1,isScreenSharingEnabled:!1,audioBitrateBps:0,videoBitrateBps:0},t._videoStatusOnScreenCapturingEnabled=!1,t._effect=null,t._initDeviceChangeListener(),t}return Ge(t,e),t.prototype.request=function(e,t){return void 0===e&&(e=!1),void 0===t&&(t=!0),Ye(this,void 0,void 0,(function(){var n,r;return $e(this,(function(o){switch(o.label){case 0:if(this._stream)return[2];if(!Dn.isBrowserSupported())throw new jn(ct.UNSUPPORTED);if(!Dn.hasMicrophone()&&!xt.allowMissingMic)throw new jn(ct.MIC_NOT_FOUND);o.label=1;case 1:return o.trys.push([1,3,,4]),n=this,[4,Dn.getUserMedia(e,t)];case 2:return n._stream=o.sent(),this._mediaSettings.isVideoEnabled=e&&this._stream.getVideoTracks().filter((function(e){return e.enabled})).length>0||!1,this._mediaSettings.isAudioEnabled=this._stream.getAudioTracks().filter((function(e){return e.enabled})).length>0||!1,[3,4];case 3:throw r=o.sent(),new jn(r);case 4:return[2]}}))}))},t.prototype.getStream=function(){return this._stream},t.prototype._getSendVideoTrack=function(){return this._sendVideoTrack?this._sendVideoTrack:this._stream?this._stream.getVideoTracks()[0]:null},t.prototype._getSendAudioTrack=function(){var e;return(null===(e=this._stream)||void 0===e?void 0:e.getAudioTracks()[0])||null},t.prototype.addTrackToPeerConnection=function(e){var t=this.getStream(),n=this._getSendAudioTrack(),r=this._getSendVideoTrack();if(!t||!n&&!r)throw new Error("No local stream found");n&&e.addTrack(n,t),r&&e.addTrack(r,t)},t.prototype.getMediaSettings=function(){return this._mediaSettings},t.prototype.changeDevice=function(e){return Ye(this,void 0,void 0,(function(){return $e(this,(function(t){switch(e){case"videoinput":return[2,this._changeVideoInput()];case"audioinput":return[2,this._changeAudioInput()];default:return[2,Promise.reject()]}}))}))},t.prototype.setVideoStream=function(e,t){return Ye(this,void 0,void 0,(function(){return $e(this,(function(n){return[2,t?this._changeScreen(e):this._changeVideoInput(e)]}))}))},t.prototype._initDeviceChangeListener=function(){var e=this;if(navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices&&navigator.mediaDevices.addEventListener){var t=!1,n=!1,r=Ht.throttle((function(){n&&e._changeVideoInput().catch((function(){})),t&&e._changeAudioInput().catch((function(){})),t=!1,n=!1}),1e3);navigator.mediaDevices.addEventListener("devicechange",(function(){return Ye(e,void 0,void 0,(function(){var e,o,i,a,s,c,u;return $e(this,(function(l){switch(l.label){case 0:return this._stream?(e=this._stream.getAudioTracks()[0],o=e&&e.enabled&&e.getSettings(),i=o&&o.groupId,a=this._stream.getVideoTracks()[0],s=a&&a.enabled&&a.getSettings(),c=s&&s.groupId,i||c?[4,navigator.mediaDevices.enumerateDevices()]:[2]):[2];case 1:return u=l.sent(),!t&&i&&(t=!u.find((function(e){return e.groupId===i}))),!n&&c&&(n=!u.find((function(e){return e.groupId===c}))),r(),[2]}}))}))}))}},t.prototype._changeVideoInput=function(e){return void 0===e&&(e=null),Ye(this,void 0,void 0,(function(){var t,n,r,o;return $e(this,(function(i){switch(i.label){case 0:return i.trys.push([0,7,,8]),t=e?"stream":"video",(n=e)?[3,2]:[4,Dn.getUserVideo(void 0,!!this._effect)];case 1:n=i.sent(),i.label=2;case 2:return e=n,this._stream?[3,3]:(e.getTracks().forEach((function(e){return e.stop()})),[3,6]);case 3:return this._disableScreenCapture(),[4,this._videoEffect(this._effect,e.getVideoTracks()[0])];case 4:return r=i.sent(),this._stopLocalTrack("video"),this.log("callDeviceChanged",t),Ft.log("Video stream changed"),[4,this._replaceLocalTrack(r)];case 5:i.sent(),this._mediaSettings.isVideoEnabled=!0,this._triggerEvent("SOURCE_CHANGED",{kind:"video",mediaSettings:this._mediaSettings}),i.label=6;case 6:return[3,8];case 7:throw o=i.sent(),this.log("callError","change_video"),Ft.warn("Camera change failed",o),o;case 8:return[2]}}))}))},t.prototype._changeAudioInput=function(){return Ye(this,void 0,void 0,(function(){var e,t,n;return $e(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),[4,Dn.getUserAudio()];case 1:return e=r.sent(),this._stream?[3,2]:(e.getTracks().forEach((function(e){return e.stop()})),[3,4]);case 2:return t=e.getAudioTracks()[0],this._stopLocalTrack("audio"),this.log("callDeviceChanged","audio"),Ft.log("Audio stream changed"),[4,this._replaceLocalTrack(t)];case 3:r.sent(),this._mediaSettings.isAudioEnabled=!0,this._triggerEvent("SOURCE_CHANGED",{kind:"audio",mediaSettings:this._mediaSettings}),r.label=4;case 4:return[3,6];case 5:throw n=r.sent(),this.log("callError","change_audio"),Ft.error("Microphone change failed",n),n;case 6:return[2]}}))}))},t.prototype._changeScreen=function(e){return Ye(this,void 0,void 0,(function(){var t,n,r,o=this;return $e(this,(function(i){switch(i.label){case 0:return i.trys.push([0,7,,8]),(t=e)?[3,2]:[4,Dn.getScreenMedia()];case 1:t=i.sent(),i.label=2;case 2:return(e=t).addEventListener("inactive",(function(){o._mediaSettings.isScreenSharingEnabled&&o.toggleScreenCapturing(!1)}),!1),this._stream?[3,3]:(e.getTracks().forEach((function(e){return e.stop()})),[3,6]);case 3:return[4,this._videoEffect(null,e.getVideoTracks()[0])];case 4:return n=i.sent(),this.log("callDeviceChanged","screen"),Ft.log("Screen capturing started"),this._stopLocalTrack("video"),this._videoStatusOnScreenCapturingEnabled=this._mediaSettings.isVideoEnabled,this._mediaSettings.isVideoEnabled=!0,this._mediaSettings.isScreenSharingEnabled=!0,this._sendVideoTrack=this._enableScreenCapture(n),[4,this._replaceLocalTrack(n,this._sendVideoTrack)];case 5:i.sent(),this._triggerEvent("SOURCE_CHANGED",{kind:"screen",mediaSettings:this._mediaSettings}),i.label=6;case 6:return[3,8];case 7:throw r=i.sent(),this.log("callError","screen"),Ft.warn("Screen capturing failed",r),r;case 8:return[2]}}))}))},t.prototype._enableScreenCapture=function(e){return this._mediaSettings.isVideoEnabled=!0,this._mediaSettings.isScreenSharingEnabled=!0,this._triggerEvent("SCREEN_STATUS",{track:e,mediaSettings:this._mediaSettings}),xt.consumerScreenDataChannel?Dn.getBlackMediaTrack(xt.videoMinWidth,xt.videoMinHeight):e},t.prototype._disableScreenCapture=function(){this._sendVideoTrack&&(this._sendVideoTrack.stop(),this._sendVideoTrack=null),this._mediaSettings.isScreenSharingEnabled&&(this._mediaSettings.isScreenSharingEnabled=!1,this._triggerEvent("SCREEN_STATUS",{mediaSettings:this._mediaSettings}))},t.prototype._replaceLocalTrack=function(e,t){return Ye(this,void 0,void 0,(function(){var n=this;return $e(this,(function(r){return this._stream?(this._stream.getTracks().forEach((function(r){var o,i;r.kind===e.kind&&(null===(o=n._stream)||void 0===o||o.removeTrack(r),null===(i=n._stream)||void 0===i||i.addTrack(e),n._triggerEvent("TRACK_REPLACED",e,t))})),[2]):[2]}))}))},t.prototype._stopLocalTrack=function(e){this._stream&&this._stream.getTracks().forEach((function(t){t.kind===e&&t.stop()}))},t.prototype._videoEffect=function(e,t){return Ye(this,void 0,void 0,(function(){return $e(this,(function(n){if(!xt.videoEffects)return[2,t];try{return this.log("callDeviceChanged","effect_"+e),[2,xt.videoEffects.setEffect(e,t)]}catch(e){return Ft.warn("Video effect failed",e),[2,t]}return[2]}))}))},t.prototype.destroy=function(){xt.videoEffects&&(this._effect=null,xt.videoEffects.stopEffect()),this._stream&&(this._stream.getTracks().forEach((function(e){return e.stop()})),this._stream=null),this._sendVideoTrack&&(this._sendVideoTrack.stop(),this._sendVideoTrack=null),this._disableScreenCapture()},t.prototype.toggleScreenCapturing=function(e){return Ye(this,void 0,void 0,(function(){return $e(this,(function(t){return e?[2,this._changeScreen()]:this._videoStatusOnScreenCapturingEnabled?[2,this._changeVideoInput()]:[2,this.toggleVideo(!1)]}))}))},t.prototype.toggleVideo=function(e){return Ye(this,void 0,void 0,(function(){var t,n;return $e(this,(function(r){switch(r.label){case 0:return this._stream?(this._disableScreenCapture(),e?[4,Dn.getUserVideo(void 0,!!this._effect)]:[3,3]):[2];case 1:return n=r.sent(),t=n.getVideoTracks()[0],[4,this._videoEffect(this._effect,t)];case 2:return t=r.sent(),[3,5];case 3:return t=Dn.getBlackMediaTrack(xt.videoMinWidth,xt.videoMinHeight),[4,this._videoEffect(null,t)];case 4:t=r.sent(),r.label=5;case 5:return this._stopLocalTrack("video"),[4,this._replaceLocalTrack(t)];case 6:return r.sent(),this._mediaSettings.isVideoEnabled=e,this._triggerEvent("SOURCE_CHANGED",{kind:"video",mediaSettings:this._mediaSettings}),[2]}}))}))},t.prototype.toggleAudio=function(e){return Ye(this,void 0,void 0,(function(){var t,n;return $e(this,(function(r){switch(r.label){case 0:return this._stream?e?[4,Dn.getUserAudio()]:[3,2]:[2];case 1:return n=r.sent(),t=n.getAudioTracks()[0],[3,3];case 2:t=Dn.getSilentMediaTrack(),r.label=3;case 3:return this._stopLocalTrack("audio"),[4,this._replaceLocalTrack(t)];case 4:return r.sent(),this._mediaSettings.isAudioEnabled=e,this._triggerEvent("SOURCE_CHANGED",{kind:"audio",mediaSettings:this._mediaSettings}),[2]}}))}))},t.prototype.setResolution=function(e,t){return Ye(this,void 0,void 0,(function(){var n;return $e(this,(function(r){if(this._mediaSettings.isScreenSharingEnabled)return[2];if(!this._stream)throw new Error("Local stream not found");if(!(n=this._stream.getVideoTracks()[0]))throw new Error("Local video track not found");return n.enabled?[2,n.applyConstraints({width:{ideal:e},height:{ideal:t}})]:[2]}))}))},t.prototype.updateNoiseSuppression=function(){return Ye(this,void 0,void 0,(function(){var e;return $e(this,(function(t){if(!this._stream||!this._mediaSettings.isAudioEnabled)return[2];if(!(e=this._stream.getAudioTracks()[0]))throw new Error("Local audio track not found");return e.enabled?[2,e.applyConstraints({noiseSuppression:xt.noiseSuppression})]:[2]}))}))},t.prototype.videoEffect=function(e){return Ye(this,void 0,void 0,(function(){return $e(this,(function(t){if(!xt.videoEffects)throw new Error("Video Effects library is not set");if(this._mediaSettings.isScreenSharingEnabled)throw new Error("Can't apply effect to screensharing");return this._mediaSettings.isVideoEnabled?this._stream&&e!==this._effect?(this._effect=e,[2,this._changeVideoInput()]):[2]:(this._effect=e,[2])}))}))},t}(tt),Nn=function(e){function t(t,n){var r=e.call(this)||this;return r._speakerId=null,r._serverAudioActivityAvailable=!1,r.subscribe(t,"VOLUMES_DETECTED",r._onVolumesDetected.bind(r)),r.subscribe(n,"SIGNALLED_SPEAKER_CHANGED",r._onServerSpeakerChanged.bind(r)),r.subscribe(n,"SIGNALLED_ACTIVE_PARTICIPANTS",r._onReceivedServerAudioActivity.bind(r)),r.subscribe(n,"ACTIVE_PARTICIPANTS_NO_SIGNAL",r._onStoppedReceivingServerAudioActivity.bind(r)),r}return Ge(t,e),t.prototype.destroy=function(){this.unsubscribe()},t.prototype._onVolumesDetected=function(e){if(!this._serverAudioActivityAvailable){var t=0,n=null;if(Object.keys(e).forEach((function(r){var o=e[r].smoothed;o>t&&o>xt.voiceParams.threshold&&(t=o,n=r)})),n&&n!==this._speakerId){var r=this._speakerId&&e.hasOwnProperty(this._speakerId)?e[this._speakerId].smoothed:0;t>r*xt.voiceParams.speakerLevelMultiplier&&(this._speakerId=n,this._triggerEvent("SPEAKER_CHANGED",n))}}},t.prototype._onServerSpeakerChanged=function(e){this._serverAudioActivityAvailable&&this._triggerEvent("SPEAKER_CHANGED",e)},t.prototype._onReceivedServerAudioActivity=function(){this._serverAudioActivityAvailable=!0},t.prototype._onStoppedReceivingServerAudioActivity=function(){this._serverAudioActivityAvailable=!1},t}(tt),Un=function(e){function t(t,n,r){var o=e.call(this)||this;return o._states={},o._volumes={},o._participants={},o._connectionTimeout=0,o._volumeTimeout=0,o._transport=t,o._participants=r,o.subscribe(t,"STATE_CHANGED",o._onTransportStateChanged.bind(o)),o.subscribe(n,"VOLUMES_DETECTED",o._onVolumesDetected.bind(o)),o}return Ge(t,e),t.prototype.destroy=function(){this.unsubscribe(),this._connectionTimeout&&window.clearTimeout(this._connectionTimeout),this._volumeTimeout&&window.clearTimeout(this._volumeTimeout)},t.prototype.onChangeRemoteMediaSettings=function(e,t){t.isAudioEnabled||(this._volumes[e]=1),t.isAudioEnabled&&(this._volumes[e]=0)},t.prototype._onTransportStateChanged=function(e,t){this._states[e]=t,"OPENED"===t&&(this._connectionTimeout||(this._connectionTimeout=window.setTimeout(this._onConnectionTimeout.bind(this),xt.specListenerParams.connectionTimeout)),this._volumeTimeout||(this._volumeTimeout=window.setTimeout(this._onVolumeTimeout.bind(this),xt.specListenerParams.volumeTimeout))),"FAILED"===t&&this._connectionTimeout&&(Ft.warn("Transport failed, send callSpecError"),this.log("callSpecError",this._transport.getTopology()+"_CONNECTION_TIMEOUT"))},t.prototype._onVolumesDetected=function(e){var t=this;Object.keys(e).forEach((function(n){t._volumes[n]=Math.max(e[n].real,t._volumes[n]||0)}))},t.prototype._onConnectionTimeout=function(){Object.values(this._states).filter((function(e){return"CONNECTED"!==e})).length>0&&(Ft.warn("There is not connected transport, send callSpecError"),this.log("callSpecError",this._transport.getTopology()+"_CONNECTION_TIMEOUT")),this._connectionTimeout=0},t.prototype._onVolumeTimeout=function(){var e=this,t=[];Object.keys(this._volumes).forEach((function(n){if(!(e._volumes[n]>0)){var r="UNKNOWN",o=e._participants[n];o&&o.platform&&(r=o.platform),t.indexOf(r)<0&&(t.push(r),e.log("callSpecError",e._transport.getTopology()+"_VOLUME_TIMEOUT_"+r))}})),t.length&&Ft.warn("There is silent participant, send callSpecError"),this._volumeTimeout=0},t}(tt);function Fn(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){for(var n=0,r=e;n<r.length;n++)if((0,r[n])(t))return!0;return!1}}function Wn(e,t){return function(n){return n[e]===t}}function Hn(e,t){return t.reduce((function(t,n){return t[n[e]]=n,t}),{})}function Kn(e){return Object.keys(e).filter((function(t){return void 0!==e[t]})).map((function(t){return[t,e[t]]})).reduce((function(e,t){return e[t[0]]=function(e){return null!==e&&"object"==typeof e&&!Array.isArray(e)}(t[1])?Kn(t[1]):t[1],e}),{})}function Vn(e){for(var t=[],n=0,r=e;n<r.length;n++)r[n].forEach((function(e){return t.push(e)}));return t}function qn(e){return Ye(this,void 0,void 0,(function(){var t;return $e(this,(function(n){return t=[],RTCRtpReceiver.prototype.getStats?(t.push.apply(t,e.getReceivers().map((function(e){return e.getStats()}))),t.push.apply(t,e.getSenders().map((function(e){return e.getStats()})))):t.push(e.getStats()),[2,Promise.all(t).then(Vn).then((function(e){return function(e,t){for(var n={},r=[],o=0,i=t;o<i.length;o++){var a=i[o],s=a.id;!0!==n[s]&&(n[s]=!0,r.push(a))}return r}(0,e)}))]}))}))}function Gn(e){var t,n=e.filter(Wn("type","candidate-pair")).sort((t="priority",function(e,n){return e[t]-n[t]})).find(Fn(Wn("nominated",!0),Wn("selected",!0)));if(!n)return{};var r={totalRoundTripTime:n.totalRoundTripTime,currentRoundTripTime:n.currentRoundTripTime,bytesSent:n.bytesSent,bytesReceived:n.bytesReceived},o=e.find(Wn("id",n.remoteCandidateId));o&&(r=Object.assign({},r,{remote:{type:o.candidateType,address:o.ip||o.address,port:o.port,protocol:o.protocol}}));var i=e.find(Wn("id",n.localCandidateId));return i&&(r=Object.assign({},r,{local:{type:i.candidateType,address:i.ip||i.address,port:i.port,protocol:i.protocol,relayProtocol:i.relayProtocol,networkType:i.networkType}})),Kn(r)}function zn(e,t){t=t||{};var n=Hn("id",e),r=e.filter(Fn(Wn("type","inbound-rtp"),Wn("type","outbound-rtp")));"Firefox"===Dn.browserName()&&(r=Object.values(r.reduce((function(e,t){if(e[t.ssrc]){var n=Object.assign({},e[t.ssrc],t),r=e[t.ssrc].isRemote?t:e[t.ssrc];n.id=r.id,n.type=r.type,delete n.isRemote,delete n.remoteId,e[n.ssrc]=n}else e[t.ssrc]=t;return e}),{})));var o={};return"Safari"===Dn.browserName()&&(o=Hn("trackIdentifier",e.filter(Wn("type","track")))),r.map((function(e){var r=e.ssrc,i=e.mediaType||e.kind,a=e.trackId,s=e.type,c=e.codecId;if("Safari"===Dn.browserName()){var u=/^.+_([\d]+)$/.exec(e.id);if(u&&(r=parseInt(u[1],10)),i=e.id.indexOf("Audio")>0?"audio":"video",t[r]){var l=i+"-"+t[r];o[l]&&(a=o[l].id)}}if(!s||!r||!i)return null;var d={ssrc:r,type:s,kind:i,bytesReceived:e.bytesReceived,bytesSent:e.bytesSent,jitter:e.jitter,packetsLost:e.packetsLost,packetsReceived:e.packetsReceived,packetsSent:e.packetsSent,fractionLost:e.fractionLost,pliCount:e.pliCount,firCount:e.firCount,nackCount:e.nackCount,userId:t[r]};if(c&&n[c]){var _=n[c];d.clockRate=_.clockRate,d.mimeType=_.mimeType}if(a&&n[a]){var p=n[a];d.frameHeight=p.frameHeight,d.frameWidth=p.frameWidth,d.framesDecoded=p.framesDecoded,d.framesReceived=p.framesReceived,d.framesDropped=p.framesDropped}return Kn(d)})).filter((function(e){return!!e}))}function Yn(e,t){if(!t)return e;if(!t.rtps||!e.rtps)return e;var n=Hn("ssrc",e.rtps),r=Hn("ssrc",t.rtps),o=(e.timestamp-t.timestamp)/1e3;return n&&r?(Object.keys(n).forEach((function(e){var t=n[e],i=r[e];t&&i&&(t.bytesReceived&&t.bytesReceived>i.bytesReceived&&(t.bandwidth=Math.round((t.bytesReceived-i.bytesReceived)/o)),t.bytesSent&&t.bytesSent>i.bytesSent&&(t.bandwidth=Math.round((t.bytesSent-i.bytesSent)/o)),t.packetsReceived>i.packetsReceived&&(t.packetLoss=parseFloat((100*(t.packetsLost-i.packetsLost)/(t.packetsReceived-i.packetsReceived)/o).toFixed(2))),t.framesDropped>i.framesDropped&&(t.framesDroppedDelta=parseFloat(((t.framesDropped-i.framesDropped)/o).toFixed(0))))})),e):e}function $n(e,t,n){return Ye(this,void 0,void 0,(function(){var r,o;return $e(this,(function(i){switch(i.label){case 0:return[4,qn(e)];case 1:return r=i.sent(),o={timestamp:Date.now(),transport:Gn(r),rtps:zn(r,n)},t?[3,3]:[4,Ht.delay(1e3)];case 2:return i.sent(),[2,$n(e,o,n)];case 3:return[2,Yn(o,t)]}}))}))}var Xn=function(e){function t(t,n,r,o,i){var a=e.call(this)||this;if(a._remoteSDP={},a._remoteCandidates={},a._state="IDLE",a._isOpen=!1,a._remotePeerId=null,a._statInterval=null,a._settingsInterval=null,a._failedOnCreate=null,a._remoteStream=null,a._iceRestartTimeout=null,a._reconnectionTimeout=null,a._reconnectionPrevented=!1,a._fingerprint=null,a._neverConnected=!0,a._prevConsumerSettings={},a._signaling=r,a._mediaSource=o,a._participantId=t,a._isMaster=n,a._serverSettings=i,a.subscribe(a._signaling,"NOTIFICATION",a._onSignalingNotification.bind(a)),a.subscribe(a._mediaSource,"TRACK_REPLACED",a._onReplacedTrack.bind(a)),a.subscribe(a._mediaSource,"SOURCE_CHANGED",a._applySettings.bind(a)),a._pc=new RTCPeerConnection({iceServers:xt.iceServers,iceTransportPolicy:xt.forceRelayPolicy?"relay":"all"},{optional:[{googSuspendBelowMinBitrate:!1}]}),a._pc.onicecandidate=a._handleIceCandidate.bind(a),a._pc.ontrack=a._onAddTrack.bind(a),a._pc.oniceconnectionstatechange=a._onIceConnectionStateChange.bind(a),a._pc.onconnectionstatechange=a._onConnectionStateChange.bind(a),a._pc.onsignalingstatechange=a._onSignalingStateChange.bind(a),a._prevConsumerSettings={},a._isMaster){try{a._mediaSource.addTrackToPeerConnection(a._pc),a._applySettings()}catch(e){return a.log("callError","addTrack-direct"),Ft.error("Unable to add media source tracks",e,{participantId:a._participantId}),a._failedOnCreate=e,a}a._createOffer(!1).catch((function(e){"IDLE"===a._state?a._failedOnCreate=e:a.close(e)}))}return a._startSettingsInterval(),a._startStatInterval(),a}return Ge(t,e),t.prototype.getState=function(){return this._state},t.prototype.updateStatisticsInterval=function(){this._stopStatInterval();var e=this.getState();"IDLE"!==e&&"CLOSED"!==e&&"FAILED"!==e&&this._startStatInterval()},t.prototype.open=function(e){return void 0===e&&(e=null),Ye(this,void 0,void 0,(function(){var t,n;return $e(this,(function(r){switch(r.label){case 0:if(this._isOpen)return Ft.warn("DirectTransport: Already opened",{participantId:this._participantId}),[2];if(this._failedOnCreate&&this.close(this._failedOnCreate),Ft.debug("DirectTransport: Open transport",{participantId:this._participantId}),this._isOpen=!0,this._remotePeerId=e,!this._isMaster)try{this._mediaSource.addTrackToPeerConnection(this._pc),this._applySettings()}catch(e){this.log("callError","addTrack-direct"),Ft.error("DirectTransport: Unable to add media source tracks",e,{participantId:this._participantId}),this.close(e)}if(t=e,e||(n=Object.keys(this._remoteSDP),t=n[n.length-1]),!t||!this._remoteSDP[t])return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this._setRemoteDescription(t,this._remoteSDP[t])];case 2:return r.sent(),[3,4];case 3:return r.sent(),this.close(),[3,4];case 4:return this._remoteSDP={},this._remoteCandidates={},this._setState("OPENED"),this._triggerEvent("ACTIVE_PARTICIPANTS_NO_SIGNAL"),[2]}}))}))},t.prototype.updateSettings=function(e){kn(e,this._serverSettings)||(this._serverSettings=e,this._applySettings())},t.prototype.preventRestart=function(){this._reconnectionPrevented=!0},t.prototype.allowRestart=function(){this._reconnectionPrevented=!1},t.prototype.close=function(e){var t=this;this._isOpen=!1,this._stopReconnection(),this._remoteStream&&(this._remoteStream.getTracks().forEach((function(e){e.stop(),t._triggerEvent("REMOTE_TRACK_REMOVED",t._remoteStream,e)})),this._remoteStream=null),this._stopStatInterval(),this._stopSettingsInterval(),this._pc&&(this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.oniceconnectionstatechange=null,this._pc.onconnectionstatechange=null,this._pc.onsignalingstatechange=null,this._pc.close()),this.unsubscribe(),e?(Ft.error("DirectTransport: Closed",e,{participantId:this._participantId}),this._setState("FAILED")):(Ft.debug("DirectTransport: Closed",{participantId:this._participantId}),this._setState("CLOSED"))},t.prototype._setState=function(e){this._state!==e&&(Ft.debug("DirectTransport: State changed to "+e,{participantId:this._participantId}),this._state=e,this._triggerEvent("STATE_CHANGED",e),this._triggerEvent("LOCAL_STATE_CHANGED",e))},t.prototype._onSignalingNotification=function(e){"transmitted-data"===e.notification&&this._handleTransmittedData(e)},t.prototype._handleTransmittedData=function(e){var t=e.data,n=Ht.getPeerIdString(e.peerId);Ht.composeMessageId(e)===this._participantId&&(t.candidate&&t.candidate.candidate?this._addIceCandidate(n,t.candidate).catch(this.close.bind(this)):t.sdp&&this._setRemoteDescription(n,t.sdp).catch(this.close.bind(this)))},t.prototype._addIceCandidate=function(e,t){return Ye(this,void 0,void 0,(function(){var n;return $e(this,(function(r){switch(r.label){case 0:if(!this._isOpen||this._remotePeerId&&this._remotePeerId!==e||!this._pc||!this._pc.remoteDescription)return[3,5];Ft.debug("Add remote ice candidate",{participantId:this._participantId,candidate:t}),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this._pc.addIceCandidate(new RTCIceCandidate(t))];case 2:return r.sent(),[3,4];case 3:throw n=r.sent(),this.log("callError","addIceCandidate-direct"),Ft.error("Unable to add remote ice candidate",n,{participantId:this._participantId,candidate:t}),n;case 4:return[3,6];case 5:Ft.debug("Cache remote ice candidate",{participantId:this._participantId,candidate:t}),this._remoteCandidates[e]=this._remoteCandidates[e]||[],this._remoteCandidates[e].push(t),r.label=6;case 6:return[2]}}))}))},t.prototype._setRemoteCandidates=function(e){return Ye(this,void 0,void 0,(function(){var t,n,r,o;return $e(this,(function(i){switch(i.label){case 0:if(!this._remoteCandidates[e])return Ft.log("No cached candidates found for peer "+e),[2];t=this._remoteCandidates[e],this._remoteCandidates[e]=[],n=0,r=t,i.label=1;case 1:if(!(n<r.length))return[3,6];o=r[n],i.label=2;case 2:return i.trys.push([2,4,,5]),[4,this._addIceCandidate(e,o)];case 3:case 4:return i.sent(),[3,5];case 5:return n++,[3,1];case 6:return[2]}}))}))},t.prototype._setRemoteDescription=function(e,t){return Ye(this,void 0,void 0,(function(){var n;return $e(this,(function(r){switch(r.label){case 0:if(!this._isOpen||this._remotePeerId&&this._remotePeerId!==e||!this._pc)return[3,6];Ft.debug("Add remote description",{participantId:this._participantId,sdp:t}),this._calcFingerprint(t.sdp),r.label=1;case 1:return r.trys.push([1,4,,5]),[4,this._pc.setRemoteDescription(new RTCSessionDescription(t))];case 2:return r.sent(),[4,this._setRemoteCandidates(e)];case 3:return r.sent(),[3,5];case 4:throw n=r.sent(),this.log("callError","setRemoteDescription-direct"),Ft.error("Unable to set remote description",n,{participantId:this._participantId,sdp:t}),n;case 5:return[3,7];case 6:this._remoteSDP[e]=t,r.label=7;case 7:return[2]}}))}))},t.prototype._onAddTrack=function(e){var t=this;if(Ft.debug("Added remote track",{participantId:this._participantId}),!this._remoteStream){var n=e.streams[0];n.onremovetrack=function(e){t._triggerEvent("REMOTE_TRACK_REMOVED",n,e.track)},this._remoteStream=n}this._triggerEvent("REMOTE_TRACK_ADDED",this._remoteStream,e.track)},t.prototype._handleIceCandidate=function(e){return Ye(this,void 0,void 0,(function(){return $e(this,(function(t){switch(t.label){case 0:return e.candidate?(Ft.debug("Local ice candidate",{participantId:this._participantId,candidate:e.candidate}),[4,this._signaling.sendCandidate(this._participantId,e.candidate)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype._onSignalingStateChange=function(){var e=this;switch(Ft.debug("DirectTransport: Signaling state changed to "+this._pc.signalingState,{participantId:this._participantId}),this._pc.signalingState){case"have-local-offer":var t=this._pc.localDescription;t?this._signaling.sendSdp(this._participantId,t).catch(this.close.bind(this)):this.close(new Error);break;case"have-remote-offer":this._createAnswer().catch(this.close.bind(this)).then((function(t){return Ye(e,void 0,void 0,(function(){return $e(this,(function(e){return[2,this._signaling.sendSdp(this._participantId,t)]}))}))})).catch(this.close.bind(this))}},t.prototype._onIceConnectionStateChange=function(){switch(Ft.debug("DirectTransport: Ice Connection state changed to "+this._pc.iceConnectionState,{participantId:this._participantId}),this._pc.iceConnectionState){case"checking":var e=this.getState();"IDLE"===e||"OPENED"===e?this._setState("CONNECTING"):this._setState("RECONNECTING")}},t.prototype._onConnectionStateChange=function(){var e=this;switch(Ft.debug("DirectTransport: Connection state changed to "+this._pc.connectionState,{participantId:this._participantId}),this.log("callIceConnectionState",this._pc.connectionState),this._pc.connectionState){case"connected":this._neverConnected=!1,this._setState("CONNECTED"),this._stopReconnection(),Ht.getPeerConnectionHostInfo(this._pc).then((function(t){t&&e.log("callIceConnectionType",t.type)}));break;case"failed":case"disconnected":this._reconnectionPrevented?this.close(new Error("Ice connection "+this._pc.connectionState)):(this._setState("RECONNECTING"),this._startReconnection());break;case"closed":this.close(new Error("Ice connection closed"))}},t.prototype._startReconnection=function(){var e=this;this._reconnectionTimeout||this._iceRestartTimeout||(Ft.log("Waiting for reconnection...",{participantId:this._participantId}),this._reconnectionTimeout=window.setTimeout((function(){e._reconnectionTimeout=null,e._neverConnected?e._requestTopologySwitch():e._startIceRestart()}),xt.transportConnectionWaitTime))},t.prototype._requestTopologySwitch=function(){this._isMaster&&(Ft.log("Switch topology DIRECT to SERVER",{participantId:this._participantId}),this._signaling.switchTopology("SERVER"))},t.prototype._stopReconnection=function(){this._reconnectionTimeout&&(clearTimeout(this._reconnectionTimeout),this._reconnectionTimeout=null),this._iceRestartTimeout&&(clearTimeout(this._iceRestartTimeout),this._iceRestartTimeout=null)},t.prototype._startIceRestart=function(){var e=this;this._isMaster?(this.log("callIceRestart"),Ft.log("Ice restart",{participantId:this._participantId}),this._createOffer(!0).catch(this.close.bind(this))):Ft.debug("Waiting for ice restart...",{participantId:this._participantId}),this._iceRestartTimeout=window.setTimeout((function(){e._iceRestartTimeout=null,Ft.error("Ice restart failed",{participantId:e._participantId}),e.log("callError","iceRestart-direct"),e._requestTopologySwitch()}),xt.iceRestartWaitTime)},t.prototype._createOffer=function(e){return Ye(this,void 0,void 0,(function(){var n,r=this;return $e(this,(function(o){return n={iceRestart:e,offerToReceiveAudio:!0,offerToReceiveVideo:!0},Ft.debug("Create offer",{participantId:this._participantId,options:n}),[2,this._pc.createOffer(n).catch((function(e){throw Ft.error("Unable to create offer",e,{participantId:r._participantId}),r.log("callError","createOffer-direct"),e})).then((function(e){return Ye(r,void 0,void 0,(function(){var n=this;return $e(this,(function(r){return Ft.debug("Created offer",{participantId:this._participantId,offer:e}),e=t._patchDescription(e),Ft.debug("Set local description",{participantId:this._participantId,offer:e}),this._calcFingerprint(e.sdp),[2,this._pc.setLocalDescription(e).then((function(){return n._pc.localDescription}))]}))}))})).catch((function(e){throw Ft.error("Unable to set local description",e,{participantId:r._participantId}),r.log("callError","setLocalDescription-direct"),e}))]}))}))},t.prototype._createAnswer=function(){return Ye(this,void 0,void 0,(function(){var e=this;return $e(this,(function(n){return Ft.debug("Create answer",{participantId:this._participantId}),[2,this._pc.createAnswer().catch((function(t){throw Ft.error("Unable to create answer",t,{participantId:e._participantId}),e.log("callError","createAnswer-direct"),t})).then((function(n){return Ye(e,void 0,void 0,(function(){return $e(this,(function(e){return Ft.debug("Created answer",{participantId:this._participantId,answer:n}),n=t._patchDescription(n),Ft.debug("Set local description",{participantId:this._participantId,answer:n}),this._calcFingerprint(n.sdp),[2,this._pc.setLocalDescription(n)]}))}))})).then((function(){return e._pc.localDescription})).catch((function(t){throw Ft.error("Unable to set local description",t,{participantId:e._participantId}),e.log("callError","setLocalDescription-direct"),t}))]}))}))},t._patchDescription=function(e){return e.sdp=Ht.patchSDP(e.sdp,xt.preferH264&&Dn.canPreferH264(),Dn.isBrokenH264(),xt.preferVP9),e},t.prototype._onReplacedTrack=function(e){var t=this;this._pc&&(this._pc.getSenders().forEach((function(n){n.track&&n.track.kind===e.kind&&(n.track.enabled=e.enabled,n.replaceTrack(e).catch((function(e){Ft.error("DirectTransport: Unable to replace track",e,{participantId:t._participantId}),t.log("callError","replaceTrack-direct")})))})),this._applySettings())},t.prototype._startStatInterval=function(){var e=this;if(!this._statInterval){var t=function(){e._pc?$n(e._pc,e._lastStat,{}).then((function(n){e._lastStat=n;var r={inbound:{topology:"DIRECT",transport:n.transport,rtps:n.rtps.filter((function(t){return"inbound-rtp"===t.type&&(t.userId=e._participantId,!0)}))},outbound:{topology:"DIRECT",transport:n.transport,rtps:n.rtps.filter((function(e){return"outbound-rtp"===e.type}))}};e._triggerEvent("REMOTE_DATA_STATS",r),e._statInterval=window.setTimeout(t,xt.statisticsInterval)})):e._stopStatInterval()};this._statInterval=window.setTimeout(t,xt.statisticsInterval)}},t.prototype._stopStatInterval=function(){this._statInterval&&(window.clearTimeout(this._statInterval),this._statInterval=null)},t.prototype._startSettingsInterval=function(){var e=this;if(!this._settingsInterval){var t=function(){e._pc?(e._applySettings(),e._settingsInterval=window.setTimeout(t,2e3)):e._stopSettingsInterval()};this._settingsInterval=window.setTimeout(t,2e3)}},t.prototype._stopSettingsInterval=function(){this._settingsInterval&&(window.clearTimeout(this._settingsInterval),this._settingsInterval=null)},t.prototype._calcFingerprint=function(e){var t=Ht.sdpFingerprint(e);null===this._fingerprint?this._fingerprint=t:(Nt.onFingerprintChange(this._fingerprint.xor(t).toString()),this._fingerprint=null)},t.prototype._applySettings=function(){var e=this._mediaSource.getMediaSettings().isScreenSharingEnabled?this._serverSettings.screenSharing:this._serverSettings.camera;e&&this._pc&&(this._prevConsumerSettings=Ht.applySettings(this._pc,e,this._prevConsumerSettings))},t}(tt),Qn=function(){function e(){this.compactedIds=new Map,this.reversedMap=new Map}return e.prototype.getId=function(e){return this.reversedMap.get(e)},e.prototype.getCompactedId=function(e){return this.compactedIds.get(e)},e.prototype.handleMessage=function(e){var t=this,n=new Uint8Array(e),r=n[0],o=n.subarray(1);switch(r){case 1:var i=He(o);return Object.entries(i).forEach((function(e){var n=e[0],r=e[1];t.compactedIds.set(n,r),t.reversedMap.set(r,n)})),null;case 2:case 4:for(var a=[],s=0,c=He(o);s<c.length;s++){var u=c[s],l=this.getId(u);l&&a.push(l)}return 2===r?{type:"notification",notification:"audio-activity",activeParticipants:a}:{type:"notification",notification:"stalled-activity",stalledParticipants:a};case 3:var d=He(o);return{type:"notification",notification:"speaker-changed",speaker:this.getId(d)};case 5:var _=He(o);return{type:"notification",notification:"video-quality-update",quality:{maxBitrate:_[0],maxDimension:_[1]}};case 6:for(var p=He(o),h={},f=0,m=Object.entries(p);f<m.length;f++){var g=m[f],v=g[0],b=g[1],y=this.getId(Number(v));y&&(h[y]=b/100)}return{type:"notification",notification:"network-status",statuses:h};default:return Ft.debug("unsupported message type: "+r),null}},e}();function Jn(e,t){var n,r=this;function o(e,t){void 0===e&&(e=null),void 0===t&&(t=null),r.postMessage({type:"frame",frame:e,error:t})}e({locateFile:function(e){return"https://st.mycdn.me/static/callssdk/libvpx-wasm-static/"+e}}).then((function(e){if(!(n=new e.VpxEncoder).init(t?e.VpxType.VP9:e.VpxType.VP8))throw new Error("LibVPxEncoder failed to create");n.setMaxQuantizer(10),n.setTargetBitrate(1024)})).then((function(){r.onmessage=function(e){switch(e.data.type){case"frame":!function(e,t,r,i){var a=n.allocateImage(e,t);if(!a)return o(null,new Error("No buffer data"));a.set(r);var s=Math.round(performance.now());if(!n.encode(s,150,i))return o(null,new Error("Encode failed"));var c=n.readFrame();if(!c)return o(null,new Error("No encoded data"));n.readFrame()&&Ft.warn("LibVPxEncoder dropped frame");var u=new Uint8Array(c.byteLength);u.set(c),o({type:i?"key":"delta",timestamp:s,duration:150,data:u.buffer})}(e.data.width,e.data.height,e.data.imageData,e.data.keyFrame)}},r.postMessage({type:"ready"})})).catch((function(e){r.postMessage({type:"error",error:e})}))}var Zn=function(){function e(e){this._video=null,this._canvas=null,this._canvasCtx=null,this._stream=null,this._track=null,this._worker=null,this._processing=null,this._sourceTrack=e}return e.prototype._createWorker=function(){return Ye(this,void 0,void 0,(function(){var e=this;return $e(this,(function(t){return[2,new Promise((function(t,n){var r="("+Jn+")("+Ve.a+", "+e.isVP9()+");",o=new Blob([r],{type:"application/javascript; charset=utf-8"}),i=window.URL.createObjectURL(o);e._worker=new Worker(i),e._worker.onmessage=function(r){switch(r.data.type){case"ready":t();break;case"error":n(r.data.error);break;case"frame":e._processing&&(r.data.error?e._processing.reject(r.data.error):e._processing.resolve(r.data.frame),e._processing=null)}}}))]}))}))},e.prototype._removeWorker=function(){var e;null===(e=this._worker)||void 0===e||e.terminate(),this._worker=null},e.prototype._sendToWorker=function(e,t){var n;null===(n=this._worker)||void 0===n||n.postMessage(Object.assign({type:e},t))},e.prototype._createDom=function(){this._canvas||(this._canvas=document.createElement("canvas"),this._canvas.style.pointerEvents="none",this._canvas.style.visibility="hidden",this._canvas.style.position="absolute",this._canvas.style.width="160px",this._canvas.style.height="90px",this._canvas.style.bottom="0",this._canvas.style.right="160px",this._canvas.style.zIndex="5000",this._canvasCtx=this._canvas.getContext("2d"),document.body.appendChild(this._canvas)),this._video||(this._video=document.createElement("video"),this._video.controls=!1,this._video.autoplay=!1,this._video.preload="auto",this._video.muted=!0,this._video.style.pointerEvents="none",this._video.style.visibility="hidden",this._video.style.position="absolute",this._video.style.width="160px",this._video.style.height="90px",this._video.style.bottom="0",this._video.style.right="0",this._video.style.zIndex="5000",document.body.appendChild(this._video))},e.prototype._removeDom=function(){try{this._canvas&&document.body.removeChild(this._canvas),this._video&&document.body.removeChild(this._video)}catch(e){}this._canvasCtx=null,this._canvas=null,this._video=null},e.prototype._createStream=function(e){return Ye(this,void 0,void 0,(function(){var t=this;return $e(this,(function(n){if(!this._canvas||!this._video)throw new Error("Video element or canvas not found");return this._stream=this._canvas.captureStream(0),[2,new Promise((function(n,r){var o=t._video;o.srcObject=new MediaStream([e]),o.onloadeddata=function(){var e;t._track=null===(e=t._stream)||void 0===e?void 0:e.getVideoTracks()[0],n()},o.onerror=function(){return r(new Error("Video element error"))};var i=o.play(),a=function(){return r(new Error("Autoplay is disabled"))};i?i.catch(a):a()}))]}))}))},e.prototype._removeStream=function(){this._stream&&(this._stream.getTracks().forEach((function(e){return e.stop()})),this._stream=null,this._track=null),this._video&&(this._video.pause(),this._video.srcObject&&this._video.srcObject.getTracks().forEach((function(e){return e.stop()})),this._video.srcObject=null)},e.prototype._drawFrame=function(e,t){if(!(this._canvas&&this._canvasCtx&&this._video&&this._track))throw new Error("Fatal error");return this._canvasCtx.drawImage(this._video,0,0,e,t),this._requestCanvasFrame(),this._canvasCtx.getImageData(0,0,e,t)},e.prototype._requestCanvasFrame=function(){this._track&&this._track.requestFrame?this._track.requestFrame():this._stream&&this._stream.requestFrame&&this._stream.requestFrame()},e.prototype.init=function(){return Ye(this,void 0,void 0,(function(){var e,t,n,r;return $e(this,(function(o){switch(o.label){case 0:return this._createDom(),e=this._video,t=this._canvas,n=this._sourceTrack.getSettings().width,r=this._sourceTrack.getSettings().height,t.width=e.width=n,t.height=e.height=r,Ft.debug("LibVPxEncoder started "+n+"x"+r),[4,this._createStream(this._sourceTrack)];case 1:return o.sent(),[4,this._createWorker()];case 2:return o.sent(),[2]}}))}))},e.prototype.requestFrame=function(e){return void 0===e&&(e=!1),Ye(this,void 0,void 0,(function(){var t,n,r,o,i,a=this;return $e(this,(function(s){if(this._processing)throw new Error("Encoder is busy");if(!this._canvas||!this._canvasCtx)throw new Error("No canvas found");return t=this._video,n=this._canvas,r=n.width=t.width=t.videoWidth,o=n.height=t.height=t.videoHeight,i=this._drawFrame(r,o),[2,new Promise((function(t,n){a._sendToWorker("frame",{width:r,height:o,imageData:i.data,keyFrame:e}),a._processing={resolve:t,reject:n,keyFrame:e}}))]}))}))},e.prototype.isVP9=function(){return!1},e.prototype.destroy=function(){this._processing=null,this._removeWorker(),this._removeStream(),this._removeDom(),Ft.debug("LibVPxEncoder destroyed")},e.isBrowserSupported=function(){return"WebAssembly"in window&&"Worker"in window&&("CanvasCaptureMediaStream"in window||"CanvasCaptureMediaStreamTrack"in window)},e}(),er=function(){function e(e){this._encoder=null,this._processing=null,this._encoding=!1,this._sourceTrack=e,this._trackReader=new VideoTrackReader(e)}return e.prototype.init=function(){return Ye(this,void 0,void 0,(function(){var e,t,n=this;return $e(this,(function(r){return e=this._sourceTrack.getSettings().width,t=this._sourceTrack.getSettings().height,Ft.debug("WebCodecsEncoder started "+e+"x"+t),this._encoder=new VideoEncoder({output:function(e){return n._encoderOutputHandler(e)},error:function(e){return n._encoderErrorHandler(e)}}),this._encoder.configure({framerate:xt.screenFrameRate,codec:this.isVP9()?"vp09.00.50.08":"vp8",width:e,height:t}),this._trackReader.start((function(r){n._processing&&!n._encoding&&n._encoder&&(n._encoding=!0,r.codedWidth===e&&r.codedHeight===t||n._encoder.configure({framerate:xt.screenFrameRate,codec:n.isVP9()?"vp09.00.50.08":"vp8",width:r.codedWidth,height:r.codedHeight}),n._encoder.encode(r,{keyFrame:n._processing.keyFrame})),r.destroy()})),[2]}))}))},e.prototype._encoderOutputHandler=function(e){this._processing&&(this._processing.resolve(e),this._processing=null),this._encoding=!1},e.prototype._encoderErrorHandler=function(e){this._processing&&(this._processing.reject(e),this._processing=null),this._encoding=!1},e.prototype.requestFrame=function(e){return void 0===e&&(e=!1),Ye(this,void 0,void 0,(function(){var t=this;return $e(this,(function(n){if(this._processing)throw new Error("Encoder is busy");return[2,new Promise((function(n,r){t._processing={resolve:n,reject:r,keyFrame:e}}))]}))}))},e.prototype.isVP9=function(){return!0},e.prototype.destroy=function(){var e;this._processing=null,this._encoding=!1;try{this._trackReader.stop()}catch(e){}null===(e=this._encoder)||void 0===e||e.close(),this._encoder=null,Ft.debug("WebCodecsEncoder destroyed")},e.isBrowserSupported=function(){return"VideoEncoder"in window&&"VideoTrackReader"in window&&"EncodedVideoChunk"in window},e}(),tr=0,nr=function(){function e(e,t){var n=this;this._destroyed=!1,this._needKeyframe=!0,Ft.debug("ScreenCaptureSender started"),this._datachannel=t,er.isBrowserSupported()?this._encoder=new er(e):this._encoder=new Zn(e),this._datachannel.onmessage=function(e){var t=e.data;if(t&&t.byteLength&&4===t.byteLength){var r=new DataView(t);1===r.getUint8(0)&&1===r.getUint8(1)&&0===r.getUint16(2)&&(Ft.debug("["+n._datachannel.label+"] Requested keyframe"),n._needKeyframe=!0)}},this._encoder.init().then((function(){return n._loopFn()})).catch((function(e){return Ft.warn("ScreenCaptureSender init failed",e)}))}return e.prototype._loopFn=function(){return Ye(this,void 0,void 0,(function(){var e,t,n;return $e(this,(function(r){switch(r.label){case 0:if(this._destroyed)return[2];r.label=1;case 1:return r.trys.push([1,4,,6]),e=this._needKeyframe,this._needKeyframe=!1,[4,this._encoder.requestFrame(e)];case 2:return t=r.sent(),[4,this._send(t)];case 3:return r.sent(),[3,6];case 4:return n=r.sent(),Ft.warn("requestFrame failed",n),[4,Ht.delay(100)];case 5:return r.sent(),[3,6];case 6:return[2,this._loopFn()]}}))}))},e.prototype._wrapHeader=function(e,t,n,r,o){var i=0;t&&(i|=1),n&&(i|=2),r&&(i|=4),o||(i|=8);var a=new ArrayBuffer(11),s=new DataView(a);if(s.setUint8(0,1),s.setUint16(1,tr),s.setUint32(3,e),s.setUint8(7,this._encoder.isVP9()?1:0),s.setUint16(8,0),s.setUint8(10,i),tr=(tr+1)%65536,!o)return a;var c=new Uint8Array(a.byteLength+o.byteLength);return c.set(new Uint8Array(a),0),c.set(new Uint8Array(o),a.byteLength),c.buffer},e.prototype._stopPacket=function(){return this._wrapHeader(Date.now(),!1,!1,!1,null)},e.prototype._send=function(e){return Ye(this,void 0,void 0,(function(){var t=this;return $e(this,(function(n){return[2,new Promise((function(n,r){t._sendChunk(e,0,n,r)}))]}))}))},e.prototype._sendChunk=function(e,t,n,r){var o=this;if(this._datachannel&&"open"===this._datachannel.readyState){var i=e.data.slice(t,t+16373),a=e.data.byteLength<=t+i.byteLength,s=this._wrapHeader(e.timestamp,!t,a,"key"===e.type,i);this._datachannel.onbufferedamountlow=a?function(){o._datachannel.bufferedAmount<=o._datachannel.bufferedAmountLowThreshold&&n()}:null;try{this._datachannel.send(s)}catch(e){return Ft.warn("Error send data to DataChannel",e),void r()}a||setTimeout((function(){return o._sendChunk(e,t+16373,n,r)}),0)}else r()},e.prototype.destroy=function(){this._datachannel.onbufferedamountlow=null,this._datachannel.onmessage=null,"open"===this._datachannel.readyState&&this._datachannel.send(this._stopPacket()),this._destroyed=!0,this._encoder.destroy(),Ft.debug("ScreenCaptureSender destroyed")},e.isBrowserSupported=function(){return er.isBrowserSupported()||Zn.isBrowserSupported()},e}(),rr=function(e){function t(t,n){var r=e.call(this)||this;return r._previousTimestamp=0,r._renderDropRate=0,r._signaling=n,r.subscribe(t,"REMOTE_DATA_STATS",r._handleStats.bind(r)),r}return Ge(t,e),t.prototype.destroy=function(){this.unsubscribe()},t.getEstimatedPerformanceIndex=function(){try{var e=parseInt(localStorage.getItem("videochat-epi")||"",10);return isNaN(e)?0:e}catch(e){return 0}},t.prototype._handleStats=function(e){return Ye(this,void 0,void 0,(function(){var t,n,r;return $e(this,(function(o){switch(o.label){case 0:if(!xt.perfStatReportEnabled)return[2];if(!e.inbound||!e.inbound.rtps)return[2];if(t=e.inbound.rtps.filter((function(e){return"video"===e.kind})).map((function(e){return{framesDecoded:e.framesDecoded||0,framesReceived:e.framesReceived||0}})).reduce((function(e,t){return e.framesDecoded+=t.framesDecoded,e.framesReceived+=t.framesReceived,e}),{framesDecoded:0,framesReceived:0}),n=Date.now(),this._renderDropRate&&(t.renderDropRate=this._renderDropRate),this._previousTimestamp+5e3>n)return[2];if(!t.framesDecoded&&!t._renderDropRate)return[3,4];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this._signaling.reportPerfStat(t)];case 2:return r=o.sent(),localStorage.setItem("videochat-epi",r.estimatedPerformanceIndex),[3,4];case 3:return o.sent(),[3,4];case 4:return this._previousTimestamp=n,[2]}}))}))},t.prototype._onUIPerformanceStatistics=function(e){if(e.decoded){var t=e.dropped/(e.decoded+e.dropped);this._renderDropRate=.2*t+.8*this._renderDropRate}},t}(tt),or={iceRestart:!1,offerToReceiveAudio:!1,offerToReceiveVideo:!1},ir=function(e){function t(t,n,r){var o=e.call(this)||this;return o._consumer=null,o._producer=null,o._producerNotification=null,o._producerCommand=null,o._consumerScreen=null,o._isOpen=!1,o._reconnectionPrevented=!1,o._state={},o._statInterval=null,o._settingsInterval=null,o._statBytes={},o._ssrcMap={},o._producerOfferIsProcessing=!1,o._producerNextOffer=null,o._prevConsumerSettings={},o._hasAudioMix=!1,o._captureSender=null,o._participantIdRegistry=null,o._tracksWhoseUploadWasDisabled=new Map,o._signaling=t,o._mediaSource=n,o._state.consumer="IDLE",o._state.producer="IDLE",o._signaling&&o._mediaSource&&(o.subscribe(o._signaling,"NOTIFICATION",o._onSignalingNotification.bind(o)),o.subscribe(o._mediaSource,"TRACK_REPLACED",o._onReplacedTrack.bind(o)),o.subscribe(o._mediaSource,"SOURCE_CHANGED",o._applyConsumerSettings.bind(o)),o.subscribe(o._mediaSource,"SCREEN_STATUS",o._onScreenSharingStatus.bind(o))),o._interop=new he.Interop,o._perfStatReporter=new rr(o,t),o._serverSettings=r,xt.consumerScreenDataChannel&&!nr.isBrowserSupported()&&(xt.consumerScreenDataChannel=!1),Ft.debug("ServerTransport: Created"),o}return Ge(t,e),t.prototype.getState=function(){return this._getState("producer")},t.prototype.getLocalState=function(){return this._getState("consumer")},t.prototype.updateStatisticsInterval=function(){this._stopStatInterval();var e=this._getState("producer");"IDLE"!==e&&"CLOSED"!==e&&"FAILED"!==e&&this._startStatInterval()},t.prototype.open=function(){this._isOpen?Ft.log("ServerTransport: Already opened connections"):(this._isOpen=!0,this._openConnection("producer"),this._openConnection("consumer"))},t.prototype.close=function(e){this._isOpen=!1,this._closeConnection("producer"),this._closeConnection("consumer"),this.unsubscribe(),e?(Ft.error("ServerTransport: Closed",e),this._setState("FAILED","consumer"),this._setState("FAILED","producer")):(Ft.debug("ServerTransport: Closed"),this._setState("CLOSED","consumer"),this._setState("CLOSED","producer"))},t.prototype.preventRestart=function(){this._reconnectionPrevented=!0},t.prototype.allowRestart=function(){this._reconnectionPrevented=!1},t.prototype.updateSettings=function(e){kn(e,this._serverSettings)||(this._serverSettings=e,this._applyConsumerSettings())},t.prototype._closeConnection=function(e){this._stopStatInterval(),this._stopSettingsInterval(),"producer"===e&&this._producer&&(this._producer.ontrack=null,this._producer.onconnectionstatechange=null,this._producer.onsignalingstatechange=null,t._closeDataChannel(this._producerNotification),this._participantIdRegistry=null,t._closeDataChannel(this._producerCommand),this._producer.close(),this._producer=null,this._producerOfferIsProcessing=!1,this._producerNextOffer=null,this._interop=new he.Interop),"consumer"===e&&this._consumer&&(this._tracksWhoseUploadWasDisabled.forEach((function(e){return e.stop()})),this._tracksWhoseUploadWasDisabled.clear(),this._removeCaptureSender(),this._consumer.ontrack=null,this._consumer.onconnectionstatechange=null,this._consumer.onsignalingstatechange=null,t._closeDataChannel(this._consumerScreen),this._consumer.close(),this._consumer=null)},t._closeDataChannel=function(e){e&&(e.onopen=null,e.onmessage=null,e.onerror=null,e.close())},t.prototype._createDataChannel=function(e,t,n){Ft.debug("["+t+"] data channel opening");var r=e.createDataChannel(t,{ordered:!0});r.onopen=function(){Ft.debug("["+t+"] data channel opened"),r.onerror=function(e){Ft.error("["+t+"] data channel error",e)},n(r)}},t.prototype._openConnection=function(e){var n,r=this;Ft.debug("ServerTransport: Open connection for "+e);var o={};if(Dn.baseChromeVersion()&&(o.sdpSemantics=t._isUnifiedPlanSupported()?"unified-plan":"plan-b"),"producer"===e&&(this._producer=new RTCPeerConnection(o,{optional:[{googSuspendBelowMinBitrate:!1}]}),this._producer.ontrack=this._onAddTrack.bind(this,this._producer,"producer"),this._producer.onconnectionstatechange=Ht.throttle((function(e){r._producer&&r._onConnectionStateChange(r._producer,"producer",e)}),500),this._producer.onsignalingstatechange=t._onSignalingStateChange.bind(this,this._producer,"producer"),xt.producerNotificationDataChannel&&this._createDataChannel(this._producer,"producerNotification",(function(e){r._producerNotification=e,r._producerNotification.binaryType="arraybuffer",r._participantIdRegistry=new Qn,r._signaling.setParticipantIdRegistry(r._participantIdRegistry),r._signaling.setProducerNotificationDataChannel(e)})),xt.producerCommandDataChannel&&this._createDataChannel(this._producer,"producerCommand",(function(e){r._producerCommand=e,r._signaling.setProducerCommandDataChannel(e)})),this._setState("OPENED","producer")),"consumer"===e){this._consumer=new RTCPeerConnection(o,{optional:[{googSuspendBelowMinBitrate:!1}]}),this._consumer.ontrack=this._onAddTrack.bind(this,this._consumer,"consumer"),this._consumer.onconnectionstatechange=this._onConnectionStateChange.bind(this,this._consumer,"consumer"),this._consumer.onsignalingstatechange=t._onSignalingStateChange.bind(this,this._consumer,"consumer");try{this._mediaSource.addTrackToPeerConnection(this._consumer),this._prevConsumerSettings={},this._applyConsumerSettings()}catch(e){return Ft.error("ServerTransport: Unable to add media source tracks",e),this.log("callError","addTrack-consumer"),void this.close(e)}var i=null===(n=this._mediaSource.getStream())||void 0===n?void 0:n.getVideoTracks()[0];xt.consumerScreenDataChannel&&i&&this._createDataChannel(this._consumer,"consumerScreenShare",(function(e){r._consumerScreen=e,r._consumerScreen.binaryType="arraybuffer",r._createCaptureSender(i)})),this._allocateConsumer(),this._setState("OPENED","consumer")}this._startStatInterval(),this._startSettingsInterval()},t.prototype._reconnect=function(e){this._setState("RECONNECTING",e),this._closeConnection(e),this._openConnection(e)},t.prototype._signalActiveParticipants=function(e){this._triggerEvent("SIGNALLED_ACTIVE_PARTICIPANTS",e)},t.prototype._signalStalledParticipants=function(e){this._triggerEvent("SIGNALLED_STALLED_PARTICIPANTS",e)},t.prototype._signalSpeakerChanged=function(e){this._triggerEvent("SIGNALLED_SPEAKER_CHANGED",e)},t.prototype._signalNetworkStatus=function(e){this._triggerEvent("SIGNALLED_NETWORK_STATUS",e)},t.prototype._updateSSRCMap=function(e){var t=this;e&&e.sdp.split("\n").forEach((function(e){var n=/a=ssrc:([0-9]+) label:(audio|video)-((?:[ug]?[\d]+)|(?:mix))/.exec(e);n&&(t._ssrcMap[n[1]]=n[3])}))},t.prototype._createCaptureSender=function(e){e&&xt.consumerScreenDataChannel&&this._consumerScreen&&this._mediaSource.getMediaSettings().isScreenSharingEnabled&&(this._captureSender&&this._removeCaptureSender(),this._captureSender=new nr(e,this._consumerScreen))},t.prototype._removeCaptureSender=function(){var e;null===(e=this._captureSender)||void 0===e||e.destroy(),this._captureSender=null},t.prototype._applyConsumerSettings=function(){var e=this,t=this._mediaSource.getMediaSettings().isScreenSharingEnabled?this._serverSettings.screenSharing:this._serverSettings.camera;if(t&&this._consumer){var n=[];this._consumer.getSenders().forEach((function(r){if(r.track&&"video"===r.track.kind){var o=r.track.enabled,i=0!==t.maxDimension;if(o&&!i)return Ft.log("Disabling video upload"),e._tracksWhoseUploadWasDisabled.set(r,r.track),void r.replaceTrack(Dn.getBlackMediaTrack()).catch((function(e){Ft.error("Could not disable video upload",e)}));var a=e._tracksWhoseUploadWasDisabled.get(r);!o&&i&&a&&(Ft.log("Enabling video upload"),e._tracksWhoseUploadWasDisabled.delete(r),r.replaceTrack(a).catch((function(e){Ft.error("Could not enable video upload",e)}))),Ht.applyVideoTrackSettings(t,r,null!=a?a:r.track,e._prevConsumerSettings,n)}})),this._prevConsumerSettings=n}},t.prototype._onScreenSharingStatus=function(e){e.track?this._createCaptureSender(e.track):this._removeCaptureSender()},t.prototype._setState=function(e,t){this._state[t]!==e&&(this._state[t]=e,"consumer"===t?this._triggerEvent("LOCAL_STATE_CHANGED",e):this._triggerEvent("STATE_CHANGED",e))},t.prototype._getState=function(e){return this._state[e]||"IDLE"},t.prototype._startStatInterval=function(){var e=this;if(!this._statInterval){var t=function(){e._producer?(e._collectStat().then((function(t){e._reportStats(t),e._detectStaleTracks(t)})).catch((function(){})),e._statInterval=window.setTimeout(t,xt.statisticsInterval)):e._stopStatInterval()};this._statInterval=window.setTimeout(t,xt.statisticsInterval)}},t.prototype._stopStatInterval=function(){this._statInterval&&(window.clearTimeout(this._statInterval),this._statInterval=null),this._statBytes={}},t.prototype._startSettingsInterval=function(){var e=this;if(!this._settingsInterval){var t=function(){e._consumer?(e._applyConsumerSettings(),e._settingsInterval=window.setTimeout(t,2e3)):e._stopSettingsInterval()};this._settingsInterval=window.setTimeout(t,2e3)}},t.prototype._stopSettingsInterval=function(){this._settingsInterval&&(window.clearTimeout(this._settingsInterval),this._settingsInterval=null)},t.prototype._collectStat=function(){return Ye(this,void 0,void 0,(function(){var e,t;return $e(this,(function(n){switch(n.label){case 0:return this._producer&&this._consumer?(e=this,[4,$n(this._producer,this._producerLastStat,this._ssrcMap)]):[2,Promise.reject()];case 1:return e._producerLastStat=n.sent(),t=this,[4,$n(this._consumer,this._consumerLastStat,this._ssrcMap)];case 2:return t._consumerLastStat=n.sent(),[2,{producer:this._producerLastStat,consumer:this._consumerLastStat}]}}))}))},t.prototype._reportStats=function(e){var t=e.producer,n=e.consumer;this._triggerEvent("REMOTE_DATA_STATS",{inbound:{topology:"SERVER",transport:t.transport,rtps:t.rtps},outbound:{topology:"SERVER",transport:n.transport,rtps:n.rtps}})},t.prototype._detectStaleTracks=function(e){var t=this,n=e.producer.rtps.find((function(e){return"audio"===e.kind&&"mix"===t._ssrcMap[e.ssrc]}));if(n){var r="audio-mix",o=this._statBytes[r],i=!1;if(o){var a=n.bytesReceived-o.bytesReceived;a>=0&&a<=5&&(i=!0),o.stalled!==i&&this._triggerEvent("REMOTE_ALL_STALL",i)}this._statBytes[r]={bytesReceived:n.bytesReceived,stalled:i}}},t.prototype._allocateConsumer=function(){var e=this,n={estimatedPerformanceIndex:rr.getEstimatedPerformanceIndex(),audioMix:!0,consumerUpdate:!0,producerNotificationDataChannelVersion:xt.producerNotificationDataChannel?3:0,producerCommandDataChannelVersion:xt.producerCommandDataChannel?1:0,consumerScreenDataChannelVersion:xt.consumerScreenDataChannel?1:0,onDemandTracks:xt.onDemandTracks,unifiedPlan:!xt.unifiedPlanInterop&&t._isUnifiedPlanSupported()},r="consumer";Ft.debug("[consumer] create offer"),this._consumer&&this._consumer.createOffer(or).catch((function(t){throw Ft.error("[consumer] unable to create offer",t),e.log("callError","createOffer-"+r),t})).then((function(e){return e.sdp=Ht.patchSDP(e.sdp,!1,Dn.isBrokenH264(),!1),e})).then((function(t){return Ye(e,void 0,void 0,(function(){var e=this;return $e(this,(function(n){if(Ft.debug("[consumer] created offer",{offer:t}),!this._consumer)throw new Error("Interrupt allocation");return[2,this._consumer.setLocalDescription(t).then((function(){if(!e._consumer)throw new Error("Interrupt allocation");return e._consumer.localDescription}))]}))}))})).catch((function(t){throw Ft.error("[consumer] unable to set local offer",t),e.log("callError","setLocalDescription-"+r),t})).then((function(t){return Ye(e,void 0,void 0,(function(){return $e(this,(function(e){return Ft.debug("[consumer] transmit local offer"),[2,this._signaling.allocateConsumer(t,n)]}))}))})).catch(this.close.bind(this))},t.prototype._acceptConsumerAnswer=function(e){var t;return Ye(this,void 0,void 0,(function(){var n,r,o,i,a=this;return $e(this,(function(s){switch(s.label){case 0:if(!this._consumer)throw new Error("Interrupt allocation");if(n="consumer",r=new RTCSessionDescription({type:"answer",sdp:e}),"stable"!==this._consumer.signalingState)return[3,5];s.label=1;case 1:return s.trys.push([1,4,,5]),[4,this._consumer.createOffer(or)];case 2:return o=s.sent(),[4,null===(t=this._consumer)||void 0===t?void 0:t.setLocalDescription(o)];case 3:return s.sent(),[3,5];case 4:return i=s.sent(),Ft.error("["+n+"] unable to create offer for new answer",i),this.log("callError","createOffer-"+n),[3,5];case 5:return Ft.debug("["+n+"] set remote answer",{answer:r}),[2,this._consumer.setRemoteDescription(r).catch((function(e){throw Ft.error("["+n+"] unable to set remote answer",e),a.log("callError","setRemoteDescription-"+n),e}))]}}))}))},t.prototype._acceptProducer=function(e){return Ye(this,void 0,void 0,(function(){var n,r,o=this;return $e(this,(function(i){if(n="producer",r=new RTCSessionDescription({type:"offer",sdp:e}),this._producerOfferIsProcessing)return this._producerNextOffer=e,Ft.debug("[producer] wait until other remote offer is processed"),[2];if(this._producerOfferIsProcessing=!0,xt.unifiedPlanInterop&&t._isUnifiedPlanSupported()&&(Ft.debug("[producer] alter remote offer to 'unified plan'",{offer:r}),r=this._interop.toUnifiedPlan(r)),Ft.debug("[producer] set remote offer",{offer:r}),!this._producer)throw new Error("Interrupt allocation");return this._producer.setRemoteDescription(r).catch((function(e){throw Ft.error("[producer] unable to set remote offer",e),o.log("callError","setRemoteDescription-"+n),e})).then((function(){return Ye(o,void 0,void 0,(function(){return $e(this,(function(e){if(Ft.debug("[producer] create local answer"),!this._producer)throw new Error("Interrupt allocation");return[2,this._producer.createAnswer()]}))}))})).catch((function(e){throw Ft.error("[producer] unable to create answer",e),o.log("callError","createAnswer-"+n),e})).then((function(e){return e.sdp=Ht.patchSDP(e.sdp,!1,Dn.isBrokenH264(),!1),e})).then((function(e){return Ye(o,void 0,void 0,(function(){return $e(this,(function(t){switch(t.label){case 0:if(Ft.debug("[producer] set local answer",{answer:e}),!this._producer)throw new Error("Interrupt allocation");return[4,this._producer.setLocalDescription(e)];case 1:return t.sent(),[2,e]}}))}))})).catch((function(e){throw Ft.error("[producer] unable to set local answer",e),o.log("callError","setLocalDescription-"+n),e})).then((function(e){return Ye(o,void 0,void 0,(function(){var n;return $e(this,(function(o){switch(o.label){case 0:return n=e,xt.unifiedPlanInterop&&t._isUnifiedPlanSupported()&&(Ft.log("[producer] alter local answer to 'plan b'",{answer:e}),n=this._interop.toPlanB(e)),Ft.debug("[producer] transmit local answer",{answer:n}),this._updateSSRCMap(r),[4,this._signaling.acceptProducer(n,Object.keys(this._ssrcMap))];case 1:return o.sent(),Ft.debug("[producer] remote offer has been processed"),[2]}}))}))})).catch((function(e){Ft.warn("[producer] unable to send local answer",e),o.log("callError","acceptProducer")})).then((function(){if(o._producerOfferIsProcessing=!1,o._producerNextOffer){Ft.debug("[producer] there is other unprocessed remote offer, process it");var e=o._producerNextOffer;return o._producerNextOffer=null,o._acceptProducer(e)}})).catch((function(e){return o.close(e)})),[2]}))}))},t.prototype._onSignalingNotification=function(e){return Ye(this,void 0,void 0,(function(){var t;return $e(this,(function(n){switch(n.label){case 0:if(!this._isOpen)return[2];switch(e.notification){case"producer-updated":return[3,1];case"consumer-answered":return[3,3];case"realloc-con":return[3,5];case"audio-activity":return[3,6];case"speaker-changed":return[3,7];case"stalled-activity":return[3,8];case"network-status":return[3,9]}return[3,10];case 1:return[4,this._acceptProducer(e.description)];case 2:return n.sent(),[3,10];case 3:return[4,this._acceptConsumerAnswer(e.description)];case 4:return n.sent(),[3,10];case 5:return(t=e.target?e.target.toLowerCase():null)&&"consumer"!==t||this._reconnect("consumer"),this._reconnect("producer"),[3,10];case 6:return this._signalActiveParticipants(e.activeParticipants),[3,10];case 7:return this._signalSpeakerChanged(e.speaker),[3,10];case 8:return this._signalStalledParticipants(e.stalledParticipants),[3,10];case 9:return this._signalNetworkStatus(e.statuses),[3,10];case 10:return[2]}}))}))},t.prototype._onAddTrack=function(e,t,n){var r=this;Ft.debug("["+t+"] remote track (added)",{track:n.track});var o=n.streams[0];o?(o.onremovetrack||(o.onremovetrack=function(e){r._triggerEvent("REMOTE_TRACK_REMOVED",o.id,o,e.track)}),o.getTracks().find((function(e){return e.id===n.track.id}))||o.addTrack(n.track),"audio-mix"===o.id&&(this._hasAudioMix=!0),this._triggerEvent("REMOTE_TRACK_ADDED",o.id,o,n.track)):Ft.error("["+t+"] unable to get media stream from track event")},t._onSignalingStateChange=function(e,t,n){Ft.debug("["+t+"] signaling state changed",{state:e.signalingState},n)},t.prototype._onConnectionStateChange=function(e,t,n){var r=this;switch(Ft.debug("["+t+"] connection state changed",{state:e.connectionState},n),this.log("callIceConnectionState",e.connectionState),e.connectionState){case"failed":this._reconnectionPrevented?this.close(new Error("Ice connection failed")):this._signaling.requestRealloc(t);break;case"connecting":var o=this._getState(t);"IDLE"===o||"OPENED"===o?this._setState("CONNECTING",t):"checking"===e.iceConnectionState&&this._setState("RECONNECTING",t);break;case"disconnected":this._reconnectionPrevented?this.close(new Error("Ice connection disconnected")):this._setState("RECONNECTING",t);break;case"connected":this._setState("CONNECTED",t),Ht.getPeerConnectionHostInfo(e).then((function(e){e&&r.log("callIceConnectionType",e.type)}))}},t.prototype._onReplacedTrack=function(e,t){var n=this;this._consumer&&(xt.consumerScreenDataChannel&&t&&(e=t),this._consumer.getSenders().forEach((function(t){t.track&&t.track.kind===e.kind&&(t.track.enabled=e.enabled,t.replaceTrack(e).catch((function(e){Ft.error("ServerTransport: Unable to replace track",e),n.log("callError","replaceTrack-consumer")})))}))),this._applyConsumerSettings()},t._isUnifiedPlanSupported=function(){var e=Dn.baseChromeVersion();return e?xt.isUnifiedPlanSupported("Chrome",e):xt.isUnifiedPlanSupported(Dn.browserName(),Dn.browserVersion())},t}(tt),ar=function(e){function t(t,n,r){var o=e.call(this)||this;return o._pc=null,o._producerNotification=null,o._producerCommand=null,o._consumerScreen=null,o._isOpen=!1,o._reconnectionPrevented=!1,o._state="IDLE",o._statInterval=null,o._settingsInterval=null,o._statBytes={},o._ssrcMap={},o._producerOfferIsProcessing=!1,o._producerNextOffer=null,o._prevConsumerSettings={},o._hasAudioMix=!1,o._captureSender=null,o._participantIdRegistry=null,o._tracksWhoseUploadWasDisabled=new Map,o._signaling=t,o._mediaSource=n,o._signaling&&o._mediaSource&&(o.subscribe(o._signaling,"NOTIFICATION",o._onSignalingNotification.bind(o)),o.subscribe(o._mediaSource,"TRACK_REPLACED",o._onReplacedTrack.bind(o)),o.subscribe(o._mediaSource,"SOURCE_CHANGED",o._applyConsumerSettings.bind(o)),o.subscribe(o._mediaSource,"SCREEN_STATUS",o._onScreenSharingStatus.bind(o))),o._perfStatReporter=new rr(o,t),o._serverSettings=r,xt.consumerScreenDataChannel&&!nr.isBrowserSupported()&&(xt.consumerScreenDataChannel=!1),Ft.debug("ServerTransport: Created"),o}return Ge(t,e),t.prototype.getState=function(){return this._getState()},t.prototype.getLocalState=function(){return this._getState()},t.prototype.updateStatisticsInterval=function(){this._stopStatInterval();var e=this._getState();"IDLE"!==e&&"CLOSED"!==e&&"FAILED"!==e&&this._startStatInterval()},t.prototype.open=function(){this._isOpen?Ft.log("ServerTransport: Already opened connections"):(this._isOpen=!0,this._openConnection())},t.prototype.close=function(e){this._isOpen=!1,this._closeConnection(),this.unsubscribe(),e?(Ft.error("ServerTransport: Closed",e),this._setState("FAILED")):(Ft.debug("ServerTransport: Closed"),this._setState("CLOSED"))},t.prototype.preventRestart=function(){this._reconnectionPrevented=!0},t.prototype.allowRestart=function(){this._reconnectionPrevented=!1},t.prototype.updateSettings=function(e){kn(e,this._serverSettings)||(this._serverSettings=e,this._applyConsumerSettings())},t.prototype._closeConnection=function(){this._stopStatInterval(),this._stopSettingsInterval(),this._removeCaptureSender(),this._pc&&(this._tracksWhoseUploadWasDisabled.forEach((function(e){return e.stop()})),this._tracksWhoseUploadWasDisabled.clear(),this._pc.ontrack=null,this._pc.onconnectionstatechange=null,this._pc.onsignalingstatechange=null,this._participantIdRegistry=null,t._closeDataChannel(this._producerNotification),t._closeDataChannel(this._producerCommand),t._closeDataChannel(this._consumerScreen),this._pc.close(),this._pc=null,this._producerOfferIsProcessing=!1,this._producerNextOffer=null)},t._closeDataChannel=function(e){e&&(e.onopen=null,e.onmessage=null,e.onerror=null,e.close())},t.prototype._createDataChannel=function(e,t,n){Ft.debug("["+t+"] data channel opening");var r=e.createDataChannel(t,{ordered:!0});r.onopen=function(){Ft.debug("["+t+"] data channel opened"),r.onerror=function(e){Ft.error("["+t+"] data channel error",e)},n(r)}},t.prototype._openConnection=function(){var e,n=this;Ft.debug("ServerTransport: Open single connection");var r={};Dn.baseChromeVersion()&&(r.sdpSemantics=t._isUnifiedPlanSupported()?"unified-plan":"plan-b"),this._pc=new RTCPeerConnection(r,{optional:[{googSuspendBelowMinBitrate:!1}]}),this._pc.ontrack=this._onAddTrack.bind(this,this._pc),this._pc.onconnectionstatechange=Ht.throttle((function(e){n._pc&&n._onConnectionStateChange(n._pc,e)}),500),this._pc.onsignalingstatechange=t._onSignalingStateChange.bind(this,this._pc),xt.producerNotificationDataChannel&&this._createDataChannel(this._pc,"producerNotification",(function(e){n._producerNotification=e,n._producerNotification.binaryType="arraybuffer",n._participantIdRegistry=new Qn,n._signaling.setParticipantIdRegistry(n._participantIdRegistry),n._signaling.setProducerNotificationDataChannel(e)})),xt.producerCommandDataChannel&&this._createDataChannel(this._pc,"producerCommand",(function(e){n._producerCommand=e,n._signaling.setProducerCommandDataChannel(e)}));try{this._mediaSource.addTrackToPeerConnection(this._pc),this._prevConsumerSettings={},this._applyConsumerSettings()}catch(e){return Ft.error("ServerTransport: Unable to add media source tracks",e),this.log("callError","addTrack-single"),void this.close(e)}var o=null===(e=this._mediaSource.getStream())||void 0===e?void 0:e.getVideoTracks()[0];xt.consumerScreenDataChannel&&o&&this._createDataChannel(this._pc,"consumerScreenShare",(function(e){n._consumerScreen=e,n._consumerScreen.binaryType="arraybuffer",n._createCaptureSender(o)})),this._allocateConsumer(),this._setState("OPENED"),this._startStatInterval(),this._startSettingsInterval()},t.prototype._reconnect=function(){this._setState("RECONNECTING"),this._closeConnection(),this._openConnection()},t.prototype._signalActiveParticipants=function(e){this._triggerEvent("SIGNALLED_ACTIVE_PARTICIPANTS",e)},t.prototype._signalStalledParticipants=function(e){this._triggerEvent("SIGNALLED_STALLED_PARTICIPANTS",e)},t.prototype._signalSpeakerChanged=function(e){this._triggerEvent("SIGNALLED_SPEAKER_CHANGED",e)},t.prototype._signalNetworkStatus=function(e){this._triggerEvent("SIGNALLED_NETWORK_STATUS",e)},t.prototype._updateSSRCMap=function(e){var t=this;e&&e.sdp.split("\n").forEach((function(e){var n=/a=ssrc:([0-9]+) label:(audio|video)-((?:[ug]?[\d]+)|(?:mix))/.exec(e);n&&(t._ssrcMap[n[1]]=n[3])}))},t.prototype._createCaptureSender=function(e){e&&xt.consumerScreenDataChannel&&this._consumerScreen&&this._mediaSource.getMediaSettings().isScreenSharingEnabled&&(this._captureSender&&this._removeCaptureSender(),this._captureSender=new nr(e,this._consumerScreen))},t.prototype._removeCaptureSender=function(){var e;null===(e=this._captureSender)||void 0===e||e.destroy(),this._captureSender=null},t.prototype._applyConsumerSettings=function(){var e=this,t=this._mediaSource.getMediaSettings().isScreenSharingEnabled?this._serverSettings.screenSharing:this._serverSettings.camera;if(t&&this._pc){var n=[];this._pc.getSenders().forEach((function(r){if(r.track&&"video"===r.track.kind){var o=r.track.enabled,i=0!==t.maxDimension;if(o&&!i)return Ft.log("Disabling video upload"),e._tracksWhoseUploadWasDisabled.set(r,r.track),void r.replaceTrack(Dn.getBlackMediaTrack()).catch((function(e){Ft.error("Could not disable video upload",e)}));var a=e._tracksWhoseUploadWasDisabled.get(r);!o&&i&&a&&(Ft.log("Enabling video upload"),e._tracksWhoseUploadWasDisabled.delete(r),r.replaceTrack(a).catch((function(e){Ft.error("Could not enable video upload",e)}))),Ht.applyVideoTrackSettings(t,r,null!=a?a:r.track,e._prevConsumerSettings,n)}})),this._prevConsumerSettings=n}},t.prototype._onScreenSharingStatus=function(e){e.track?this._createCaptureSender(e.track):this._removeCaptureSender()},t.prototype._setState=function(e){this._state!==e&&(this._state=e,this._triggerEvent("LOCAL_STATE_CHANGED",e),this._triggerEvent("STATE_CHANGED",e))},t.prototype._getState=function(){return this._state||"IDLE"},t.prototype._startStatInterval=function(){var e=this;if(!this._statInterval){var t=function(){e._pc?(e._collectStat().then((function(t){e._reportStats(t),e._detectStaleTracks(t)})).catch((function(){})),e._statInterval=window.setTimeout(t,xt.statisticsInterval)):e._stopStatInterval()};this._statInterval=window.setTimeout(t,xt.statisticsInterval)}},t.prototype._stopStatInterval=function(){this._statInterval&&(window.clearTimeout(this._statInterval),this._statInterval=null),this._statBytes={}},t.prototype._startSettingsInterval=function(){var e=this;if(!this._settingsInterval){var t=function(){e._pc?(e._applyConsumerSettings(),e._settingsInterval=window.setTimeout(t,2e3)):e._stopSettingsInterval()};this._settingsInterval=window.setTimeout(t,2e3)}},t.prototype._stopSettingsInterval=function(){this._settingsInterval&&(window.clearTimeout(this._settingsInterval),this._settingsInterval=null)},t.prototype._collectStat=function(){return Ye(this,void 0,void 0,(function(){var e;return $e(this,(function(t){switch(t.label){case 0:return this._pc?[4,$n(this._pc,this._lastStat,this._ssrcMap)]:[2,Promise.reject()];case 1:return e=t.sent(),this._lastStat=e,[2,e]}}))}))},t.prototype._reportStats=function(e){this._triggerEvent("REMOTE_DATA_STATS",{inbound:{topology:"SERVER",transport:e.transport,rtps:e.rtps.filter((function(e){return"inbound-rtp"===e.type}))},outbound:{topology:"SERVER",transport:e.transport,rtps:e.rtps.filter((function(e){return"outbound-rtp"===e.type}))}})},t.prototype._detectStaleTracks=function(e){var t=this,n=e.rtps.find((function(e){return"inbound-rtp"===e.type&&"audio"===e.kind&&"mix"===t._ssrcMap[e.ssrc]}));if(n){var r="audio-mix",o=this._statBytes[r],i=!1;if(o){var a=n.bytesReceived-o.bytesReceived;a>=0&&a<=5&&(i=!0),o.stalled!==i&&this._triggerEvent("REMOTE_ALL_STALL",i)}this._statBytes[r]={bytesReceived:n.bytesReceived,stalled:i}}},t.prototype._allocateConsumer=function(){var e={estimatedPerformanceIndex:rr.getEstimatedPerformanceIndex(),audioMix:!0,consumerUpdate:!0,producerNotificationDataChannelVersion:xt.producerNotificationDataChannel?4:0,producerCommandDataChannelVersion:xt.producerCommandDataChannel?1:0,consumerScreenDataChannelVersion:xt.consumerScreenDataChannel?1:0,onDemandTracks:xt.onDemandTracks,unifiedPlan:t._isUnifiedPlanSupported(),singleSession:xt.singleSession};this._signaling.allocateConsumer(null,e)},t.prototype._acceptProducer=function(e){return Ye(this,void 0,void 0,(function(){var t,n=this;return $e(this,(function(r){if(t=new RTCSessionDescription({type:"offer",sdp:e}),this._producerOfferIsProcessing)return this._producerNextOffer=e,Ft.debug("[single] wait until other remote offer is processed"),[2];if(this._producerOfferIsProcessing=!0,Ft.debug("[single] set remote offer",{offer:t}),!this._pc)throw new Error("Interrupt allocation");return this._pc.setRemoteDescription(t).catch((function(e){throw Ft.error("[single] unable to set remote offer",e),n.log("callError","setRemoteDescription-single"),e})).then((function(){return Ye(n,void 0,void 0,(function(){return $e(this,(function(e){if(Ft.debug("[single] create local answer"),!this._pc)throw new Error("Interrupt allocation");return[2,this._pc.createAnswer()]}))}))})).catch((function(e){throw Ft.error("[single] unable to create answer",e),n.log("callError","createAnswer-single"),e})).then((function(e){return e.sdp=Ht.patchSDP(e.sdp,!1,Dn.isBrokenH264(),!1),e})).then((function(e){return Ye(n,void 0,void 0,(function(){return $e(this,(function(t){switch(t.label){case 0:if(Ft.debug("[single] set local answer",{answer:e}),!this._pc)throw new Error("Interrupt allocation");return[4,this._pc.setLocalDescription(e)];case 1:return t.sent(),[2,e]}}))}))})).catch((function(e){throw Ft.error("[single] unable to set local answer",e),n.log("callError","setLocalDescription-single"),e})).then((function(e){return Ye(n,void 0,void 0,(function(){return $e(this,(function(n){switch(n.label){case 0:return Ft.debug("[single] transmit local answer",{answer:e}),this._updateSSRCMap(t),[4,this._signaling.acceptProducer(e,Object.keys(this._ssrcMap))];case 1:return n.sent(),Ft.debug("[single] remote offer has been processed"),[2]}}))}))})).catch((function(e){Ft.warn("[single] unable to send local answer",e),n.log("callError","acceptProducer")})).then((function(){if(n._producerOfferIsProcessing=!1,n._producerNextOffer){Ft.debug("[single] there is other unprocessed remote offer, process it");var e=n._producerNextOffer;return n._producerNextOffer=null,n._acceptProducer(e)}})).catch((function(e){return n.close(e)})),[2]}))}))},t.prototype._onSignalingNotification=function(e){return Ye(this,void 0,void 0,(function(){return $e(this,(function(t){switch(t.label){case 0:if(!this._isOpen)return[2];switch(e.notification){case"producer-updated":return[3,1];case"realloc-con":return[3,3];case"audio-activity":return[3,4];case"speaker-changed":return[3,5];case"stalled-activity":return[3,6];case"network-status":return[3,7]}return[3,8];case 1:return[4,this._acceptProducer(e.description)];case 2:return t.sent(),[3,8];case 3:return this._reconnect(),[3,8];case 4:return this._signalActiveParticipants(e.activeParticipants),[3,8];case 5:return this._signalSpeakerChanged(e.speaker),[3,8];case 6:return this._signalStalledParticipants(e.stalledParticipants),[3,8];case 7:return this._signalNetworkStatus(e.statuses),[3,8];case 8:return[2]}}))}))},t.prototype._onAddTrack=function(e,t){var n=this;Ft.debug("[single] remote track (added)",{track:t.track});var r=t.streams[0];r?(r.onremovetrack||(r.onremovetrack=function(e){n._triggerEvent("REMOTE_TRACK_REMOVED",r.id,r,e.track)}),r.getTracks().find((function(e){return e.id===t.track.id}))||r.addTrack(t.track),"audio-mix"===r.id&&(this._hasAudioMix=!0),this._triggerEvent("REMOTE_TRACK_ADDED",r.id,r,t.track)):Ft.error("[single] unable to get media stream from track event")},t._onSignalingStateChange=function(e,t){Ft.debug("[single] signaling state changed",{state:e.signalingState},t)},t.prototype._onConnectionStateChange=function(e,t){var n=this;switch(Ft.debug("[single] connection state changed",{state:e.connectionState},t),this.log("callIceConnectionState",e.connectionState),e.connectionState){case"failed":this._reconnectionPrevented?this.close(new Error("Ice connection failed")):this._signaling.requestRealloc();break;case"connecting":var r=this._getState();"IDLE"===r||"OPENED"===r?this._setState("CONNECTING"):"checking"===e.iceConnectionState&&this._setState("RECONNECTING");break;case"disconnected":this._reconnectionPrevented?this.close(new Error("Ice connection disconnected")):this._setState("RECONNECTING");break;case"connected":this._setState("CONNECTED"),Ht.getPeerConnectionHostInfo(e).then((function(e){e&&n.log("callIceConnectionType",e.type)}))}},t.prototype._onReplacedTrack=function(e,t){var n=this;this._pc&&(xt.consumerScreenDataChannel&&t&&(e=t),this._pc.getSenders().forEach((function(t){t.track&&t.track.kind===e.kind&&(t.track.enabled=e.enabled,t.replaceTrack(e).catch((function(e){Ft.error("ServerTransport: Unable to replace track",e),n.log("callError","replaceTrack-single")})))}))),this._applyConsumerSettings()},t._isUnifiedPlanSupported=function(){var e=Dn.baseChromeVersion();return e?xt.isUnifiedPlanSupported("Chrome",e):xt.isUnifiedPlanSupported(Dn.browserName(),Dn.browserVersion())},t}(tt),sr=function(e){function t(t,n,r,o){var i=e.call(this)||this;return i._allocated=[],i._opened=[],i._directTransports={},i._serverTransport=null,i._dtListeners={},i._stListeners=[],i._states={},i._localState="IDLE",i._signaling=n,i._mediaSource=r,i._topology=t,i._serverSettings=o,i.subscribe(i._signaling,"NOTIFICATION",i._onSignalingNotification.bind(i)),"SERVER"===t&&(i._serverTransport=i._createServerTransport()),i}return Ge(t,e),t.prototype.updateSettings=function(e){var t;this._serverSettings=e;for(var n=0,r=Object.keys(this._directTransports);n<r.length;n++)t=r[n],this._directTransports[t].updateSettings(e);this._serverTransport&&this._serverTransport.updateSettings(e)},t.prototype.updateStatisticsInterval=function(){for(var e,t=0,n=Object.keys(this._directTransports);t<n.length;t++)e=n[t],this._directTransports[e].updateStatisticsInterval();this._serverTransport&&this._serverTransport.updateStatisticsInterval()},t.prototype.allocate=function(e,t){void 0===t&&(t=!1),-1===this._allocated.indexOf(e)?(this._allocated.push(e),"DIRECT"===this._topology&&(this._directTransports[e]=this._createDirectTransport(e,t)),"SERVER"!==this._topology||this._serverTransport||(this._serverTransport=this._createServerTransport())):Ft.warn("The participant ["+e+"] has already had allocated transport")},t.prototype.open=function(e,t){if(void 0===t&&(t=null),-1===this._opened.indexOf(e))if(-1!==this._allocated.indexOf(e)){if(this._opened.push(e),"DIRECT"===this._topology){if(!this._directTransports[e])return void Ft.warn("Cannot find allocated direct transport for the participant ["+e+"]");this._directTransports[e].open(t)}"SERVER"===this._topology&&this._serverTransport&&(this._serverTransport.open(),this._setState(e,this._serverTransport.getState()),this._setLocalState(this._serverTransport.getLocalState())),Ft.debug("The participant ["+e+"] transport opened")}else Ft.warn("The participant ["+e+"] has no allocated transport");else Ft.warn("The participant ["+e+"] has already had opened transport")},t.prototype.close=function(e){var t=this._allocated.indexOf(e),n=this._opened.indexOf(e);if(t<0&&Ft.warn("The participant ["+e+"] transport has already deallocated"),"DIRECT"===this._topology){if(!this._directTransports[e])return void Ft.warn("Cannot find allocated direct transport for the participant ["+e+"]");this._directTransports[e].close(),delete this._directTransports[e]}"SERVER"===this._topology&&this._setState(e,"CLOSED"),n>=0&&this._opened.splice(n,1),t>=0&&this._allocated.splice(t,1)},t.prototype.destroy=function(){var e;this.unsubscribe();for(var t=0,n=Object.values(this._dtListeners);t<n.length;t++)n[t].forEach((function(e){e.dispose()}));this._stListeners&&this._stListeners.forEach((function(e){e.dispose()}));for(var r=0,o=Object.keys(this._directTransports);r<o.length;r++)e=o[r],this._directTransports[e].close(),delete this._directTransports[e];this._directTransports={},this._serverTransport&&(this._serverTransport.close(),this._serverTransport=null),this._allocated=[],this._opened=[]},t.prototype.getTopology=function(){return this._topology},t.prototype.isAllocated=function(e){return this._allocated.indexOf(e)>=0},t.prototype.allocated=function(){return this._allocated.slice()},t.prototype.opened=function(){return this._opened.slice()},t.prototype._setStates=function(e,t){var n=this;e.forEach((function(e){n._setState(e,t)}))},t.prototype._setState=function(e,t){this._states[e]!==t&&(this._states[e]=t,this._triggerEvent("STATE_CHANGED",e,t))},t.prototype._setLocalState=function(e){this._localState!==e&&(this._localState=e,this._triggerEvent("LOCAL_STATE_CHANGED",e))},t.prototype._onSignalingNotification=function(e){return"topology-changed"===e.notification?this._onTopologyChanged(e):"record-started"===e.notification?this._onRecordStarted(e):void 0},t.prototype._onTopologyChanged=function(e){var t=this;if(e.topology!==this._topology){if(Ft.log("Topology changed "+this._topology+" -> "+e.topology),this.log("callTopologyChangeRequested",e.topology),this._topology=e.topology,"SERVER"===this._topology)if(this._serverTransport)this._serverTransport.allowRestart();else{if(this._serverTransport=this._createServerTransport(),this._opened.length>0)for(var n=0,r=Object.values(this._directTransports);n<r.length;n++)r[n].preventRestart();this._serverTransport&&this._serverTransport.open()}if("DIRECT"===this._topology){var o=(e.offerTo||[]).map(String);this._allocated&&0!==this._allocated.length||Ft.warn("Topology changed to DIRECT, but the list of allocated participants is empty"),this._serverTransport&&this._serverTransport.preventRestart(),this._allocated.forEach((function(e){var n=o.indexOf(e)>=0;t._directTransports[e]?t._directTransports[e].allowRestart():t._directTransports[e]=t._createDirectTransport(e,n)})),this._opened.forEach((function(e){t._directTransports[e]?t._directTransports[e].open():Ft.warn("There is opened but not allocated transport ["+e+"]")}))}this._triggerEvent("TOPOLOGY_CHANGED",this._topology)}},t.prototype._onRecordStarted=function(e){this._serverTransport&&this._serverTransport.open()},t.prototype._createDirectTransport=function(e,t){void 0===t&&(t=!1);var n=new Xn(e,t,this._signaling,this._mediaSource,this._serverSettings);return this._setLocalNoiseSuppression(!0),this._dtListeners[e]&&this._dtListeners[e].length>0&&Ft.warn("The list of direct listeners for the participant ["+e+"] is not empty"),this._dtListeners[e]=[],this._dtListeners[e].push(n.addEventListener("REMOTE_TRACK_ADDED",this._onDirectRemoteTrackAdded.bind(this,e)),n.addEventListener("REMOTE_TRACK_REMOVED",this._onDirectRemoteTrackRemoved.bind(this,e)),n.addEventListener("REMOTE_DATA_STATS",this._onDirectRemoteDataStats.bind(this)),n.addEventListener("STATE_CHANGED",this._onDirectTransportChanged.bind(this,e)),n.addEventListener(this.EVENT_LOG,this._onTransportLog.bind(this))),n},t.prototype._createServerTransport=function(){var e=xt.singleSession?new ar(this._signaling,this._mediaSource,this._serverSettings):new ir(this._signaling,this._mediaSource,this._serverSettings);return this._setLocalNoiseSuppression(!1),this._stListeners&&this._stListeners.length>0&&Ft.warn("The list of server transport listeners is not empty"),this._stListeners=[],this._stListeners.push(e.addEventListener("REMOTE_TRACK_ADDED",this._onServerRemoteTrackAdded.bind(this)),e.addEventListener("REMOTE_TRACK_REMOVED",this._onServerRemoteTrackRemoved.bind(this)),e.addEventListener("REMOTE_ALL_STALL",this._onServerRemoteAllStall.bind(this)),e.addEventListener("REMOTE_DATA_STATS",this._onServerRemoteDataStats.bind(this)),e.addEventListener("STATE_CHANGED",this._onServerTransportChanged.bind(this)),e.addEventListener("LOCAL_STATE_CHANGED",this._onServerTransportLocalChanged.bind(this)),e.addEventListener("ACTIVE_PARTICIPANTS_NO_SIGNAL",this._onTransportActiveParticipantsNoSignal.bind(this)),e.addEventListener("SIGNALLED_ACTIVE_PARTICIPANTS",this._onTransportActiveParticipants.bind(this)),e.addEventListener("SIGNALLED_SPEAKER_CHANGED",this._onTransportSpeakerChanged.bind(this)),e.addEventListener("SIGNALLED_STALLED_PARTICIPANTS",this._onTransportStalledParticipants.bind(this)),e.addEventListener("SIGNALLED_NETWORK_STATUS",this._onTransportNetworkStatus.bind(this)),e.addEventListener(this.EVENT_LOG,this._onTransportLog.bind(this))),e},t.prototype._releaseAllDirectTransports=function(e){for(var t=0,n=Object.keys(this._directTransports);t<n.length;t++){var r=n[t];this._releaseDirectTransport(r,e)}},t.prototype._releaseDirectTransport=function(e,t){this._directTransports[e]&&(t&&this._directTransports[e].close(),delete this._directTransports[e]),this._dtListeners[e]&&this._dtListeners[e].forEach((function(e){e.dispose()})),delete this._dtListeners[e]},t.prototype._releaseServerTransport=function(e){this._serverTransport&&(e&&this._serverTransport.close(),this._serverTransport=null),this._stListeners&&(this._stListeners.forEach((function(e){e.dispose()})),this._stListeners=[])},t.prototype._setLocalNoiseSuppression=function(e){var t;xt.noiseSuppression!==e&&(xt.noiseSuppression=e,null===(t=this._mediaSource)||void 0===t||t.updateNoiseSuppression())},t.prototype._onDirectTransportChanged=function(e,t){if("CONNECTED"===t&&"DIRECT"===this._topology&&this._releaseServerTransport(!0),("CLOSED"===t||"FAILED"===t)&&(this._releaseDirectTransport(e,!1),"DIRECT"===this._topology)){var n=this._opened.indexOf(e);n>=0&&this._opened.splice(n,1);var r=this._allocated.indexOf(e);r>=0&&this._allocated.splice(r,1)}"DIRECT"===this._topology&&(this._setState(e,t),this._setLocalState(t))},t.prototype._onServerTransportChanged=function(e){var t=this._opened.slice();"CONNECTED"===e&&"SERVER"===this._topology&&this._releaseAllDirectTransports(!0),"CLOSED"!==e&&"FAILED"!==e||this._releaseServerTransport(!1),"SERVER"===this._topology&&this._setStates(t,e)},t.prototype._onServerTransportLocalChanged=function(e){"SERVER"===this._topology&&("CLOSED"!==e&&"FAILED"!==e||(this._allocated=[],this._opened=[]),this._setLocalState(e))},t.prototype._onTransportActiveParticipantsNoSignal=function(){this._triggerEvent("ACTIVE_PARTICIPANTS_NO_SIGNAL")},t.prototype._onTransportActiveParticipants=function(e){"SERVER"===this._topology&&this._triggerEvent("SIGNALLED_ACTIVE_PARTICIPANTS",e)},t.prototype._onTransportStalledParticipants=function(e){"SERVER"===this._topology&&this._triggerEvent("SIGNALLED_STALLED_PARTICIPANTS",e)},t.prototype._onTransportSpeakerChanged=function(e){"SERVER"===this._topology&&this._triggerEvent("SIGNALLED_SPEAKER_CHANGED",e)},t.prototype._onTransportNetworkStatus=function(e){"SERVER"===this._topology&&this._triggerEvent("SIGNALLED_NETWORK_STATUS",e)},t.prototype._onServerRemoteAllStall=function(e){"SERVER"===this._topology&&this._triggerEvent("REMOTE_ALL_STALL",e)},t.prototype._onServerRemoteDataStats=function(e){this._triggerEvent("REMOTE_DATA_STATS",e)},t.prototype._onDirectRemoteTrackAdded=function(e,t,n){this._triggerEvent("REMOTE_TRACK_ADDED",e,t,n)},t.prototype._onDirectRemoteTrackRemoved=function(e,t,n){this._triggerEvent("REMOTE_TRACK_REMOVED",e,t,n)},t.prototype._onDirectRemoteDataStats=function(e){this._triggerEvent("REMOTE_DATA_STATS",e)},t.prototype._onServerRemoteTrackAdded=function(e,t,n){this._triggerEvent("REMOTE_TRACK_ADDED",e,t,n)},t.prototype._onServerRemoteTrackRemoved=function(e,t,n){this._triggerEvent("REMOTE_TRACK_REMOVED",e,t,n)},t.prototype._onTransportLog=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.log.apply(this,Xe([e],t))},t}(tt),cr=function(e){function t(t){var n=e.call(this)||this;return n._detectors={},n._interval=null,n.subscribe(t,"REMOTE_TRACK_ADDED",n._onRemoteTrackAdded.bind(n)),n.subscribe(t,"REMOTE_TRACK_REMOVED",n._onRemoteTrackRemoved.bind(n)),n.subscribe(t,"SIGNALLED_ACTIVE_PARTICIPANTS",n._onSignalledActiveParticipants.bind(n)),n.subscribe(t,"ACTIVE_PARTICIPANTS_NO_SIGNAL",n._onActiveParticipantsNoSignal.bind(n)),n}return Ge(t,e),t.prototype.destroy=function(){for(var e in this._interval&&(window.clearTimeout(this._interval),this._interval=null),this.unsubscribe(),this._detectors)this._detectors.hasOwnProperty(e)&&this._detectors[e].destroy();this._detectors={}},t.prototype._onRemoteTrackAdded=function(e,t,n){var r=this;if("audio"===n.kind&&(this._detectors[e]&&this._detectors[e].destroy(),this._detectors[e]=new Mn(t),!this._interval)){var o=function(){r._collectVolumes(),r._interval=window.setTimeout(o,xt.voiceParams.interval)};this._interval=window.setTimeout(o,xt.voiceParams.interval)}},t.prototype._onRemoteTrackRemoved=function(e,t,n){if("audio"===n.kind){var r=this._detectors[e];r&&r.stream===t&&(r.destroy(),delete this._detectors[e])}},t.prototype._collectVolumes=function(){var e={},t=this._detectors["audio-mix"];if(this._activeParticipants&&t)for(var n=t.getLevel(),r=0,o=this._activeParticipants;r<o.length;r++)e[i=o[r]]=n;else for(var i in this._detectors)this._detectors.hasOwnProperty(i)&&"audio-mix"!==i&&(e[i]=this._detectors[i].getLevel());this._triggerEvent("VOLUMES_DETECTED",e)},t.prototype._onSignalledActiveParticipants=function(e){this._activeParticipants=e},t.prototype._onActiveParticipantsNoSignal=function(){this._activeParticipants=null},t}(tt),ur=function(e){function t(t,n,r){var o=e.call(this)||this;return o._mediaSource=null,o._conversation=null,o._state="IDLE",o._participantState="CALLED",o._participants={},o._transport=null,o._debugInfo=null,o._volumesDetector=null,o._speakerDetector=null,o._localVolumeDetector=null,o._specListener=null,o._activeSpeakerId=null,o._lastSignalledActiveSpeakerId=null,o._serverSettings={camera:null,screenSharing:null},o._signalingServerSettings={camera:null,screenSharing:null},o._lastStalled={},o._remoteAllStalled=!1,o._audioFix=null,o._api=t,o._signaling=n,o._logger=new Rn(t,r),o._logFn=o._logger.log.bind(o._logger),o._onUnload=function(){o._conversation&&o._api&&o._api.hangupConversation(o._conversation.id),o._logger&&o._logger.destroy()},window.addEventListener("unload",o._onUnload),o.onLog(o._signaling,o._logFn),o._audioOutput=new In,o}return Ge(t,e),t.current=function(){return t._current},t.hangupAfterInit=function(){t._current||(t._delayedHangup=!0)},t.id=function(){var e,n;return(null===(n=null===(e=t._current)||void 0===e?void 0:e._conversation)||void 0===n?void 0:n.id)||null},t.prototype.onStart=function(e,n,r,o,i,a){return void 0===o&&(o=""),void 0===i&&(i=!1),void 0===a&&(a=!1),Ye(this,void 0,void 0,(function(){var s,c,u,l,d,_;return $e(this,(function(p){switch(p.label){case 0:if(t._activationMutex)throw this._logger.log("callError","startCall"),Ft.warn("Conversation: there is already running activation"),new jn(lt.FAILED);t._activationMutex=!0,p.label=1;case 1:return p.trys.push([1,8,,9]),this._mediaSource=this._createMediaSource(),[4,this._mediaSource.request(r)];case 2:return p.sent(),s=this._mediaSource.getMediaSettings().isVideoEnabled,n===ot.CHAT||e.length>1?this._logger.log("callStartMultiparty",s?"video":"audio"):this._logger.log("callStart",s?"video":"audio"),[4,this._startConversation(e,n,"OUTGOING",s,o,i,a)];case 3:if(c=p.sent(),!this._conversation||!this._signaling)throw new jn(lt.UNKNOWN_ERROR);return this._participantState="ACCEPTED",[4,this._registerParticipants()];case 4:if(p.sent(),this._processConnectionData(c),this._allocateTransport(),this._createSpeakerDetector(),this._createSpecListener(),this._signaling.readyToSend(),Ft.debug("Outgoing call",{opponentIds:e,opponentType:n,withVideo:s}),Nt.onLocalStream(this._mediaSource.getStream(),this._mediaSource.getMediaSettings()),Nt.onConversation(this._conversation.externalId,this._conversation.mediaModifiers),Nt.onLocalStatus(kt.WAITING),this._toggleJoinAvailability(),this._changeFeatureSet(),this._changeNeedRate(),t._current=this,t._delayedHangup)throw new jn(lt.CANCELED);if(this._conversation.concurrent)return[3,5];for(u=0,l=Object.values(this._participants);u<l.length;u++)d=l[u],Nt.onParticipantStatus(d.externalId,kt.WAITING);return[3,7];case 5:return[4,this._acceptConcurrent(s)];case 6:p.sent(),p.label=7;case 7:return t._activationMutex=!1,[2,this._conversation];case 8:throw _=p.sent(),t._activationMutex=!1,this._close(_,"Unable to start conversation"),_;case 9:return[2]}}))}))},t.prototype.onJoin=function(e){return Ye(this,void 0,void 0,(function(){var n,r,o,i,a,s;return $e(this,(function(c){switch(c.label){case 0:if(t._activationMutex)throw this._logger.log("callError","joinCall"),Ft.warn("Conversation: there is already running activation"),new jn(lt.FAILED);t._activationMutex=!0,this._state="PROCESSING",c.label=1;case 1:return c.trys.push([1,5,,6]),this._mediaSource=this._createMediaSource(),[4,this._mediaSource.request(e.needVideo)];case 2:return c.sent(),n=this._mediaSource.getMediaSettings().isVideoEnabled,e.needVideo=n,this._logger.log("callJoinConversation",n?"video":"audio"),[4,this._joinConversation(e)];case 3:if(r=c.sent(),!this._conversation||!this._signaling)throw new jn(lt.UNKNOWN_ERROR);return this._participantState="ACCEPTED",[4,this._registerParticipants()];case 4:if(c.sent(),this._processConnectionData(r),this._allocateTransport(),this._createSpeakerDetector(),this._createSpecListener(),this._signaling.readyToSend(),Nt.onLocalStream(this._mediaSource.getStream(),this._mediaSource.getMediaSettings()),Nt.onConversation(this._conversation.externalId,this._conversation.mediaModifiers),Nt.onLocalStatus(kt.WAITING),this._toggleJoinAvailability(),this._changeNeedRate(),this._state="ACTIVE",this._changeFeatureSet(),t._current=this,t._delayedHangup)throw new jn(lt.CANCELED);for(o=0,i=Object.values(this._participants);o<i.length;o++)a=i[o],Nt.onParticipantStatus(a.externalId,kt.WAITING),"CALLED"!==a.state&&"ACCEPTED"!==a.state||this._transport&&!this._transport.isAllocated(a.id)&&this._transport.allocate(a.id,!1),this._transport&&"ACCEPTED"===a.state&&this._transport.open(a.id,null);return t._activationMutex=!1,[2,this._conversation];case 5:throw s=c.sent(),t._activationMutex=!1,this._close(s,"Unable to join conversation"),s;case 6:return[2]}}))}))},t.prototype.onPush=function(e,n,r){return void 0===n&&(n="USER"),Ye(this,void 0,void 0,(function(){var o,i,a=this;return $e(this,(function(s){switch(s.label){case 0:if(t._activationMutex)throw Ft.warn("Conversation: there is already running activation"),new jn(lt.REJECTED);t._activationMutex=!0,s.label=1;case 1:return s.trys.push([1,4,,5]),[4,this._prepareConversation(e,n,r)];case 2:if(o=s.sent(),this._mediaSource=this._createMediaSource(),!this._conversation||!this._signaling)throw new jn(lt.UNKNOWN_ERROR);if(!this._conversation.participants.find((function(e){return a._conversation&&"CALLED"===e.state&&e.id===a._conversation.userId})))throw Ft.log("Push rejected (there is an active call)"),this._logger.log("callPush","rejected"),new jn(lt.REJECTED);return[4,this._registerParticipants()];case 3:if(s.sent(),this._processConnectionData(o),this._allocateTransport(),this._createSpeakerDetector(),this._createSpecListener(),this._signaling.readyToSend(),this._logger.log("callPush","accepted"),t._current=this,t._delayedHangup)throw new jn(lt.CANCELED);return t._activationMutex=!1,[3,5];case 4:throw i=s.sent(),t._activationMutex=!1,this._close(i,"Unable to handle inbound call push"),i;case 5:return[2]}}))}))},t.prototype._acceptConcurrent=function(e){return Ye(this,void 0,void 0,(function(){var t,n,r,o;return $e(this,(function(i){switch(i.label){case 0:if(!this._mediaSource||!this._signaling||!this._conversation)throw new jn(lt.UNKNOWN_ERROR);this._state="PROCESSING",this._logger.log("callAcceptConcurrent",e?"video":"audio"),Ft.debug("Concurrent call",{conversationId:this._conversation.id}),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this._signaling.acceptCall(this._mediaSource.getMediaSettings())];case 2:for(i.sent(),Nt.onCallAccepted(),this._state="ACTIVE",this._participantState="ACCEPTED",this._changeFeatureSet(),t=0,n=Object.values(this._participants);t<n.length;t++)"CALLED"!==(r=n[t]).state&&"ACCEPTED"!==r.state||this._transport&&!this._transport.isAllocated(r.id)&&this._transport.allocate(r.id,!0),this._transport&&"ACCEPTED"===r.state&&this._transport.open(r.id);return[3,4];case 3:return o=i.sent(),this._close(o,"Unable to accept concurrent call"),[3,4];case 4:return[2]}}))}))},t.prototype.accept=function(e){return Ye(this,void 0,void 0,(function(){var t,n,r,o;return $e(this,(function(i){switch(i.label){case 0:if("IDLE"!==this._state)throw this._logger.log("callError","acceptIncoming"),Ft.error("Unable to accept a call - invalid state"),new Error("Unable to accept a call - invalid state");if(!this._mediaSource||!this._signaling||!this._conversation)throw new jn(lt.UNKNOWN_ERROR);this._state="PROCESSING",this._logger.log("callAcceptIncoming",e?"video":"audio"),Ft.debug("Accept incoming call",{withVideo:e}),i.label=1;case 1:return i.trys.push([1,6,,7]),[4,this._mediaSource.request(e)];case 2:return i.sent(),[4,this._signaling.acceptCall(this._mediaSource.getMediaSettings())];case 3:return i.sent(),this._participantState="ACCEPTED",Nt.onCallAccepted(),Nt.onLocalStream(this._mediaSource.getStream(),this._mediaSource.getMediaSettings()),Nt.onConversation(this._conversation.externalId,this._conversation.mediaModifiers),Nt.onLocalStatus(kt.WAITING),this._toggleJoinAvailability(),this._changeNeedRate(),"MUTE"!==this._conversation.muteState&&"MUTE_PERMANENT"!==this._conversation.muteState?[3,5]:[4,this._processMuteState()];case 4:i.sent(),i.label=5;case 5:for(this._state="ACTIVE",this._changeFeatureSet(),t=0,n=Object.values(this._participants);t<n.length;t++)"CALLED"!==(r=n[t]).state&&"ACCEPTED"!==r.state||this._transport&&!this._transport.isAllocated(r.id)&&this._transport.allocate(r.id,!0),this._transport&&"ACCEPTED"===r.state&&this._transport.open(r.id),Nt.onParticipantStatus(r.externalId,kt.WAITING);return[2,this._conversation];case 6:throw o=i.sent(),this._close(o,"Unable to accept call"),o;case 7:return[2]}}))}))},t.prototype.decline=function(){return Ye(this,void 0,void 0,(function(){return $e(this,(function(e){switch(e.label){case 0:if("IDLE"!==this._state)throw this._logger.log("callError","declineIncoming"),Ft.error("Unable to decline a call - invalid state"),new Error("Unable to decline a call - invalid state");return this._state="PROCESSING",Ft.debug("Decline incoming call"),this._logger.log("callDeclineIncoming",this._mediaSource&&this._mediaSource.getMediaSettings().isVideoEnabled?"video":"audio"),this._participantState="HUNGUP",this._signaling?[4,this._signaling.hangup(lt.REJECTED)]:[3,2];case 1:e.sent(),e.label=2;case 2:return this._close(new jn(lt.REJECTED)),[2]}}))}))},t.prototype.hangup=function(){return Ye(this,void 0,void 0,(function(){var e;return $e(this,(function(t){switch(t.label){case 0:return Ft.debug("Hangup"),e="ACTIVE"===this._state?lt.HUNGUP:lt.CANCELED,this._logger.log("callHangup",e),this._signaling?[4,this._signaling.hangup(e)]:[3,2];case 1:return t.sent(),this._close(new jn(e)),[3,3];case 2:Nt.onHangup(new jn(lt.HUNGUP),this._conversation&&this._conversation.id),t.label=3;case 3:return[2]}}))}))},t.prototype.addParticipant=function(e,t){return Ye(this,void 0,void 0,(function(){var n,r;return $e(this,(function(o){switch(o.label){case 0:return this._signaling?[4,this._signaling.addParticipant(e,t)]:(this._close(new jn(lt.UNKNOWN_ERROR),"Unable to add participant"),[2]);case 1:return n=o.sent(),r=null,"error"===n.type&&(r="call-unfeasible"===n.error?n.status:lt.UNKNOWN_ERROR),[4,this._onAddParticipant(e,r)];case 2:return o.sent(),[2]}}))}))},t.prototype.removeParticipant=function(e,t){return void 0===t&&(t=!1),Ye(this,void 0,void 0,(function(){return $e(this,(function(n){switch(n.label){case 0:return this._signaling?[4,this._signaling.removeParticipant(e,t)]:[3,2];case 1:n.sent(),this._onRemoveParticipant(e),n.label=2;case 2:return[2]}}))}))},t.prototype.setVolume=function(e){this._audioOutput.volume=e},t.prototype.updateStatisticsInterval=function(){this._transport&&this._transport.updateStatisticsInterval()},t.prototype._close=function(e,n){n&&Ft.error(n,e),Ft.debug("Close conversation",e),e.error?this._signaling&&this._signaling.hangup(lt.FAILED):this._logger.log("callError",e.hangup),t._activationMutex=!1;var r=this._conversation&&this._conversation.id;return-1!==[lt.CANCELED,lt.NOT_FRIENDS,lt.CALLEE_IS_OFFLINE,lt.CALLER_IS_BLOCKED].indexOf(e.hangup)||e.hangup===lt.REJECTED&&!e.remote?(Nt.onHangup(e,r),void this.destroy()):(e.hangup!==lt.HUNGUP||e.remote&&"CALLED"!==this._participantState)&&(e.hangup!==lt.MISSED||e.remote)?e.hangup===lt.SOCKET_CLOSED&&t._current&&!this._conversation?(this._cleanupSignaling(),void this._cleanupMediaSource()):e.hangup!==lt.BUSY||e.remote?(this._state="CLOSE",this._participantState="HUNGUP",this._changeFeatureSet(),this._cleanupMediaSource(),this._cleanupParticipants(),this._cleanupTransport(),this._cleanupSpeakerDetector(),this._cleanupSpecListener(),this._cleanupSignaling(),this._api.cleanup(),this._logger.destroy(),this._conversation=null,t._current=null,t._delayedHangup=!1,void Nt.onHangup(e||new jn(lt.UNKNOWN_ERROR),r)):(this._cleanupSignaling(),void this._cleanupMediaSource()):(Nt.onHangup(e,r),void this.destroy())},t.prototype.destroy=function(){var e=this._conversation&&this._conversation.id;Ft.debug("Destroy conversation",{conversationId:e}),this._cleanupMediaSource(),this._cleanupParticipants(),this._cleanupTransport(),this._cleanupSpeakerDetector(),this._cleanupSpecListener(),this._cleanupSignaling(),this._api.cleanup(),this._cleanupListeners(),this._logger.destroy(),this._conversation=null,t._current=null,t._delayedHangup=!1},t.prototype._getConversationParams=function(){return Ye(this,void 0,void 0,(function(){var e,t,n,r,o;return $e(this,(function(i){switch(i.label){case 0:return[4,this._api.getConversationParams()];case 1:return e=i.sent(),Ft.debug("Api.getConversationParams",e),t=[],n=e.turn_server,(r=e.stun_server)&&t.push(r),n&&((o=n.urls.filter((function(e,t,n){return n.indexOf(e)===t}))).forEach((function(e){return o.push(e+"?transport=tcp")})),n.urls=o,t.push(n)),xt.iceServers=t,xt.wssBase=e.endpoint,xt.wssToken=e.token,e.client_type&&(xt.clientType=e.client_type),[2]}}))}))},t.prototype._startConversation=function(e,t,n,r,o,i,a){return void 0===r&&(r=!1),void 0===o&&(o=""),void 0===i&&(i=!1),void 0===a&&(a=!1),Ye(this,void 0,void 0,(function(){var s,c,u;return $e(this,(function(l){switch(l.label){case 0:return s=Ht.uuid(),Ft.debug("Conversation: start",{conversationId:s,opponentIds:e,opponentType:t,direction:n,withVideo:r}),[4,this._api.startConversation(s,e,t,r,o,i,a)];case 1:return c=l.sent(),Ft.debug("Api.startConversation",c),[4,this._getConversationParams()];case 2:return l.sent(),[4,this._connectSignaling(ht.START,c)];case 3:return u=l.sent(),[4,this._setConversation(c,u,n)];case 4:return l.sent(),[2,u]}}))}))},t.prototype._joinConversation=function(e){return Ye(this,void 0,void 0,(function(){var t,n,r,o,i,a,s;return $e(this,(function(c){switch(c.label){case 0:return t=e.conversationId,n=e.needVideo,r=void 0!==n&&n,o=e.chatId,i=e.joinLink,Ft.debug("Conversation: join",{conversationId:t,joinLink:i,needVideo:r}),t?[4,this._api.joinConversation(t,r,o)]:[3,2];case 1:return a=c.sent(),[3,5];case 2:return i?[4,this._api.joinConversationByLink(i,r)]:[3,4];case 3:return a=c.sent(),[3,5];case 4:throw new jn(lt.UNKNOWN_ERROR);case 5:return Ft.debug("Api.joinConversation",a),[4,this._getConversationParams()];case 6:return c.sent(),[4,this._connectSignaling(ht.JOIN,a)];case 7:return s=c.sent(),[4,this._setConversation(a,s,"JOINING")];case 8:return c.sent(),[2,s]}}))}))},t.prototype._prepareConversation=function(e,n,r){return void 0===n&&(n="USER"),Ye(this,void 0,void 0,(function(){var o,i,a;return $e(this,(function(s){switch(s.label){case 0:return Ft.debug("Conversation: push",{conversationId:e,type:n,peerId:r}),[4,this._getConversationParams()];case 1:if(s.sent(),!(o=this._api.getUserId()))throw new jn(lt.UNKNOWN_ERROR);return i={id:e,peerId:r,endpoint:xt.wssBase+"?userId="+o+"&entityType="+n+"&conversationId="+e+"&token="+xt.wssToken,is_concurrent:!1,p2p_forbidden:!1},[4,this._connectSignaling(ht.ACCEPT,i)];case 2:return a=s.sent(),!t._current||"ACCEPTED"!==t._current._participantState&&"CALLED"!==t._current._participantState?(t._current&&(t._current.destroy(),t._current=null),[4,this._setConversation(i,a,"INCOMING",n)]):(Ft.log("Push rejected (busy)"),this._logger.log("callPush","busy"),this._signaling&&this._signaling.hangup(lt.BUSY),[2,Promise.reject({hangup:lt.BUSY})]);case 3:return s.sent(),[2,a]}}))}))},t.prototype._createParticipant=function(e){return Ye(this,void 0,void 0,(function(){var t,n;return $e(this,(function(r){switch(r.label){case 0:return t=Object.assign({id:null,externalId:null,mediaSettings:null,participantState:null,state:null,remoteStream:null,remoteVideoTrack:null,remoteAudioTrack:null,mediaSource:null,platform:null,clientType:null,roles:[],networkRating:1},e),n=t,[4,this._getUserId(t.id)];case 1:return n.externalId=r.sent(),[2,t]}}))}))},t.prototype._getUserId=function(e){return Ye(this,void 0,void 0,(function(){var t;return $e(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this._api.userId(e)];case 1:return[2,n.sent()];case 2:throw t=n.sent(),this._close(new jn(lt.NETWORK_ERROR),t),t;case 3:return[2]}}))}))},t.prototype._setConversation=function(e,t,n,r){var o,i;return void 0===r&&(r="USER"),Ye(this,void 0,void 0,(function(){var a,s,c,u;return $e(this,(function(l){switch(l.label){case 0:if(!(a=this._api.getUserId())){if(!(s=null===(i=null===(o=t.conversation)||void 0===o?void 0:o.participants)||void 0===i?void 0:i.find((function(e){return e.peerId&&e.peerId.id===t.peerId.id&&e.peerId.type===t.peerId.type}))))throw new jn(lt.UNKNOWN_ERROR);a=String(s.id),r=s.idType,this._api.setUserId(a)}return c=Ht.composeId(a,r),[4,this._getUserId(c)];case 1:return u=l.sent(),this._conversation={userId:a,compositeUserId:c,externalId:u,acceptTime:t.conversation.acceptTime,features:t.conversation.features||[],id:t.conversation.id||e.id,participants:(t.conversation.participants||[]).map((function(e){return e.id=String(e.id),e})),participantsLimit:t.conversation.participantsLimit||30,topology:t.conversation.topology||"DIRECT",direction:n,concurrent:t.isConcurrent||e.is_concurrent||!1,needRate:!1,chatId:t.conversation.multichatId,roles:[],recordInfo:null,joinLink:e.join_link,pinnedParticipantId:null,mediaModifiers:t.mediaModifiers,options:[],muteState:"UNMUTE",muteOptions:[],networkRating:1},this._signaling.setConversationId(e.id),e.p2p_forbidden&&(xt.forceRelayPolicy=e.p2p_forbidden),this._logger.log("callForceRelay",xt.forceRelayPolicy?"1":"0"),this._changeFeatureSet(),this._logDevices(),[2]}}))}))},t.prototype._createMediaSource=function(){var e=new Bn;return this.subscribe(e,"SOURCE_CHANGED",this._onLocalMediaStreamChanged.bind(this)),this.subscribe(e,"SCREEN_STATUS",this._onScreenSharingStatus.bind(this)),this.onLog(e,this._logFn),this._audioFix=new An(e,this._logger),e},t.prototype._connectSignaling=function(e,t){return Ye(this,void 0,void 0,(function(){var n;return $e(this,(function(r){switch(r.label){case 0:return this._signaling.setEndpoint(t.endpoint),this.subscribe(this._signaling,"NOTIFICATION",this._onSignalingNotification.bind(this)),this.subscribe(this._signaling,"FAILED",this._onSignalingFailed.bind(this)),this.subscribe(this._signaling,"RECONNECT",this._onSignalingReconnect.bind(this)),[4,this._signaling.connect(e,t)];case 1:return n=r.sent(),Ft.debug("Signaling connected",n),[2,n]}}))}))},t.prototype._registerParticipants=function(){var e;return Ye(this,void 0,void 0,(function(){var t,n,r,o,i,a,s;return $e(this,(function(c){switch(c.label){case 0:return this._conversation?(t=this._conversation.participants.map((function(e){return e.id})),[4,this._api.prepareUserIds(t)]):[2];case 1:c.sent(),n=0,r=this._conversation.participants,c.label=2;case 2:return n<r.length?(o=r[n],(i=Ht.composeParticipantId(o))===this._conversation.compositeUserId?(this._conversation.roles=o.roles||[],this._conversation.roles.length&&(Ft.debug("Local roles changed: "+o.roles),Nt.onLocalRolesChanged(o.roles)),[3,4]):"HUNGUP"===o.state||"REJECTED"===o.state?(this._removeParticipant(o,lt.HUNGUP),[3,4]):(a=this._participants,s=i,[4,this._createParticipant({id:i,mediaSettings:o.mediaSettings,participantState:null===(e=o.participantState)||void 0===e?void 0:e.state,state:o.state,roles:o.roles||[]})])):[3,5];case 3:a[s]=c.sent(),o.roles&&o.roles.length&&(Ft.debug("Roles for participant ["+i+"] changed: "+o.roles),Nt.onRolesChanged(this._participants[i].externalId,o.roles)),c.label=4;case 4:return n++,[3,2];case 5:return[2]}}))}))},t.prototype._processConnectionData=function(e){"MUTE"!==e.muteState&&"MUTE_PERMANENT"!==e.muteState||this._onMuteParticipant(e.muteOptions,!1,e.muteState),e.conversation.pinnedParticipantId&&this._onPinParticipant(e.conversation.pinnedParticipantId),this._onRecordInfo(e.conversation.recordInfo),this._onOptionsChanged(e.conversation.options)},t.prototype._allocateTransport=function(){if(this._conversation&&this._signaling&&this._mediaSource){this._transport=new sr(this._conversation.topology,this._signaling,this._mediaSource,this._serverSettings),this._debugInfo=new xn,this.subscribe(this._transport,"STATE_CHANGED",this._onTransportStateChanged.bind(this)),this.subscribe(this._transport,"LOCAL_STATE_CHANGED",this._onTransportLocalStateChanged.bind(this)),this.subscribe(this._transport,"REMOTE_TRACK_ADDED",this._onRemoteTrackAdded.bind(this)),this.subscribe(this._transport,"REMOTE_TRACK_REMOVED",this._onRemoteTrackRemoved.bind(this)),this.subscribe(this._transport,"REMOTE_ALL_STALL",this._onRemoteAllStall.bind(this)),this.subscribe(this._transport,"REMOTE_DATA_STATS",this._onRemoteDataStats.bind(this)),this.subscribe(this._transport,"SIGNALLED_STALLED_PARTICIPANTS",this._onRemoteSignalledStall.bind(this)),this.subscribe(this._transport,"ACTIVE_PARTICIPANTS_NO_SIGNAL",this._onRemoteActivityNoSignal.bind(this)),this.subscribe(this._transport,"TOPOLOGY_CHANGED",this._onTopologyChanged.bind(this)),this.subscribe(this._transport,"SIGNALLED_NETWORK_STATUS",this._onNetworkStatus.bind(this)),this.onLog(this._transport,this._logFn),this.onLog(this._debugInfo,this._logFn);for(var e="OUTGOING"===this._conversation.direction&&!this._conversation.concurrent,t=0,n=Object.values(this._participants);t<n.length;t++){var r=n[t];"ACCEPTED"!==r.state&&"CALLED"!==r.state||this._transport.allocate(r.id,e)}}},t.prototype._createSpeakerDetector=function(){this._transport&&(this._volumesDetector=new cr(this._transport),this.subscribe(this._volumesDetector,"VOLUMES_DETECTED",this._onVolumesDetected.bind(this)),this._speakerDetector=new Nn(this._volumesDetector,this._transport),this.subscribe(this._speakerDetector,"SPEAKER_CHANGED",this._onSpeakerChanged.bind(this)),this._localVolumeDetector=new Ln(this._mediaSource))},t.prototype._createSpecListener=function(){this._transport&&this._volumesDetector&&(this._specListener=new Un(this._transport,this._volumesDetector,this._participants),this.onLog(this._specListener,this._logFn))},t.prototype._logDevices=function(){var e=Dn.getCameras().length,t=Dn.getMicrophones().length;Ft.debug("Cameras: "+e+(Dn.hasCameraPermission()?"✔":"✖")+", Microphones: "+t+(Dn.hasMicrophonePermission()?"✔":"✖")),this._logger.log("callDevices",e+"_"+t)},t.prototype._removeParticipant=function(e,t){var n,r;"CALLED"!==e.state&&"ACCEPTED"!==e.state&&"CLOSE"!==this._state&&this._participants[e.id]&&(t===lt.HUNGUP?Nt.onParticipantStatus(e.externalId,kt.HANGUP):Nt.onParticipantStatus(e.externalId,kt.ERROR,t),null===(n=e.mediaSource)||void 0===n||n.disconnect(),null===(r=e.remoteAudioTrack)||void 0===r||r.stop(),this._conversation&&this._conversation.pinnedParticipantId===e.id&&(this._conversation.pinnedParticipantId=null),delete this._participants[e.id],Nt.onRemoteRemoved(e.externalId))},t.prototype._cleanupListeners=function(){this.unsubscribe(),window.removeEventListener("unload",this._onUnload)},t.prototype._cleanupMediaSource=function(){this._mediaSource&&(this._mediaSource.destroy(),this._mediaSource=null)},t.prototype._cleanupParticipants=function(){Object.values(this._participants).forEach((function(e){var t,n,r,o;null===(t=e.remoteStream)||void 0===t||t.getTracks().forEach((function(e){e.stop()})),null===(n=e.remoteAudioTrack)||void 0===n||n.stop(),null===(r=e.remoteVideoTrack)||void 0===r||r.stop(),null===(o=e.mediaSource)||void 0===o||o.disconnect()})),this._participants={},this._audioOutput&&this._audioOutput.destroy()},t.prototype._cleanupTransport=function(){this._transport&&(this._transport.destroy(),this._transport=null),this._debugInfo&&(this._debugInfo=null)},t.prototype._cleanupSpeakerDetector=function(){this._speakerDetector&&(this._speakerDetector.destroy(),this._speakerDetector=null),this._volumesDetector&&(this._volumesDetector.destroy(),this._volumesDetector=null),this._localVolumeDetector&&(this._localVolumeDetector.destroy(),this._localVolumeDetector=null)},t.prototype._cleanupSpecListener=function(){this._specListener&&(this._specListener.destroy(),this._specListener=null)},t.prototype._cleanupSignaling=function(){this._signaling&&this._signaling.close()},t.prototype._onAddParticipant=function(e,t){return Ye(this,void 0,void 0,(function(){var n,r,o;return $e(this,(function(i){switch(i.label){case 0:return Ft.debug("Add new participant ["+e+"]"),!(n=this._participants[e])||"ACCEPTED"!==n.state&&"CALLED"!==n.state?n?[3,2]:(r=this._participants,o=e,[4,this._createParticipant({id:e})]):(Ft.warn("Participant ["+n.id+":"+n.state+"] is already in conversation"),[2]);case 1:r[o]=i.sent(),n=this._participants[e],i.label=2;case 2:return Nt.onParticipantStatus(n.externalId,kt.WAITING),t?(n.state="HUNGUP",this._removeParticipant(n,t)):this._transport&&(n.state="CALLED",this._transport.allocate(n.id,!0),this._logger.log("callAddParticipant")),[2]}}))}))},t.prototype._onRemoveParticipant=function(e){Ft.debug("Remove participant ["+e+"]");var t=this._participants[e];t?(this._transport&&this._transport.close(t.id),this._logger.log("callRemoveParticipant")):Ft.warn("Participant ["+e+"] isn't in conversation")},t.prototype.changeDevice=function(e){return Ye(this,void 0,void 0,(function(){return $e(this,(function(t){return this._mediaSource?("audioinput"===e&&(this._audioFix=new An(this._mediaSource,this._logger)),[2,this._mediaSource.changeDevice(e)]):[2,Promise.reject(ct.UNKNOWN)]}))}))},t.prototype.toggleScreenCapturing=function(e){return Ye(this,void 0,void 0,(function(){return $e(this,(function(t){return this._mediaSource?[2,this._mediaSource.toggleScreenCapturing(e)]:[2,Promise.reject(ct.UNKNOWN)]}))}))},t.prototype.setVideoStream=function(e,t){return void 0===t&&(t=!1),Ye(this,void 0,void 0,(function(){return $e(this,(function(n){return this._mediaSource?[2,this._mediaSource.setVideoStream(e,t)]:[2]}))}))},t.prototype.toggleLocalVideo=function(e){return Ye(this,void 0,void 0,(function(){return $e(this,(function(t){return this._mediaSource?(this._logger.log("callMediaStatus",e?"video_1":"video_0"),[2,this._mediaSource.toggleVideo(e)]):[2]}))}))},t.prototype.toggleLocalAudio=function(e){return Ye(this,void 0,void 0,(function(){return $e(this,(function(t){return this._mediaSource?(this._logger.log("callMediaStatus",e?"audio_1":"audio_0"),[2,this._mediaSource.toggleAudio(e)]):[2]}))}))},t.prototype.changePriorities=function(e){return Ye(this,void 0,void 0,(function(){var t,n,r,o,i,a,s,c,u,l;return $e(this,(function(d){switch(d.label){case 0:if(e.length<2||!this._signaling)return[2];for(t={},n={},r=0,o=e;r<o.length;r++)i=o[r],a="object"==typeof i.uid?i.uid:Sn.fromId(i.uid),l=Sn.toString(a),n[l]=i.priority;for(s=0,c=Object.values(this._participants);s<c.length;s++)u=c[s],l=Sn.toString(u.externalId),n.hasOwnProperty(l)&&(t[u.id]=n[l]);return[4,this._signaling.changePriorities(t)];case 1:return d.sent(),[2]}}))}))},t.prototype.changeParticipantState=function(e){return Ye(this,void 0,void 0,(function(){var t,n,r,o,i;return $e(this,(function(a){switch(a.label){case 0:for(t=0,n=Object.entries(e);t<n.length;t++)if(r=n[t],o=r[0],i=r[1],o.length>5||i.length>5)throw new Error("key/value max length is 5 chars, mappings with empty values (null or empty string) are discarded");return[4,this._signaling.changeParticipantState(e)];case 1:return a.sent(),[2]}}))}))},t.prototype.updateDisplayLayout=function(e){return Ye(this,void 0,void 0,(function(){var n,r,o,i,a,s,c,u,l,d,_;return $e(this,(function(p){switch(p.label){case 0:if(e.length<1||!this._signaling)return[2];for(n={},r={},o=0,i=e;o<i.length;o++)a=i[o],s="object"==typeof a.uid?a.uid:Sn.fromId(a.uid),d=Sn.toString(s),r[d]=t._layoutToString(a);for(c=0,u=Object.values(this._participants);c<u.length;c++)l=u[c],d=Sn.toString(l.externalId),(_=r[d])&&(l.lastRequestedLayout=_,n[l.id]=_);return[4,this._signaling.updateDisplayLayout(n)];case 1:return p.sent(),[2]}}))}))},t.prototype._isCallAdmin=function(){return!!this._conversation&&Ht.includesOneOf(this._conversation.roles,[ft.ADMIN,ft.CREATOR])},t.prototype._checkAdminRole=function(){if(this._conversation&&!Ht.includesOneOf(this._conversation.roles,[ft.ADMIN,ft.CREATOR]))throw new Error("You don't have the required permission")},t.prototype.grantRoles=function(e,t,n){return Ye(this,void 0,void 0,(function(){return $e(this,(function(r){switch(r.label){case 0:return this._checkAdminRole(),[4,this._signaling.grantRoles(e,t,n)];case 1:return r.sent(),[2]}}))}))},t.prototype.switchParticipantDevice=function(e,t,n,r){return void 0===e&&(e=null),void 0===r&&(r=!1),Ye(this,void 0,void 0,(function(){return $e(this,(function(o){switch(o.label){case 0:return this._checkAdminRole(),[4,this._signaling.muteParticipant(e,t,n,r)];case 1:return o.sent(),[2]}}))}))},t.prototype.pinParticipant=function(e,t){return Ye(this,void 0,void 0,(function(){return $e(this,(function(n){switch(n.label){case 0:return this._checkAdminRole(),[4,this._signaling.pinParticipant(e,t)];case 1:return n.sent(),[2]}}))}))},t.prototype.updateMediaModifiers=function(e){return Ye(this,void 0,void 0,(function(){return $e(this,(function(t){switch(t.label){case 0:return this._signaling&&this._conversation?(this._conversation.mediaModifiers=e,[4,this._signaling.updateMediaModifiers(e)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.changeOptions=function(e){return Ye(this,void 0,void 0,(function(){var t;return $e(this,(function(n){switch(n.label){case 0:return this._signaling&&this._conversation?(this._checkAdminRole(),[4,this._signaling.changeOptions(e)]):[3,2];case 1:n.sent(),t=function(e,t){for(var n=new Set(e),r=0,o=Object.entries(t);r<o.length;r++){var i=o[r],a=i[0];i[1]?n.add(a):n.delete(a)}return Array.from(n)}(this._conversation.options,e),this._onOptionsChanged(t),n.label=2;case 2:return[2]}}))}))},t.prototype.chatMessage=function(e,t){return void 0===t&&(t=null),Ye(this,void 0,void 0,(function(){return $e(this,(function(n){switch(n.label){case 0:return this._signaling?[4,this._signaling.chatMessage(e,t)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},t.prototype.chatHistory=function(e){return Ye(this,void 0,void 0,(function(){var t,n,r;return $e(this,(function(o){switch(o.label){case 0:return this._signaling?[4,this._signaling.chatHistory(e)]:[3,5];case 1:t=o.sent(),n=t.messages.length-1,o.label=2;case 2:return n>=0?(r=t.messages[n],[4,this._onChatMessage(r)]):[3,5];case 3:o.sent(),o.label=4;case 4:return n--,[3,2];case 5:return[2]}}))}))},t.prototype.customData=function(e,t){return void 0===t&&(t=null),Ye(this,void 0,void 0,(function(){return $e(this,(function(n){switch(n.label){case 0:return this._signaling?[4,this._signaling.customData(e,t)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},t.prototype.createJoinLink=function(){return Ye(this,void 0,void 0,(function(){var e,t;return $e(this,(function(n){switch(n.label){case 0:return this._conversation?[4,this._api.createJoinLink(this._conversation.id)]:[3,2];case 1:if(e=n.sent(),t=e.join_link)return this._conversation.joinLink=t,[2,t];n.label=2;case 2:return[2,Promise.reject()]}}))}))},t.prototype.removeJoinLink=function(){return Ye(this,void 0,void 0,(function(){return $e(this,(function(e){switch(e.label){case 0:return this._conversation?[4,this._api.removeJoinLink(this._conversation.id)]:[3,2];case 1:if(e.sent().success)return delete this._conversation.joinLink,[2];e.label=2;case 2:return[2,Promise.reject()]}}))}))},t.prototype.startStream=function(e,t,n,r,o){return void 0===e&&(e=!1),void 0===t&&(t=null),void 0===n&&(n=null),void 0===r&&(r="DIRECT_LINK"),void 0===o&&(o=null),Ye(this,void 0,void 0,(function(){var i,a;return $e(this,(function(s){switch(s.label){case 0:return i={movieId:n,name:t,privacy:r,groupId:o,streamMovie:!e},[4,this._signaling.startStream(i)];case 1:return(a=s.sent()).error?[2,Promise.reject(a.message)]:[2,a]}}))}))},t.prototype.stopStream=function(){return Ye(this,void 0,void 0,(function(){var e;return $e(this,(function(t){switch(t.label){case 0:return[4,this._signaling.stopStream()];case 1:return(e=t.sent()).error?[2,Promise.reject()]:[2,e]}}))}))},t.prototype.getStreamInfo=function(){return Ye(this,void 0,void 0,(function(){var e;return $e(this,(function(t){switch(t.label){case 0:return[4,this._signaling.getRecordStatus()];case 1:return[2,{movieId:(e=t.sent()).recordMovieId,preview:e.recordMoviePreviewUrl}]}}))}))},t.prototype.setLocalResolution=function(e,t){var n;return Ye(this,void 0,void 0,(function(){return $e(this,(function(r){if(e<xt.videoMinWidth||t<xt.videoMinHeight)throw new Error("Sizes received are less than the `videoMinWidth` or `videoMinHeight`");return xt.videoMaxWidth=e,xt.videoMaxHeight=t,[2,null===(n=this._mediaSource)||void 0===n?void 0:n.setResolution(e,t)]}))}))},t.prototype.videoEffect=function(e){var t;return Ye(this,void 0,void 0,(function(){return $e(this,(function(n){return[2,null===(t=this._mediaSource)||void 0===t?void 0:t.videoEffect(e)]}))}))},t.prototype._onLocalMediaStreamChanged=function(e){return Ye(this,void 0,void 0,(function(){return $e(this,(function(t){switch(t.label){case 0:return Ft.debug("Local media stream changed",e.mediaSettings),Nt.onLocalStreamUpdate(e.mediaSettings,e.kind),this._signaling?[4,this._signaling.changeMediaSettings(e.mediaSettings)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype._onScreenSharingStatus=function(e){return Ye(this,void 0,void 0,(function(){return $e(this,(function(t){return Ft.debug("Screen sharing changed",e.track,e.mediaSettings),[2]}))}))},t._layoutToString=function(e){var t="";return void 0!==e.priority&&(t+="p="+e.priority),void 0!==e.width&&void 0!==e.height&&(""!==t&&(t+=":"),t+="sz="+Math.round(e.width)+"x"+Math.round(e.height)),void 0!==e.fit&&(""!==t&&(t+=":"),t+="fit="+e.fit),e.keyFrame&&(""!==t&&(t+=":"),t+="kf"),t},t.prototype._changeRemoteMediaSettings=function(e,t){Ft.debug("Remote media settings changed ["+e+"]",t);var n=this._participants[e];n&&(n.mediaSettings=t,n.remoteStream&&n.remoteVideoTrack&&t.isVideoEnabled&&(n.remoteStream.addTrack(n.remoteVideoTrack),n.remoteVideoTrack=null),"ACTIVE"===this._state&&Nt.onRemoteMediaSettings(n.externalId,t),this._specListener&&this._specListener.onChangeRemoteMediaSettings(e,t))},t.prototype._changeRemoteParticipantState=function(e,t){Ft.debug("Remote participant state changed ["+e+"]",t);var n=this._participants[e];n&&(n.participantState=t||{},"ACTIVE"===this._state&&Nt.onRemoteParticipantState(n.externalId,n.participantState))},t.prototype._onSignalingNotification=function(e){var t;switch(e.notification){case"accepted-call":return this._onAcceptedCall(e);case"hungup":return this._onHungup(e);case"participant-added":return this._onAddedParticipant(e);case"participant-joined":return this._onJoinedParticipant(e);case"closed-conversation":return this._onClosedConversation(e);case"media-settings-changed":return this._onMediaSettingsChanged(e);case"participant-state-changed":return this._onParticipantStateChanged(e);case"rate-call-data":return this._onNeedRate();case"feature-set-changed":return this._onFeatureSetChanged(e);case"multiparty-chat-created":return this._onMultipartyChatCreated(e);case"force-media-settings-change":return this._onForceMediaSettingsChange(e);case"settings-update":return this._onSettingsUpdate(e);case"video-quality-update":return this._onVideoQualityUpdate(e);case"registered-peer":return this._onPeerRegistered(e);case"switch-micro":return this._onMicSwitched(e);case"chat-message":return this._onChatMessage(e);case"custom-data":return this._onCustomData(e);case"record-started":return this._onRecordInfo(e.recordInfo);case"record-stopped":return this._onRecordInfo(null);case"roles-changed":return this._onRolesChanged(e.participantId,e.roles||[]);case"mute-participant":var n=e.unmute?(null===(t=this._conversation)||void 0===t?void 0:t.muteState)||"UNMUTE":e.mutePermanent?"MUTE_PERMANENT":"MUTE";return this._onMuteParticipant(e.mediaOptions||[],e.unmute||!1,n);case"pin-participant":return this._onPinParticipant(e.participantId,e.unpin);case"options-changed":return this._onOptionsChanged(e.options||[])}},t.prototype._onSignalingReconnect=function(e){var t,n;return Ye(this,void 0,void 0,(function(){var r,o,i,a,s,c,u,l,d,_,p,h,f,m;return $e(this,(function(g){switch(g.label){case 0:if(!this._conversation)return[2];if(e.conversation.acceptTime&&(this._conversation.acceptTime=e.conversation.acceptTime),e.conversation.participantsLimit&&(this._conversation.participantsLimit=e.conversation.participantsLimit),e.conversation.features&&(this._conversation.features=e.conversation.features,this._changeFeatureSet()),e.conversation.pinnedParticipantId!==this._conversation.pinnedParticipantId&&(e.conversation.pinnedParticipantId?this._onPinParticipant(e.conversation.pinnedParticipantId,!1):this._conversation.pinnedParticipantId&&this._onPinParticipant(this._conversation.pinnedParticipantId,!0)),e.conversation.topology,e.conversation.state,r=null,!e.conversation.participants)return[3,6];o=Object.keys(this._participants),i=[],a=0,s=e.conversation.participants,g.label=1;case 1:return a<s.length?(c=s[a],u=Ht.composeParticipantId(c),l=c.roles||[],u===this._conversation.compositeUserId?(r=c.mediaSettings,mt(this._conversation.roles,l)||this._onRolesChanged(u,l),[3,4]):(i.push(u),(d=this._participants[u])?[3,3]:[4,this._onJoinedParticipant({participantId:c.id,participantType:c.idType,mediaSettings:c.mediaSettings,participantState:null===(t=c.participantState)||void 0===t?void 0:t.state,state:c.state,roles:l})])):[3,5];case 2:return g.sent(),[3,4];case 3:v=c.mediaSettings,b=d.mediaSettings,(v.isAudioEnabled!==b.isAudioEnabled||v.isVideoEnabled!==b.isVideoEnabled||v.isScreenSharingEnabled!==b.isScreenSharingEnabled||v.isDataEnabled!==b.isDataEnabled)&&this._changeRemoteMediaSettings(u,c.mediaSettings),_=(null===(n=c.participantState)||void 0===n?void 0:n.state)||{},p=d.participantState||{},Ht.comparePlainObjects(_,p)||this._changeRemoteParticipantState(u,_),mt(l,d.roles)||this._onRolesChanged(d.id,l),g.label=4;case 4:return a++,[3,1];case 5:for(h=0,f=o;h<f.length;h++)m=f[h],i.indexOf(m)<0&&this._removeParticipant(this._participants[m],lt.HUNGUP);g.label=6;case 6:return"MUTE"!==e.muteState&&"MUTE_PERMANENT"!==e.muteState||this._onMuteParticipant(e.muteOptions,!1,e.muteState,r),e.unmuteOptions&&e.unmuteOptions.length&&this._onMuteParticipant(e.unmuteOptions,!0,e.muteState,r),this._onRecordInfo(e.conversation.recordInfo),this._onOptionsChanged(e.conversation.options),[2]}var v,b}))}))},t.prototype._onSignalingFailed=function(e){Ft.error("Signaling failed",e),this._close(e)},t.prototype._onAcceptedCall=function(e){return Ye(this,void 0,void 0,(function(){var t,n,r,o,i;return $e(this,(function(a){switch(a.label){case 0:return t=Ht.composeMessageId(e),n=Ht.getPeerIdString(e.peerId),Ft.debug("Participant accepted call ["+t+"]"),this._conversation&&t===this._conversation.compositeUserId?(this._close(new jn(lt.MISSED),"Call accepted on other device"),[2]):(r=this._participants[t])?[3,2]:(o=this._participants,i=t,[4,this._createParticipant({id:t})]);case 1:o[i]=a.sent(),r=this._participants[t],a.label=2;case 2:return r.state="ACCEPTED",r.mediaSettings=e.mediaSettings,this._logger.log("callAcceptedOutgoing",r.mediaSettings.isVideoEnabled?"video":"audio"),!this._conversation||"OUTGOING"!==this._conversation.direction||"IDLE"!==this._state&&"PROCESSING"!==this._state||(this._state="ACTIVE",this._changeFeatureSet()),"ACTIVE"===this._state&&this._transport&&this._transport.open(r.id,n),this._changeRemoteMediaSettings(t,e.mediaSettings),this._changeRemoteParticipantState(t,null),[2]}}))}))},t.prototype._onHungup=function(e){Ft.debug("Participant hungup ["+e.participantId+"]",{reason:e.reason});var t=Ht.composeMessageId(e);if(this._conversation&&this._conversation.compositeUserId===t)this._close(new jn(e.reason));else{var n=this._participants[t];n?(this._transport&&this._transport.close(t),n.state=e.reason===lt.REJECTED?"REJECTED":"HUNGUP","CLOSE"!==this._state&&this._removeParticipant(n,lt.HUNGUP)):Ft.warn("Participant ["+t+"] isn't in conversation")}},t.prototype._onAddedParticipant=function(e){var t,n,r,o;return Ye(this,void 0,void 0,(function(){var i,a,s,c;return $e(this,(function(u){switch(u.label){case 0:return Ft.debug("Participant added ["+e.participantId+"]"),i=Ht.composeMessageId(e),(a=this._participants[i])&&"HUNGUP"!==a.state&&"REJECTED"!==a.state?(Ft.debug("Participant ["+i+"] is already in conversation and is active"),[2]):a?[3,2]:(s=this._participants,c=i,[4,this._createParticipant({id:i})]);case 1:s[c]=u.sent(),a=this._participants[i],u.label=2;case 2:return a.state="CALLED",a.mediaSettings=null===(t=e.participant)||void 0===t?void 0:t.mediaSettings,a.participantState=null===(r=null===(n=e.participant)||void 0===n?void 0:n.participantState)||void 0===r?void 0:r.state,a.roles=(null===(o=e.participant)||void 0===o?void 0:o.roles)||[],Nt.onParticipantStatus(a.externalId,kt.WAITING),"ACTIVE"===this._state&&this._transport&&this._transport.allocate(a.id,!0),this._changeRemoteMediaSettings(i,a.mediaSettings),this._changeRemoteParticipantState(i,a.participantState),[2]}}))}))},t.prototype._onJoinedParticipant=function(e){var t,n,r;return Ye(this,void 0,void 0,(function(){var o,i,a,s;return $e(this,(function(c){switch(c.label){case 0:return Ft.debug("Participant joined ["+e.participantId+"]"),o=Ht.composeMessageId(e),(i=this._participants[o])&&"ACCEPTED"===i.state?(Ft.warn("Participant ["+o+"] is already in conversation and is active"),[2]):i?[3,2]:(a=this._participants,s=o,[4,this._createParticipant({id:o})]);case 1:a[s]=c.sent(),i=this._participants[o],c.label=2;case 2:return!this._conversation||"OUTGOING"!==this._conversation.direction||"IDLE"!==this._state&&"PROCESSING"!==this._state||(this._state="ACTIVE",this._changeFeatureSet()),i.state="ACCEPTED",i.mediaSettings=e.mediaSettings,i.participantState=null===(n=null===(t=e.participant)||void 0===t?void 0:t.participantState)||void 0===n?void 0:n.state,i.roles=(null===(r=e.participant)||void 0===r?void 0:r.roles)||[],this._transport&&this._transport.isAllocated(i.id)?Nt.onParticipantStatus(i.externalId,kt.CONNECTED):Nt.onParticipantStatus(i.externalId,kt.WAITING),"ACTIVE"===this._state&&this._transport&&(this._transport.isAllocated(i.id)||this._transport.allocate(i.id,!0),this._transport.open(i.id)),this._changeRemoteMediaSettings(o,i.mediaSettings),this._changeRemoteParticipantState(o,i.participantState),[2]}}))}))},t.prototype._onClosedConversation=function(e){this._toggleJoinAvailability(),this._close(new jn(e.reason,{remote:!0}))},t.prototype._onMediaSettingsChanged=function(e){var t=Ht.composeMessageId(e);this._changeRemoteMediaSettings(t,e.mediaSettings)},t.prototype._onParticipantStateChanged=function(e){var t,n=Ht.composeMessageId(e);this._changeRemoteParticipantState(n,null===(t=e.participantState)||void 0===t?void 0:t.state)},t.prototype._onNeedRate=function(){this._conversation&&(this._conversation.needRate=!0,this._changeNeedRate())},t.prototype._onFeatureSetChanged=function(e){this._conversation&&(this._conversation.features=e.features,this._changeFeatureSet())},t.prototype._onMultipartyChatCreated=function(e){this._conversation&&(this._conversation.chatId=e.chatId,this._toggleJoinAvailability(),Nt.onMultipartyChatCreated(this._conversation))},t.prototype._onForceMediaSettingsChange=function(e){return Ye(this,void 0,void 0,(function(){var t;return $e(this,(function(n){switch(n.label){case 0:return this._mediaSource?(t=this._mediaSource.getMediaSettings()).isAudioEnabled===e.mediaSettings.isAudioEnabled?[3,2]:[4,this._mediaSource.toggleAudio(e.mediaSettings.isAudioEnabled)]:[2];case 1:n.sent(),n.label=2;case 2:return t.isVideoEnabled===e.mediaSettings.isVideoEnabled?[3,4]:[4,this._mediaSource.toggleVideo(e.mediaSettings.isVideoEnabled)];case 3:n.sent(),n.label=4;case 4:return[2]}}))}))},t.prototype._onSettingsUpdate=function(e){var t,n,r={camera:e.camera,screenSharing:e.screenSharing};t=this._serverSettings,(n=r).camera&&(t.camera=n.camera),n.screenSharing&&(t.screenSharing=n.screenSharing),this._signalingServerSettings=function(e){return{camera:Object.assign({},e.camera),screenSharing:Object.assign({},e.screenSharing)}}(this._serverSettings),this._transport&&this._transport.updateSettings(this._serverSettings)},t.prototype._onVideoQualityUpdate=function(e){var t=this._serverSettings.camera,n=this._signalingServerSettings.camera;t&&n&&(t.maxBitrateK=Math.min(Math.round(e.quality.maxBitrate/1024),n.maxBitrateK),t.maxDimension=Math.min(e.quality.maxDimension,n.maxDimension),Ft.log("Got video quality update notification",t),this._transport&&this._transport.updateSettings(this._serverSettings))},t.prototype._onPeerRegistered=function(e){var t=Ht.composeMessageId(e);this._participants[t]&&(this._participants[t].clientType=e.clientType,this._participants[t].platform=e.platform)},t.prototype._onMicSwitched=function(e){return Ye(this,void 0,void 0,(function(){return $e(this,(function(t){switch(t.label){case 0:return Nt.onDeviceSwitched(_t.AUDIO,!e.mute),[4,this.toggleLocalAudio(!e.mute)];case 1:return t.sent(),[2]}}))}))},t.prototype._onChatMessage=function(e){return Ye(this,void 0,void 0,(function(){var t,n;return $e(this,(function(r){switch(r.label){case 0:return t=Ht.composeMessageId(e),this._participants[t]?(n=this._participants[t].externalId,[3,3]):[3,1];case 1:return[4,this._getUserId(t)];case 2:n=r.sent(),r.label=3;case 3:return Nt.onChatMessage(e.message,n,e.direct),[2]}}))}))},t.prototype._onCustomData=function(e){return Ye(this,void 0,void 0,(function(){var t,n;return $e(this,(function(r){switch(r.label){case 0:return t=Ht.composeMessageId(e),this._participants[t]?(n=this._participants[t].externalId,[3,3]):[3,1];case 1:return[4,this._getUserId(t)];case 2:n=r.sent(),r.label=3;case 3:return Nt.onCustomData(e.data,n,e.direct),[2]}}))}))},t.prototype._onRecordInfo=function(e){return Ye(this,void 0,void 0,(function(){var t,n;return $e(this,(function(r){switch(r.label){case 0:return this._conversation?(t=!1,!this._conversation.recordInfo!=!e?t=!0:this._conversation.recordInfo&&e&&(t=this._conversation.recordInfo.recordMovieId!==e.recordMovieId),t?e?[4,this._getUserId(e.initiator)]:[3,2]:[3,3]):[2];case 1:return n=r.sent(),Nt.onRecordStarted(n,e.recordMovieId,e.recordStartTime,e.recordType,e.recordExternalMovieId,e.recordExternalOwnerId),[3,3];case 2:Nt.onRecordStopped(),r.label=3;case 3:return this._conversation.recordInfo=e,[2]}}))}))},t.prototype._onRolesChanged=function(e,t){if(this._conversation&&e===this._conversation.compositeUserId&&!mt(this._conversation.roles,t))return Ft.debug("Local roles changed: "+t),this._conversation.roles=t,void Nt.onLocalRolesChanged(t);var n=this._participants[e];n&&!mt(n.roles,t)&&(Ft.debug("Roles for participant ["+e+"] changed: "+t),n.roles=t,Nt.onRolesChanged(n.externalId,t))},t.prototype._onMuteParticipant=function(e,t,n,r){return Ye(this,void 0,void 0,(function(){return $e(this,(function(o){switch(o.label){case 0:return this._conversation?(this._conversation.muteOptions=e,this._conversation.muteState!==n||t?(this._conversation.muteState=n,[4,this._processMuteState(t,r)]):[2]):[2];case 1:return o.sent(),[2]}}))}))},t.prototype._processMuteState=function(e,t){return void 0===e&&(e=!1),Ye(this,void 0,void 0,(function(){var n,r,o,i,a,s,c;return $e(this,(function(u){switch(u.label){case 0:if(!this._conversation||!this._mediaSource||"ACCEPTED"!==this._participantState)return[2];if(n=this._conversation.muteState,r=this._conversation.muteOptions,o="MUTE_PERMANENT"===n,i=this._mediaSource.getMediaSettings(),e){for(a=0,s=r;a<s.length;a++)c=s[a],Nt.onUnmuteRequest(c);return[2]}return!r.includes(_t.AUDIO)||!i.isAudioEnabled||t&&t.isAudioEnabled?[3,2]:(Nt.onDeviceSwitched(_t.AUDIO,!1),[4,this.toggleLocalAudio(!1)]);case 1:u.sent(),u.label=2;case 2:return!r.includes(_t.VIDEO)||!i.isVideoEnabled||t&&t.isVideoEnabled?[3,4]:(Nt.onDeviceSwitched(_t.VIDEO,!1),[4,this.toggleLocalVideo(!1)]);case 3:u.sent(),u.label=4;case 4:return Nt.onUnmutePermission(!o||this._isCallAdmin()),[2]}}))}))},t.prototype._onPinParticipant=function(e,t){if(void 0===t&&(t=!1),this._conversation){var n=this._conversation.pinnedParticipantId;n&&n!==e&&(this._participants[n]?Nt.onPinnedParticipant(this._participants[n].externalId,!0):this._conversation.compositeUserId===n&&Nt.onLocalPin(!0)),this._participants[e]?Nt.onPinnedParticipant(this._participants[e].externalId,t):this._conversation.compositeUserId===e&&Nt.onLocalPin(t),this._conversation.pinnedParticipantId=t?null:e}},t.prototype._onOptionsChanged=function(e){this._conversation&&!function(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e;n<r.length;n++){var o=r[n];if(!t.includes(o))return!1}return!0}(this._conversation.options,e)&&(this._conversation.options=e,Nt.onOptionsChanged(e))},t.prototype._onNetworkStatus=function(e){if(this._conversation){Ft.log("Received network status update: ",e);for(var t=[],n=0,r=Object.entries(e);n<r.length;n++){var o=r[n],i=o[0],a=o[1],s=void 0;if(i===this._conversation.compositeUserId)s=this._conversation.networkRating;else{if(!this._participants[i])continue;s=this._participants[i].networkRating}if(s!==a)if(i===this._conversation.compositeUserId){this._conversation.networkRating=a,Nt.onLocalNetworkStatusChanged(a);var c=!s||s>xt.badConnectionRating,u=a>xt.badConnectionRating;c!==u&&Nt.onNetworkStatus(u)}else{var l=this._participants[i];l.networkRating=a,t.push({uid:l.externalId,rating:a})}}if(0===t.length)return;Nt.onNetworkStatusChanged(t)}},t.prototype._changeFeatureSet=function(){if(this._conversation){var e="ACTIVE"===this._state,t=this._conversation.features.includes("ADD_PARTICIPANT");Nt.onCallState(e,t,this._conversation)}},t.prototype._changeNeedRate=function(){this._conversation&&this._conversation.needRate&&Nt.onRateNeeded()},t.prototype._onVolumesDetected=function(e){for(var t=[],n=0,r=Object.entries(e);n<r.length;n++){var o=r[n],i=o[0],a=o[1],s=this._participants[i];s&&s.externalId&&t.push({uid:s.externalId,volume:a.real})}Nt.onVolumesDetected(t)},t.prototype._onSpeakerChanged=function(e){this._activeSpeakerId=e,this._participants[e]&&this._lastSignalledActiveSpeakerId!==e&&(Nt.onSpeakerChanged(this._participants[e].externalId),this._lastSignalledActiveSpeakerId=e)},t.prototype._onTransportStateChanged=function(e,t){return Ye(this,void 0,void 0,(function(){var n;return $e(this,(function(r){return(n=this._participants[e])?(Ft.debug("Transport state for participant ["+e+"] has changed: "+t),"CONNECTED"===t&&(Nt.onParticipantStatus(n.externalId,kt.CONNECTED),xt.onDemandTracks&&!n.remoteStream&&(n.mediaSettings&&this._changeRemoteMediaSettings(e,n.mediaSettings),this._changeRemoteParticipantState(e,n.participantState)),this._updateDisplayLayoutFromCache(e)),"CONNECTING"===t&&Nt.onParticipantStatus(n.externalId,kt.CONNECTING),"RECONNECTING"===t&&Nt.onParticipantStatus(n.externalId,kt.RECONNECT),[2]):(Ft.warn("Participant ["+e+"] isn't in conversation"),[2])}))}))},t.prototype._onTransportLocalStateChanged=function(e){return Ye(this,void 0,void 0,(function(){return $e(this,(function(t){switch(t.label){case 0:return Ft.debug("Local transport state has changed: "+e),"CONNECTED"===e&&Nt.onLocalStatus(kt.CONNECTED),"CONNECTING"===e&&Nt.onLocalStatus(kt.CONNECTING),"RECONNECTING"===e&&Nt.onLocalStatus(kt.RECONNECT),"FAILED"!==e?[3,3]:this._transport&&0===this._transport.allocated().length?this._signaling?[4,this._signaling.hangup(lt.FAILED)]:[3,2]:[3,3];case 1:t.sent(),t.label=2;case 2:this._close(new jn(lt.FAILED),"Transport failed"),t.label=3;case 3:return[2]}}))}))},t.prototype._onRemoteTrackAdded=function(e,t,n){return Ye(this,void 0,void 0,(function(){var r,o,i;return $e(this,(function(a){switch(a.label){case 0:return e.endsWith("audio-mix")?(Ft.debug("Remote audio mix track added"),this._audioOutput.addMix(n),[3,4]):[3,1];case 1:return Ft.debug("Remote track added on the participant ["+e+"]",{kind:n.kind}),(r=this._participants[e])?[3,3]:(Ft.warn("Conversation: track added before participant ["+e+"]"),o=this._participants,i=e,[4,this._createParticipant({id:e,state:"CALLED"})]);case 2:o[i]=a.sent(),r=this._participants[e],Nt.onParticipantStatus(r.externalId,kt.WAITING),this._activeSpeakerId===e&&this._lastSignalledActiveSpeakerId!==e&&(Nt.onSpeakerChanged(r.externalId),this._lastSignalledActiveSpeakerId=e),a.label=3;case 3:this._transport&&!this._transport.isAllocated(r.id)&&this._transport.allocate(r.id,!1),r.remoteStream!==t&&(r.remoteStream=t,Nt.onRemoteStream(r.externalId,t)),"audio"===n.kind&&this._audioOutput.add(e,n),r.mediaSettings&&(n&&!r.mediaSettings.isVideoEnabled&&"video"===n.kind&&(r.remoteVideoTrack=n,r.remoteStream.removeTrack(n)),this._changeRemoteMediaSettings(e,r.mediaSettings)),this._changeRemoteParticipantState(e,r.participantState),a.label=4;case 4:return[2]}}))}))},t.prototype._onRemoteTrackRemoved=function(e,t,n){switch(Ft.debug("["+e+"] remote track (removed)",{track:n}),n.kind){case"audio":this._removeAudioTrack(e,t,n);break;case"video":case"screen":this._removeVideoTrack(e,t,n)}},t.prototype._removeAudioTrack=function(e,t,n){if("audio-mix"===e)this._audioOutput.removeMix();else{var r=this._participants[e];if(!r)return;if(r.remoteStream&&r.remoteStream!==t)return;this._audioOutput.remove(e)}},t.prototype._removeVideoTrack=function(e,t,n){},t.prototype._onRemoteActivityNoSignal=function(){this._onRemoteSignalledStall([]),this._onRemoteAllStall(!1)},t.prototype._onTopologyChanged=function(e){this._conversation&&(this._conversation.topology=e,this._changeFeatureSet())},t.prototype._onRemoteAllStall=function(e){var t=this;this._remoteAllStalled!==e&&(this._remoteAllStalled=e,Object.values(this._participants).forEach((function(n){n.externalId&&Nt.onParticipantStatus(n.externalId,e||t._lastStalled[n.id]?kt.RECONNECT:kt.CONNECTED)})))},t.prototype._onRemoteSignalledStall=function(e){var t=this,n={};e.forEach((function(e){if(n[e]=!0,!t._lastStalled[e]){var r=t._participants[e];r&&r.externalId&&!t._remoteAllStalled&&Nt.onParticipantStatus(r.externalId,kt.RECONNECT)}delete t._lastStalled[e]})),Object.keys(this._lastStalled).forEach((function(e){var n=t._participants[e];n&&n.externalId&&!t._remoteAllStalled&&Nt.onParticipantStatus(n.externalId,kt.CONNECTED)})),this._lastStalled=n},t.prototype._onRemoteDataStats=function(e){var t;this._debugInfo&&this._debugInfo.onRemoteDataStats(e,this._participants,null===(t=this._mediaSource)||void 0===t?void 0:t.getMediaSettings()),this._fixAudioDevice(e.outbound.rtps)},t.prototype._fixAudioDevice=function(e){var t;Dn.hasMicrophone()&&this._audioFix&&(null===(t=this._mediaSource)||void 0===t?void 0:t.getMediaSettings().isAudioEnabled)&&this._audioFix.fix(e)},t.prototype._toggleJoinAvailability=function(){var e=this._conversation&&this._conversation.chatId,t=e&&"CLOSE"!==this._state||!1;e&&(Ft.debug("Toggle join availability",{available:t,chatId:e}),Nt.onJoinStatus(t,e))},t.prototype._updateDisplayLayoutFromCache=function(e){var t;return Ye(this,void 0,void 0,(function(){var n,r;return $e(this,(function(o){switch(o.label){case 0:return"SERVER"!==(null===(t=this._transport)||void 0===t?void 0:t.getTopology())?[2]:(n=this._participants[e])&&n.lastRequestedLayout?[4,this._signaling.updateDisplayLayout((r={},r[e]=n.lastRequestedLayout,r))]:[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}}))}))},t._delayedHangup=!1,t}(tt);function lr(e,t,n){if(void 0===t&&(t={}),void 0===n&&(n=!1),window.Blob&&window.navigator.sendBeacon){var r=pr(e,t,n),o=new window.Blob([r],{type:"application/x-www-form-urlencoded"});window.navigator.sendBeacon(xt.apiEnv.api+"fb.do",o)}}function dr(e,t,n){return void 0===t&&(t={}),void 0===n&&(n=!1),Ye(this,void 0,void 0,(function(){return $e(this,(function(r){return[2,_r(pr(e,t,n))]}))}))}function _r(e){return Ye(this,void 0,void 0,(function(){return $e(this,(function(t){return[2,new Promise((function(t,n){var r=new XMLHttpRequest;r.open("POST",xt.apiEnv.api+"fb.do",!0),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.onreadystatechange=function(){if(r.readyState===XMLHttpRequest.DONE){var e;try{e=JSON.parse(r.responseText)}catch(t){e={result:r.responseText}}200!==r.status||e.hasOwnProperty("error_msg")?n(e):t(e)}},r.send(e)}))]}))}))}function pr(e,t,n){void 0===t&&(t={}),void 0===n&&(n=!1),t.method=e,t.format="JSON",t.application_key||(t.application_key=xt.apiKey),n||(It.sessionKey?t.session_key=It.sessionKey:It.accessToken&&(t.access_token=It.accessToken));for(var r=0,o=Object.entries(t);r<o.length;r++){var i=o[r],a=i[0];"object"==typeof(d=i[1])&&(t[a]=JSON.stringify(d))}for(var s="",c=0,u=Object.entries(t);c<u.length;c++){var l=u[c],d=(a=l[0],l[1]);s&&(s+="&"),s+=a+"="+encodeURIComponent(d)}return s}var hr,fr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._userId=null,t._externalUidsCache={},t}return Ge(t,e),t.prototype._callUnsafe=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n=!1),Ye(this,void 0,void 0,(function(){var r,o=this;return $e(this,(function(i){return[2,(r=function(i){return Ye(o,void 0,void 0,(function(){var o;return $e(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,5]),[4,dr(e,t,n)];case 1:return[2,a.sent()];case 2:return(o=a.sent()).hasOwnProperty("error_msg")?[3,4]:(i++,Ft.debug(e+" network error, attempt "+i+"..."),i<10?[4,Ht.delay(Math.min(700*i,3e3))]:[3,4]);case 3:return a.sent(),[2,r(i)];case 4:throw Ft.warn(e,"error",o),o;case 5:return[2]}}))}))})(0)]}))}))},t.prototype._call=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n=!1),Ye(this,void 0,void 0,(function(){var r,o;return $e(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,10]),[4,this._callUnsafe(e,t,n)];case 1:return[2,i.sent()];case 2:switch(r=i.sent(),Ft.warn("Api call error",r),o=ct.API,r.error_code){case 102:case 103:case 104:return[3,3];case 1101:return[3,5];case 1102:return[3,6];case 1103:return[3,7];case 1104:case 1106:return[3,8]}return[3,9];case 3:return[4,this.authorize()];case 4:return i.sent(),[2,this._callUnsafe(e,t,n)];case 5:return o=lt.SERVICE_DISABLED,[3,9];case 6:return o=lt.CALLEE_IS_OFFLINE,[3,9];case 7:return o=lt.NOT_FRIENDS,[3,9];case 8:return o=lt.EXTERNAL_API_ERROR,[3,9];case 9:throw new jn(o,{message:r.error_msg,code:r.error_code});case 10:return[2]}}))}))},t.prototype._getCurrentUser=function(){return Ye(this,void 0,void 0,(function(){return $e(this,(function(e){return[2,this._call("users.getCurrentUser")]}))}))},t.prototype.userId=function(e){return Ye(this,void 0,void 0,(function(){var t,n,r,o;return $e(this,(function(i){switch(i.label){case 0:return t=Ht.decomposeId(e).id,It.isEmpty()?[2,Sn.fromId(t)]:this._externalUidsCache.hasOwnProperty(t)?[3,2]:(r=(n=Object).assign,o=[this._externalUidsCache],[4,this._getExternalIdsByOkIds([t])]);case 1:r.apply(n,o.concat([i.sent()])),i.label=2;case 2:return[2,Sn.fromString(this._externalUidsCache[t])]}}))}))},t.prototype.prepareUserIds=function(e){return Ye(this,void 0,void 0,(function(){var t,n,r;return $e(this,(function(o){switch(o.label){case 0:return It.isEmpty()?[3,2]:(n=(t=Object).assign,r=[this._externalUidsCache],[4,this._getExternalIdsByOkIds(e)]);case 1:n.apply(t,r.concat([o.sent()])),o.label=2;case 2:return[2]}}))}))},t.prototype.authorize=function(){return Ye(this,void 0,void 0,(function(){var e,t,n=this;return $e(this,(function(r){return this._uuid||((e=Yt.get("uuid"))||(e=Ht.uuid(),Yt.set("uuid",e)),this._uuid=String(e)),t={session_data:{version:2,device_id:this._uuid,client_version:xt.appVersion,client_type:"SDK_JS"}},xt.authToken&&(t.session_data.auth_token=xt.authToken,t.session_data.version=3),[2,this._callUnsafe("auth.anonymLogin",t,!0).then((function(e){e.uid&&(n._userId=String(e.uid)),It.sessionKey=e.session_key,It.sessionSecretKey=e.session_secret_key})).catch((function(e){throw 401===e.error_code&&Nt.onTokenExpired(),new jn(ct.AUTH,{message:e.error_msg,code:e.error_code})}))]}))}))},t.prototype.log=function(e){lr("log.externalLog",{collector:"ok.mobile.apps.video",data:JSON.stringify({application:xt.appName+":2.3.3-beta.11",platform:xt.platform,items:e})})},t.prototype.init=function(){!function(){if(!xt.apiAppId||!xt.apiKey)throw new jn(ct.API,{message:"Required arguments apiAppId/apiAppKey not passed"})}()},t.prototype.joinConversation=function(e,t,n){return void 0===t&&(t=!1),Ye(this,void 0,void 0,(function(){var r;return $e(this,(function(o){return r={conversationId:e,isVideo:t},n&&(r.chatId=n),[2,this._call("vchat.joinConversation",r)]}))}))},t.prototype.createConversation=function(e,t,n){return void 0===t&&(t=""),void 0===n&&(n=!1),Ye(this,void 0,void 0,(function(){var r;return $e(this,(function(o){return r={conversationId:e,createJoinLink:!0,isVideo:!1},t&&(r.payload=t),xt.domain&&(r.domainId=xt.domain),n&&(r.requireAuthToJoin=!0),[2,this._startConversation(r)]}))}))},t.prototype.startConversation=function(e,t,n,r,o,i,a){return void 0===r&&(r=!1),void 0===o&&(o=""),void 0===i&&(i=!1),void 0===a&&(a=!1),Ye(this,void 0,void 0,(function(){var s;return $e(this,(function(c){if(s={conversationId:e,isVideo:r},t&&t.length)switch(n){case ot.USER:s.uids=t.join(",");break;case ot.GROUP:s.gid=t[0];break;case ot.CHAT:s.chatId=t[0]}return i&&(s.createJoinLink=!0),o&&(s.payload=o),xt.domain&&(s.domainId=xt.domain),a&&(s.requireAuthToJoin=!0),[2,this._startConversation(s)]}))}))},t.prototype._startConversation=function(e){return Ye(this,void 0,void 0,(function(){return $e(this,(function(t){return[2,this._call("vchat.startConversation",e)]}))}))},t.prototype.createJoinLink=function(e){return Ye(this,void 0,void 0,(function(){return $e(this,(function(t){return[2,this._call("vchat.createJoinLink",{conversationId:e})]}))}))},t.prototype.removeJoinLink=function(e){return Ye(this,void 0,void 0,(function(){return $e(this,(function(t){return[2,this._call("vchat.removeJoinLink",{conversationId:e})]}))}))},t.prototype.getAnonymTokenByLink=function(e,t){return Ye(this,void 0,void 0,(function(){var n,r;return $e(this,(function(o){switch(o.label){case 0:return n={joinLink:e},t&&(n.anonymName=t),[4,this._call("vchat.getAnonymTokenByLink",n)];case 1:return r=o.sent(),this._userId=String(r.uid),[2,r.token]}}))}))},t.prototype.joinConversationByLink=function(e,t){return void 0===t&&(t=!1),Ye(this,void 0,void 0,(function(){var n;return $e(this,(function(r){return n={joinLink:e,isVideo:t},xt.anonymToken&&(n.anonymToken=xt.anonymToken),[2,this._call("vchat.joinConversationByLink",n)]}))}))},t.prototype.getOkIdsByExternalIds=function(e){return Ye(this,void 0,void 0,(function(){var t,n,r,o,i,a,s,c,u,l,d,_=this;return $e(this,(function(p){switch(p.label){case 0:for(t=Sn.fromIds(e),n=[],r={methods:[]},o=[],i=Object.keys(this._externalUidsCache),a=Object.values(this._externalUidsCache),s=0,c=t;s<c.length;s++)u=c[s],l=Sn.toString(u),(d=a.indexOf(l))>-1?n.push(i[d]):(o.push(l),r.methods.push({"vchat.getOkIdByExternalId":{params:{externalId:u.id,anonym:u.type===Tn.ANONYM},onError:"SKIP"}}));return r.methods.length?[4,this._call("batch.executeV2",r)]:[2,n];case 1:return p.sent().forEach((function(e,t){if(e.ok){var r=String(e.ok.ok_id);_._externalUidsCache[r]=o[t],n.push(r)}})),[2,n]}}))}))},t.prototype.getConversationParams=function(){return Ye(this,void 0,void 0,(function(){var e;return $e(this,(function(t){return e={},xt.anonymToken&&(e.anonymToken=xt.anonymToken),[2,this._call("vchat.getConversationParams",e)]}))}))},t.prototype.getUserId=function(){return this._userId},t.prototype.setUserId=function(e){this._userId=e},t.prototype.hangupConversation=function(e){var t={conversationId:e,reason:lt.HUNGUP};xt.anonymToken&&(t.anonymToken=xt.anonymToken),lr("vchat.hangupConversation",t)},t.prototype.cleanup=function(){},t.prototype._getExternalIdsByOkIds=function(e){return Ye(this,void 0,void 0,(function(){var t,n,r,o,i,a,s,c,u,l;return $e(this,(function(d){switch(d.label){case 0:t={},d.label=1;case 1:return d.trys.push([1,3,,4]),[4,this._call("vchat.getExternalIdsByOkIds",{uids:e.join(",")})];case 2:if((n=d.sent()).external_ids)for(r=0,o=Object.entries(n.external_ids);r<o.length;r++)i=o[r],u=i[0],l=i[1],t[u]=Sn.fromIdToString(l,Tn.USER);if(n.anonym_ids)for(a=0,s=Object.entries(n.anonym_ids);a<s.length;a++)c=s[a],u=c[0],l=c[1],t[u]=Sn.fromIdToString(l,Tn.ANONYM);return[2,t];case 3:return d.sent(),[2,t];case 4:return[2]}}))}))},t}(Ze);!function(e){e.RECOVER="recover",e.ACCEPT_CALL="accept-call",e.ADD_PARTICIPANT="add-participant",e.REMOVE_PARTICIPANT="remove-participant",e.HANGUP="hangup",e.TRANSMIT_DATA="transmit-data",e.ACCEPT_PRODUCER="accept-producer",e.ALLOCATE_CONSUMER="allocate-consumer",e.CHANGE_MEDIA_SETTINGS="change-media-settings",e.CHANGE_PARTICIPANT_STATE="change-participant-state",e.CHANGE_STREAM_PRIORITIES="change-streams-priorities",e.UPDATE_DISPLAY_LAYOUT="update-display-layout",e.REPORT_PERF_STAT="report-perf-stat",e.RECORD_START="record-start",e.RECORD_STOP="record-stop",e.RECORD_GET_STATUS="record-get-status",e.SWITCH_MICRO="switch-micro",e.SWITCH_TOPOLOGY="switch-topology",e.REQUEST_REALLOC="request-realloc",e.CHAT_MESSAGE="chat-message",e.CHAT_HISTORY="chat-history",e.CUSTOM_DATA="custom-data",e.GRANT_ROLES="grant-roles",e.MUTE_PARTICIPANT="mute-participant",e.PIN_PARTICIPANT="pin-participant",e.UPDATE_MEDIA_MODIFIERS="update-media-modifiers",e.CHANGE_OPTIONS="change-options"}(hr||(hr={}));var mr,gr,vr=hr,br=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.socket=null,t.sequence=1,t.lastStamp=0,t.commandsQueue=[],t.incomingCache=[],t.responseHandlers={},t.reconnectCount=0,t.conversationResolve=null,t.conversationReject=null,t.connected=!1,t.listenersReady=!1,t.postfix="&platform="+xt.platform+"&appVersion="+xt.appVersion+"&version="+xt.protocolVersion+"&device="+xt.device,t.peerId=null,t.conversationId=null,t.reconnectTimer=0,t.connectionMessageWaitTimer=0,t.doctorTimer=0,t.participantIdRegistry=null,t.producerNotificationDataChannel=null,t.producerCommandDataChannel=null,t}return Ge(t,e),t.prototype.setEndpoint=function(e){this.endpoint=e},t.prototype.setConversationId=function(e){this.conversationId=e},t.prototype.setParticipantIdRegistry=function(e){this.participantIdRegistry=e},t.prototype.setProducerNotificationDataChannel=function(e){var t=this;this.producerNotificationDataChannel=e,this.producerNotificationDataChannel.onmessage=function(e){var n,r=null===(n=t.participantIdRegistry)||void 0===n?void 0:n.handleMessage(e.data);r&&t._handleMessage(r)}},t.prototype.setProducerCommandDataChannel=function(e){this.producerCommandDataChannel=e,this.producerCommandDataChannel.onmessage=this._onMessage.bind(this)},t.prototype.connect=function(e){return Ye(this,void 0,void 0,(function(){var t=this;return $e(this,(function(n){return this.postfix+="&clientType="+xt.clientType,[2,new Promise((function(n,r){if(t.socket&&t.socket.readyState<WebSocket.CLOSING)return t.log("callSocketAction","already_opened"),void r(Error("Socket already opened"));t.conversationResolve=function(e){n(e),t.conversationResolve=null,t.conversationReject=null},t.conversationReject=function(e){r(e),t.conversationResolve=null,t.conversationReject=null},t._connect(e)}))]}))}))},t.prototype._send=function(e,t){return void 0===t&&(t={}),Ye(this,void 0,void 0,(function(){var n;return $e(this,(function(r){return t.participantId&&(n=Ht.decomposeId(t.participantId),t=Object.assign({},t,{participantId:n.id,participantType:n.type})),[2,this._sendRaw(e,t)]}))}))},t.prototype._isDataChannelCommand=function(e){return null!==this.producerCommandDataChannel&&(e===vr.UPDATE_DISPLAY_LAYOUT||e===vr.REPORT_PERF_STAT)},t._isDataChannelResponseRequired=function(e){return e===vr.REPORT_PERF_STAT},t.prototype._sendRaw=function(e,t){return void 0===t&&(t={}),Ye(this,void 0,void 0,(function(){var n=this;return $e(this,(function(r){return[2,new Promise((function(r,o){var i=n._isDataChannelCommand(e);if(!i){if(!n.socket)return n.log("callSocketAction","not_opened"),Ft.warn("Socket not opened"),void o(new Error("Socket not opened"));n.socket.readyState>WebSocket.OPEN&&(n.log("callSocketAction","invalid_state"),Ft.warn("Invalid state "+n.socket.readyState))}n.commandsQueue.push({sequence:n.sequence++,name:e,params:t,responseTimer:0,resolve:r,reject:o}),(n.socket&&n.socket.readyState===WebSocket.OPEN||i)&&n._handleCommandsQueue()}))]}))}))},t.prototype.hangup=function(e){return Ye(this,void 0,void 0,(function(){return $e(this,(function(t){return[2,this._send(vr.HANGUP,{reason:e}).catch((function(){}))]}))}))},t.prototype.sendCandidate=function(e,t){return Ye(this,void 0,void 0,(function(){return $e(this,(function(n){return[2,this._send(vr.TRANSMIT_DATA,{participantId:e,data:{candidate:t}})]}))}))},t.prototype.sendSdp=function(e,t){return Ye(this,void 0,void 0,(function(){return $e(this,(function(n){return[2,this._send(vr.TRANSMIT_DATA,{participantId:e,data:{sdp:t}})]}))}))},t.prototype.acceptCall=function(e){return Ye(this,void 0,void 0,(function(){return $e(this,(function(t){return[2,this._send(vr.ACCEPT_CALL,{mediaSettings:e})]}))}))},t.prototype.changeMediaSettings=function(e){return Ye(this,void 0,void 0,(function(){return $e(this,(function(t){return[2,this._send(vr.CHANGE_MEDIA_SETTINGS,{mediaSettings:e})]}))}))},t.prototype.changeParticipantState=function(e){return Ye(this,void 0,void 0,(function(){return $e(this,(function(t){return[2,this._send(vr.CHANGE_PARTICIPANT_STATE,{participantState:{state:e}})]}))}))},t.prototype.addParticipant=function(e,t){return Ye(this,void 0,void 0,(function(){return $e(this,(function(n){return[2,this._send(vr.ADD_PARTICIPANT,ze({participantId:e},t))]}))}))},t.prototype.removeParticipant=function(e,t){return void 0===t&&(t=!1),Ye(this,void 0,void 0,(function(){return $e(this,(function(n){return[2,this._send(vr.REMOVE_PARTICIPANT,{participantId:e,ban:t})]}))}))},t.prototype.allocateConsumer=function(e,t){return Ye(this,void 0,void 0,(function(){var n;return $e(this,(function(r){return n={capabilities:t},e&&(n.description=e.sdp),[2,this._send(vr.ALLOCATE_CONSUMER,n)]}))}))},t.prototype.acceptProducer=function(e,t){return Ye(this,void 0,void 0,(function(){var n;return $e(this,(function(r){return n={description:e.sdp},t&&(n.ssrcs=t),[2,this._send(vr.ACCEPT_PRODUCER,n)]}))}))},t.prototype.changePriorities=function(e){return Ye(this,void 0,void 0,(function(){return $e(this,(function(t){return[2,this._send(vr.CHANGE_STREAM_PRIORITIES,{typedPriorities:e}).catch((function(){}))]}))}))},t.prototype.updateDisplayLayout=function(e){return Ye(this,void 0,void 0,(function(){return $e(this,(function(t){return[2,this._send(vr.UPDATE_DISPLAY_LAYOUT,{layouts:e}).catch((function(){}))]}))}))},t.prototype.startStream=function(e){return Ye(this,void 0,void 0,(function(){return $e(this,(function(t){return[2,this._send(vr.RECORD_START,e)]}))}))},t.prototype.stopStream=function(){return Ye(this,void 0,void 0,(function(){return $e(this,(function(e){return[2,this._send(vr.RECORD_STOP)]}))}))},t.prototype.getRecordStatus=function(){return Ye(this,void 0,void 0,(function(){return $e(this,(function(e){return[2,this._send(vr.RECORD_GET_STATUS)]}))}))},t.prototype.switchTopology=function(e,t){return void 0===t&&(t=!1),Ye(this,void 0,void 0,(function(){return $e(this,(function(n){return[2,this._send(vr.SWITCH_TOPOLOGY,{topology:e,force:t})]}))}))},t.prototype.requestRealloc=function(e){return Ye(this,void 0,void 0,(function(){var t;return $e(this,(function(n){return t={},e&&(t.target=e.toUpperCase()),[2,this._send(vr.REQUEST_REALLOC,t)]}))}))},t.prototype.reportPerfStat=function(e){return Ye(this,void 0,void 0,(function(){return $e(this,(function(t){return[2,this._send(vr.REPORT_PERF_STAT,{report:e})]}))}))},t.prototype.chatMessage=function(e,t){return void 0===t&&(t=null),Ye(this,void 0,void 0,(function(){return $e(this,(function(n){return[2,this._send(vr.CHAT_MESSAGE,{message:e,participantId:t})]}))}))},t.prototype.chatHistory=function(e){return Ye(this,void 0,void 0,(function(){return $e(this,(function(t){return[2,this._send(vr.CHAT_HISTORY,{count:e})]}))}))},t.prototype.customData=function(e,t){return Ye(this,void 0,void 0,(function(){return $e(this,(function(n){return[2,this._send(vr.CUSTOM_DATA,{data:e,participantId:t})]}))}))},t.prototype.grantRoles=function(e,t,n){return Ye(this,void 0,void 0,(function(){var r;return $e(this,(function(o){return r={participantId:e,roles:t},n&&(r.revoke=!0),[2,this._sendRaw(vr.GRANT_ROLES,r)]}))}))},t.prototype.muteParticipant=function(e,t,n,r){return void 0===n&&(n=!1),void 0===r&&(r=!1),Ye(this,void 0,void 0,(function(){return $e(this,(function(o){return[2,this._sendRaw(vr.MUTE_PARTICIPANT,{participantId:e,mediaOptions:t,unmute:n,mutePermanent:r})]}))}))},t.prototype.pinParticipant=function(e,t){return Ye(this,void 0,void 0,(function(){var n;return $e(this,(function(r){return n={participantId:e},t&&(n.unpin=!0),[2,this._sendRaw(vr.PIN_PARTICIPANT,n)]}))}))},t.prototype.updateMediaModifiers=function(e){return Ye(this,void 0,void 0,(function(){return $e(this,(function(t){return[2,this._send(vr.UPDATE_MEDIA_MODIFIERS,{mediaModifiers:e})]}))}))},t.prototype.changeOptions=function(e){return Ye(this,void 0,void 0,(function(){return $e(this,(function(t){return[2,this._send(vr.CHANGE_OPTIONS,{options:e})]}))}))},t.prototype.close=function(){this.socket&&this.socket.readyState<WebSocket.CLOSING&&this._closeSocket(),this._stopWaitConnectionMessage(),this._stopDoctor(),clearTimeout(this.reconnectTimer)},t.prototype.readyToSend=function(){this.listenersReady=!0,this._handleCachedMessages()},t.prototype._connect=function(e){if(!(this.socket&&this.socket.readyState<WebSocket.CLOSING)){var t=e?"&tgt="+e:"";Ft.debug("Connecting to "+this.endpoint+this.postfix+t),this.socket=new WebSocket(this.endpoint+this.postfix+t),this.socket.onopen=this._onOpen.bind(this),this.socket.onmessage=this._onMessage.bind(this),this.socket.onerror=this._onError.bind(this),this.socket.onclose=this._onClose.bind(this),this._startDoctor()}},t.prototype._recover=function(){var e=this;new Promise((function(n,r){if(!e.socket||e.socket.readyState!==WebSocket.OPEN)return Ft.warn("Socket not opened"),void r(new Error("Socket not opened"));var o={sequence:e.sequence++,name:"recover",params:{stamp:e.lastStamp},responseTimer:0,resolve:n,reject:r},i=Object.assign({command:o.name,sequence:o.sequence},o.params);o.responseTimer=window.setTimeout((function(){return e._handleCommandResponse(!1,i)}),t.WAIT_RESPONSE_DELAY),e.responseHandlers[o.sequence]=o,e.socket.send(JSON.stringify(i))})).then((function(t){t.error||t.messages.forEach(e._handleMessage.bind(e)),e._handleCommandsQueue()}))},t.prototype._onOpen=function(){this.log("callSocketAction","opened"),this._waitConnectionMessage(),this._startDoctor()},t.prototype._onMessage=function(e){if(this._startDoctor(),"ping"!==e.data)try{this._handleMessage(JSON.parse(e.data))}catch(t){this.log("callSocketAction","parse_error"),Ft.error("Unable to parse message",t,e.data)}else this.socket&&this.socket.readyState===WebSocket.OPEN&&this.socket.send("pong")},t.prototype._handleMessage=function(e){"notification"===e.type?"connection"===e.notification?(this.connected=!0,this.reconnectCount=0,this.endpoint=e.endpoint,e.peerId&&this.peerId!==e.peerId.id&&(this.postfix+="&peerId="+e.peerId.id,this.peerId=e.peerId.id),this._stopWaitConnectionMessage(),this.conversationResolve?this.conversationResolve(e):this._triggerEvent("RECONNECT",e),this.lastStamp?(this._handleCachedMessages(),this._recover()):this._handleCommandsQueue()):this.connected&&this.listenersReady?this._triggerEvent("NOTIFICATION",e):this.incomingCache.push(e):"response"===e.type&&this.responseHandlers[e.sequence]?this._handleCommandResponse(!0,e):"error"===e.type&&this.responseHandlers[e.sequence]?(this.log("callSocketAction","error-"+e.error),this._handleCommandResponse(!1,e)):"error"===e.type?(this.log("callSocketAction","error-"+e.error),"service-unavailable"===e.error?this._reconnect():"conversation-ended"===e.error?this.conversationReject?this.conversationReject(new jn(lt.SOCKET_CLOSED,{message:"Unable to connect to the signaling: "+e.error})):this._triggerEvent("NOTIFICATION",{notification:"closed-conversation",reason:e.reason}):this.connected||"invalid-token"===e.error?this._throwError(new Error("Signaling error: "+e.error)):e.sequence||(this.conversationReject&&this.conversationReject(new jn(ct.SIGNALING_FAILED,{message:"Unable to connect to the signaling: "+e.error})),this.close())):(this.log("callSocketAction","unknown_message"),Ft.warn("Unhandled message",e)),this.lastStamp=e.stamp||this.lastStamp},t.prototype._handleCachedMessages=function(){for(;this.incomingCache.length>0;){var e=this.incomingCache.pop();this._handleMessage(e)}},t.prototype._throwError=function(e){this._triggerEvent("FAILED",e)},t.prototype._onError=function(e){this.log("callSocketAction","error"),Ft.error("Error",e)},t.prototype._onClose=function(e){this.log("callSocketAction","closed"),Ft.debug("Connection closed",{code:e.code,reason:e.reason}),this.connected=!1,this._stopDoctor(),this.socket&&this.reconnectCount++<t.RECONNECT_MAX_COUNT?this._reconnect():this.socket&&this._closeSocket(new Error("Connection closed"))},t.prototype._closeSocket=function(e){void 0===e&&(e=null),this.socket&&(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null,this.socket.close(),this.socket=null,Object.values(this.responseHandlers).forEach((function(t){window.clearTimeout(t.responseTimer),e&&t.reject(new Error("Connection closed"))})),this.commandsQueue=[],this.responseHandlers={},this.lastStamp=0,this.listenersReady=!1,e&&this._throwError(new Error("Connection closed")))},t.prototype._reconnect=function(){var e=Math.min(t.RECONNECT_MAX_DELAY,t.RECONNECT_DELAY*Math.pow(2,this.reconnectCount-1));Ft.log("Reconnect websocket after "+e+"ms ("+this.reconnectCount+")"),this.log("callSocketAction","reconnect"),this.reconnectTimer=window.setTimeout(this._connect.bind(this,ht.RETRY),e)},t.prototype._handleCommandResponse=function(e,t){if(this.responseHandlers.hasOwnProperty(t.sequence)){var n=this.responseHandlers[t.sequence];window.clearTimeout(n.responseTimer),e?n.resolve(t):(this.log("callSocketAction","response-timeout"),n.reject(new Error(t.error||"Response timeout ["+n.name+"]"))),delete this.responseHandlers[t.sequence]}},t.prototype._handleCommandsQueue=function(){for(var e=this,n=function(){var n=r.commandsQueue.shift(),o=r._isDataChannelCommand(n.name),i=Object.assign({command:n.name,sequence:n.sequence},n.params);if(o)t._isDataChannelResponseRequired(n.name)&&(n.responseTimer=window.setTimeout((function(){return e._handleCommandResponse(!1,i)}),t.WAIT_RESPONSE_DELAY),r.responseHandlers[n.sequence]=n),r.producerCommandDataChannel&&r.producerCommandDataChannel.send(JSON.stringify(i));else{if(!r.socket||r.socket.readyState!==WebSocket.OPEN)return n.reject(new Error("Invalid state or socket already closed")),"continue";n.responseTimer=window.setTimeout((function(){return e._handleCommandResponse(!1,i)}),t.WAIT_RESPONSE_DELAY),r.responseHandlers[n.sequence]=n,r.socket.send(JSON.stringify(i))}},r=this;this.commandsQueue.length>0;)n()},t.prototype._waitConnectionMessage=function(){var e=this;this.connectionMessageWaitTimer=window.setTimeout((function(){e.conversationReject&&e.conversationReject(new jn(ct.SIGNALING_FAILED,{message:"Unable to connect to the signaling: connection timeout"}))}),t.WAIT_CONNECTION_DELAY)},t.prototype._stopWaitConnectionMessage=function(){window.clearTimeout(this.connectionMessageWaitTimer),this.connectionMessageWaitTimer=0},t.prototype._startDoctor=function(){var e=this;this._stopDoctor(),this.doctorTimer=window.setTimeout((function(){Ft.warn("Socket is dead, trying to reconnect"),e.close(),e._connect(ht.RETRY)}),t.WAIT_MESSAGE_DELAY)},t.prototype._stopDoctor=function(){window.clearTimeout(this.doctorTimer),this.doctorTimer=0},t.RECONNECT_DELAY=xt.signalingReconnectDelay,t.RECONNECT_MAX_DELAY=xt.signalingReconnectMaxDelay,t.RECONNECT_MAX_COUNT=xt.signalingReconnectMaxCount,t.WAIT_CONNECTION_DELAY=xt.waitConnectionDelay,t.WAIT_RESPONSE_DELAY=xt.waitResponseDelay,t.WAIT_MESSAGE_DELAY=xt.waitMessageDelay,t}(nt),yr=null,Er={getCameras:Dn.getCameras,getMicrophones:Dn.getMicrophones,getOutput:Dn.getOutput,hasCamera:Dn.hasCamera,hasMicrophone:Dn.hasMicrophone,getSavedCamera:Dn.getSavedCamera,getSavedMicrophone:Dn.getSavedMicrophone,getSavedOutput:Dn.getSavedOutput,hasCameraPermission:Dn.hasCameraPermission,hasMicrophonePermission:Dn.hasMicrophonePermission,hasPermissions:Dn.hasPermissions,getUserMedia:Dn.getUserMedia,getUserVideo:Dn.getUserVideo,getUserAudio:Dn.getUserAudio,saveDeviceId:Dn.saveDeviceId,isBrowserSupported:Dn.isBrowserSupported,isScreenCapturingSupported:Dn.isScreenCapturingSupported,os:Dn.os,isMobile:Dn.isMobile,browserName:Dn.browserName,browserVersion:Dn.browserVersion,baseChromeVersion:Dn.baseChromeVersion,getAudioContext:Dn.getAudioContext};function wr(e){gr=e}function Or(e){mr=e}function Cr(e){yr=e}function Tr(e){xt.videoEffects=e}function Sr(e){return Ye(this,void 0,void 0,(function(){return $e(this,(function(t){switch(t.label){case 0:return xt.set(e),"Sferum"===Dn.browserName()&&(xt.platform="SFERUM:"+Dn.browserVersion()),gr||wr(new fr),mr||Or((function(){return new br})),Ft.log("Calls SDK 2.3.3-beta.11",e),[4,Dn.init()];case 1:if(t.sent(),!Dn.isBrowserSupported())throw new jn(ct.UNSUPPORTED);if(!Dn.hasMicrophone()&&!xt.allowMissingMic)throw new jn(ct.MIC_NOT_FOUND);return gr.init(),[2]}}))}))}function Dr(e,t,n,r,o){return void 0===t&&(t=!1),void 0===n&&(n=""),void 0===r&&(r=!1),void 0===o&&(o=!1),Ye(this,void 0,void 0,(function(){var i,a;return $e(this,(function(s){switch(s.label){case 0:return i=[],a=[],Array.isArray(e)?i=e.length?e:[]:e&&(i=[e]),i.length?[4,gr.getOkIdsByExternalIds(i)]:[3,2];case 1:if(!(a=s.sent()).length)throw new jn(lt.CALLEE_IS_OFFLINE);s.label=2;case 2:return[2,kr(a,ot.USER,t,n,r,o)]}}))}))}function Pr(e,t,n,r,o){return void 0===t&&(t=!1),void 0===n&&(n=""),void 0===r&&(r=!1),void 0===o&&(o=!1),Ye(this,void 0,void 0,(function(){return $e(this,(function(i){return[2,Dr(e,t,n,r,o)]}))}))}function kr(e,t,n,r,o,i){return void 0===t&&(t=ot.USER),void 0===n&&(n=!1),void 0===r&&(r=""),void 0===o&&(o=!1),void 0===i&&(i=!1),Ye(this,void 0,void 0,(function(){return $e(this,(function(a){if(ur.current())throw Ft.error("There is already active call"),new jn(lt.FAILED);return[2,new ur(gr,mr(),yr).onStart(e,t,n,r,o,i)]}))}))}function Ar(e){return Ye(this,void 0,void 0,(function(){return $e(this,(function(t){return[2,Ir(e)]}))}))}function Ir(e,t,n){return void 0===t&&(t="USER"),Ye(this,void 0,void 0,(function(){return $e(this,(function(r){if(e===ur.id())throw new Error("Push has already been processed");return[2,new ur(gr,mr(),yr).onPush(e,t,n)]}))}))}function xr(e){return Ye(this,void 0,void 0,(function(){return $e(this,(function(t){return e&&(xt.authToken=e),[2,gr.authorize()]}))}))}function jr(e){return void 0===e&&(e=!1),Ye(this,void 0,void 0,(function(){var t;return $e(this,(function(n){if(t=ur.current())return[2,t.accept(e)];throw new Error("Conversation not found")}))}))}function Mr(){return Ye(this,void 0,void 0,(function(){var e;return $e(this,(function(t){return(e=ur.current())?[2,e.decline()]:[2]}))}))}function Lr(e,t){return void 0===t&&(t=!1),Ye(this,void 0,void 0,(function(){return $e(this,(function(n){return[2,Rr(e,t)]}))}))}function Rr(e,t,n){return void 0===t&&(t=!1),Ye(this,void 0,void 0,(function(){return $e(this,(function(r){return[2,new ur(gr,mr(),yr).onJoin({conversationId:e,needVideo:t,chatId:n})]}))}))}function Br(e,t,n){return void 0===t&&(t=!1),Ye(this,void 0,void 0,(function(){return $e(this,(function(r){return n&&(xt.anonymToken=n),[2,new ur(gr,mr(),yr).onJoin({joinLink:e,needVideo:t})]}))}))}function Nr(){return Ye(this,void 0,void 0,(function(){var e;return $e(this,(function(t){return(e=ur.current())?[2,e.hangup()]:(ur.hangupAfterInit(),[2])}))}))}function Ur(e){return Ye(this,void 0,void 0,(function(){var t;return $e(this,(function(n){switch(n.label){case 0:return[4,gr.getOkIdsByExternalIds([e])];case 1:if(!(t=n.sent()).length)throw new Error("User not found");return[2,Fr(t[0])]}}))}))}function Fr(e,t){return Ye(this,void 0,void 0,(function(){var n;return $e(this,(function(r){switch(r.label){case 0:return(n=ur.current())?[4,n.addParticipant(Ht.composeId(e,"USER"),t)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))}function Wr(e,t){return void 0===t&&(t=!1),Ye(this,void 0,void 0,(function(){return $e(this,(function(n){switch(n.label){case 0:return[4,gr.getOkIdsByExternalIds([e])];case 1:return[2,Hr(n.sent()[0],t)]}}))}))}function Hr(e,t){return void 0===t&&(t=!1),Ye(this,void 0,void 0,(function(){var n;return $e(this,(function(r){switch(r.label){case 0:return(n=ur.current())?[4,n.removeParticipant(Ht.composeId(e,"USER"),t)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))}function Kr(e,t){return Ye(this,void 0,void 0,(function(){var n,r;return $e(this,(function(o){switch(o.label){case 0:return[4,Dn.saveDeviceId(e,t)];case 1:return n=o.sent(),r=ur.current(),n&&r?[2,r.changeDevice(e)]:[2,Promise.reject()]}}))}))}function Vr(e){return Ye(this,void 0,void 0,(function(){var t;return $e(this,(function(n){return(t=ur.current())?[2,t.toggleScreenCapturing(e)]:[2,Promise.reject()]}))}))}function qr(e,t){return void 0===t&&(t=!1),Ye(this,void 0,void 0,(function(){var n;return $e(this,(function(r){switch(r.label){case 0:return(n=ur.current())?[4,n.setVideoStream(e,t)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))}function Gr(e){return Ye(this,void 0,void 0,(function(){var t;return $e(this,(function(n){switch(n.label){case 0:return(t=ur.current())?[4,t.toggleLocalVideo(e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))}function zr(e){return Ye(this,void 0,void 0,(function(){var t;return $e(this,(function(n){switch(n.label){case 0:return(t=ur.current())?[4,t.toggleLocalAudio(e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))}function Yr(e,t){return Ye(this,void 0,void 0,(function(){var n;return $e(this,(function(r){return(n=ur.current())?[2,n.setLocalResolution(e,t)]:[2]}))}))}function $r(e){return Ye(this,void 0,void 0,(function(){var t;return $e(this,(function(n){switch(n.label){case 0:return(t=ur.current())?[4,t.changePriorities(e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))}function Xr(e){return Ye(this,void 0,void 0,(function(){var t;return $e(this,(function(n){switch(n.label){case 0:return(t=ur.current())?[4,t.changeParticipantState(e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))}function Qr(e){return Ye(this,void 0,void 0,(function(){var t;return $e(this,(function(n){switch(n.label){case 0:return(t=ur.current())?[4,t.updateDisplayLayout(e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))}function Jr(e,t,n){return void 0===n&&(n=!1),Ye(this,void 0,void 0,(function(){return $e(this,(function(r){switch(r.label){case 0:return[4,gr.getOkIdsByExternalIds([e])];case 1:return[2,Zr(r.sent()[0],t,n)]}}))}))}function Zr(e,t,n){return void 0===n&&(n=!1),Ye(this,void 0,void 0,(function(){var r;return $e(this,(function(o){switch(o.label){case 0:return(r=ur.current())?[4,r.grantRoles(Ht.composeId(e,"USER"),t,n)]:[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}}))}))}function eo(e,t,n){return void 0===e&&(e=null),void 0===t&&(t=[_t.AUDIO]),void 0===n&&(n=!1),Ye(this,void 0,void 0,(function(){var r,o;return $e(this,(function(i){switch(i.label){case 0:return r=null,e?[4,gr.getOkIdsByExternalIds([e])]:[3,2];case 1:o=i.sent(),r=o[0],i.label=2;case 2:return[2,to(r,t,n)]}}))}))}function to(e,t,n){return void 0===e&&(e=null),void 0===t&&(t=[_t.AUDIO]),void 0===n&&(n=!1),Ye(this,void 0,void 0,(function(){var r,o;return $e(this,(function(i){switch(i.label){case 0:return(r=ur.current())?(o=e?Ht.composeId(e,"USER"):null,[4,r.switchParticipantDevice(o,t,!1,n)]):[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}}))}))}function no(e,t){return void 0===e&&(e=null),void 0===t&&(t=[_t.AUDIO]),Ye(this,void 0,void 0,(function(){var n,r;return $e(this,(function(o){switch(o.label){case 0:return n=null,e?[4,gr.getOkIdsByExternalIds([e])]:[3,2];case 1:r=o.sent(),n=r[0],o.label=2;case 2:return[2,ro(n,t)]}}))}))}function ro(e,t){return void 0===e&&(e=null),void 0===t&&(t=[_t.AUDIO]),Ye(this,void 0,void 0,(function(){var n,r;return $e(this,(function(o){switch(o.label){case 0:return(n=ur.current())?(r=e?Ht.composeId(e,"USER"):null,[4,n.switchParticipantDevice(r,t,!0)]):[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}}))}))}function oo(e,t){return void 0===t&&(t=!1),Ye(this,void 0,void 0,(function(){return $e(this,(function(n){switch(n.label){case 0:return[4,gr.getOkIdsByExternalIds([e])];case 1:return[2,io(n.sent()[0],t)]}}))}))}function io(e,t){return void 0===t&&(t=!1),Ye(this,void 0,void 0,(function(){var n;return $e(this,(function(r){switch(r.label){case 0:return(n=ur.current())?[4,n.pinParticipant(Ht.composeId(e,"USER"),t)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))}function ao(e){return Ye(this,void 0,void 0,(function(){var t;return $e(this,(function(n){switch(n.label){case 0:return(t=ur.current())?[4,t.updateMediaModifiers(e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))}function so(e){return Ye(this,void 0,void 0,(function(){var t;return $e(this,(function(n){switch(n.label){case 0:return(t=ur.current())?[4,t.changeOptions(e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))}function co(e,t){return void 0===t&&(t=null),Ye(this,void 0,void 0,(function(){var n,r;return $e(this,(function(o){switch(o.label){case 0:return n=null,t?[4,gr.getOkIdsByExternalIds([t])]:[3,2];case 1:r=o.sent(),n=r[0],o.label=2;case 2:return[2,uo(e,n)]}}))}))}function uo(e,t){return void 0===t&&(t=null),Ye(this,void 0,void 0,(function(){var n,r;return $e(this,(function(o){switch(o.label){case 0:return(n=ur.current())?(r=t?Ht.composeId(t,"USER"):null,[4,n.chatMessage(e,r)]):[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}}))}))}function lo(e){return void 0===e&&(e=10),Ye(this,void 0,void 0,(function(){var t;return $e(this,(function(n){return(t=ur.current())?[2,t.chatHistory(e)]:[2]}))}))}function _o(e,t){return void 0===t&&(t=null),Ye(this,void 0,void 0,(function(){var n,r;return $e(this,(function(o){switch(o.label){case 0:return n=null,t?[4,gr.getOkIdsByExternalIds([t])]:[3,2];case 1:r=o.sent(),n=r[0],o.label=2;case 2:return[2,po(e,n)]}}))}))}function po(e,t){return void 0===t&&(t=null),Ye(this,void 0,void 0,(function(){var n,r;return $e(this,(function(o){switch(o.label){case 0:return(n=ur.current())?(r=t?Ht.composeId(t,"USER"):null,[4,n.customData(e,r)]):[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}}))}))}function ho(e,t){return void 0===e&&(e=""),void 0===t&&(t=!1),Ye(this,void 0,void 0,(function(){return $e(this,(function(n){switch(n.label){case 0:return[4,gr.createConversation(Ht.uuid(),e,t)];case 1:return[2,n.sent().join_link]}}))}))}function fo(){return Ye(this,void 0,void 0,(function(){var e;return $e(this,(function(t){return(e=ur.current())?[2,e.createJoinLink()]:[2,Promise.reject()]}))}))}function mo(){return Ye(this,void 0,void 0,(function(){var e;return $e(this,(function(t){return(e=ur.current())?[2,e.removeJoinLink()]:[2,Promise.reject()]}))}))}function go(e,t){return Ye(this,void 0,void 0,(function(){return $e(this,(function(n){return[2,gr.getAnonymTokenByLink(e,t)]}))}))}function vo(e){var t=ur.current();t&&t.setVolume(e)}function bo(e){xt.forceRelayPolicy=e}function yo(e,t,n,r,o){return void 0===e&&(e=!1),void 0===t&&(t=null),void 0===n&&(n=null),void 0===r&&(r="DIRECT_LINK"),void 0===o&&(o=null),Ye(this,void 0,void 0,(function(){var i;return $e(this,(function(a){return(i=ur.current())?[2,i.startStream(e,t,n,r,o)]:[2,Promise.reject()]}))}))}function Eo(){return Ye(this,void 0,void 0,(function(){var e;return $e(this,(function(t){return(e=ur.current())?[2,e.stopStream()]:[2,Promise.reject()]}))}))}function wo(){return Ye(this,void 0,void 0,(function(){var e;return $e(this,(function(t){return(e=ur.current())?[2,e.getStreamInfo()]:[2,Promise.reject()]}))}))}function Oo(e){xt.statisticsInterval=e;var t=ur.current();if(t)return t.updateStatisticsInterval()}function Co(e){Ft.toggle(e)}function To(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];xt.debugLog&&Ft.send.apply(Ft,Xe([e,"[external]"],t))}function So(e){return Ye(this,void 0,void 0,(function(){var t;return $e(this,(function(n){return(t=ur.current())?[2,t.videoEffect(e)]:[2]}))}))}},o5u5:function(e,t,n){"use strict";var r,o;n.r(t),n.d(t,"NetworkStatEventTypes",(function(){return r})),n.d(t,"AudioNetworkType",(function(){return o})),function(e){e.TYPE_NETWORK_AUDIO_ITEM="type_network_audio_item",e.TYPE_MODULE_NAVIGATION_STATS_ITEM="type_module_navigation_stats_item"}(r||(r={})),function(e){e.FRAGMENT_LOADED="fragment_loaded",e.FRAGMENT_STALLED="fragment_stalled"}(o||(o={}))},o7bv:function(e,t,n){"use strict";n.r(t),n.d(t,"isInputActive",(function(){return u})),n.d(t,"placeholderSetup",(function(){return d})),n.d(t,"placeholderInit",(function(){return _})),n.d(t,"preventNonNumericalInput",(function(){return h}));n("SRfc");var r=n("zxIV"),o=n("Egk5"),i=n("7jxN"),a=n("t7n3"),s=n("gdug"),c=n("W9Tc");function u(){return document.activeElement&&(Object(r.attr)(document.activeElement,"contenteditable")||"INPUT"===document.activeElement.tagName||"textarea"===document.activeElement.tagName)}function l(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,c=e.phshown,u=e.phcont,l=n.back,d=n.editable,_=n.hideBackAfter,p=n.timeout,h=n.phColor,f=void 0===h?"#8C8E91":h,m=n.activeColor,g=void 0===m?"#C0C8D0":m,v=p||0===p?p:100,b=n.period||200;if(t=d?(void 0!==e.textContent?e.textContent:e.innerText)||Object(r.geByTag)("img",e).length:e.value,c&&(l&&t||!l&&(o&&!o.type||t))?(Object(r.hide)(u),e.phshown=!1):c||t||!l&&!a||(Object(r.show)(u),e.phshown=!0,s.browser.opera&&a&&(e.setAttribute("placeholder",""),e.removeAttribute("placeholder",""))),l&&!t){if(o&&!o.type){var y=_?r.hide.pbind(u.firstChild.firstChild):null;clearTimeout(e.phanim),e.phanim=setTimeout((function(){Object(i.animate)(u.firstChild.firstChild,{color:g},b,y)}),v)}a&&(clearTimeout(e.phanim),_&&Object(r.show)(u.firstChild.firstChild),e.phanim=setTimeout((function(){Object(i.animate)(u.firstChild.firstChild,{color:f},b)}),v))}}function d(e,t){var n=Object(r.ge)(e);if(!n)return!1;if(!(n.getAttribute?n.getAttribute("contenteditable"):n.contenteditable)&&Object(c.partConfigEnabled)("native_placeholder_enable"))return!1;var i=t?Object(a.clone)(t):{};if(!n.phevents||i.reload){var u=n.getAttribute?n.getAttribute("placeholder"):n.placeholder;if(u){n.removeAttribute("placeholder");var d={},_=!1,p=["Top","Bottom","Left","Right"];if(i.pad)d=i.pad;else{if(i.fast){for(var h=0;h<4;h++)d["padding"+p[h]]=3,d["margin"+p[h]]=0,d["border"+p[h]+"Width"]=1;Object(a.extend)(d,i.styles||{})}else{for(var f=[],m=0;m<4;m++)f.push("margin"+p[m]),f.push("padding"+p[m]),f.push("border"+p[m]+"Width");d=Object(r.getStyle)(n,f)}for(var g=0;g<4;g++){var v="margin"+p[g],b="border"+p[g]+"Width";d[v]=Object(a.intval)(d[v])+Object(a.intval)(d[b])+"px",delete d[b]}}if(i.reload){var y=n.previousSibling;y&&Object(r.hasClass)(y,"input_back_wrap")&&Object(r.re)(y)}var E=i.big?" big":"",w=Object(r.getSize)(n)[0]-20,O=n.phcont=n.parentNode.insertBefore(Object(r.ce)("div",{className:"input_back_wrap no_select",innerHTML:`<div class="input_back"><div class="input_back_content${E}" style="width: ${w}px;">${u}</div></div>`}),n),C=Object(r.domFC)(O);Object(r.setStyle)(C,d);var T=l.pbind(n,i),S=s.browser.mobile?T:(e,t)=>setTimeout(T.pbind(e,t),0);s.browser.msie&&s.browser.version<8&&Object(r.setStyle)(C,{marginTop:1}),n.phonfocus=function(e){_||(n.focused=!0,cur.__focused=n,!0===e&&(Object(r.setStyle)(n,{backgroundColor:"#FFF"}),Object(r.hide)(C)),S(!0,!1))},n.phonblur=function(){_||(cur.__focused=n.focused=!1,Object(r.show)(C),S(!1,!0))},n.phshown=!0,n.phanim=null,(n.value||i.editable&&((void 0!==n.textContent?n.textContent:n.innerText)||Object(r.geByTag)("img",n).length))&&(n.phshown=!1,Object(r.hide)(O)),s.browser.opera_mobile||(Object(o.addEvent)(O,"focus click",(function(e){_||(i.editableFocus?(setTimeout(i.editableFocus.pbind(n),0),n.phonfocus()):(n.blur(),n.focus()))})),Object(o.addEvent)(n,"focus"+(i.editable?" click":""),n.phonfocus),Object(o.addEvent)(n,"keydown paste cut input",S)),Object(o.addEvent)(n,"blur",n.phonblur),n.check=S,n.getValue=()=>i.editable?n.innerHTML:n.value,n.setPlaceholder=e=>Object(r.geByClass1)("input_back_content",O).textContent=e,n.setDisabled=e=>_=e,n.setValue=function(e){i.editable?n.innerHTML=e:n.value=e,l(n,i)},n.phevents=!0,n.phonsize=function(){},i.global||i.reload||(cur.__phinputs||(cur.__phinputs=[],cur.destroy.push(function(e){for(var t=0,n=e.length;t<n;t++)Object(r.removeData)(e[t])}.pbind(cur.__phinputs))),cur.__phinputs.push(n))}}}function _(e,t){var n=Object(r.ge)(e);if(!n)return!1;if(!(n.getAttribute?n.getAttribute("contenteditable"):n.contenteditable)&&Object(c.partConfigEnabled)("native_placeholder_enable"))return!1;var i=t?Object(a.clone)(t):{},u=void 0===Object(r.ce)("input").placeholder||n&&n.getAttribute&&n.getAttribute("contenteditable");if(!n.phevents||i.reload){var l=n.getAttribute?n.getAttribute("placeholder"):n.placeholder;if(l&&(n.getValue=function(){return i.editable?n.innerHTML:n.value},n.setValue=function(e){i.editable?n.innerHTML=e:n.value=e,u&&f(n,i)},n.phonfocus=function(){},n.phonblur=function(){},u)){if(n.removeAttribute("placeholder"),i.reload){var d=Object(r.domNS)(n);d&&Object(r.hasClass)(d,"placeholder")&&Object(r.re)(d)}var _=n.phcont=Object(r.domInsertAfter)(Object(r.ce)("div",{className:"placeholder",innerHTML:'<div class="ph_input"><div class="ph_content">'+l+"</div></div>"}),n),p=f.pbind(n,i),h=s.browser.mobile?p:(e,t)=>setTimeout(p.pbind(e,t),0);n.phonfocus=function(){n.focused=!0,cur.__focused=n,h(!0,!1)},n.phonblur=function(){cur.__focused=n.focused=!1,h(!1,!0)},n.phshown=!0,(n.value||i.editable&&((void 0!==n.textContent?n.textContent:n.innerText)||Object(r.geByTag)("img",n).length))&&(n.phshown=!1,Object(r.hide)(_)),s.browser.opera_mobile||(Object(o.addEvent)(_,"focus click contextmenu",(function(e){i.editableFocus?(setTimeout(i.editableFocus.pbind(n),0),"contextmenu"===e.type&&s.browser.msie&&i.editableFocus(n),n.phonfocus()):(n.blur(),n.focus())})),Object(o.addEvent)(n,"focus"+(i.editable?" click":""),n.phonfocus),Object(o.addEvent)(n,"keydown paste cut input",h)),Object(o.addEvent)(n,"blur",n.phonblur),n.check=h,n.phevents=!0,n.phonsize=function(){},i.global||i.reload||(cur.__phinputs||(cur.__phinputs=[],cur.destroy.push((function(){if(cur.__phinputs)for(var e=0,t=cur.__phinputs.length;e<t;++e)Object(r.removeData)(cur.__phinputs[e])}))),cur.__phinputs.push(n))}}function f(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=e.phshown,i=e.phcont,a=n.editable;a?((t=void 0!==e.textContent?e.textContent:e.innerText)&&s.browser.opera&&t.match(/^[ ]+$/)&&(t=""),t||(t=Object(r.geByTag)("img",e).length>0),t||(t=Object(r.geByTag)("br",e).length>1),t||(t=Object(r.geByTag)("p",e).length>1)):t=e.value,o&&t?(Object(r.hide)(i),e.phshown=!1):o||t||(Object(r.show)(i),e.phshown=!0)}}var p=e=>{var t=void 0===e.which?e.keyCode:e.which;String.fromCharCode(t).match(/^[0-9]+$/)||Object(o.cancelEvent)(e)},h=e=>{Object(o.addEvent)(e,"keypress",p)}},oRRD:function(e,t,n){"use strict";n.r(t),n.d(t,"convertUserObject",(function(){return f})),n.d(t,"fetchUserShortName",(function(){return m})),n.d(t,"fixConversationFromApi",(function(){return g})),n.d(t,"convertClientData",(function(){return v})),n.d(t,"normalizeProfiles",(function(){return b})),n.d(t,"convertServerData",(function(){return y})),n.d(t,"convertCallerFromLongpoll",(function(){return E})),n.d(t,"convertChatFromLongpoll",(function(){return w})),n.d(t,"getPeerIdFromLongpoll",(function(){return O})),n.d(t,"isGroupCallEvent",(function(){return C})),n.d(t,"getActiveParticipants",(function(){return T})),n.d(t,"isAnyoneActive",(function(){return S})),n.d(t,"isAnyoneWithVideo",(function(){return D})),n.d(t,"calculateCallDuration",(function(){return P})),n.d(t,"getTextForApiErrorByCode",(function(){return k})),n.d(t,"getTextForServerErrorByMessage",(function(){return A})),n.d(t,"getTextForServerError",(function(){return I})),n.d(t,"createPayload",(function(){return x})),n.d(t,"checkForSafariAndFixMutedState",(function(){return j})),n.d(t,"isInReconnect",(function(){return M})),n.d(t,"compose",(function(){return L})),n.d(t,"exponentialRetry",(function(){return R})),n.d(t,"startCallRetryWrapper",(function(){return B})),n.d(t,"getParticipantsListLabel",(function(){return N})),n.d(t,"unpackState",(function(){return U})),n.d(t,"normalizePreviewData",(function(){return F})),n.d(t,"normalizeConversation",(function(){return W})),n.d(t,"getCallsLocalstorageKeys",(function(){return H}));n("91GP"),n("HEwt"),n("a1Th"),n("rE2o"),n("ioFf"),n("pIFo"),n("VRzm"),n("SRfc"),n("OG14"),n("rGqo"),n("Btvt"),n("hhXQ"),n("KKXr");var r=n("V9bF"),o=n("xvD1"),i=n("icuC"),a=n("PA/O"),s=n("qzEr"),c=n("xt6h"),u=n("o0NX"),l=n("g10N");function d(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e){var t=e.shortName,n=e.firstName;e.lastName;if(!t||!n){var r=p(e.name.split(" "),2);t=m(n=r[0],r[1],e.name)}return _({},e,{peerId:+e.id,tab:e.name,shortName:t,firstName:n})}function m(e,t,n){if(e){var r=t?t.length>2?t.substring(0,1)+".":t:"";return r?`${e} ${r}`:e}return n}function g(e){var t=e.callInProgress,n=d(e,["callInProgress"]);return!n.call_in_progress&&t&&(n.call_in_progress=t),n}function v(e){var t=p(e,2),n=t[0],r=t[1],o=n&&g(n);return[o&&("peerId"in o?o:f(o)),r?r.map(f):[]]}function b(e){return e.map(l.normalizeUser)}function y(e){var t=e.items,n=e.profiles,o=p(t,1)[0],i=W(o),a=b(n);return[_({},i,{tab:i.name}),Object(r.isUserPeer)(i.peerId)?[_({},a&&a.filter(e=>e.peerId===i.peerId)[0],{},i)]:a,o]}function E(e){var t=e.caller_info,n=t.first_name+" "+t.last_name;return{peerId:+t.user_id,name:n,tab:n,photo:t.photo_400,firstName:t.first_name,lastName:t.last_name,shortName:m(t.first_name,t.last_name,n)}}function w(e){var t=e.chat_info;return{peerId:2e9+t.chat_id,tab:t.title,name:t.title,photo:t.photo_400}}function O(e){var t=e.caller_info,n=e.chat_info;return n?2e9+n.chat_id:t.user_id}function C(e){return!!e.payload.chat_info}function T(e){return Object.values(e.participants).filter(t=>t.peerId===e.me||t.status)}function S(e){var t={[i.CallStatus.CONNECTED]:!0,[i.CallStatus.CONNECTING]:!0,[i.CallStatus.RECONNECT]:!0};return!!Object.values(e.participants).find(n=>n.peerId!==e.me&&t[n.status])}function D(e){return!!Object.values(e.participants).find(t=>(t.peerId===e.me||t.wasConnected)&&t.mediaSettings&&t.mediaSettings.isVideoEnabled)}function P(e){var t=Date.now(),n=Math.max(0,Math.floor((t-e)/1e3));return 0===n?"00:00":n<=599?"0"+Object(c.formatDuration)(n):Object(c.formatDuration)(n)}function k(e,t,n){switch(+e){case i.SERVER_ERROR_PRIVACY:return n("calls_privacy_error");case i.SERVER_ERROR_BUSY:return n(t?"calls_chat_busy_error":"calls_busy_error");case i.SERVER_ERROR_FLOOD_CONTROL:return n("calls_flood_error");case i.SERVER_ERROR_REQUIRE_AUTH:return n("calls_join_error_require_auth");case i.SERVER_ERROR_UNKNOWN:case i.SERVER_ERROR_INVALID_REQUEST:case i.SERVER_ERROR_INTERNAL:case i.SERVER_ERROR_OLD_RECEIVER_APP:default:return n("calls_start_error")}}function A(e,t,n){switch(!0){case-1!==e.search("error.webrtc.auth.required"):return n("calls_join_error_require_auth");case-1!==e.search("error.webrtc.auth.banned"):case-1!==e.search("error.webrtc.participant.check.privacy"):return n("calls_join_error_banned");default:return n("calls_start_error")}}function I(e,t,n){var r=0===e.search("EXTERNAL_API_ERROR"),o=e.match(/\d+/g)?+e.match(/\d+/g)[1]:i.CLIENT_ERROR_UNKNOWN;return!r||Number.isNaN(o)?A(e,0,n):k(+o,t,n)}function x(e,t){return JSON.stringify({is_video:t,chat_id:Object(r.isChatPeer)(e)?e-2e9:void 0,with_join_link:Object(o.isGroupCallByPeer)(e),join_by_link:Object(o.isGroupCallByPeer)(e)})}function j(e){s.browser.safari&&+s.browser.version.split(".")[0]<13&&window.setTimeout(()=>{e&&e.current&&(e.current.volume=1e-4)},10)}function M(e){return!!Object.values(e.participants).find(e=>e.status===i.CallStatus.RECONNECT)}var L=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(){return n.reduce((e,t)=>t(e),e)(...arguments)}};function R(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{attempts:10,timeout:0};return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.attempts>0?Object(a.pause)(t.timeout,null).then(()=>e(...r)).catch(n=>(!t.timeout&&(t.timeout=1),t.attempts=n.type===i.SdkErrorType.API?0:t.attempts-1,t.timeout=Math.min(2*t.timeout,300),R(e,t)(...r))):Promise.reject()}}var B=(e,t)=>function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t(...r).catch(n=>{if(n.error===i.FatalError.AUTH)return e().then(()=>t(...r));throw n})};function N(e,t,n,r,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=", ",s=e=>Object(u.decodeHTMLEntities)(n(e)||"");if(0===i&&e.length>0&&(i=e.length),i>t.length){var c=i-t.length,l=e.slice(0,3).map(s).join(a);return o(c,"calls_members_list_label",r("calls_members_list_label",c)).replace("{name}",l)}if(t.length>1){var d=t.length>2?e.slice(0,2).map(s).join(a):s(e[0]),_=s(e[t.length-1]);return r("calls_and").replace("{before}",d).replace("{after}",_)}return 1===t.length?s(e[0]):""}function U(e){return"current"in e?e.current:e}function F(e,t){var n=t.join_link,r=t.preview,o=t.profiles,i=[...t.anonyms,...o].map(l.normalizeUser);return{joinLink:n,title:r.title,membersCount:r.members_count,photo_100:r.photo.photo_100,photo_200:r.photo.photo_200,members:i,conversationData:{peerId:0,canAddMembers:!0,tab:e("calls_new_call_title"),photo:"https://vk.com/images/call_convo_stub.png"}}}function W(e){if(e.chat_settings){var t={peerId:e.peer.id,tab:e.chat_settings.title,name:e.chat_settings.title,canAddMembers:e.chat_settings.acl.can_invite,adminIds:e.chat_settings.admin_ids,ownerId:e.chat_settings.owner_id};return e.chat_settings.photo&&(t.photo=e.chat_settings.photo.photo_100),t}return{canAddMembers:!0,peerId:e.peer.id}}function H(){return Object.keys(c.localStorage).filter(e=>e.includes("_okcls_"))}},ofcU:function(e,t,n){"use strict";n.r(t),n.d(t,"createMutations",(function(){return u})),n.d(t,"createModule",(function(){return _})),n.d(t,"destroyModule",(function(){return p}));n("HEwt"),n("a1Th"),n("rE2o"),n("ioFf"),n("rGqo"),n("Btvt"),n("KKXr");function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i=new window.Map;function a(e){var t=i.get(e.currentTarget);if(t){var n=t[e.type];if(n)for(var o,a=0;a<n.length;a++){var s=r(n[a],2),c=s[0],u=s[1],l=void 0;if(hasClass(e.target,c)?l=u(e,e.target):(o=gpeByClass(c,e.target,e.currentTarget))&&(l=u(e,o)),!1===l)break}}}var s=n("Egk5"),c=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r};function u(e){return{callMutations:function(){if("function"==typeof e)throw console.trace(),new Error("Mutations are not initialized");return e},bindMutations:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if("function"!=typeof e)throw console.trace(),new Error("Mutations are already initialized");return e=e.apply(void 0,t)}}}function l(e,t,n,r){Object(s.addEvent)(t,n,r),e._registeredHandlers.push({handlerType:"bind",elem:t,types:n,handler:r})}function d(e,t,n,r,o){!function(e,t,n,r){var o=i.get(e);o||(i.set(e,{}),o=i.get(e));for(var s=t.split(" "),c=0;c<s.length;c++){var u=s[c];o[u]||(o[u]=[],addEvent(e,u,a)),o[u].push([n,r])}}(t,n,r,o),e._registeredHandlers.push({handlerType:"delegate",elem:t,types:n,selector:r,handler:o})}function _(e){var t={_registeredHandlers:[]};return e.handlers((function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return l.apply(void 0,c([t],e))}),(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return d.apply(void 0,c([t],e))})),t}function p(e){e._registeredHandlers.forEach((function(e){var t=e.handlerType,n=e.elem,r=e.types,o=e.handler;"delegate"===t?function(e,t,n,r){var o=i.get(e);o&&(t.split(" ").forEach(t=>{o[t]&&(o[t]=o[t].filter(e=>e[0]!==n||e[1]!==r),0===o[t].length&&removeEvent(e,t,a))}),0===Object.keys(o).map(e=>o[e].length).reduce((e,t)=>e+t)&&i.delete(e))}(n,r,e.selector,o):Object(s.removeEvent)(n,r,o)})),e._registeredHandlers=[]}},ol8x:function(e,t,n){var r=n("dyZX").navigator;e.exports=r&&r.userAgent||""},pIFo:function(e,t,n){"use strict";var r=n("y3w9"),o=n("S/j/"),i=n("ne8i"),a=n("RYi7"),s=n("A5AN"),c=n("Xxuz"),u=Math.max,l=Math.min,d=Math.floor,_=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g;n("IU+Z")("replace",2,(function(e,t,n,h){return[function(r,o){var i=e(this),a=null==r?void 0:r[t];return void 0!==a?a.call(r,i,o):n.call(String(i),r,o)},function(e,t){var o=h(n,e,this,t);if(o.done)return o.value;var d=r(e),_=String(this),p="function"==typeof t;p||(t=String(t));var m=d.global;if(m){var g=d.unicode;d.lastIndex=0}for(var v=[];;){var b=c(d,_);if(null===b)break;if(v.push(b),!m)break;""===String(b[0])&&(d.lastIndex=s(_,i(d.lastIndex),g))}for(var y,E="",w=0,O=0;O<v.length;O++){b=v[O];for(var C=String(b[0]),T=u(l(a(b.index),_.length),0),S=[],D=1;D<b.length;D++)S.push(void 0===(y=b[D])?y:String(y));var P=b.groups;if(p){var k=[C].concat(S,T,_);void 0!==P&&k.push(P);var A=String(t.apply(void 0,k))}else A=f(C,_,T,S,P,t);T>=w&&(E+=_.slice(w,T)+A,w=T+C.length)}return E+_.slice(w)}];function f(e,t,r,i,a,s){var c=r+e.length,u=i.length,l=p;return void 0!==a&&(a=o(a),l=_),n.call(s,l,(function(n,o){var s;switch(o.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,r);case"'":return t.slice(c);case"<":s=a[o.slice(1,-1)];break;default:var l=+o;if(0===l)return n;if(l>u){var _=d(l/10);return 0===_?n:_<=u?void 0===i[_-1]?o.charAt(1):i[_-1]+o.charAt(1):n}s=i[l-1]}return void 0===s?"":s}))}}))},pbhE:function(e,t,n){"use strict";var r=n("2OiF");function o(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)}e.exports.f=function(e){return new o(e)}},q1tI:function(e,t,n){"use strict";e.exports=n("viRO")},qOki:function(e,t,n){"use strict";n.r(t),n.d(t,"EMPTY",(function(){return r})),n.d(t,"UNSTARTED",(function(){return o})),n.d(t,"PLAYING",(function(){return i})),n.d(t,"PAUSED",(function(){return a})),n.d(t,"ENDED",(function(){return s})),n.d(t,"ERROR",(function(){return c}));var r="empty",o="unstarted",i="playing",a="paused",s="ended",c="error"},qYuU:function(e,t,n){"use strict";n.r(t),n.d(t,"makeSharedState",(function(){return c}));var r,o=n("jE6c");r=window.hasOwnProperty("__SHARED_STATE_KEY")?window.__SHARED_STATE_KEY:Object.create(null),Object.defineProperty(window,"__SHARED_STATE_KEY",{configurable:!0,value:r});var i=()=>window.__SHARED_STATE_KEY,a=e=>i()[e],s={persistIfInitialized:!0},c=(e,t,n)=>{var r=Object(o.defaults)({},n,s),c=e in i(),u=a(e),l=c&&r.persistIfInitialized?u:t(u);((e,t)=>{i()[e]=t})(e,l);return()=>a(e)}},quPj:function(e,t,n){var r=n("0/R4"),o=n("LZWt"),i=n("K0xU")("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==o(e))}},qzEr:function(e,t,n){"use strict";n.r(t),n.d(t,"browser",(function(){return o}));var r=navigator.userAgent.toLowerCase(),o={version:(r.match(/.+(?:me|ox|on|rv|it|era|opr|ie|edge)[\/: ]([\d.]+)/)||[0,"0"])[1],safari:!/chrome/i.test(r)&&/webkit|safari|khtml/i.test(r)}},r0fY:function(e,t,n){"use strict";var r,o,i,a,s,c,u,l,d,_,p,h,f,m,g,v,b,y,E;n.r(t),n.d(t,"EventScreens",(function(){return r})),n.d(t,"ProductionStatEventTypes",(function(){return o})),n.d(t,"NavigationProductionStatEventTypes",(function(){return i})),n.d(t,"YoulaEventTypes",(function(){return a})),n.d(t,"ActionProductionStatEventTypes",(function(){return s})),n.d(t,"ClickProductionStatEventTypes",(function(){return c})),n.d(t,"ViewProductionStatEventTypes",(function(){return u})),n.d(t,"MarketScreenNames",(function(){return l})),n.d(t,"MarketEventTypes",(function(){return d})),n.d(t,"WorkiEventTypes",(function(){return _})),n.d(t,"EventItemType",(function(){return p})),n.d(t,"EventItemSubType",(function(){return h})),n.d(t,"RegistrationItemEventTypes",(function(){return f})),n.d(t,"RegistrationFieldItemNames",(function(){return m})),n.d(t,"MarketingTransitionItemCampaignType",(function(){return g})),n.d(t,"MarketingTransitionItemEventType",(function(){return v})),n.d(t,"MarketingTransitionItemSourceType",(function(){return b})),n.d(t,"VkAppActionMenuActionType",(function(){return y})),n.d(t,"IEasterEggsItemEventType",(function(){return E})),function(e){e.NOWHERE="nowhere",e.OTHER="other",e.START="start",e.START_BOX="start_box",e.START_PROCEED_AS="start_proceed_as",e.REGISTRATION_COMPLETE="registration_complete",e.REGISTRATION_COUNTRY="registration_country",e.REGISTRATION_PHONE="registration_phone",e.REGISTRATION_PHONE_VERIFY="registration_phone_verify",e.REGISTRATION_PASSWORD="registration_password",e.REGISTRATION_EDUCATION="registration_education",e.REGISTRATION_EMAIL="registration_email",e.REGISTRATION_NAME="registration_name",e.REGISTRATION_INVITE_CONFIRM="registration_invite_confirm"}(r||(r={})),function(e){e.TYPE_NAVGO="type_navgo",e.TYPE_ACTION="type_action",e.TYPE_CLICK="type_click",e.TYPE_VIEW="type_view"}(o||(o={})),function(e){e.GO="go",e.BACK="back",e.TAB_OPEN="tab_open"}(i||(i={})),function(e){e.TYPE_DONUT_DESCRIPTION_NAV_ITEM="type_donut_description_nav_item",e.TYPE_MARKET_NAVGO="type_market_navgo",e.TYPE_YOULA_SNIPPET_NAVGO="type_youla_snippet_navgo"}(i||(i={})),function(e){e.TYPE_YOULA_SNIPPET_ITEM="type_youla_snippet_item"}(a||(a={})),function(e){e.TYPE_REGISTRATION_ITEM="type_registration_item",e.TYPE_MARKETING_TRANSITION_ITEM="type_marketing_transition_item",e.TYPE_DONUT_PAYMENT_ITEM="type_donut_payment_item",e.TYPE_CALL_ITEM="type_voip_call_item",e.TYPE_BRIDGE_EVENT_ITEM="type_bridge_event_item",e.TYPE_EASTER_EGGS_ITEM="type_easter_eggs_item",e.TYPE_CUSTOM_METRICS_ITEM="type_ab_custom_metrics_item"}(s||(s={})),function(e){e.TYPE_MARKET_CLICK="type_market_click",e.TYPE_WORKI_CLICK="type_worki_click",e.TYPE_CATALOG_BANNER_ITEM="type_catalog_banner_item",e.TYPE_MINI_APP_ITEM="type_mini_app_item"}(c||(c={})),function(e){e.TYPE_CATALOG_BANNER_ITEM="type_catalog_banner_item",e.TYPE_MARKET_VIEW="type_market_view"}(u||(u={})),function(e){e.MARKETPLACE="marketplace",e.MARKETPLACE_BLOCK="marketplace_block",e.MARKETPLACE_SEARCH="marketplace_search"}(l||(l={})),function(e){e.TYPE_MARKET_ORDERS_ITEM="type_market_orders_item",e.TYPE_MARKET_CARTS_ITEM="type_market_carts_item",e.TYPE_MARKET_GOODS_ITEM="type_market_item",e.TYPE_MARKET_MARKETPLACE_ITEM="type_market_marketplace_item"}(d||(d={})),function(e){e.TYPE_WORKI_SNIPPET_ITEM="type_worki_snippet_item"}(_||(_={})),function(e){e.ARTICLE="article",e.GROUP="group",e.PHOTO="photo",e.POST="post",e.STORY="story",e.USER="user",e.BROWSER="browser",e.NARRATIVE="narrative",e.MINI_APP="mini_app",e.GAME="game",e.VIDEO="video",e.MARKET_ITEM="market_item",e.MARKET_ITEM_ALBUM="market_item_album",e.MARKET_ORDER="market_order",e.CATALOG_BANNER="catalog_banner",e.WORKI_SNIPPET="worki_snippet"}(p||(p={})),function(e){e.SWITCH_ITEM_VARIANT_1="switch_item_variant_1",e.SWITCH_ITEM_VARIANT_2="switch_item_variant_2",e.OPEN_WIKI="open_wiki"}(h||(h={})),function(e){e.SCREEN_PROCEED="screen_proceed",e.SCREEN_SKIP="screen_skip",e.SCREEN_RETURN="screen_return",e.COMMON_SERVER_ERROR="common_server_error",e.RESEND_SMS_CODE="resend_sms_code",e.RESEND_SMS_CODE_FAILED="resend_sms_code_failed",e.INCORRECT_SMS_CODE="incorrect_sms_code",e.INCORRECT_PASSWORD="incorrect_password",e.INCORRECT_NAME="incorrect_name",e.INCORRECT_CAPTCHA="incorrect_captcha",e.INCORRECT_PHONE_NUMBER="incorrect_phone_number",e.INCORRECT_BDAY="incorrect_bday",e.INCORRECT_SEX="incorrect_sex",e.INCORRECT_EMAIL="incorrect_email",e.INCORRECT_EDUCATION="incorrect_education"}(f||(f={})),function(e){e.PHONE_COUNTRY="phone_country",e.PHONE_NUMBER="phone_number",e.COUNTRY="country",e.CITY="city",e.EMAIL="email",e.UNIVERSITY="university",e.FACULTY="faculty",e.SCHOOL="school",e.CHAIR="chair",e.YEAR_FROM="year_from",e.YEAR_TO="year_to",e.CLASS="class",e.EDU_FORM="edu_form",e.EDU_STATUS="edu_status",e.GRADUATION="graduation",e.SPECIALIZATION="specialization",e.RULES_ACCEPT="rules_accept",e.SMS_CODE="sms_code",e.FIRST_NAME="first_name",e.LAST_NAME="last_name",e.SEX="sex",e.BDAY="bday",e.PASSWORD="password"}(m||(m={})),function(e){e.UNAUTH_BOTTOM_BANNER="unauth_bottom_banner",e.UNAUTH_ACTION_BOX="unauth_action_box"}(g||(g={})),function(e){e.OPEN="open",e.CLOSE="close",e.CLICK_SIGN_UP="click_sign_up",e.CLICK_SIGN_IN="click_sign_in",e.CLICK_OPEN_IN_APP="click_open_in_app"}(v||(v={})),function(e){e.LIKE="like",e.SHARE="share",e.MORE="more"}(b||(b={})),function(e){e.ACTION_MENU_SHARE="action_menu_share",e.ACTION_MENU_ADD_TO_FAVOURITES="action_menu_add_to_favourites",e.ACTION_MENU_REMOVE_FROM_FAVOURITES="action_menu_remove_from_favourites",e.ACTION_MENU_ENABLE_NOTIFICATIONS="action_menu_enable_notifications",e.ACTION_MENU_DISABLE_NOTIFICATIONS="action_menu_disable_notifications",e.ACTION_MENU_ALL_APPS="action_menu_all_apps",e.ACTION_MENU_ALL_GAMES="action_menu_all_games",e.ACTION_MENU_COPY="action_menu_copy",e.ACTION_MENU_DELETE="action_menu_delete"}(y||(y={})),function(e){e.EGG_SHOW="egg_show",e.POPUP_SHOW="popup_show",e.POPUP_ACTION="popup_action"}(E||(E={}))},rE2o:function(e,t,n){n("OnI7")("asyncIterator")},rEJs:function(e,t,n){"use strict";n.r(t),n.d(t,"events",(function(){return r}));var r={CURRENT_CHANGED:"curr",PLAY:"start",PLAY_REQUESTED:"request_play",PAUSE:"pause",STOP:"stop",UPDATE:"update",LOADED:"loaded",ENDED:"ended",FAILED:"failed",BUFFERED:"buffered",PROGRESS:"progress",VOLUME:"volume",PLAYLIST_CHANGED:"plchange",ADDED:"added",REMOVED:"removed",FREQ_UPDATE:"freq",SEEK:"seek",PLAY_NEXT:"play_next",AD_READY:"ad_ready",AD_DEINITED:"ad_deinit",AD_STARTED:"ad_started",AD_COMPLETED:"ad_completed",START_LOADING:"start_load",CAN_PLAY:"actual_start",SELECT:"select",DESELECT:"deselect",EMPTY_PLAYLIST:"empty_playlist",NOT_FOUND_PLAYLIST:"not_found_playlist",INIT:"init",REQUEST_EXPANDED:"request_expanded",MUSIC_AUDIOS_ADD:"music_audios_add",MUSIC_PLAYLISTS_ADD:"music_playlists_add"}},rGqo:function(e,t,n){for(var r=n("yt8O"),o=n("DVgA"),i=n("KroJ"),a=n("dyZX"),s=n("Mukb"),c=n("hPIQ"),u=n("K0xU"),l=u("iterator"),d=u("toStringTag"),_=c.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=o(p),f=0;f<h.length;f++){var m,g=h[f],v=p[g],b=a[g],y=b&&b.prototype;if(y&&(y[l]||s(y,l,_),y[d]||s(y,d,g),c[g]=_,v))for(m in r)y[m]||i(y,m,r[m],!0)}},ryw6:function(__webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"topMsg",(function(){return topMsg})),__webpack_require__.d(__webpack_exports__,"topError",(function(){return topError})),__webpack_require__.d(__webpack_exports__,"showMsg",(function(){return showMsg})),__webpack_require__.d(__webpack_exports__,"showGlobalPrg",(function(){return showGlobalPrg}));var core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("a1Th"),core_js_modules_es6_object_to_string__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("Btvt"),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("pIFo"),_dom__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("zxIV"),_shared_user_user_env__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("W9Tc"),_shared_lib_js_logger__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("HLtZ"),_utils_common__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("t7n3");function topMsg(e,t,n){if(n||(n="#D6E5F7"),e){clearTimeout(window.topMsgTimer);var r=Object(_dom__WEBPACK_IMPORTED_MODULE_3__.ge)("system_msg");r.style.backgroundColor=n,r.innerHTML=e,Object(_dom__WEBPACK_IMPORTED_MODULE_3__.show)(r),t&&(window.topMsgTimer=setTimeout(topMsg.pbind(!1),1e3*t))}else Object(_dom__WEBPACK_IMPORTED_MODULE_3__.hide)("system_msg")}function topError(text,opts){var prefix="VK error: ";if(opts||(opts={}),text.message){var error=text;text="<b>JavaScript error</b>"+(Object(_shared_user_user_env__WEBPACK_IMPORTED_MODULE_4__.partConfigEnabled)("extended_client_logging")?": "+error.message:""),opts.stack=error.stack,error.stack&&__debugMode&&(text+="<br/>"+error.stack.replace(/\n/g,"<br/>"));try{console.error(prefix,error.message),console.log(error.stack)}catch(e){}}else try{console.error(prefix,text)}catch(e){}if(!opts.stack)try{eval("0 = 1")}catch(e){opts.stack=e.stack}if(-1!=opts.dt&&topMsg(text,opts.dt,"#FFB4A3"),1!==opts.type&&!__dev&&!Object(_dom__WEBPACK_IMPORTED_MODULE_3__.ge)("debuglogwrap")){delete opts.dt;var breadcrumb={message:text,data:{msg:opts.msg||text,module:(window.cur||{}).module,id:vk.id,host:locHost,lang:vk.lang,loc:(window.nav||{}).strLoc,realloc:location.toString()}};Object(_shared_lib_js_logger__WEBPACK_IMPORTED_MODULE_5__.logError)(opts,{environment:"genericVkError",breadcrumb})}}function showMsg(e,t,n,r){var o="msg"+("msg"!==n?" "+n:"");r&&(o+=" msg_appear"),e=Object(_dom__WEBPACK_IMPORTED_MODULE_3__.ge)(e);var i=Object(_dom__WEBPACK_IMPORTED_MODULE_3__.geByClass1)(n,e),a=i||Object(_dom__WEBPACK_IMPORTED_MODULE_3__.domFC)(e),s=e.insertBefore(Object(_dom__WEBPACK_IMPORTED_MODULE_3__.ce)("div",{className:o,innerHTML:'<div class="msg_text">'+t+"</div>"}),a);i&&Object(_dom__WEBPACK_IMPORTED_MODULE_3__.re)(i),setTimeout(_dom__WEBPACK_IMPORTED_MODULE_3__.removeClass.pbind(s,"msg_appear"),0)}function showGlobalPrg(e,t){var n=Object(_dom__WEBPACK_IMPORTED_MODULE_3__.getXY)(e),r=Object(_dom__WEBPACK_IMPORTED_MODULE_3__.getSize)(e),o=t||{},i=o.w,a=void 0===i?32:i,s=o.h,c=void 0===s?13:s,u=Object(_dom__WEBPACK_IMPORTED_MODULE_3__.ge)("global_prg");u.className=o.cls||"progress",Object(_dom__WEBPACK_IMPORTED_MODULE_3__.setStyle)(u,{left:n[0]+Math.floor((r[0]-a)/2)+Object(_utils_common__WEBPACK_IMPORTED_MODULE_6__.intval)(o.shift?o.shift[0]:0),top:n[1]+Math.floor((r[1]-c)/2)+Object(_utils_common__WEBPACK_IMPORTED_MODULE_6__.intval)(o.shift?o.shift[1]:0),width:a,height:c,display:"block","z-index":o.zIndex?o.zIndex:null}),o.hide&&(e.style.visibility="hidden")}},sMXx:function(e,t,n){"use strict";var r=n("Ugos");n("XKFU")({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},smNX:function(e,t,n){"use strict";n.r(t),n.d(t,"parseJSON",(function(){return o}));var r=n("HLtZ");function o(e){try{return JSON.parse(e)}catch(n){var t={environment:"parseJsonError",breadcrumb:{message:"Uncaught json parse error",data:{json:e},category:"custom"}};return Object(r.logError)(n,t),{}}}},svpG:function(e,t,n){"use strict";n.r(t),n.d(t,"addExtraHandler",(function(){return s})),n.d(t,"replaceExtraHandler",(function(){return c})),n.d(t,"_handleResponseExtraPayloads",(function(){return u}));var r=n("qYuU"),o=n("uQjJ"),i=n("HLtZ"),a=Object(r.makeSharedState)("ajax-extra-handlers",(function(){return new o.default}),{}),s=function(e,t){a().addListener(e,t);return function(){a().removeListener(e,t)}},c=function(e,t){return a().removeAllListeners(),s(e,t)},u=function(e){"object"==typeof e&&null!==e&&Object.keys(e).forEach((function(t){try{r=t,o=e[t],a().emit(r,o)}catch(e){var n={message:"Extra response error",data:{extraKey:t}};Object(i.logError)(e,{environment:"ajax_request",breadcrumb:n}),console.error(e)}var r,o}))}},"t/FQ":function(e,t,n){"use strict";n.r(t),n.d(t,"Chat",(function(){return f})),n.d(t,"cssAnim",(function(){return m})),n.d(t,"imagesLoader",(function(){return g})),n.d(t,"hideNewsAnnounce",(function(){return b})),n.d(t,"leftAdBlockClose",(function(){return y})),n.d(t,"leftBlockToggleFriend",(function(){return w})),n.d(t,"leftBlockFriendTooltip",(function(){return O})),n.d(t,"initLegacyBrowserDetectionInAttribute",(function(){return C})),n.d(t,"__qlClear",(function(){return T})),n.d(t,"storePasswordCredential",(function(){return S})),n.d(t,"onLoginDone",(function(){return D})),n.d(t,"onLoginFailed",(function(){return P})),n.d(t,"onLoginCaptcha",(function(){return k})),n.d(t,"onLoginReCaptcha",(function(){return A})),n.d(t,"nodeUpdated",(function(){return I})),n.d(t,"initPostsLegacyVars",(function(){return x}));n("HEwt"),n("a1Th"),n("Btvt"),n("rGqo"),n("rE2o"),n("ioFf"),n("pIFo");var r=n("FWc3"),o=n("v+DW"),i=n("zxIV"),a=n("7jxN"),s=n("Egk5"),c=n("t7n3"),u=n("EasH"),l=n("gdug"),d=n("4+be"),_=n("W9Tc");function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var f={maxHeight:300,tabs:{},counters:{},showFriends:function(){curFastChat.clistBox.visible?curFastChat.clistBox.options.fixed?FastChat.clistHide():curFastChat.clistBox.show():(FastChat.clistShow(),f.cont.tt&&f.cont.tt.destroy&&f.cont.tt.destroy())},showTT:function(){if(!document.querySelector(".WideScreenAppPage")&&!Object(i.hasClass)(f.wrap,"chat_active")&&!Object(i.hasClass)(f.wrap,"chat_expand")){var e=l.browser.mac?"Cmd":"Ctrl";Object(r.showTooltip)(f.cont,{text:`${Object(d.getLang)("head_fr_online_tip")} (${e}+?)`,shift:[-2,4,0],showdt:0,black:1})}},init:function(){f.wrap=Object(i.ce)("div",{id:"chat_onl_wrap",className:"chat_onl_wrap",innerHTML:'\n<div class="chat_tt_wrap"></div>\n<div class="chat_onl_inner">\n  <div class="chat_cont_scrolling"><div class="chat_onl_height"></div></div>\n  <div class="chat_cont_sh_top"></div>\n  <div class="chat_cont_sh_bottom"></div>\n  <a class="chat_tab_wrap" id="chat_tab_wrap" onclick="Chat.showFriends()" onmouseover="Chat.showTT();">\n    <div class="chat_onl_cont">\n      <div class="chat_onl" id="chat_onl"></div>\n    </div>\n  </a>\n</div>'}),utilsNode.appendChild(f.wrap),f.scrollNode=Object(i.geByClass1)("chat_cont_scrolling",f.wrap),f.ttNode=Object(i.geByClass1)("chat_tt_wrap",f.wrap),f.itemsCont=f.scrollNode.firstChild,f.onl=Object(i.ge)("chat_onl"),f.cont=f.onl.parentNode.parentNode,Object(i.hide)(f.wrap),f.inited=!0,stManager._addCss(".layers_shown .chat_onl_wrap {margin-right: "+Object(o.sbWidth)()+"px;}")}};function m(e,t,n,r){var o=Object(c.intval)(l.browser.version);if(e&&(l.browser.chrome&&o>14||l.browser.mozilla&&o>13||l.browser.opera&&o>2)){var u="all "+n.duration+"ms "+(n.func||"ease-out");e.style.WebkitTransition=u,e.style.MozTransition=u,e.style.OTransition=u,e.style.transition=u;var d=function t(){return l.browser.opera&&Object(c.intval)(l.browser.version)<=12?e.removeEventListener("oTransitionEnd",t):Object(s.removeEvent)(e,"webkitTransitionEnd transitionend msTransitionEnd oTransitionEnd",t),e.style.WebkitTransition="",e.style.MozTransition="",e.style.OTransition="",e.style.transition="",r&&r(),!1};r&&(l.browser.opera&&Object(c.intval)(l.browser.version)<=12?e.addEventListener("oTransitionEnd",d):Object(s.addEvent)(e,"webkitTransitionEnd transitionend msTransitionEnd oTransitionEnd",d)),setTimeout(i.setStyle.pbind(e,t),0)}else Object(a.animate)(e,t,Object(c.extend)(n,{onComplete:r}))}function g(e,t){var n=[],r=0,o=null,a=Object(c.extend)({top_load:0,bottom_load:2,load_limit:10,need_load_class:"__need_load",skip_process_load:!1,use_iframe:!1},t),s={};function u(e,t){n[e]&&(--r,delete n[e]),t||s.processLoad()}function l(t){var n=0,r=t;if(r&&r.offsetParent)do{if(n+=r.offsetTop,e&&r.offsetParent===e)break}while(r=r.offsetParent);return n}return s.processLoad=function(){if(Object(c.each)(n,(e,t)=>{var r=p(t,2),o=r[0],i=r[1];(i.width||i.height||Object(c.vkNow)()-o>2e4)&&n[e]&&u.call(i,e,!0)}),clearTimeout(o),r&&(o=setTimeout(s.processLoad,500)),!(r>=a.load_limit)){var t,d,_=Object(i.geByClass)(a.need_load_class,e||bodyNode),h=[];if(e&&_.length){var f=e.offsetHeight;t=e.scrollTop-f*a.top_load,d=e.scrollTop+f*a.bottom_load}for(var m=0,g=_.length;m<g&&r<a.load_limit;m++){var v=_[m];if("IMG"===v.tagName){var b=v.getAttribute("data-src");if(b){if(e){var y=l(v),E=y+v.parentNode.offsetHeight;if(y>d)continue;if(E<t)continue}h.push([v,b])}}}Object(c.each)(h,(e,t)=>{var o=p(t,2),l=o[0],d=o[1];s.iloader&&s.iloader.add(d,u,l),l.src=d,l.removeAttribute("data-src"),Object(i.removeClass)(l,a.need_load_class),n[d]||(r++,n[d]=[Object(c.vkNow)(),l])}),clearTimeout(o),r&&(o=setTimeout(s.processLoad,500))}},s.destroy=function(){n=[],r=0,clearTimeout(o)},a.use_iframe&&(s.iloader=new v),a.skip_process_load||s.processLoad(),s}function v(){var e,t,n,r,o,a;function s(e){return t&&t.body?'<img id="___img'+e+'" />':'<img class="___img'+e+'" />'}function u(e){return t&&t.body?t.getElementById("___img"+e):Object(i.geByClass1)("___img"+e,n)}function d(){e=utilsNode.appendChild(Object(i.ce)("iframe")),t=function(e){if(l.browser.mozilla)return!1;try{return e.contentDocument?e.contentDocument:e.contentWindow&&e.contentWindow.document?e.contentWindow.document:e.document}catch(e){}return!1}(e),n=t&&t.body?t.body:utilsNode.appendChild(Object(i.ce)("div",{},{display:"none"})),r=0,o=[]}function _(e,t,a){var c=r++;o[c]={src:e,onLoad:t,that:a},n.appendChild(Object(i.ce)("div",{innerHTML:s(c)}));var l=u(c);return l.src=e,l.onload=function(){var e=o[c];e&&(e.onLoad&&e.onLoad.call(e.that||window,e.src),delete o[c],n.removeChild(u(c).parentNode))},l}return d(),{add:_,abort:function(){Object(i.re)(e),a=[...o.filter(e=>void 0!==e)],d()},repeat:function(e){if(!a)return[];var t=[];if(Object(c.each)(a,(e,n)=>{_(n.src,n.onLoad,n.that),t.push(n.that)}),a=null,e){var n=[];Object(c.each)(t,(function(){n.push([this,this.src]),this.src="",Object(i.hide)(this)})),setTimeout((function(){Object(c.each)(n,(e,t)=>{var n=p(t,2),r=n[0],o=n[1];r.src=o,Object(i.show)(r)})}),10)}return t}}}function b(e,t){var n={act:"hide_block",block:e,hash:t};ajax.post("al_index.php",n),Object(i.hide)("news_announce_"+e)}function y(e,t,n){Object(i.setStyle)("left_hide"+e,{visibility:"hidden"}),Object(_.partConfigEnabled)("ads_new_reports_web_tgb")?function(e,t,n){var r="",a=Object(u.showBox)("reports.php",{act:"hide_ad_box",ad_data:n},{onDone:function(){var e=Object(i.geByClass)("radiobtn","ad_hide");window.radioBtns.ad_hide={val:0,els:e};var t=Object(i.ge)("ad_csrf");r=t?t.value:r},params:{width:370,onClean:()=>{delete window.radioBtns.ad_hide}},stat:["reports.css"]});a.removeButtons(),a.addButton(Object(d.getLang)("box_send"),i=>{Object(o.lockButton)(i),ajax.post("reports.php",{act:"hide_ad",reason_id:window.radioBtns.ad_hide.val,ad_data:n,hash:r}),E(e,t,()=>{Object(o.unlockButton)(i),a.hide()})}),a.addButton(Object(d.getLang)("global_cancel"),!1,"no")}(e,t,n):E(e,t)}function E(e,t,n){function r(){Object(a.animate)("ads_ad_close_info_"+e,{opacity:1},200,o)}function o(){Object(i.setStyle)("ads_ad_box2_"+e,{visibility:"hidden"})}ajax.post(t,{},{noAds:!0,onDone:function(t){if(!t.done)return;"function"==typeof n&&n();if("ya_direct"===e)return Object(a.animate)(e,{opacity:0},200,(function(){Object(i.re)("ya_direct"),setTimeout((function(){AdsLight.updateBlock("force_hard",2)}),5e3)})),void(window.vk__adsLight.yaDirectAdActive=!1);var o=Object(i.ge)("ads_ad_close_info_"+e);if(!o)return!1;Object(i.setStyle)(o,{opacity:0}),o.style.setProperty("display","block","important"),setTimeout(r,0)}})}function w(e,t,n,r,o){r&&stManager.add(["tooltips.css",jsc("web/tooltips.js")]),cur.mfid=e,ajax.post("al_friends.php",{act:r?"add":"remove",mid:e,mf_type:t,hash:n,from:"leftblock"},{onDone:function(t,n,r){if(!t)return nav.reload();var o=Object(i.ge)("left_friend_status_"+e);Object(i.cleanElems)(o.firstChild),t?(Object(i.show)(o),Object(i.val)(o,t)):Object(i.hide)(o),n&&(ajax.preload("al_friends.php",{act:"friend_tt",mid:e},[n,r]),setTimeout(O,0))},showProgress:function(){var t=(Object(i.ge)("left_friend_subscribed")||{}).tt;t&&(t.hide({fasthide:1}),t.destroy()),Object(i.ge)("left_friend_status_"+e).innerHTML='<img src="/images/upload'+(window.devicePixelRatio>=2?"_2x":"")+'.gif" width="32" />'},hideProgress:()=>Object(i.hide)("left_friend_status_"+e),onFail:function(e){if(e)return Object(u.showFastBox)({title:Object(d.getLang)("global_error")},e),!0}}),Object(s.cancelEvent)(o)}function O(){return Object(r.showTooltip)(Object(i.ge)("left_friend_subscribed"),{url:"al_friends.php",params:{act:"friend_tt",mid:cur.mfid,from:"leftblock"},slide:15,hidedt:500,shift:[40,-1,3],className:"preq_tt",forcetodown:!0})}function C(){var e=[];Object(c.each)(l.browser,(function(t,n){n&&!Object(c.inArray)(t,["version","mac","search_bot"])&&"flash"!==t.substr(0,5)&&e.push(t)})),e=e.join(" "),bodyNode.setAttribute("data-useragent",e)}function T(){clearTimeout(window.__qlTimer),setTimeout(()=>clearTimeout(window.__qlTimer),2e3)}function S(e){if(l.browserFeatures.cmaEnabled&&window.ResizeObserver&&Object(i.val)("quick_email")&&void 0!==window.PasswordCredential){var t=new PasswordCredential({id:Object(i.ge)("quick_email").value,password:Object(i.ge)("quick_pass").value,name:e.name,iconURL:e.photo_50});navigator.credentials.store(t)}}function D(e,t){T(),S(t),nav.reload({force:!0,from:6})}function P(e,t){switch(T(),e){case-1:location.href=location.href.replace(/^http:/,"https:");break;case 4:var n="/login?m=1"+(t.expire?"&s=0":"");Object(c.each)(["email","ul","pch","to"],(function(e,r){t[r]&&(n+="&"+r+"="+t[r])})),location.href=n;break;default:location.href="/login"}}function k(e,t){T(),Object(o.unlockButton)(window.__qfBtn),window.qloginBox=Object(u.showCaptchaBox)(e,t,window.qloginBox,{onSubmit:function(e,t){Object(i.ge)("quick_captcha_sid").value=e,Object(i.ge)("quick_captcha_key").value=t,Object(i.ge)("quick_login_form").submit()},onHide:()=>window.qloginBox=!1})}function A(e,t){T(),Object(o.unlockButton)(window.__qfBtn),window.qloginBox=Object(u.showReCaptchaBox)(e,t,window.qloginBox,{onSubmit:function(e){Object(i.ge)("quick_recaptcha").value=e,Object(i.ge)("quick_login_form").submit()},onHide:()=>window.qloginBox=!1})}function I(e,t){Object(i.setStyle)(e,{backgroundColor:"#F5F7FA"}),Object(a.animate)(e,{backgroundColor:"#FFF"},t||6e3,(function(e){Object(i.setStyle)(e,{backgroundColor:null})}))}function x(){window._postsSeen={},window._postsSaved={},window._postsSaveTimer=void 0,window._postsSendTimer=void 0,window._postsCleanTimer=void 0,window._postsSeenModules={},window._postsExtras={}}},t7n3:function(e,t,n){"use strict";n.r(t),n.d(t,"vkLocal",(function(){return c})),n.d(t,"lTimeout",(function(){return u})),n.d(t,"vkImage",(function(){return l})),n.d(t,"trim",(function(){return d})),n.d(t,"stripHTML",(function(){return _})),n.d(t,"intval",(function(){return p})),n.d(t,"floatval",(function(){return h})),n.d(t,"positive",(function(){return f})),n.d(t,"isNumeric",(function(){return m})),n.d(t,"isNumber",(function(){return g})),n.d(t,"winToUtf",(function(){return v})),n.d(t,"clean",(function(){return b})),n.d(t,"unclean",(function(){return y})),n.d(t,"indexOf",(function(){return E})),n.d(t,"inArray",(function(){return w})),n.d(t,"clone",(function(){return O})),n.d(t,"arrayKeyDiff",(function(){return C})),n.d(t,"extend",(function(){return T})),n.d(t,"addTemplates",(function(){return S})),n.d(t,"getTemplate",(function(){return D})),n.d(t,"serializeForm",(function(){return P})),n.d(t,"extractUrls",(function(){return k})),n.d(t,"isRetina",(function(){return A})),n.d(t,"getCaretCharacterOffsetWithin",(function(){return I})),n.d(t,"formatCount",(function(){return x})),n.d(t,"encodeHtml",(function(){return N})),n.d(t,"decodeHtml",(function(){return U})),n.d(t,"initUtilsCommon",(function(){return F}));n("HEwt"),n("rGqo"),n("rE2o"),n("ioFf"),n("a1Th"),n("Btvt"),n("SRfc"),n("pIFo");var r=n("zxIV"),o=n("4+be"),i=n("gdug"),a=n("jE6c");function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e){var t=PageID;return function(){t===PageID&&e.apply(this,arguments)}}function u(e,t){return setTimeout(c(e),t)}n.d(t,"rand",(function(){return a.rand})),n.d(t,"replaceEntities",(function(){return a.replaceEntities})),n.d(t,"isArray",(function(){return a.isArray})),n.d(t,"isEmpty",(function(){return a.isEmpty})),n.d(t,"isFunction",(function(){return a.isFunction})),n.d(t,"isHttpHref",(function(){return a.isHttpHref})),n.d(t,"isObject",(function(){return a.isObject})),n.d(t,"isString",(function(){return a.isString})),n.d(t,"isUndefined",(function(){return a.isUndefined})),n.d(t,"irand",(function(){return a.irand})),n.d(t,"escapeAttr",(function(){return a.escapeAttr})),n.d(t,"escapeRE",(function(){return a.escapeRE})),n.d(t,"escapeStr",(function(){return a.escapeStr})),n.d(t,"each",(function(){return a.each})),n.d(t,"htsc",(function(){return a.htsc})),n.d(t,"copy",(function(){return a.copy})),n.d(t,"vkNow",(function(){return a.vkNow})),n.d(t,"locBase",(function(){return a.locBase})),n.d(t,"unescapeAttr",(function(){return a.unescapeAttr})),n.d(t,"utf2win",(function(){return a.utf2win})),n.d(t,"srand",(function(){return a.srand})),n.d(t,"stripTags",(function(){return a.stripTags}));var l=()=>window.Image?new Image:Object(r.ce)("img"),d=e=>(e||"").replace(/^\s+|\s+$/g,""),_=e=>e?e.replace(/<(?:.|\n|\r|\u2028|\u2029)*?>/g,""):"";function p(e){return!0===e?1:parseInt(e)||0}function h(e){return!0===e?1:parseFloat(e)||0}function f(e){return(e=p(e))<0?0:e}function m(e){return!isNaN(e)}function g(e){return"number"==typeof e&&(e===Number(e)&&(e!==1/0&&e!==-1/0))}function v(e){return e.replace(/&#(\d\d+);/g,(function(e,t){return(t=p(t))>=32?String.fromCharCode(t):e})).replace(/&quot;/gi,'"').replace(/&lt;/gi,"<").replace(/&gt;/gi,">").replace(/&amp;/gi,"&")}function b(e){return e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):""}function y(e){return Object(a.replaceEntities)(e.replace(/\t/g,"\n"))}function E(e,t,n){for(var r=n||0,o=(e||[]).length;r<o;r++)if(e[r]==t)return r;return-1}function w(e,t){return-1!==E(t,e)}function O(e,t){var n=Object(a.isObject)(e)||void 0===e.length?{}:[];for(var r in e)(!/webkit/i.test(_ua)||"layerX"!=r&&"layerY"!=r&&"webkitMovementX"!=r&&"webkitMovementY"!=r)&&(t&&"object"==typeof e[r]&&"prototype"!==r&&null!==e[r]?n[r]=O(e[r]):n[r]=e[r]);return n}function C(e){var t={},n=arguments.length,r=arguments;for(var o in e)if(e.hasOwnProperty(o)){for(var i=!1,a=1;a<n;a++)r[a][o]&&r[a][o]===e[o]&&(i=!0);i||(t[o]=e[o])}return t}function T(){var e=arguments,t=e.length,n=e[0]||{},r=1,o=!1;for("boolean"==typeof n&&(o=n,n=e[1]||{},r=2),"object"==typeof n||Object(a.isFunction)(n)||(n={});r<t;r++){var i=e[r];if(null!=i)for(var s in i)if(i.hasOwnProperty(s)){var c=n[s],u=i[s];n!==u&&(o&&u&&"object"==typeof u&&!u.nodeType?n[s]=T(o,c||(null!=u.length?[]:{}),u):void 0!==u&&(n[s]=u))}}return n}function S(e){window.templates=window.templates||{},T(window.templates,e)}function D(e,t){var n=(window.templates=window.templates||{})[e];return"function"==typeof n&&(n=n()),n&&t?Object(r.rs)(n,t):n||""}function P(e){if("object"!=typeof e)return!1;var t={},n=t=>Object(r.geByTag)(t,e),o=function(n,o){if(o.name)if("text"!==o.type&&o.type)if(o.getAttribute("bool")){var a=Object(r.val)(o);if(!a||"0"===a)return;t[o.name]=1}else t[o.name]=i.browser.msie&&!o.value&&e[o.name]?e[o.name].value:o.value;else t[o.name]=Object(r.val)(o)};return Object(a.each)(n("input"),(function(e,t){if("radio"!==t.type&&"checkbox"!==t.type||t.checked)return o(0,t)})),Object(a.each)(n("select"),o),Object(a.each)(n("textarea"),o),t}function k(e,t){for(var n,r=t?/(?:([!()?., \n\r\t \u00A0]|^)((https?:\/\/)?((?:[a-z0-9_\-]+\.)+(?:[a-z]{2,10}|xn--p1ai|xn--j1amh|xn--80asehdb|xn--80aswg))(\/.*?)?(\#.*?)?)(?:[\.!:;,\*\(\)&]*(&nbsp;|[ \t\r\n \u00A0]|$))|([!()?., \n\r\t \u00A0]|^)((https?:\/\/)?((?:[a-z0-9а-яєґї_\-]+\.)+(?:рф|укр|онлайн|сайт|срб))(\/.*?)?(\#.*?)?)(?:[\.!:;,\*\(\)&]*(&nbsp;|[ \t\r\n \u00A0]|$)))/i:/(?:([!()?., \n\r\t \u00A0]|^)((https?:\/\/)?((?:[a-z0-9_\-]+\.)+(?:[a-z]{2,10}|xn--p1ai|xn--j1amh|xn--80asehdb|xn--80aswg))(\/.*?)?(\#.*?)?)(?:[\.!:;,\*\(\)]*(&nbsp;|[ \t\r\n \u00A0]))|([!()?., \n\r\t \u00A0]|^)((https?:\/\/)?((?:[a-z0-9а-яєґї_\-]+\.)+(?:рф|укр|онлайн|сайт|срб))(\/.*?)?(\#.*?)?)(?:[\.!:;,\*\(\)]*(&nbsp;|[ \t\r\n \u00A0])))/i,o=[];e&&(n=e.match(r));){e=e.substr(n.index+n[0].length);var i=0;n[4]||(i=7),o.push({url:n[2+i],query:n[5+i]||"",domain:n[4+i]})}return o}var A=()=>window.devicePixelRatio>=2;function I(e){if(!e)return[0,0];var t=0,n=0,r=e.ownerDocument||e.document,o=r.defaultView||r.parentWindow;if(o.getSelection().rangeCount>0){var i=o.getSelection().getRangeAt(0),a=i.cloneRange();a.selectNodeContents(e),a.setEnd(i.startContainer,i.startOffset),t=a.toString().length,a.setEnd(i.endContainer,i.endOffset),n=a.toString().length}return[t,n]}function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.kLimit||1e3,r=t.mLimit||1e6;return e>=r&&!t.noCheck?x(e=(e=p(e/1e5))>1e3?p(e/10):e/10,T(t,{noCheck:!0}),!0)+"M":e>=n&&!t.noCheck?x(e=(e=p(e/100))>100?p(e/10):e/10,T(t,{noCheck:!0}),!0)+"K":Object(o.langNumeric)(e,"%s",!0).replace(/,/g,".")}var j,M,L,R=(L=null,[function(e){return L||(L=Object(r.se)("<span> </span>")),L.innerText=e,L.innerHTML},function(e){return L||(L=Object(r.se)("<span> </span>")),L.innerHTML=e.replace(/<br\s*\/?>/gim,"\n"),L.innerText}]),B=(M=2,function(e){if(Array.isArray(e))return e}(j=R)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}}(j,M)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(j,M)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),N=B[0],U=B[1];function F(){window.PageID=window.PageID||1}},tEBl:function(e,t,n){e.exports=function(){"use strict";class e{constructor(e=0,t=0){this.first=null,this.items=Object.create(null),this.last=null,this.max=e,this.size=0,this.ttl=t}has(e){return e in this.items}clear(){return this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this}delete(e){if(this.has(e)){const t=this.items[e];delete this.items[e],this.size--,null!==t.prev&&(t.prev.next=t.next),null!==t.next&&(t.next.prev=t.prev),this.first===t&&(this.first=t.next),this.last===t&&(this.last=t.prev)}return this}evict(){const e=this.first;return delete this.items[e.key],this.first=e.next,this.first.prev=null,this.size--,this}get(e){let t;if(this.has(e)){const n=this.items[e];this.ttl>0&&n.expiry<=(new Date).getTime()?this.delete(e):(t=n.value,this.set(e,t,!0))}return t}keys(){return Object.keys(this.items)}set(e,t,n=!1){let r;if(n||this.has(e)){if(r=this.items[e],r.value=t,!1===n&&(r.expiry=this.ttl>0?(new Date).getTime()+this.ttl:this.ttl),this.last!==r){const e=this.last,t=r.next,n=r.prev;this.first===r&&(this.first=r.next),r.next=null,r.prev=this.last,e.next=r,null!==n&&(n.next=t),null!==t&&(t.prev=n)}}else this.max>0&&this.size===this.max&&this.evict(),r=this.items[e]={expiry:this.ttl>0?(new Date).getTime()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:t},1==++this.size?this.first=r:this.last.next=r;return this.last=r,this}}return function(t=1e3,n=0){if(isNaN(t)||t<0)throw new TypeError("Invalid max value");if(isNaN(n)||n<0)throw new TypeError("Invalid ttl value");return new e(t,n)}}()},tEnI:function(e,t,n){"use strict";var r,o,i,a,s,c;n.r(t),n.d(t,"CallStatReachedType",(function(){return r})),n.d(t,"CallStatResult",(function(){return o})),n.d(t,"CallStatFailReason",(function(){return i})),n.d(t,"CallStatSource",(function(){return a})),n.d(t,"CallActionEventType",(function(){return s})),n.d(t,"CallStatMuteType",(function(){return c})),function(e){e.AUDIO="ok_audio",e.AUDIO_TO_VIDEO="ok_video",e.VIDEO="ok_started_as_video",e.GROUP_AUDIO="group_audio",e.GROUP_AUDIO_TO_VIDEO="group_video",e.GROUP_VIDEO="group_started_as_video"}(r||(r={})),function(e){e.SUCCESS="success",e.FAIL="fail"}(o||(o={})),function(e){e.REMOTE_NO_CONNECT="push_not_delivered",e.REMOTE_FAILED_ACCEPT="cant_connect",e.REMOTE_DECLINE="declined_remote",e.LOCAL_DECLINE="declined_local",e.REMOTE_TIMEOUT="declined_timeout",e.REMOTE_BUSY="busy",e.CONNECTION_LOST="lost_connection"}(i||(i={})),function(e){e.CONVO_HEADER="im_header",e.CONVO_SNIPPET="im_message",e.CONVO_LIST="im_create",e.CONVO_JOIN_SNIPPET="im_join_message",e.CONVO_JOIN_HEADER="im_join_header",e.CONVO_JOIN_BANNER="im_join_header",e.FRIENDS_LIST="friends_list",e.LINK_JOIN_SNIPPET="join_deeplink",e.LINK_JOIN_PAGE="join_deeplink",e.PROFILE="profile"}(a||(a={})),function(e){e.OUTGOING_CALL_STARTED_VIDEO="OutgoingCallStartedVideo",e.OUTGOING_CALL_STARTED_AUDIO="OutgoingCallStartedAudio",e.OUTGOING_CALL_ADD_PARTICIPANTS_SENT="OutgoingCallAddParticipantsSent",e.OUTGOING_CALL_REMOTE_RINGING="OutgoingCallRemoteRinging",e.OUTGOING_CALL_ACCEPTED_REMOTELY="OutgoingCallAcceptedRemotely",e.OUTGOING_CALL_FAILED="OutgoingCallFailed",e.OUTGOING_CALL_COMPLETED="OutgoingCallCompleted",e.INCOMING_CALL_RECEIVED="IncomingCallReceived",e.INCOMING_CALL_ACCEPTED="IncomingCallAccepted",e.CALL_DECLINED_OR_HANGED_LOCALLY="CallDeclinedOrHangedLocally",e.CALL_DECLINED_OR_HANGED_REMOTELY="CallDeclinedOrHangedRemotely",e.CALL_CONNECTED="CallConnected",e.CALL_DISCONNECTED="CallDisconnected",e.VIDEO_ENABLED="VideoEnabled",e.VIDEO_DISABLED="VideoDisabled",e.RELAY_CONNECTION_ESTABLISHED="RelayConnectionEstablished",e.USER_FEEDBACK_RECEIVED="UserFeedbackReceived",e.SYSTEM_STAT="SystemStat",e.GROUP_CALL_JOINED="GroupCallJoined",e.HAND_RAISED="HandRaised",e.HAND_LOWERED="HandLowered",e.SCREEN_SHARING_STARTED="ScreenSharingStarted",e.SCREEN_SHARING_STOPPED="ScreenSharingStopped",e.ALL_MICS_DISABLED="AllMicsDisabled",e.MIC_OFF_WHILE_TALKING_ALERT="MicOffWhileTalkingAlert",e.MIC_OFF_WHILE_TALKING_ENABLE_CLICK="MicOffWhileTalkingEnableClick",e.VIDEO_DISABLED_DUE_TO_BAD_CONNECTION_ALERT="VideoDisabledDueToBadConnectionAlert",e.ALL_MICS_AND_VIDEO_DISABLED="AllMicsAndVideoDisabled",e.USER_MICS_AND_VIDEO_DISABLED="UserMicsAndVideoDisabled",e.ASK_ALL_TO_UNMUTE="AskAllToUnmute",e.ASK_USER_TO_UNMUTE="AskUserToUnmute",e.ASSIGN_ADMIN="AssignAdmin",e.RETRIEVE_ADMIN="RetrieveAdmin",e.ADMIN_PIN="AdminPin",e.ADMIN_UNPIN="AdminUnpin"}(s||(s={})),function(e){e[e.ONCE=0]="ONCE",e[e.PERMANENT=1]="PERMANENT"}(c||(c={}))},tGJf:function(e,t,n){"use strict";n.r(t),n.d(t,"vkLocalStorage",(function(){return c})),n.d(t,"vkSessionStorage",(function(){return l}));var r,o=function(){function e(){var e=this;this.data={},this.getItem=function(t){return e.data.hasOwnProperty(t)?e.data[t]:null},this.keys=function(){return Object.keys(e.data)}}return e.prototype.setItem=function(e,t){this.data[e]=String(t)},e.prototype.removeItem=function(e){delete this.data[e]},e.prototype.clear=function(){this.data={}},Object.defineProperty(e.prototype,"length",{get:function(){return Object.keys(this.data).length},enumerable:!0,configurable:!0}),e.prototype.key=function(e){return Object.keys(this.data)[e]},e}(),i="vk-ls-dummy";function a(){if(r)return r;try{if(window.localStorage.setItem(i,"test"),"test"!==window.localStorage.getItem(i))throw new Error("localStorage is broken");window.localStorage.removeItem(i),r=window.localStorage}catch(e){r=new o}return r}var s,c={setItem:function(e,t){return a().setItem(e,t)},getItem:function(e){return a().getItem(e)},removeItem:function(e){return a().removeItem(e)},clear:function(){return a().clear()},length:function(){return a().length},key:function(e){return a().key(e)},keys:function(){var e=a();return e instanceof o?e.keys():Object.keys(e)},getPrefixedKeys:function(e){return c.keys().filter((function(t){return t.startsWith(e)}))}};function u(){if(s)return s;try{if(window.sessionStorage.setItem(i,"test"),"test"!==window.sessionStorage.getItem(i))throw new Error("sessionStorage is broken");window.sessionStorage.removeItem(i),s=window.sessionStorage}catch(e){s=new o}return s}var l={setItem:function(e,t){return u().setItem(e,t)},getItem:function(e){return u().getItem(e)},removeItem:function(e){return u().removeItem(e)},clear:function(){return u().clear()},length:function(){return u().length},key:function(e){return u().key(e)},keys:function(){var e=u();return e instanceof o?e.keys():Object.keys(e)},getPrefixedKeys:function(e){return l.keys().filter((function(t){return t.startsWith(e)}))}}},uQjJ:function(e,t,n){"use strict";n.r(t);var r=n("4O8T");window.EventEmitter=r,t.default=r},uk5P:function(e,t,n){"use strict";n.r(t),n.d(t,"AUDIO_PLAYER_ENUMS",(function(){return r}));var r={AUDIO_ITEM_INDEX_ID:0,AUDIO_ITEM_INDEX_OWNER_ID:1,AUDIO_ITEM_INDEX_URL:2,AUDIO_ITEM_INDEX_TITLE:3,AUDIO_ITEM_INDEX_PERFORMER:4,AUDIO_ITEM_INDEX_DURATION:5,AUDIO_ITEM_INDEX_ALBUM_ID:6,AUDIO_ITEM_INDEX_AUTHOR_LINK:8,AUDIO_ITEM_INDEX_LYRICS:9,AUDIO_ITEM_INDEX_FLAGS:10,AUDIO_ITEM_INDEX_CONTEXT:11,AUDIO_ITEM_INDEX_EXTRA:12,AUDIO_ITEM_INDEX_HASHES:13,AUDIO_ITEM_INDEX_COVER_URL:14,AUDIO_ITEM_INDEX_ADS:15,AUDIO_ITEM_INDEX_SUBTITLE:16,AUDIO_ITEM_INDEX_MAIN_ARTISTS:17,AUDIO_ITEM_INDEX_FEAT_ARTISTS:18,AUDIO_ITEM_INDEX_ALBUM:19,AUDIO_ITEM_INDEX_TRACK_CODE:20,AUDIO_ITEM_INDEX_RESTRICTION:21,AUDIO_ITEM_INDEX_ALBUM_PART:22,AUDIO_ITEM_ACCESS_KEY:24,AUDIO_ITEM_CHART_INFO_INDEX:25,AUDIO_ITEM_HAS_LYRICS_BIT:1,AUDIO_ITEM_CAN_ADD_BIT:2,AUDIO_ITEM_CLAIMED_BIT:4,AUDIO_ITEM_HQ_BIT:16,AUDIO_ITEM_LONG_PERFORMER_BIT:32,AUDIO_ITEM_UMA_BIT:128,AUDIO_ITEM_REPLACEABLE:512,AUDIO_ITEM_EXPLICIT_BIT:1024,AUDIO_ENOUGH_LOCAL_SEARCH_RESULTS:500,AUDIO_RECOMS_TYPE_LISTENED:"recoms6",AUDIO_PLAYING_CLS:"audio_row__playing",AUDIO_CURRENT_CLS:"audio_row__current",AUDIO_DURATION_CLS:"audio_row__duration",AUDIO_LAYER_HEIGHT:550,AUDIO_LAYER_MIN_WIDTH:400,AUDIO_LAYER_MAX_WIDTH:1e3,AUDIO_HQ_LABEL_CLS:"audio_hq_label_show",AUDIO_MAX_AUDIOS_IN_SNIPPET:5,AUDIO_ROW_COVER_SIZE:40,AUDIO_ROW_PLAY_SIZE:24,AUDIO_ROW_ACTION_ROW_ITEM:'<button class="audio_row__more_action audio_row__more_action_%0% _audio_row__more_action_%0% %3%">%2%</button>',LOG_LS_KEY:"audiolog"}},upKx:function(e,t,n){"use strict";var r=n("S/j/"),o=n("d/Gc"),i=n("ne8i");e.exports=[].copyWithin||function(e,t){var n=r(this),a=i(n.length),s=o(e,a),c=o(t,a),u=arguments.length>2?arguments[2]:void 0,l=Math.min((void 0===u?a:o(u,a))-c,a-s),d=1;for(c<s&&s<c+l&&(d=-1,c+=l-1,s+=l-1);l-- >0;)c in n?n[s]=n[c]:delete n[s],s+=d,c+=d;return n}},"v+DW":function(e,t,n){"use strict";n.r(t),n.d(t,"notaBene",(function(){return l})),n.d(t,"updSideTopLink",(function(){return d})),n.d(t,"createButton",(function(){return _})),n.d(t,"actionsMenuItemLocked",(function(){return p})),n.d(t,"lockActionsMenuItem",(function(){return h})),n.d(t,"unlockActionsMenuItem",(function(){return f})),n.d(t,"linkLocked",(function(){return m})),n.d(t,"lockLink",(function(){return g})),n.d(t,"unlockLink",(function(){return v})),n.d(t,"lockButton",(function(){return b})),n.d(t,"unlockButton",(function(){return y})),n.d(t,"buttonLocked",(function(){return E})),n.d(t,"isButtonLocked",(function(){return w})),n.d(t,"disableButton",(function(){return O})),n.d(t,"sbWidth",(function(){return C})),n.d(t,"isChecked",(function(){return T})),n.d(t,"checkbox",(function(){return S})),n.d(t,"disable",(function(){return D})),n.d(t,"radioval",(function(){return P})),n.d(t,"radiobtn",(function(){return k})),n.d(t,"showProgress",(function(){return A})),n.d(t,"hideProgress",(function(){return I})),n.d(t,"disableEl",(function(){return x})),n.d(t,"enableEl",(function(){return j})),n.d(t,"initUiHelpers",(function(){return M}));var r=n("zxIV"),o=n("Egk5"),i=n("t7n3"),a=n("lXE5"),s=n("7jxN"),c=n("gdug"),u=n("4+be");function l(e,t,n){if(e=Object(r.ge)(e)){n||Object(r.elfocus)(e),void 0===Object(r.data)(e,"backstyle")&&Object(r.data)(e,"backstyle",e.style.backgroundColor||"");var o=Object(r.data)(e,"back")||Object(r.data)(e,"back",Object(r.getStyle)(e,"backgroundColor")),i={notice:"#FFFFE0",warning:"#FAEAEA"};Object(r.setStyle)(e,"backgroundColor",i[t]||t||i.warning),setTimeout(()=>Object(s.animate)(e,{backgroundColor:o},300,(function(){e.style.backgroundColor=Object(r.data)(e,"backstyle")})),400)}}function d(e){if(window.scrollNode&&!c.browser.mobile&&window._tbLink){var t=Object(r.ge)("page_body");if(t){var n=Object(r.getXY)(t),o=Object(a.scrollGetY)(),i=bodyNode.scrollLeft,l=Object(r.ge)("side_bar"),d=Object(r.isVisible)(l);if(window._stlSideTop=Math.max((d?Object(r.getSize)(l)[1]:0)-o-(c.browser.mozilla?Object(r.getXY)(pageNode)[1]:0),n[1]),e||i!=__scrLeft){var _=Object(r.ge)("page_layout"),p=vk.rtl?_.offsetLeft+_.offsetWidth:0,h=vk.rtl?(window.lastWindowWidth||0)-p:_.offsetLeft;Object(r.setStyle)(_stlLeft,{width:Math.max(h-1,0)});var f=vk.rtl?n[0]+t.offsetWidth+5:h,m=vk.rtl?p-f:n[0]-5-f;Object(r.setStyle)(_stlSide,{left:f-i,width:Math.max(m,0)}),__scrLeft=i}Object(r.setStyle)(_stlSide,{top:_stlSideTop,height:Math.max((window.lastWindowHeight||0)-_stlSideTop,0)}),__adsUpdate();var g=_tbLink.loc||_stlWas||o>200,v=o>250&&cur._regBar,b=0,y=!1;if(g){1!==_stlShown&&(Object(r.show)(_stlLeft,_stlSide),Object(r.addClass)(_stlLeft,"stl_active"),Object(r.addClass)(_stlSide,"stl_active"),_stlShown=1),_tbLink.loc&&cur._noUpLink&&(o=0),_stlWas&&o>500&&(_stlWas=0),o>200?(b=(o-200)/200,(_stlWasSet||_stlBack)&&(_stlWasSet=_stlBack=0,y=1,Object(r.val)(_stlText,Object(u.getLang)("global_to_top")),Object(r.removeClass)(_stlText,"down"),Object(r.removeClass)(_stlText,"back"))):(b=(200-o)/200,_stlWas?_stlWasSet||(_stlWasSet=1,y=0,Object(r.val)(_stlText,""),Object(r.addClass)(_stlText,"down"),_stlBack&&(_stlBack=0,Object(r.removeClass)(_stlText,"back"))):_tbLink.loc&&(_stlBack||(_stlBack=1,y=_tbLink.fast?1:0,Object(r.val)(_stlText,Object(u.getLang)("global_back")),Object(r.addClass)(_stlText,"back"),_stlWasSet&&(_stlWasSet=0,Object(r.removeClass)(_stlText,"down"))))),!1!==y&&Object(r.toggleClass)(_stlLeft,"over_fast",Object(r.hasClass)(_stlLeft,"over")&&y);var E={opacity:Math.min(Math.max(b,0),1)};vk.staticheader&&(E.top=-Math.min(Object(r.getSize)("page_header_cont")[1],o)),Object(r.setStyle)(_stlLeft,E)}else 0!==_stlShown&&(Object(r.hide)(_stlLeft,_stlSide),_stlShown=0);vk.id||(!_regBar&&v?(_regBar=1,Object(r.val)(Object(r.ge)("reg_bar_content"),cur._regBar),Object(s.animate)(Object(r.ge)("reg_bar"),{top:0,transition:s.Fx.Transitions.sineInOut},400),Object(s.animate)(Object(r.ge)("stl_bg"),{paddingTop:60,transition:s.Fx.Transitions.sineInOut},400)):_regBar&&!v&&(_regBar=0,Object(s.animate)(Object(r.ge)("reg_bar"),{top:-56,transition:s.Fx.Transitions.sineInOut},400),Object(s.animate)(Object(r.ge)("stl_bg"),{paddingTop:13,transition:s.Fx.Transitions.sineInOut},400)))}}}function _(e,t){if((e=Object(r.ge)(e))&&!e.btnevents)if(Object(r.hasClass)(e,"flat_button"))Object(i.isFunction)(t)&&(e.onclick=t.pbind(e));else{var n=e.parentNode;if(Object(r.hasClass)(n,"button_blue")||Object(r.hasClass)(n,"button_gray"))Object(i.isFunction)(t)&&(e.onclick=t.pbind(e));else{var a=!1;Object(o.addEvent)(e,"click mousedown mouseover mouseout",(function(i){if(!Object(r.hasClass)(n,"locked"))switch(i.type){case"click":if(!a)return;return e.className="button_hover",t(e),Object(o.cancelEvent)(i);case"mousedown":e.className="button_down";break;case"mouseover":a=!0,e.className="button_hover";break;case"mouseout":e.className="button",a=!1}})),e.btnevents=!0}}}function p(e){var t=Object(r.ge)(e);if(t)return Object(r.hasClass)(t,"ui_actions_menu_item_lock")}function h(e){if((e=Object(r.ge)(e))&&Object(r.hasClass)(e,"ui_actions_menu_item")&&!Object(r.hasClass)(e,"ui_actions_menu_item_lock")){Object(r.data)(e,"inner",e.innerHTML),Object(r.addClass)(e,"ui_actions_menu_item_lock");var t=Object(r.ce)("div",{className:"ui_actions_menu_item_lock_text"});Object(r.val)(t,e.innerHTML),e.appendChild(t),A(e)}}function f(e){(e=Object(r.ge)(e))&&Object(r.hasClass)(e,"ui_actions_menu_item")&&Object(r.hasClass)(e,"ui_actions_menu_item_lock")&&(Object(r.removeClass)(e,"ui_actions_menu_item_lock"),e.innerHTML=Object(r.data)(e,"inner"))}function m(e){var t=Object(r.ge)(e);if(t)return Object(r.hasClass)(t,"link_lock")}function g(e,t){var n=Object(r.ge)(e);n&&"a"===n.tagName.toLowerCase()&&!m(n)&&(Object(r.addClass)(n,"link_lock"),t&&Object(i.each)(t,(e,t)=>Object(r.addClass)(n,t)))}function v(e,t){var n=Object(r.ge)(e);n&&m(n)&&(Object(r.removeClass)(n,"link_lock"),t&&Object(i.each)(t,(e,t)=>Object(r.removeClass)(n,t)))}function b(e){var t=Object(r.ge)(e);if(t&&("button"===t.tagName.toLowerCase()||Object(r.hasClass)(t,"flat_button")||Object(r.hasClass)(t,"wr_header"))&&!w(t)){var n=Object(r.getSize)(t);Object(r.addClass)(t,"flat_btn_lock"),Object(r.data)(t,"inner",t.innerHTML),Object(r.setStyle)(t,{width:n[0],height:n[1]}),t.innerHTML="",A(t,"btn_lock")}}function y(e){var t=Object(r.ge)(e);t&&w(t)&&(I(t),t.innerHTML=Object(r.data)(t,"inner"),Object(r.removeClass)(t,"flat_btn_lock"),Object(r.setStyle)(t,{width:null,height:null}))}function E(e){return w(e)}function w(e){var t=Object(r.ge)(e);if(t)return Object(r.hasClass)(t,"flat_btn_lock")}function O(e,t){var n=Object(r.ge)(e);if(n&&"button"===n.tagName.toLowerCase())if(t){if(!Object(r.isVisible)(n))return;n.parentNode.insertBefore(Object(r.ce)("button",{innerHTML:n.innerHTML,className:n.className+" button_disabled"}),n),Object(r.hide)(n)}else{var o=Object(r.domPS)(n);o&&Object(r.hasClass)(o,"button_disabled")&&Object(r.re)(o),Object(r.show)(n)}}function C(e){if(void 0===window._sbWidth||e){var t=Object(r.ce)("div",{innerHTML:'<div style="height: 75px;">1<br>1</div>'},{overflowY:"scroll",position:"absolute",width:"50px",height:"50px"});bodyNode.appendChild(t),window._sbWidth=Math.max(0,t.offsetWidth-t.firstChild.offsetWidth-1),bodyNode.removeChild(t)}return window._sbWidth}function T(e){return e=Object(r.ge)(e),Object(r.hasClass)(e,"on")?1:""}function S(e,t){var n=Object(r.ge)(e);if(n&&!Object(r.hasClass)(n,"disabled"))return void 0===t&&(t=!T(n)),Object(r.toggleClass)(n,"on",t),n.setAttribute("aria-checked",t?"true":"false"),!1}function D(e,t){return e=Object(r.ge)(e),void 0===t&&(t=!Object(r.hasClass)(e,"disabled")),Object(r.toggleClass)(e,"disabled",t),"INPUT"===e.tagName&&(t?e.setAttribute("readonly","readonly"):e.removeAttribute("readonly")),!1}function P(e){return!!radioBtns[e]&&radioBtns[e].val}function k(e,t,n){if(radioBtns[n]&&!Object(r.hasClass)(e,"disabled"))return Object(i.each)(radioBtns[n].els,(function(){this&&(this==e?(Object(r.addClass)(this,"on"),this.setAttribute("aria-checked","true"),this.setAttribute("tabindex","0")):(Object(r.removeClass)(this,"on"),this.setAttribute&&(this.setAttribute("aria-checked","false"),this.setAttribute("tabindex","-1"))))})),radioBtns[n].val=t}function A(e,t,n,o){var i;if(e=Object(r.ge)(e))return Object(r.hasClass)(e,"pr")?i=e:(i=Object(r.se)(Object(r.rs)(vk.pr_tpl,{id:t||"",cls:n||""})),o?Object(r.domInsertBefore)(i,e):e.appendChild(i)),setTimeout((function(){Object(r.setStyle)(i,{opacity:1})})),i}function I(e){e&&(Object(r.hasClass)(e,"pr")?Object(r.setStyle)(e,{opacity:0}):Object(r.re)(Object(r.geByClass1)("pr",e)))}function x(e){Object(r.setStyle)(e,"pointer-events","none")}function j(e){Object(r.setStyle)(e,"pointer-events","")}function M(){window.__scrLeft=0,window.radioBtns={}}},vDiJ:function(e,t,n){"use strict";n.r(t),n.d(t,"SECTION",(function(){return r})),n.d(t,"PAGINATED_BLOCKS_CONTAINER",(function(){return o})),n.d(t,"BLOCK_ITEMS_CONTAINER",(function(){return i})),n.d(t,"BLOCK_ITEMS_REORDERABLE",(function(){return a})),n.d(t,"BLOCK_ELEMENT",(function(){return s})),n.d(t,"BLOCK_DIVIDED",(function(){return c})),n.d(t,"AUTO_LIST_LOADER",(function(){return u})),n.d(t,"BLOCK_CONTENT",(function(){return l})),n.d(t,"SORTER_ACTION",(function(){return d})),n.d(t,"SORTER_ACTION_DATA",(function(){return _})),n.d(t,"GALLERY",(function(){return p}));var r="CatalogSection",o="CatalogSection__paginatedBlocks",i="CatalogBlock__itemsContainer",a="CatalogBlock__itemsContainer--reorderable",s="CatalogBlock",c="CatalogBlock--divided",u="CatalogBlock__autoListLoader",l="CatalogBlock__content",d="CatalogBlock__sorter",_="CatalogBlock__sortingData",p="ui_gallery"},vKrd:function(e,t,n){var r=n("y3w9"),o=n("0/R4"),i=n("pbhE");e.exports=function(e,t){if(r(e),o(t)&&t.constructor===e)return t;var n=i.f(e);return(0,n.resolve)(t),n.promise}},vhPU:function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},viRO:function(e,t,n){"use strict";var r=n("15HP"),o="function"==typeof Symbol&&Symbol.for,i=o?Symbol.for("react.element"):60103,a=o?Symbol.for("react.portal"):60106,s=o?Symbol.for("react.fragment"):60107,c=o?Symbol.for("react.strict_mode"):60108,u=o?Symbol.for("react.profiler"):60114,l=o?Symbol.for("react.provider"):60109,d=o?Symbol.for("react.context"):60110,_=o?Symbol.for("react.forward_ref"):60112,p=o?Symbol.for("react.suspense"):60113,h=o?Symbol.for("react.memo"):60115,f=o?Symbol.for("react.lazy"):60116,m="function"==typeof Symbol&&Symbol.iterator;function g(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function y(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||v}function E(){}function w(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||v}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(g(85));this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},E.prototype=y.prototype;var O=w.prototype=new E;O.constructor=w,r(O,y.prototype),O.isPureReactComponent=!0;var C={current:null},T=Object.prototype.hasOwnProperty,S={key:!0,ref:!0,__self:!0,__source:!0};function D(e,t,n){var r,o={},a=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)T.call(t,r)&&!S.hasOwnProperty(r)&&(o[r]=t[r]);var c=arguments.length-2;if(1===c)o.children=n;else if(1<c){for(var u=Array(c),l=0;l<c;l++)u[l]=arguments[l+2];o.children=u}if(e&&e.defaultProps)for(r in c=e.defaultProps)void 0===o[r]&&(o[r]=c[r]);return{$$typeof:i,type:e,key:a,ref:s,props:o,_owner:C.current}}function P(e){return"object"==typeof e&&null!==e&&e.$$typeof===i}var k=/\/+/g,A=[];function I(e,t,n,r){if(A.length){var o=A.pop();return o.result=e,o.keyPrefix=t,o.func=n,o.context=r,o.count=0,o}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function x(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>A.length&&A.push(e)}function j(e,t,n){return null==e?0:function e(t,n,r,o){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var c=!1;if(null===t)c=!0;else switch(s){case"string":case"number":c=!0;break;case"object":switch(t.$$typeof){case i:case a:c=!0}}if(c)return r(o,t,""===n?"."+M(t,0):n),1;if(c=0,n=""===n?".":n+":",Array.isArray(t))for(var u=0;u<t.length;u++){var l=n+M(s=t[u],u);c+=e(s,l,r,o)}else if(null===t||"object"!=typeof t?l=null:l="function"==typeof(l=m&&t[m]||t["@@iterator"])?l:null,"function"==typeof l)for(t=l.call(t),u=0;!(s=t.next()).done;)c+=e(s=s.value,l=n+M(s,u++),r,o);else if("object"===s)throw r=""+t,Error(g(31,"[object Object]"===r?"object with keys {"+Object.keys(t).join(", ")+"}":r,""));return c}(e,"",t,n)}function M(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function L(e,t){e.func.call(e.context,t,e.count++)}function R(e,t,n){var r=e.result,o=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?B(e,r,n,(function(e){return e})):null!=e&&(P(e)&&(e=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,o+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(k,"$&/")+"/")+n)),r.push(e))}function B(e,t,n,r,o){var i="";null!=n&&(i=(""+n).replace(k,"$&/")+"/"),j(e,R,t=I(t,i,r,o)),x(t)}var N={current:null};function U(){var e=N.current;if(null===e)throw Error(g(321));return e}var F={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:C,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:function(e,t,n){if(null==e)return e;var r=[];return B(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;j(e,L,t=I(null,null,t,n)),x(t)},count:function(e){return j(e,(function(){return null}),null)},toArray:function(e){var t=[];return B(e,t,null,(function(e){return e})),t},only:function(e){if(!P(e))throw Error(g(143));return e}},t.Component=y,t.Fragment=s,t.Profiler=u,t.PureComponent=w,t.StrictMode=c,t.Suspense=p,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F,t.cloneElement=function(e,t,n){if(null==e)throw Error(g(267,e));var o=r({},e.props),a=e.key,s=e.ref,c=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,c=C.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(l in t)T.call(t,l)&&!S.hasOwnProperty(l)&&(o[l]=void 0===t[l]&&void 0!==u?u[l]:t[l])}var l=arguments.length-2;if(1===l)o.children=n;else if(1<l){u=Array(l);for(var d=0;d<l;d++)u[d]=arguments[d+2];o.children=u}return{$$typeof:i,type:e.type,key:a,ref:s,props:o,_owner:c}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:d,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},t.createElement=D,t.createFactory=function(e){var t=D.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:_,render:e}},t.isValidElement=P,t.lazy=function(e){return{$$typeof:f,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return U().useCallback(e,t)},t.useContext=function(e,t){return U().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return U().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return U().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return U().useLayoutEffect(e,t)},t.useMemo=function(e,t){return U().useMemo(e,t)},t.useReducer=function(e,t,n){return U().useReducer(e,t,n)},t.useRef=function(e){return U().useRef(e)},t.useState=function(e){return U().useState(e)},t.version="16.14.0"},vkmG:function(e,t,n){"use strict";n.r(t),n.d(t,"symbols",(function(){return i})),n.d(t,"escape",(function(){return a})),n.d(t,"encodeHTMLEntities",(function(){return s})),n.d(t,"decodeHTMLEntities",(function(){return c}));n("HEwt"),n("a1Th"),n("Btvt"),n("rGqo"),n("rE2o"),n("ioFf"),n("Oyvg"),n("pIFo");function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i=[["&amp;","&"],["&lt;","<"],["&gt;",">"],["&quot;",'"']];function a(e){return i.reduce((e,t)=>{var n=r(t,2),o=n[0],i=n[1];return e.replace(new RegExp(i,"ig"),o)},e)}function s(e){return a(e).replace(/[\u00A0-\u9999<>\&]/gim,e=>`&#${e.charCodeAt(0)};`)}function c(e){return i.reduce((e,t)=>{var n=r(t,2),o=n[0],i=n[1];return e.replace(new RegExp(o,"ig"),i)},e).replace(/&#(\d+);/g,(e,t)=>String.fromCodePoint(t))}},w2a5:function(e,t,n){var r=n("aCFj"),o=n("ne8i"),i=n("d/Gc");e.exports=function(e){return function(t,n,a){var s,c=r(t),u=o(c.length),l=i(a,u);if(e&&n!=n){for(;u>l;)if((s=c[l++])!=s)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===n)return e||l||0;return!e&&-1}}},wNya:function(e,t,n){"use strict";n.r(t),n.d(t,"TaskName",(function(){return r})),n.d(t,"AudioTaskManager",(function(){return i}));var r,o=n("YvCB");!function(e){e.URL="url",e.PLAYBACK_RATE="playback_rate",e.DELAY="delay",e.SEEK="seek",e.PAUSE="pause",e.PLAY="play",e.VOL_SET="vol_set",e.VOL_UP="vol_up",e.VOL_DOWN="vol_down"}(r||(r={}));var i=function(){function e(e){this.impl=e,this.taskIDCounter=1,this.tasks=[],this.taskInProgress=null,this.taskAbort=null}return e.prototype.newTask=function(e,t){var n,r,o=new Promise((function(e,t){n=e,r=t}));return this.tasks.push({name:e,fn:function(){return t().then(n).catch(r)},id:e+"_"+this.taskIDCounter++}),this.doTasks(),o},e.prototype.clearAllTasks=function(){this.taskAbort=this.taskInProgress,this.taskInProgress=null,this.tasks=[]},e.prototype.clearTask=function(e){this.tasks=this.tasks||[],this.tasks=this.tasks.filter((function(t){return t.name!==e}))},e.prototype.doTasks=function(){var e=this;if(!this.taskInProgress){var t=this.tasks.shift();t&&(this.taskInProgress=t.id,this.ensureImplReady().then((function(){return t.fn()})).then((function(){e.taskAbort!==t.id?(e.taskInProgress=null,e.doTasks()):e.taskAbort=null})))}},e.prototype.ensureImplReady=function(){var e=this;return new Promise((function(t){return e.impl.onReady(t)}))},e.prototype.delay=function(e){return this.newTask(r.DELAY,(function(){return new Promise((function(t){return Object(o.setWorkerTimeout)(t,e)}))}))},e.prototype.setUrl=function(e){var t=this;return this.newTask(r.URL,(function(){return new Promise((function(n){return t.impl.setUrl(e,n)}))}))},e.prototype.seekImmediate=function(e){this.impl.seek(e)},e.prototype.seek=function(e){var t=this;return this.clearTask(r.SEEK),this.newTask(r.SEEK,(function(){return new Promise((function(n){t.seekImmediate(e),n()}))}))},e.prototype.pause=function(){var e=this;return this.newTask(r.PAUSE,(function(){return new Promise((function(t){e.impl.pause(),t()}))}))},e.prototype.play=function(){var e=this;return window.browser.safari&&this.impl.play(),this.newTask(r.PLAY,(function(){return new Promise((function(t,n){e.impl.play().then(t).catch(n)}))}))},e.prototype.setVolume=function(e,t,n){var o=this;if(void 0===n&&(n=null),t){var i=e?r.VOL_UP:r.VOL_DOWN;return this.newTask(i,(function(){return new Promise((function(t){return o.impl.fadeVolume(e,n,(function(){return t()}))}))}))}return this.newTask(r.VOL_SET,(function(){return new Promise((function(t){o.impl.setVolume(e),t()}))}))},e.prototype.updatePlaybackRate=function(e){var t=this;return this.newTask(r.PLAYBACK_RATE,(function(){return new Promise((function(n){t.impl.setPlaybackRate(e),n()}))}))},e}()},wVf2:function(e,t,n){"use strict";function r(){return window.vk.loginDomain}n.r(t),n.d(t,"getLoginDomain",(function(){return r}))},wZQE:function(e,t,n){e.exports=function(){"use strict";var e=function(){return(e=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},t=function(e,t,n,r,o){if(e<7&&t<7)return!1;if(e>=n-7&&t<7)return!1;if(e<7&&t>=n-7)return!1;if(o){var i=9;n<=25&&i--;var a=(n-14-i)/2-1;return n<=25&&a++,!(e>7+a&&e<n-7-a-1&&t>7+a&&t<n-7-a-1)&&0<=e&&e<n&&0<=t&&t<n&&r[t][e]}return r[t]&&r[t][e]},n=function(e,n,r,o,i){return void 0===i&&(i=!0),{l:t(e-1,n,r,o,i),r:t(e+1,n,r,o,i),t:t(e,n-1,r,o,i),b:t(e,n+1,r,o,i),current:t(e,n,r,o,i)}},r=function(){function e(t,n,r,o){if(this.version=t,this.errorCorrectionLevel=n,this.mask=o,this.modules=[],this.isFunction=[],t<e.MIN_VERSION||t>e.MAX_VERSION)throw"Version value out of range";if(o<-1||o>7)throw"Mask value out of range";this.size=4*t+17;for(var i=[],a=0;a<this.size;a++)i.push(!1);for(a=0;a<this.size;a++)this.modules.push(i.slice()),this.isFunction.push(i.slice());this.drawFunctionPatterns();var s=this.addEccAndInterleave(r);if(this.drawCodewords(s),-1==o){var c=1e9;for(a=0;a<8;a++){this.applyMask(a),this.drawFormatBits(a);var u=this.getPenaltyScore();u<c&&(o=a,c=u),this.applyMask(a)}}if(o<0||o>7)throw"Assertion error";this.mask=o,this.applyMask(o),this.drawFormatBits(o),this.isFunction=[]}return e.encodeText=function(t,n){var r=i.makeSegments(t);return e.encodeSegments(r,n)},e.encodeBinary=function(t,n){var r=i.makeBytes(t);return e.encodeSegments([r],n)},e.encodeSegments=function(t,n,r,o,a,c){if(void 0===r&&(r=1),void 0===o&&(o=40),void 0===a&&(a=-1),void 0===c&&(c=!0),!(e.MIN_VERSION<=r&&r<=o&&o<=e.MAX_VERSION)||a<-1||a>7)throw"Invalid value";var u,l;for(u=r;;u++){var d=8*e.getNumDataCodewords(u,n),_=i.getTotalBits(t,u);if(_<=d){l=_;break}if(u>=o)throw"Data too long"}for(var p=0,h=[e.Ecc.MEDIUM,e.Ecc.QUARTILE,e.Ecc.HIGH];p<h.length;p++){var f=h[p];c&&l<=8*e.getNumDataCodewords(u,f)&&(n=f)}for(var m=new s,g=0,v=t;g<v.length;g++){var b=v[g];m.appendBits(b.mode.modeBits,4),m.appendBits(b.numChars,b.mode.numCharCountBits(u));for(var y=0,E=b.getData();y<E.length;y++){var w=E[y];m.array.push(w)}}if(m.array.length!=l)throw"Assertion error";var O=8*e.getNumDataCodewords(u,n);if(m.array.length>O)throw"Assertion error";if(m.appendBits(0,Math.min(4,O-m.array.length)),m.appendBits(0,(8-m.array.length%8)%8),m.array.length%8!=0)throw"Assertion error";for(var C=236;m.array.length<O;C^=253)m.appendBits(C,8);for(var T=[];8*T.length<m.array.length;)T.push(0);return m.array.forEach((function(e,t){return T[t>>>3]|=e<<7-(7&t)})),new e(u,n,T,a)},e.prototype.getModule=function(e,t){return 0<=e&&e<this.size&&0<=t&&t<this.size&&this.modules[t][e]},e.prototype.drawCanvas=function(e,t,n){if(e<=0||t<0)throw"Value out of range";var r=(this.size+2*t)*e;n.width=r,n.height=r;for(var o=n.getContext("2d"),i=-t;i<this.size+t;i++)for(var a=-t;a<this.size+t;a++)o.fillStyle=this.getModule(a,i)?"#000000":"#FFFFFF",o.fillRect((a+t)*e,(i+t)*e,e,e)},e.prototype.toSvgString=function(e){if(e<0)throw"Border must be non-negative";for(var t=[],n=0;n<this.size;n++)for(var r=0;r<this.size;r++)this.getModule(r,n)&&t.push("M"+(r+e)+","+(n+e)+"h1v1h-1z");return'<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 '+(this.size+2*e)+" "+(this.size+2*e)+'" stroke="none">\n\t<rect width="100%" height="100%" fill="#FFFFFF"/>\n\t<path d="'+t.join(" ")+'" fill="#000000"/>\n</svg>\n'},e.prototype.drawFunctionPatterns=function(){for(var e=0;e<this.size;e++)this.setFunctionModule(6,e,e%2==0),this.setFunctionModule(e,6,e%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);var t=this.getAlignmentPatternPositions(),n=t.length;for(e=0;e<n;e++)for(var r=0;r<n;r++)0==e&&0==r||0==e&&r==n-1||e==n-1&&0==r||this.drawAlignmentPattern(t[e],t[r]);this.drawFormatBits(0),this.drawVersion()},e.prototype.drawFormatBits=function(e){for(var t=this.errorCorrectionLevel.formatBits<<3|e,n=t,r=0;r<10;r++)n=n<<1^1335*(n>>>9);var i=21522^(t<<10|n);if(i>>>15!=0)throw"Assertion error";for(r=0;r<=5;r++)this.setFunctionModule(8,r,o(i,r));for(this.setFunctionModule(8,7,o(i,6)),this.setFunctionModule(8,8,o(i,7)),this.setFunctionModule(7,8,o(i,8)),r=9;r<15;r++)this.setFunctionModule(14-r,8,o(i,r));for(r=0;r<8;r++)this.setFunctionModule(this.size-1-r,8,o(i,r));for(r=8;r<15;r++)this.setFunctionModule(8,this.size-15+r,o(i,r));this.setFunctionModule(8,this.size-8,!0)},e.prototype.drawVersion=function(){if(!(this.version<7)){for(var e=this.version,t=0;t<12;t++)e=e<<1^7973*(e>>>11);var n=this.version<<12|e;if(n>>>18!=0)throw"Assertion error";for(t=0;t<18;t++){var r=o(n,t),i=this.size-11+t%3,a=Math.floor(t/3);this.setFunctionModule(i,a,r),this.setFunctionModule(a,i,r)}}},e.prototype.drawFinderPattern=function(e,t){for(var n=-4;n<=4;n++)for(var r=-4;r<=4;r++){var o=Math.max(Math.abs(r),Math.abs(n)),i=e+r,a=t+n;0<=i&&i<this.size&&0<=a&&a<this.size&&this.setFunctionModule(i,a,2!=o&&4!=o)}},e.prototype.drawAlignmentPattern=function(e,t){for(var n=-2;n<=2;n++)for(var r=-2;r<=2;r++)this.setFunctionModule(e+r,t+n,1!=Math.max(Math.abs(r),Math.abs(n)))},e.prototype.setFunctionModule=function(e,t,n){this.modules[t][e]=n,this.isFunction[t][e]=!0},e.prototype.addEccAndInterleave=function(t){var n=this.version,r=this.errorCorrectionLevel;if(t.length!=e.getNumDataCodewords(n,r))throw"Invalid argument";for(var o=e.NUM_ERROR_CORRECTION_BLOCKS[r.ordinal][n],i=e.ECC_CODEWORDS_PER_BLOCK[r.ordinal][n],s=Math.floor(e.getNumRawDataModules(n)/8),c=o-s%o,u=Math.floor(s/o),l=[],d=new a(i),_=0,p=0;_<o;_++){var h=t.slice(p,p+u-i+(_<c?0:1));p+=h.length;var f=d.getRemainder(h);_<c&&h.push(0),l.push(h.concat(f))}var m=[];for(_=0;_<l[0].length;_++)for(var g=0;g<l.length;g++)(_!=u-i||g>=c)&&m.push(l[g][_]);if(m.length!=s)throw"Assertion error";return m},e.prototype.drawCodewords=function(t){if(t.length!=Math.floor(e.getNumRawDataModules(this.version)/8))throw"Invalid argument";for(var n=0,r=this.size-1;r>=1;r-=2){6==r&&(r=5);for(var i=0;i<this.size;i++)for(var a=0;a<2;a++){var s=r-a,c=0==(r+1&2)?this.size-1-i:i;!this.isFunction[c][s]&&n<8*t.length&&(this.modules[c][s]=o(t[n>>>3],7-(7&n)),n++)}}if(n!=8*t.length)throw"Assertion error"},e.prototype.applyMask=function(e){if(e<0||e>7)throw"Mask value out of range";for(var t=0;t<this.size;t++)for(var n=0;n<this.size;n++){var r=void 0;switch(e){case 0:r=(n+t)%2==0;break;case 1:r=t%2==0;break;case 2:r=n%3==0;break;case 3:r=(n+t)%3==0;break;case 4:r=(Math.floor(n/3)+Math.floor(t/2))%2==0;break;case 5:r=n*t%2+n*t%3==0;break;case 6:r=(n*t%2+n*t%3)%2==0;break;case 7:r=((n+t)%2+n*t%3)%2==0;break;default:throw"Assertion error"}!this.isFunction[t][n]&&r&&(this.modules[t][n]=!this.modules[t][n])}},e.prototype.getPenaltyScore=function(){for(var t=0,n=0;n<this.size;n++){for(var r=[0,0,0,0,0,0,0],o=!1,i=0,a=0;a<this.size;a++)this.modules[n][a]==o?5==++i?t+=e.PENALTY_N1:i>5&&t++:(e.addRunToHistory(i,r),!o&&e.hasFinderLikePattern(r)&&(t+=e.PENALTY_N3),o=this.modules[n][a],i=1);e.addRunToHistory(i,r),o&&e.addRunToHistory(0,r),e.hasFinderLikePattern(r)&&(t+=e.PENALTY_N3)}for(a=0;a<this.size;a++){r=[0,0,0,0,0,0,0],o=!1;var s=0;for(n=0;n<this.size;n++)this.modules[n][a]==o?5==++s?t+=e.PENALTY_N1:s>5&&t++:(e.addRunToHistory(s,r),!o&&e.hasFinderLikePattern(r)&&(t+=e.PENALTY_N3),o=this.modules[n][a],s=1);e.addRunToHistory(s,r),o&&e.addRunToHistory(0,r),e.hasFinderLikePattern(r)&&(t+=e.PENALTY_N3)}for(n=0;n<this.size-1;n++)for(a=0;a<this.size-1;a++)(o=this.modules[n][a])==this.modules[n][a+1]&&o==this.modules[n+1][a]&&o==this.modules[n+1][a+1]&&(t+=e.PENALTY_N2);for(var c=0,u=0,l=this.modules;u<l.length;u++)for(var d=0,_=l[u];d<_.length;d++)(o=_[d])&&c++;var p=this.size*this.size;return t+=(Math.ceil(Math.abs(20*c-10*p)/p)-1)*e.PENALTY_N4},e.prototype.getAlignmentPatternPositions=function(){if(1==this.version)return[];for(var e=Math.floor(this.version/7)+2,t=32==this.version?26:2*Math.ceil((this.size-13)/(2*e-2)),n=[6],r=this.size-7;n.length<e;r-=t)n.splice(1,0,r);return n},e.getNumRawDataModules=function(t){if(t<e.MIN_VERSION||t>e.MAX_VERSION)throw"Version number out of range";var n=(16*t+128)*t+64;if(t>=2){var r=Math.floor(t/7)+2;n-=(25*r-10)*r-55,t>=7&&(n-=36)}return n},e.getNumDataCodewords=function(t,n){return Math.floor(e.getNumRawDataModules(t)/8)-e.ECC_CODEWORDS_PER_BLOCK[n.ordinal][t]*e.NUM_ERROR_CORRECTION_BLOCKS[n.ordinal][t]},e.addRunToHistory=function(e,t){t.pop(),t.unshift(e)},e.hasFinderLikePattern=function(e){var t=e[1];return t>0&&e[2]==t&&e[4]==t&&e[5]==t&&e[3]==3*t&&Math.max(e[0],e[6])>=4*t},e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e}();function o(e,t){return 0!=(e>>>t&1)}var i=function(){function e(e,t,n){if(this.mode=e,this.numChars=t,this.bitData=n,t<0)throw"Invalid argument";this.bitData=n.slice()}return e.makeBytes=function(t){for(var n=new s,r=0,o=t;r<o.length;r++){var i=o[r];n.appendBits(i,8)}return new e(e.Mode.BYTE,t.length,n.array)},e.makeNumeric=function(t){if(!this.NUMERIC_REGEX.test(t))throw"String contains non-numeric characters";for(var n=new s,r=0;r<t.length;){var o=Math.min(t.length-r,3);n.appendBits(parseInt(t.substr(r,o),10),3*o+1),r+=o}return new e(e.Mode.NUMERIC,t.length,n.array)},e.makeAlphanumeric=function(t){if(!this.ALPHANUMERIC_REGEX.test(t))throw"String contains unencodable characters in alphanumeric mode";var n,r=new s;for(n=0;n+2<=t.length;n+=2){var o=45*e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(n));o+=e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(n+1)),r.appendBits(o,11)}return n<t.length&&r.appendBits(e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(n)),6),new e(e.Mode.ALPHANUMERIC,t.length,r.array)},e.makeSegments=function(t){return""==t?[]:this.NUMERIC_REGEX.test(t)?[e.makeNumeric(t)]:this.ALPHANUMERIC_REGEX.test(t)?[e.makeAlphanumeric(t)]:[e.makeBytes(e.toUtf8ByteArray(t))]},e.makeEci=function(t){var n=new s;if(t<0)throw"ECI assignment value out of range";if(t<128)n.appendBits(t,8);else if(t<16384)n.appendBits(2,2),n.appendBits(t,14);else{if(!(t<1e6))throw"ECI assignment value out of range";n.appendBits(6,3),n.appendBits(t,21)}return new e(e.Mode.ECI,0,n.array)},e.prototype.getData=function(){return this.bitData.slice()},e.getTotalBits=function(e,t){for(var n=0,r=0,o=e;r<o.length;r++){var i=o[r],a=i.mode.numCharCountBits(t);if(i.numChars>=1<<a)return 1/0;n+=4+a+i.bitData.length}return n},e.toUtf8ByteArray=function(e){e=encodeURI(e);for(var t=[],n=0;n<e.length;n++)"%"!=e.charAt(n)?t.push(e.charCodeAt(n)):(t.push(parseInt(e.substr(n+1,2),16)),n+=2);return t},e.NUMERIC_REGEX=/^[0-9]*$/,e.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,e.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",e}(),a=function(){function e(t){if(this.coefficients=[],t<1||t>255)throw"Degree out of range";for(var n=this.coefficients,r=0;r<t-1;r++)n.push(0);n.push(1);var o=1;for(r=0;r<t;r++){for(var i=0;i<n.length;i++)n[i]=e.multiply(n[i],o),i+1<n.length&&(n[i]^=n[i+1]);o=e.multiply(o,2)}}return e.prototype.getRemainder=function(t){for(var n=this.coefficients.map((function(e){return 0})),r=function(t){var r=t^n.shift();n.push(0),o.coefficients.forEach((function(t,o){return n[o]^=e.multiply(t,r)}))},o=this,i=0,a=t;i<a.length;i++)r(a[i]);return n},e.multiply=function(e,t){if(e>>>8!=0||t>>>8!=0)throw"Byte out of range";for(var n=0,r=7;r>=0;r--)n=n<<1^285*(n>>>7),n^=(t>>>r&1)*e;if(n>>>8!=0)throw"Assertion error";return n},e}(),s=function(){function e(){this.array=[]}return e.prototype.appendBits=function(e,t){if(t<0||t>31||e>>>t!=0)throw"Value out of range";for(var n=t-1;n>=0;n--)this.array.push(e>>>n&1)},e}();return function(e){var t=function(){function e(e,t){this.ordinal=e,this.formatBits=t}return e.LOW=new e(0,1),e.MEDIUM=new e(1,0),e.QUARTILE=new e(2,3),e.HIGH=new e(3,2),e}();e.Ecc=t}(r||(r={})),function(e){var t=function(){function e(e,t){this.modeBits=e,this.numBitsCharCount=t}return e.prototype.numCharCountBits=function(e){return this.numBitsCharCount[Math.floor((e+7)/17)]},e.NUMERIC=new e(1,[10,12,14]),e.ALPHANUMERIC=new e(2,[9,11,13]),e.BYTE=new e(4,[8,16,16]),e.KANJI=new e(8,[8,10,12]),e.ECI=new e(7,[0,0,0]),e}();e.Mode=t}(i||(i={})),{createQR:function(o,a,s,c){if("string"!=typeof o)throw new TypeError("Enter text for encoding");var u=e(e(e({},"object"==typeof a&&null!==a?a:{}),"object"==typeof c&&null!==c?c:{}),{qrSize:"object"==typeof a&&null!==a&&"number"==typeof a.qrSize?a.qrSize:a,className:"object"==typeof a&&null!==a&&"string"==typeof a.className?a.className:s}),l=[r.Ecc.LOW,r.Ecc.MEDIUM,r.Ecc.QUARTILE,r.Ecc.HIGH],d={qrSize:"number"==typeof u.qrSize?u.qrSize:128,className:"string"==typeof u.className?u.className:s||"",isShowLogo:!!u.isShowLogo||!1,isShowBackground:!!u.isShowBackground||!1,foregroundColor:"string"==typeof u.foregroundColor?u.foregroundColor:"#000000",backgroundColor:"string"==typeof u.backgroundColor?u.backgroundColor:"#ffffff",logoColor:"string"==typeof u.logoColor?u.logoColor:"#4680c2",suffix:u.suffix?u.suffix.toString():"0",logoData:"string"==typeof u.logoData?u.logoData:null,ecc:"number"==typeof u.ecc&&l[u.ecc]?u.ecc:3},_=i.makeSegments(o);return function(e,r){if("number"!=typeof r.qrSize)throw new Error("Size should be a number");if("string"!=typeof r.className)throw new Error("Classname should be a string");for(var o=84.7776815,i=[],a=0,s=0,c=0,u=0,l=0;l<e.size;l++){a=0;for(var d=0;d<e.size;d++){c=d+a,a+=96,u=l+s;var _,p=n(d,l,e.size,e.modules,r.isShowLogo),h="";p.current?(h=!(h=h||p.l||p.r||p.t||p.b?"":"empty")&&p.l&&p.r||p.t&&p.b?"rect":"")||(h+=p.l?"l":p.r?"r":"",(h+=p.t?"t":p.b?"b":"")||(h="empty")):h=!(h=!(h=!(h=!h&&p.l&&p.t&&t(d-1,l-1,e.size,e.modules,r.isShowLogo)?"n_lt":"")&&p.l&&p.b&&t(d-1,l+1,e.size,e.modules,r.isShowLogo)?"n_lb":"")&&p.r&&p.t&&t(d+1,l-1,e.size,e.modules,r.isShowLogo)?"n_rt":"")&&p.r&&p.b&&t(d+1,l+1,e.size,e.modules,r.isShowLogo)?"n_rb":"",h&&(_='<use xlink:href="#'+h+"-"+r.suffix+'"/>',i.push('<g transform="translate('+c+","+u+')">'+_+"</g>"))}s+=96}var f="",m=(e.size-21)/2*96+672-10;e.size<=25&&(f="scale(0.85)",m+=50);var g=96*(e.size-7);i.push('<use fill-rule="evenodd" transform="translate(0,0)" xlink:href="#point-'+r.suffix+'"/>'),i.push('<use fill-rule="evenodd" transform="translate('+g+',0)" xlink:href="#point-'+r.suffix+'"/>'),i.push('<use fill-rule="evenodd" transform="translate(0,'+g+')" xlink:href="#point-'+r.suffix+'"/>'),r.isShowLogo&&(r.logoData?i.push('\n        <image \n          preserveAspectRatio="xMidYMid slice" clip-path="url(#logo-mask-'+r.suffix+')"\n          style="width: 750px; height: 750px;" width="750" height="750" \n          transform="translate('+m+","+m+") "+f+'" \n          xlink:href="'+r.logoData+'" \n        />\n      '):i.push('\n        <use style="width: 750px; height: 750px;" width="750" height="750" \n          fill="none" \n          fill-rule="evenodd" \n          transform="translate('+m+","+m+") "+f+'" xlink:href="#vk_logo-'+r.suffix+'"\n        />\n      '));var v=99*e.size,b="",y="translate(0,0)";if(r.isShowBackground){var E=(r.qrSize-40)/r.qrSize,w=v/r.qrSize*21;b='\n      <rect \n        x="0" \n        width="'+v+'" \n        height="'+v+'" \n        rx="'+Math.ceil(v/(r.qrSize/36))+'" \n        fill="'+r.backgroundColor+'"\n      />',y="translate("+w+", "+w+") scale("+E+")"}var O="M0,0 L66,0 C"+o+",-3.44940413e-15 100,15.2223185 100,34 L100,66 C100,"+o+" "+o+",100 66,100 L0,100 L0,0 Z",C="M0,0 L100,0 L100,66 C100,"+o+" "+o+",100 66,100 L0,100 L0,0 Z";return'\n  <svg \n    version="1.1" \n    viewBox="0 0 '+v+" "+v+'" \n    width="'+r.qrSize+'px" \n    height="'+r.qrSize+'px"\n    '+(r.className?'class="'+r.className+'"':"")+' \n    xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\n  >\n    <defs>\n      <rect id="rect-'+r.suffix+'" width="100" height="100" fill="'+r.foregroundColor+'"/>\n      <path \n        id="empty-'+r.suffix+'" \n        d="M0,28.6v42.9C0,87.3,12.8,100,28.6,100h42.9c15.9,0,28.6-12.8,28.6-28.6V28.6C100,12.7,87.2,0,71.4,0H28.6 C12.8,0,0,12.8,0,28.6z"\n        fill="'+r.foregroundColor+'"\n      />\n      <path id="b-'+r.suffix+'" d="'+O+'" transform="rotate(-90 50 50)" fill="'+r.foregroundColor+'"/>\n      <path id="r-'+r.suffix+'" d="'+O+'" transform="rotate(-180 50 50)" fill="'+r.foregroundColor+'"/>\n      <path id="l-'+r.suffix+'" d="'+O+'" fill="'+r.foregroundColor+'"/>\n      <path id="t-'+r.suffix+'" d="'+O+'" transform="rotate(90 50 50)" fill="'+r.foregroundColor+'"/>\n      <path id="l-'+r.suffix+'" d="'+C+'" transform="rotate(-90 50 50)" fill="'+r.foregroundColor+'"/>\n      <path id="lt-'+r.suffix+'" d="'+C+'" fill="'+r.foregroundColor+'"/>\n      <path id="lb-'+r.suffix+'" d="'+C+'" transform="rotate(-90 50 50)" fill="'+r.foregroundColor+'"/>\n      <path id="rb-'+r.suffix+'" d="'+C+'" transform="rotate(-180 50 50)" fill="'+r.foregroundColor+'"/>\n      <path id="rt-'+r.suffix+'" d="'+C+'" transform="rotate(90 50 50)" fill="'+r.foregroundColor+'"/>\n      <path \n        id="n_lt-'+r.suffix+'" \n        d="M30.5,2V0H0v30.5h2C2,14.7,14.8,2,30.5,2z" \n        fill="'+r.foregroundColor+'"\n      />\n      <path \n        id="n_lb-'+r.suffix+'"\n        d="M2,69.5H0V100h30.5v-2C14.7,98,2,85.2,2,69.5z" \n        fill="'+r.foregroundColor+'"\n      />\n      <path \n        id="n_rt-'+r.suffix+'" \n        d="M98,30.5h2V0H69.5v2C85.3,2,98,14.8,98,30.5z" \n        fill="'+r.foregroundColor+'"\n      />\n      <path id="n_rb-'+r.suffix+'" \n        d="M69.5,98v2H100V69.5h-2C98,85.3,85.2,98,69.5,98z" \n        fill="'+r.foregroundColor+'"\n      />\n      <path \n        id="point-'+r.suffix+'" \n        fill="'+r.foregroundColor+'"\n        d="M600.001786,457.329333 L600.001786,242.658167 C600.001786,147.372368 587.039517,124.122784 581.464617,118.535383 C575.877216,112.960483 552.627632,99.9982143 457.329333,99.9982143 L242.670667,99.9982143 C147.372368,99.9982143 124.122784,112.960483 118.547883,118.535383 C112.972983,124.122784 99.9982143,147.372368 99.9982143,242.658167 L99.9982143,457.329333 C99.9982143,552.627632 112.972983,575.877216 118.547883,581.464617 C124.122784,587.027017 147.372368,600.001786 242.670667,600.001786 L457.329333,600.001786 C552.627632,600.001786 575.877216,587.027017 581.464617,581.464617 C587.039517,575.877216 600.001786,552.627632 600.001786,457.329333 Z M457.329333,0 C653.338333,0 700,46.6616668 700,242.658167 C700,438.667167 700,261.332833 700,457.329333 C700,653.338333 653.338333,700 457.329333,700 C261.332833,700 438.667167,700 242.670667,700 C46.6616668,700 0,653.338333 0,457.329333 C0,261.332833 0,352.118712 0,242.658167 C0,46.6616668 46.6616668,0 242.670667,0 C438.667167,0 261.332833,0 457.329333,0 Z M395.996667,200 C480.004166,200 500,220.008332 500,303.990835 C500,387.998334 500,312.001666 500,395.996667 C500,479.991668 480.004166,500 395.996667,500 C312.001666,500 387.998334,500 304.003333,500 C220.008332,500 200,479.991668 200,395.996667 C200,312.001666 200,350.906061 200,303.990835 C200,220.008332 220.008332,200 304.003333,200 C387.998334,200 312.001666,200 395.996667,200 Z" \n      />\n      <g id="vk_logo-'+r.suffix+'">\n        <path \n          fill="'+r.logoColor+'" \n          d="M253.066667,0 C457.466667,0 272.533333,0 476.933333,0 C681.333333,0 730,48.6666667 730,253.066667 C730,457.466667 730,272.533333 730,476.933333 C730,681.333333 681.333333,730 476.933333,730 C272.533333,730 457.466667,730 253.066667,730 C48.6666667,730 0,681.333333 0,476.933333 C0,272.533333 0,367.206459 0,253.066667 C0,48.6666667 48.6666667,0 253.066667,0 Z"/><path fill="#FFF" d="M597.816744,251.493445 C601.198942,240.214758 597.816746,231.927083 581.719678,231.927083 L528.490512,231.927083 C514.956087,231.927083 508.716524,239.08642 505.332448,246.981031 C505.332448,246.981031 478.263599,312.960647 439.917002,355.818719 C427.510915,368.224806 421.871102,372.172112 415.10389,372.172112 C411.720753,372.172112 406.822917,368.224806 406.822917,356.947057 L406.822917,251.493445 C406.822917,237.95902 402.895137,231.927083 391.615512,231.927083 L307.969678,231.927083 C299.511836,231.927083 294.425223,238.208719 294.425223,244.162063 C294.425223,256.99245 313.597583,259.951287 315.573845,296.043086 L315.573845,374.428788 C315.573845,391.614583 312.470184,394.730425 305.702972,394.730425 C287.658011,394.730425 243.763595,328.456052 217.730151,252.620844 C212.628223,237.881107 207.511068,231.927083 193.907178,231.927083 L140.678012,231.927083 C125.469678,231.927083 122.427826,239.08642 122.427826,246.981031 C122.427826,261.079625 140.473725,331.006546 206.452402,423.489903 C250.437874,486.648674 312.410515,520.885417 368.803012,520.885417 C402.638134,520.885417 406.823845,513.28125 406.823845,500.183098 L406.823845,452.447917 C406.823845,437.239583 410.029185,434.204421 420.743703,434.204421 C428.638315,434.204421 442.172739,438.151727 473.753063,468.603713 C509.843923,504.694573 515.79398,520.885417 536.094678,520.885417 L589.323845,520.885417 C604.532178,520.885417 612.136345,513.28125 607.749619,498.274853 C602.949226,483.318593 585.717788,461.619053 562.853283,435.89599 C550.446258,421.234166 531.837128,405.444943 526.197316,397.548454 C518.302704,387.399043 520.558441,382.88663 526.197316,373.864619 C526.197316,373.864619 591.049532,282.508661 597.816744,251.493445 Z"\n        />\n      </g>\n      <clipPath id="logo-mask-'+r.suffix+'">\n        <rect x="0" y="0" width="750" height="750" />\n      </clipPath>\n    </defs>\n\n    '+b+'\n\n    <g transform="'+y+'">\n      '+i.join("\n")+"\n    </g>\n  </svg>"}(r.encodeSegments(_,l[d.ecc],1,40,-1,!0),d)}}}()},wetz:function(e,t,n){"use strict";n.r(t),n.d(t,"onDocumentClick",(function(){return g})),n.d(t,"onEnter",(function(){return v})),n.d(t,"onCtrlEnter",(function(){return b})),n.d(t,"handleGlobalEsc",(function(){return y})),n.d(t,"hideCookiesPolicy",(function(){return E}));n("OG14"),n("SRfc"),n("pIFo");var r=n("Egk5"),o=n("zxIV"),i=n("t7n3"),a=n("/PiP"),s=n("t/FQ"),c=n("gdug"),u=n("Xrg9"),l=n("ErRf"),d=n("cGUQ"),_=n("g4nd"),p=(n("Oyvg"),n("kKcY")),h=n("W9Tc");function f(e){var t=e.target||e.srcElement;if(t&&t.href){var n,r=t.href,o=decodeURIComponent(r);if(Object(h.partConfigEnabled)("aliexpress_app_links_redirect_web_links")){if(n=function(e){var t=[new RegExp(`(https?://)?vk.com/app${p.MARKET_ALIEXPRESS_APP_ID}(_6492794)?(#|/|#/)?$`),new RegExp(`(https?://)?vk.com/${p.MARKET_ALIEXPRESS_APP_NAME}(#|/|#/)?$`)];for(var n in t)if(e.match(t[n]))return"/away.php?to="+encodeURIComponent(p.MARKET_ALIEXPRESS_HOME_URL);return""}(o))return m(n,t),!0}else if(n=function(e){var t=e.match(new RegExp(`/app${p.MARKET_ALIEXPRESS_APP_ID}#(?:.+)product_id=(d+)`));if(t&&t[1])return"/away.php?to="+encodeURIComponent(`${p.MARKET_ALIEXPRESS_HOME_URL}/item/${t[1]}.html`)}(o))return m(n,t),!0}return!1}function m(e,t){"_blank"===t.getAttribute("target")&&void 0!==t.open?t.open(e):window.location.href=e}function g(e){var t,n;if(f(e))return!1;if(Object(r.checkEvent)(e))return!0;if(u.default.set("last_reloaded",[]),!cur.onMouseClick||!cur.onMouseClick(e)){if(!(e=window.event||e.originalEvent||e))return!0;(null===(t=e.target)||void 0===t||null===(n=t.dataset)||void 0===n?void 0:n.donutLogEvent)&&Object(_.logDonutEvent)(e.target.dataset.donutLogEvent);for(var a,s,c=8,l=e.target||e.srcElement;l&&l!==bodyNode&&"A"!==l.tagName&&c--;)l=l.parentNode;if(!l||"A"!==l.tagName||l.onclick||l.onmousedown)return!0;var p=l.href;if(p&&(l.getAttribute("target")||nav.baseBlank)){if(domClosest("bookmarks_row_type_link",l)){var h=(nav.fromStr(p)||{}).to;statlogsValueEvent("bookmarks_product_analytics",{link_url:h,time:window.getServerTime()})}return!0}if("https:"!==location.protocol&&!p.indexOf("https://"))return!0;(p=p.replace(/^https?:\/\//i,"")).indexOf(location.hostname)||(p=p.replace(location.hostname,"")),vk.dev&&"vk.com"===location.hostname&&(p=p.replace(/^(vkontakte\.ru\/|vk\.com\/)/,"/"));var m={};(s=p.match(/^\/(.+?)#[\!\/](.+?)$/))&&!s[1].match(/^app(\d+)/)&&(m.permanent=s[1],p="/"+s[2]);var g=!!(l.getAttribute&&l.getAttribute("data-post-click-type")&&l.getAttribute("data-post-id"));if(p.match(/#$/)&&!g)return!0;var v,b=Object(o.domData)(l,"post-id");b&&(m.postId=b);var y=p;if(a=p.match(/^\/(.*?)(\?|#|$)/))a=a[1];else{if(l.hostname)v=l.hostname,a=l.pathname+l.search;else{var E=/^([^:\/]+)?(?::(\d+))?(\/?[^#]*)(#?.*)$/i.exec(p);if(!E)return!0;v=E[1],a=E[3]||"/"}if(!v||!g)return!0;l.setAttribute("data-change-location-with-post-away",1),y=l}if("add_community_app"===a)return Object(o.attr)(l,"target","_blank"),!0;if(a.indexOf(".php")>0||a.match(/^(doc\-?\d+_\d+|graffiti\d+|reg\d+|images\/|utils\/|\.js|js\/|\.css|css\/|source\b)/)){if(!g)return!0;l.setAttribute("data-change-location-with-post-away",1),y=l}var w=l.getAttribute("hrefparams");w&&(m.params=Object(i.extend)(m.params||{},Object(d.fromQueryString)(w)));try{return nav.go(y,e,Object(i.extend)({},m,{throwErrorOnDisabledPath:!0})),Object(r.cancelEvent)(e)}catch(e){return!0}}}function v(e,t){(t=t||window.event).keyCode===r.KEY.ENTER&&(e(),Object(r.cancelEvent)(t))}function b(e,t){(10===(e=e||window.event).keyCode||13===e.keyCode&&(e.ctrlKey||e.metaKey&&c.browser.mac))&&(t(),Object(r.cancelEvent)(e))}function y(e){if(window._wf=1,e.keyCode===r.KEY.ESC&&boxQueue.count()&&!cur._noEscHide)return boxQueue.hideLast(),-1;if(e.keyCode===r.KEY.ESC&&window.articleCloseImageFullSize&&window.articleCloseImageFullSize())return Object(r.cancelEvent)(e);if(e.keyCode===r.KEY.ESC&&window.isArticleLayerOpen&&window.isArticleLayerOpen())return window.ArticleLayer.close(!0),Object(r.cancelEvent)(e);if(e.keyCode===r.KEY.ESC&&window.AuthorPage&&!cur.articleEditorLayer)return window.AuthorPage.close(),Object(r.cancelEvent)(e);if(e.keyCode===r.KEY.ESC)return Object(l.cancelStackPop)(),Object(r.cancelEvent)(e);var t=[176,177,178,179],n=!1;window.audioPlayer&&(t.push(r.KEY.LEFT),t.push(r.KEY.RIGHT)),Object(i.each)(t,(function(t,r){if(e.keyCode===r)return n=!0,!1})),n&&Object(a.getAudioPlayer)().onMediaKeyPressedEvent(e),s.Chat.inited&&191===e.keyCode&&(e.ctrlKey||e.metaKey&&c.browser.mac)&&s.Chat.showFriends()}function E(){Object(o.re)("cookies_policy_wrap"),ajax.post("/settings",{act:"a_hide_cookies_policy"})}},xk4V:function(e,t,n){var r=n("4fRq"),o=n("I2ZF");e.exports=function(e,t,n){var i=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[i+s]=a[s];return t||o(a)}},xpql:function(e,t,n){e.exports=!n("nh4g")&&!n("eeVq")((function(){return 7!=Object.defineProperty(n("Iw71")("div"),"a",{get:function(){return 7}}).a}))},xt6h:function(e,t,n){"use strict";n.r(t),n.d(t,"classNames",(function(){return i})),n.d(t,"copyTextToClipboard",(function(){return a})),n.d(t,"isNumeric",(function(){return s})),n.d(t,"isEqual",(function(){return m})),n.d(t,"uniqueArray",(function(){return b})),n.d(t,"shuffleArray",(function(){return y})),n.d(t,"chunkArray",(function(){return E})),n.d(t,"omitFromArray",(function(){return w})),n.d(t,"difference",(function(){return O})),n.d(t,"getCookie",(function(){return C})),n.d(t,"SECONDS_IN_THE_DAY",(function(){return D})),n.d(t,"isDateToday",(function(){return k})),n.d(t,"isDateYesterday",(function(){return A})),n.d(t,"isDateTomorrow",(function(){return I})),n.d(t,"isSameDate",(function(){return x})),n.d(t,"getBeginningOfDay",(function(){return j})),n.d(t,"getLastDayOfMonth",(function(){return M})),n.d(t,"convertDateToInputFormat",(function(){return L})),n.d(t,"formatDuration",(function(){return R})),n.d(t,"throttle",(function(){return B})),n.d(t,"debounce",(function(){return N})),n.d(t,"getOffsetRect",(function(){return U})),n.d(t,"leadingZero",(function(){return T})),n.d(t,"formatNumber",(function(){return S})),n.d(t,"getRandomInt",(function(){return F})),n.d(t,"getRandomString",(function(){return W})),n.d(t,"hasReactNode",(function(){return H})),n.d(t,"isPrimitiveReactNode",(function(){return K})),n.d(t,"isObjectLike",(function(){return c})),n.d(t,"isArray",(function(){return u})),n.d(t,"isObject",(function(){return l})),n.d(t,"isUndefined",(function(){return d})),n.d(t,"isFunction",(function(){return _})),n.d(t,"isFormData",(function(){return p})),n.d(t,"isString",(function(){return h})),n.d(t,"isNumber",(function(){return f})),n.d(t,"localStorage",(function(){return te})),n.d(t,"sessionStorage",(function(){return re}));var r=n("cDf5"),o=n.n(r);function i(){for(var e=[],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){if(t)switch(o()(t)){case"string":e.push(t);break;case"object":Object.keys(t).forEach((function(n){t[n]&&e.push(n)}));break;default:e.push("".concat(t))}})),e.join(" ")}function a(e){return navigator.clipboard?function(e){return navigator.clipboard.writeText(e).then((function(){return!0}))}(e):function(e){return new Promise((function(t,n){var r=document.createElement("textarea"),o=document.createRange();r.value=e,r.style.position="fixed",r.contentEditable="true",document.body.appendChild(r),r.focus(),r.select(),o.selectNodeContents(r);var i=window.getSelection();i&&(i.removeAllRanges(),i.addRange(o)),r.setSelectionRange(0,999999);try{document.execCommand("copy")?t(!0):n(new Error("copy failed"))}catch(e){n(e)}i&&i.removeAllRanges(),document.body.removeChild(r)}))}(e)}function s(e){return!isNaN(parseFloat(e))&&isFinite(e)&&!Array.isArray(e)}function c(e){return"object"===o()(e)&&null!==e}function u(e){return Array.isArray(e)}function l(e){return"[object Object]"===Object.prototype.toString.call(e)}function d(e){return void 0===e}function _(e){return"function"==typeof e}function p(e){return e&&"[object FormData]"===Object.prototype.toString.call(e)}function h(e){return"string"==typeof e}function f(e){return"number"==typeof e}function m(e,t){if(e===t)return!0;if(null==e||null==t||!c(e)&&!c(t))return e!=e&&t!=t;if(c(e)&&c(t)){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var n in e){if(!e.hasOwnProperty(n)||!t.hasOwnProperty(n))return!1;if(!m(e[n],t[n]))return!1}return!0}return!1}var g=n("RIqP"),v=n.n(g);function b(e){return e.filter((function(e,t,n){return n.indexOf(e)===t}))}function y(e){return e.map((function(e){return[Math.random(),e]})).sort((function(e,t){return e[0]-t[0]})).map((function(e){return e[1]}))}function E(e,t){if(!e.length)return[];var n=e.slice(0,t),r=e.slice(t);return[n].concat(v()(E(r,t)))}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=e.indexOf(t);return n<0?e:[].concat(v()(e.slice(0,n)),v()(e.slice(n+1)))}function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.reduce((function(e,n){return t.indexOf(n)<0&&e.push(n),e}),[])}function C(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([.$?*|{}()\[\]\\\/+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function T(e){return e>=10?String(e):"0"+String(e)}function S(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:",",r=e.toString().split("."),o=[],i=r[0].length-3;i>-3;i-=3)o.unshift(r[0].slice(i>0?i:0,i+3));return r[0]=o.join(t),r.join(n)}var D=86400,P=1e3*D;function k(e){var t=new Date,n=t.getDate(),r=t.getMonth(),o=t.getFullYear();return e.getFullYear()===o&&e.getMonth()===r&&e.getDate()===n}function A(e){return k(new Date(e.getTime()+P))}function I(e){return k(new Date(e.getTime()-P))}function x(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function j(e){var t=e.getFullYear(),n=e.getMonth(),r=e.getDate();return new Date(t,n,r,0,0,0,0)}function M(e,t){return 2==+t?function(e){return e%4==0&&e%100!=0||e%400==0}(e)?29:28:t>0&&(t<8&&t%2==0||t>7&&t%2==1)?30:31}function L(e){var t=e.getDate(),n=e.getMonth()+1;return[e.getFullYear(),T(n),T(t)].join("-")}function R(e){if(!e)return"";var t=Math.floor(e/3600),n=Math.floor(e/60)%60,r=e%60;return e>=3600?[t,T(n),T(r)].join(":"):[n,T(r)].join(":")}function B(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window;return function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];var c=o,u=Date.now();t&&u<t+r?(clearTimeout(n),n=setTimeout((function(){t=u,e.apply(c,a)}),r)):(t=u,e.apply(c,a))}}function N(e,t){var n,r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,i=function(){return e.apply(o,r)};return function(){for(var e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];r=o,clearTimeout(n),n=setTimeout(i,t)}}function U(e){var t=e instanceof HTMLElement;if("undefined"==typeof window||!t)return{top:0,left:0,width:0,height:0};var n=e,r=n.getBoundingClientRect(),o=document.body,i=document.documentElement,a=window.pageYOffset||i.scrollTop||o.scrollTop,s=window.pageXOffset||i.scrollLeft||o.scrollLeft,c=i.clientTop||o.clientTop||0,u=i.clientLeft||o.clientLeft||0;return{top:Math.round(r.top+a-c),left:Math.round(r.left+s-u),width:n.offsetWidth,height:n.offsetHeight}}function F(e,t){return Math.round(e-.5+Math.random()*(t-e+1))}function W(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=[],r=0;r<e;r++)n.push(t.charAt(Math.floor(Math.random()*t.length)));return n.join("")}function H(e){return void 0!==e&&!1!==e&&null!==e}function K(e){return"string"==typeof e||"number"==typeof e}var V,q=n("lwsE"),G=n.n(q),z=n("W8MJ"),Y=n.n(z),$=n("lSNA"),X=n.n($),Q=function(){function e(){var t=this;G()(this,e),X()(this,"data",{}),X()(this,"getItem",(function(e){return t.data.hasOwnProperty(e)?t.data[e]:null})),X()(this,"keys",(function(){return Object.keys(t.data)}))}return Y()(e,[{key:"setItem",value:function(e,t){this.data[e]=String(t)}},{key:"removeItem",value:function(e){delete this.data[e]}},{key:"clear",value:function(){this.data={}}},{key:"key",value:function(e){return Object.keys(this.data)[e]}},{key:"length",get:function(){return Object.keys(this.data).length}}]),e}(),J="vk-ls-dummy";function Z(){if(V)return V;try{if(window.localStorage.setItem(J,"test"),"test"!==window.localStorage.getItem(J))throw new Error("localStorage is broken");window.localStorage.removeItem(J),V=window.localStorage}catch(e){V=new Q}return V}var ee,te={setItem:function(e,t){return Z().setItem(e,t)},getItem:function(e){return Z().getItem(e)},removeItem:function(e){return Z().removeItem(e)},clear:function(){return Z().clear()},length:function(){return Z().length},key:function(e){return Z().key(e)},keys:function(){var e=Z();return e instanceof Q?e.keys():Object.keys(e)},getPrefixedKeys:function(e){return te.keys().filter((function(t){return t.startsWith(e)}))}};function ne(){if(ee)return ee;try{if(window.sessionStorage.setItem(J,"test"),"test"!==window.sessionStorage.getItem(J))throw new Error("sessionStorage is broken");window.sessionStorage.removeItem(J),ee=window.sessionStorage}catch(e){ee=new Q}return ee}var re={setItem:function(e,t){return ne().setItem(e,t)},getItem:function(e){return ne().getItem(e)},removeItem:function(e){return ne().removeItem(e)},clear:function(){return ne().clear()},length:function(){return ne().length},key:function(e){return ne().key(e)},keys:function(){var e=ne();return e instanceof Q?e.keys():Object.keys(e)},getPrefixedKeys:function(e){return re.keys().filter((function(t){return t.startsWith(e)}))}}},xvD1:function(e,t,n){"use strict";n.r(t),n.d(t,"isGroupCallByPeer",(function(){return i})),n.d(t,"isAnyoneElseInCall",(function(){return a})),n.d(t,"isActiveGroupCallMessage",(function(){return s})),n.d(t,"getUserIdForCallFromPath",(function(){return c})),n.d(t,"isRequireAuthToJoin",(function(){return u}));var r=n("V9bF"),o=n("o4aG"),i=function(e){return 0===e||Object(r.isChatPeer)(e)};function a(e){return!!Object.values(e.participants).find((function(t){return t.peerId!==e.me&&t.status}))}function s(e){return e&&e.attaches&&e.attaches[0]&&"group_call_in_progress"===e.attaches[0].type}function c(e){var t=e.match(/^call\/call\?id=(\d+)$/);return t?parseInt(t[1]):0}function u(e){return e.conversationOptions.includes(o.ConversationOption.REQUIRE_AUTH_TO_JOIN)}},"y/eL":function(e,t,n){"use strict";n.r(t),n.d(t,"updateCounters",(function(){return u}));n("HEwt"),n("a1Th"),n("Btvt"),n("rGqo"),n("rE2o"),n("ioFf"),n("pIFo");var r=n("W9Tc");n("KKXr");var o=n("jE6c");var i=n("JlTo"),a=n("DM2o");function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if(!(window.__dev||window.vk&&(window.vk.zero||window.vk.__dev))){t=t||document.referrer||"";[[/(hash|dl)=\w+/g,"$1="],[/(\/(?:write|mail|im|al_im.php))(?:\?[a-z0-9&=_-]*)?$/,"$1"],[/(\/write)\d*(?:\?[a-zA-Z0-9&=_-]*)?$/,"$1"]].forEach(n=>{var r=s(n,2),o=r[0],i=r[1];e=e.replace(o,i),t=t.replace(o,i)}),Object(i.tmrTrackPage)(e,t);var n=[/\/login\?.*$/];n.some(t=>t.test(e))||n.some(e=>e.test(t))||(!function(e,t){var n=location.protocol,r=window._tns&&(window._tns.tnsPixelSocdem||"83"),i=t.replace(/\*/g,"%2a").split("#")[0],a=window._tns&&window._tns.tnsPixelType;Object(o.vkImage)().src=`${n}//www.tns-counter.ru/V13a**clid:${r}*${i}*vk_com/ru/UTF-8/tmsec=vksite_total/${Math.round(1e9*Math.random())}`,"unauth"===a?Object(o.vkImage)().src=n+"//www.tns-counter.ru/V13a****vk_ad/ru/UTF-8/tmsec=vkad_cid1015708-posid1184674/"+Math.round(1e9*Math.random()):"has_rough"===a?Object(o.vkImage)().src=n+"//www.tns-counter.ru/V13a****vk_ad/ru/UTF-8/tmsec=vkad_cid1015708-posid1184675/"+Math.round(1e9*Math.random()):"not_has_rough"===a&&(Object(o.vkImage)().src=n+"//www.tns-counter.ru/V13a****vk_ad/ru/UTF-8/tmsec=vkad_cid1015708-posid1184677/"+Math.round(1e9*Math.random()))}(0,t),function(){if(Object(r.partConfigEnabled)("geminus_counter")){var e="pzBAVLtpzyiyDVIwmwjmX5a2zSVdA6eUI7mpf0ufDFf.57";if(window.pp_gemius_identifier)window.pp_gemius_hit(e);else{window.pp_gemius_identifier=e;var t=function(e){window[e]=window[e]||function(){var t=window[e+"_pdata"]=window[e+"_pdata"]||[];t[t.length]=arguments}};t("gemius_hit"),t("gemius_event"),t("pp_gemius_hit"),t("pp_gemius_event"),function(e,t){try{var n=e.createElement(t),r=e.getElementsByTagName(t)[0],o="http"+("https:"==location.protocol?"s":""),i="vkgalv";if(window.vk&&window.vk.countryISO)switch(window.vk.countryISO){case"BY":i="vkgaby";break;case"MD":i="vkgamd";break;case"EE":i="vkgaee"}n.setAttribute("async","async"),n.setAttribute("defer","defer"),n.src=o+"://"+i+".hit.gemius.pl/xgemius.js",r.parentNode.insertBefore(n,r)}catch(e){}}(document,"script")}}}(),Object(a.statlogsValueEvent)("counters_check",1))}}},y3w9:function(e,t,n){var r=n("0/R4");e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},yl30:function(e,t,n){"use strict";var r=n("q1tI"),o=n("g65Y"),i=n("QCnb");function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(a(227));function s(e,t,n,r,o,i,a,s,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(e){this.onError(e)}}var c=!1,u=null,l=!1,d=null,_={onError:function(e){c=!0,u=e}};function p(e,t,n,r,o,i,a,l,d){c=!1,u=null,s.apply(_,arguments)}var h=null,f=null,m=null;function g(e,t,n){var r=e.type||"unknown-event";e.currentTarget=m(n),function(e,t,n,r,o,i,s,_,h){if(p.apply(this,arguments),c){if(!c)throw Error(a(198));var f=u;c=!1,u=null,l||(l=!0,d=f)}}(r,t,void 0,e),e.currentTarget=null}var v=null,b={};function y(){if(v)for(var e in b){var t=b[e],n=v.indexOf(e);if(!(-1<n))throw Error(a(96,e));if(!w[n]){if(!t.extractEvents)throw Error(a(97,e));for(var r in w[n]=t,n=t.eventTypes){var o=void 0,i=n[r],s=t,c=r;if(O.hasOwnProperty(c))throw Error(a(99,c));O[c]=i;var u=i.phasedRegistrationNames;if(u){for(o in u)u.hasOwnProperty(o)&&E(u[o],s,c);o=!0}else i.registrationName?(E(i.registrationName,s,c),o=!0):o=!1;if(!o)throw Error(a(98,r,e))}}}}function E(e,t,n){if(C[e])throw Error(a(100,e));C[e]=t,T[e]=t.eventTypes[n].dependencies}var w=[],O={},C={},T={};function S(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];if(!b.hasOwnProperty(t)||b[t]!==r){if(b[t])throw Error(a(102,t));b[t]=r,n=!0}}n&&y()}var D=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),P=null,k=null,A=null;function I(e){if(e=f(e)){if("function"!=typeof P)throw Error(a(280));var t=e.stateNode;t&&(t=h(t),P(e.stateNode,e.type,t))}}function x(e){k?A?A.push(e):A=[e]:k=e}function j(){if(k){var e=k,t=A;if(A=k=null,I(e),t)for(e=0;e<t.length;e++)I(t[e])}}function M(e,t){return e(t)}function L(e,t,n,r,o){return e(t,n,r,o)}function R(){}var B=M,N=!1,U=!1;function F(){null===k&&null===A||(R(),j())}function W(e,t,n){if(U)return e(t,n);U=!0;try{return B(e,t,n)}finally{U=!1,F()}}var H=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,K=Object.prototype.hasOwnProperty,V={},q={};function G(e,t,n,r,o,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){z[e]=new G(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];z[t]=new G(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){z[e]=new G(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){z[e]=new G(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){z[e]=new G(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){z[e]=new G(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){z[e]=new G(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){z[e]=new G(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){z[e]=new G(e,5,!1,e.toLowerCase(),null,!1)}));var Y=/[\-:]([a-z])/g;function $(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(Y,$);z[t]=new G(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(Y,$);z[t]=new G(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(Y,$);z[t]=new G(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){z[e]=new G(e,1,!1,e.toLowerCase(),null,!1)})),z.xlinkHref=new G("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){z[e]=new G(e,1,!1,e.toLowerCase(),null,!0)}));var X=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function Q(e,t,n,r){var o=z.hasOwnProperty(t)?z[t]:null;(null!==o?0===o.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,o,r)&&(n=null),r||null===o?function(e){return!!K.call(q,e)||!K.call(V,e)&&(H.test(e)?q[e]=!0:(V[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=null===n?3!==o.type&&"":n:(t=o.attributeName,r=o.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(o=o.type)||4===o&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}X.hasOwnProperty("ReactCurrentDispatcher")||(X.ReactCurrentDispatcher={current:null}),X.hasOwnProperty("ReactCurrentBatchConfig")||(X.ReactCurrentBatchConfig={suspense:null});var J=/^(.*)[\\\/]/,Z="function"==typeof Symbol&&Symbol.for,ee=Z?Symbol.for("react.element"):60103,te=Z?Symbol.for("react.portal"):60106,ne=Z?Symbol.for("react.fragment"):60107,re=Z?Symbol.for("react.strict_mode"):60108,oe=Z?Symbol.for("react.profiler"):60114,ie=Z?Symbol.for("react.provider"):60109,ae=Z?Symbol.for("react.context"):60110,se=Z?Symbol.for("react.concurrent_mode"):60111,ce=Z?Symbol.for("react.forward_ref"):60112,ue=Z?Symbol.for("react.suspense"):60113,le=Z?Symbol.for("react.suspense_list"):60120,de=Z?Symbol.for("react.memo"):60115,_e=Z?Symbol.for("react.lazy"):60116,pe=Z?Symbol.for("react.block"):60121,he="function"==typeof Symbol&&Symbol.iterator;function fe(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=he&&e[he]||e["@@iterator"])?e:null}function me(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case ne:return"Fragment";case te:return"Portal";case oe:return"Profiler";case re:return"StrictMode";case ue:return"Suspense";case le:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case ae:return"Context.Consumer";case ie:return"Context.Provider";case ce:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case de:return me(e.type);case pe:return me(e.render);case _e:if(e=1===e._status?e._result:null)return me(e)}return null}function ge(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,o=e._debugSource,i=me(e.type);n=null,r&&(n=me(r.type)),r=i,i="",o?i=" (at "+o.fileName.replace(J,"")+":"+o.lineNumber+")":n&&(i=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+i}t+=n,e=e.return}while(e);return t}function ve(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function be(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ye(e){e._valueTracker||(e._valueTracker=function(e){var t=be(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Ee(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=be(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function we(e,t){var n=t.checked;return o({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Oe(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=ve(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Ce(e,t){null!=(t=t.checked)&&Q(e,"checked",t,!1)}function Te(e,t){Ce(e,t);var n=ve(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?De(e,t.type,n):t.hasOwnProperty("defaultValue")&&De(e,t.type,ve(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Se(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function De(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Pe(e,t){return e=o({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function ke(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ve(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function Ae(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return o({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:ve(n)}}function xe(e,t){var n=ve(t.value),r=ve(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function je(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var Me="http://www.w3.org/1999/xhtml",Le="http://www.w3.org/2000/svg";function Re(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Be(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Re(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Ne,Ue=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction((function(){return e(t,n)}))}:e}((function(e,t){if(e.namespaceURI!==Le||"innerHTML"in e)e.innerHTML=t;else{for((Ne=Ne||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ne.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function Fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function We(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var He={animationend:We("Animation","AnimationEnd"),animationiteration:We("Animation","AnimationIteration"),animationstart:We("Animation","AnimationStart"),transitionend:We("Transition","TransitionEnd")},Ke={},Ve={};function qe(e){if(Ke[e])return Ke[e];if(!He[e])return e;var t,n=He[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ve)return Ke[e]=n[t];return e}D&&(Ve=document.createElement("div").style,"AnimationEvent"in window||(delete He.animationend.animation,delete He.animationiteration.animation,delete He.animationstart.animation),"TransitionEvent"in window||delete He.transitionend.transition);var Ge=qe("animationend"),ze=qe("animationiteration"),Ye=qe("animationstart"),$e=qe("transitionend"),Xe="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qe=new("function"==typeof WeakMap?WeakMap:Map);function Je(e){var t=Qe.get(e);return void 0===t&&(t=new Map,Qe.set(e,t)),t}function Ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).effectTag)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function et(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function tt(e){if(Ze(e)!==e)throw Error(a(188))}function nt(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var i=o.alternate;if(null===i){if(null!==(r=o.return)){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return tt(o),e;if(i===r)return tt(o),t;i=i.sibling}throw Error(a(188))}if(n.return!==r.return)n=o,r=i;else{for(var s=!1,c=o.child;c;){if(c===n){s=!0,n=o,r=i;break}if(c===r){s=!0,r=o,n=i;break}c=c.sibling}if(!s){for(c=i.child;c;){if(c===n){s=!0,n=i,r=o;break}if(c===r){s=!0,r=i,n=o;break}c=c.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function rt(e,t){if(null==t)throw Error(a(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function ot(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var it=null;function at(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)g(e,t[r],n[r]);else t&&g(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function st(e){if(null!==e&&(it=rt(it,e)),e=it,it=null,e){if(ot(e,at),it)throw Error(a(95));if(l)throw e=d,l=!1,d=null,e}}function ct(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function ut(e){if(!D)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"==typeof t[e]),t}var lt=[];function dt(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>lt.length&&lt.push(e)}function _t(e,t,n,r){if(lt.length){var o=lt.pop();return o.topLevelType=e,o.eventSystemFlags=r,o.nativeEvent=t,o.targetInst=n,o}return{topLevelType:e,eventSystemFlags:r,nativeEvent:t,targetInst:n,ancestors:[]}}function pt(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(t=n.tag)&&6!==t||e.ancestors.push(n),n=Dn(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var o=ct(e.nativeEvent);r=e.topLevelType;var i=e.nativeEvent,a=e.eventSystemFlags;0===n&&(a|=64);for(var s=null,c=0;c<w.length;c++){var u=w[c];u&&(u=u.extractEvents(r,t,i,o,a))&&(s=rt(s,u))}st(s)}}function ht(e,t,n){if(!n.has(e)){switch(e){case"scroll":Yt(t,"scroll",!0);break;case"focus":case"blur":Yt(t,"focus",!0),Yt(t,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":ut(e)&&Yt(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Xe.indexOf(e)&&zt(e,t)}n.set(e,null)}}var ft,mt,gt,vt=!1,bt=[],yt=null,Et=null,wt=null,Ot=new Map,Ct=new Map,Tt=[],St="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Dt="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function Pt(e,t,n,r,o){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|n,nativeEvent:o,container:r}}function kt(e,t){switch(e){case"focus":case"blur":yt=null;break;case"dragenter":case"dragleave":Et=null;break;case"mouseover":case"mouseout":wt=null;break;case"pointerover":case"pointerout":Ot.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ct.delete(t.pointerId)}}function At(e,t,n,r,o,i){return null===e||e.nativeEvent!==i?(e=Pt(t,n,r,o,i),null!==t&&(null!==(t=Pn(t))&&mt(t)),e):(e.eventSystemFlags|=r,e)}function It(e){var t=Dn(e.target);if(null!==t){var n=Ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=et(n)))return e.blockedOn=t,void i.unstable_runWithPriority(e.priority,(function(){gt(n)}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function xt(e){if(null!==e.blockedOn)return!1;var t=Jt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(null!==t){var n=Pn(t);return null!==n&&mt(n),e.blockedOn=t,!1}return!0}function jt(e,t,n){xt(e)&&n.delete(t)}function Mt(){for(vt=!1;0<bt.length;){var e=bt[0];if(null!==e.blockedOn){null!==(e=Pn(e.blockedOn))&&ft(e);break}var t=Jt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);null!==t?e.blockedOn=t:bt.shift()}null!==yt&&xt(yt)&&(yt=null),null!==Et&&xt(Et)&&(Et=null),null!==wt&&xt(wt)&&(wt=null),Ot.forEach(jt),Ct.forEach(jt)}function Lt(e,t){e.blockedOn===t&&(e.blockedOn=null,vt||(vt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Mt)))}function Rt(e){function t(t){return Lt(t,e)}if(0<bt.length){Lt(bt[0],e);for(var n=1;n<bt.length;n++){var r=bt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==yt&&Lt(yt,e),null!==Et&&Lt(Et,e),null!==wt&&Lt(wt,e),Ot.forEach(t),Ct.forEach(t),n=0;n<Tt.length;n++)(r=Tt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Tt.length&&null===(n=Tt[0]).blockedOn;)It(n),null===n.blockedOn&&Tt.shift()}var Bt={},Nt=new Map,Ut=new Map,Ft=["abort","abort",Ge,"animationEnd",ze,"animationIteration",Ye,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",$e,"transitionEnd","waiting","waiting"];function Wt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],o=e[n+1],i="on"+(o[0].toUpperCase()+o.slice(1));i={phasedRegistrationNames:{bubbled:i,captured:i+"Capture"},dependencies:[r],eventPriority:t},Ut.set(r,t),Nt.set(r,i),Bt[o]=i}}Wt("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Wt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Wt(Ft,2);for(var Ht="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Kt=0;Kt<Ht.length;Kt++)Ut.set(Ht[Kt],0);var Vt=i.unstable_UserBlockingPriority,qt=i.unstable_runWithPriority,Gt=!0;function zt(e,t){Yt(t,e,!1)}function Yt(e,t,n){var r=Ut.get(t);switch(void 0===r?2:r){case 0:r=$t.bind(null,t,1,e);break;case 1:r=Xt.bind(null,t,1,e);break;default:r=Qt.bind(null,t,1,e)}n?e.addEventListener(t,r,!0):e.addEventListener(t,r,!1)}function $t(e,t,n,r){N||R();var o=Qt,i=N;N=!0;try{L(o,e,t,n,r)}finally{(N=i)||F()}}function Xt(e,t,n,r){qt(Vt,Qt.bind(null,e,t,n,r))}function Qt(e,t,n,r){if(Gt)if(0<bt.length&&-1<St.indexOf(e))e=Pt(null,e,t,n,r),bt.push(e);else{var o=Jt(e,t,n,r);if(null===o)kt(e,r);else if(-1<St.indexOf(e))e=Pt(o,e,t,n,r),bt.push(e);else if(!function(e,t,n,r,o){switch(t){case"focus":return yt=At(yt,e,t,n,r,o),!0;case"dragenter":return Et=At(Et,e,t,n,r,o),!0;case"mouseover":return wt=At(wt,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return Ot.set(i,At(Ot.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,Ct.set(i,At(Ct.get(i)||null,e,t,n,r,o)),!0}return!1}(o,e,t,n,r)){kt(e,r),e=_t(e,r,null,t);try{W(pt,e)}finally{dt(e)}}}}function Jt(e,t,n,r){if(null!==(n=Dn(n=ct(r)))){var o=Ze(n);if(null===o)n=null;else{var i=o.tag;if(13===i){if(null!==(n=et(o)))return n;n=null}else if(3===i){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;n=null}else o!==n&&(n=null)}}e=_t(e,r,n,t);try{W(pt,e)}finally{dt(e)}return null}var Zt={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},en=["Webkit","ms","Moz","O"];function tn(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||Zt.hasOwnProperty(e)&&Zt[e]?(""+t).trim():t+"px"}function nn(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),o=tn(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}Object.keys(Zt).forEach((function(e){en.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Zt[t]=Zt[e]}))}));var rn=o({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function on(e,t){if(t){if(rn[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(a(62,""))}}function an(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sn=Me;function cn(e,t){var n=Je(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=T[t];for(var r=0;r<t.length;r++)ht(t[r],e,n)}function un(){}function ln(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function dn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function _n(e,t){var n,r=dn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dn(r)}}function pn(){for(var e=window,t=ln();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=ln((e=t.contentWindow).document)}return t}function hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var fn=null,mn=null;function gn(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function vn(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var bn="function"==typeof setTimeout?setTimeout:void 0,yn="function"==typeof clearTimeout?clearTimeout:void 0;function En(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function wn(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var On=Math.random().toString(36).slice(2),Cn="__reactInternalInstance$"+On,Tn="__reactEventHandlers$"+On,Sn="__reactContainere$"+On;function Dn(e){var t=e[Cn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Sn]||n[Cn]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=wn(e);null!==e;){if(n=e[Cn])return n;e=wn(e)}return t}n=(e=n).parentNode}return null}function Pn(e){return!(e=e[Cn]||e[Sn])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function kn(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function An(e){return e[Tn]||null}function In(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function xn(e,t){var n=e.stateNode;if(!n)return null;var r=h(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(a(231,t,typeof n));return n}function jn(e,t,n){(t=xn(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=rt(n._dispatchListeners,t),n._dispatchInstances=rt(n._dispatchInstances,e))}function Mn(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=In(t);for(t=n.length;0<t--;)jn(n[t],"captured",e);for(t=0;t<n.length;t++)jn(n[t],"bubbled",e)}}function Ln(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=xn(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=rt(n._dispatchListeners,t),n._dispatchInstances=rt(n._dispatchInstances,e))}function Rn(e){e&&e.dispatchConfig.registrationName&&Ln(e._targetInst,null,e)}function Bn(e){ot(e,Mn)}var Nn=null,Un=null,Fn=null;function Wn(){if(Fn)return Fn;var e,t,n=Un,r=n.length,o="value"in Nn?Nn.value:Nn.textContent,i=o.length;for(e=0;e<r&&n[e]===o[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===o[i-t];t++);return Fn=o.slice(e,1<t?1-t:void 0)}function Hn(){return!0}function Kn(){return!1}function Vn(e,t,n,r){for(var o in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(o)&&((t=e[o])?this[o]=t(n):"target"===o?this.target=r:this[o]=n[o]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Hn:Kn,this.isPropagationStopped=Kn,this}function qn(e,t,n,r){if(this.eventPool.length){var o=this.eventPool.pop();return this.call(o,e,t,n,r),o}return new this(e,t,n,r)}function Gn(e){if(!(e instanceof this))throw Error(a(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function zn(e){e.eventPool=[],e.getPooled=qn,e.release=Gn}o(Vn.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Hn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Hn)},persist:function(){this.isPersistent=Hn},isPersistent:Kn,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Kn,this._dispatchInstances=this._dispatchListeners=null}}),Vn.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Vn.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var i=new t;return o(i,n.prototype),n.prototype=i,n.prototype.constructor=n,n.Interface=o({},r.Interface,e),n.extend=r.extend,zn(n),n},zn(Vn);var Yn=Vn.extend({data:null}),$n=Vn.extend({data:null}),Xn=[9,13,27,32],Qn=D&&"CompositionEvent"in window,Jn=null;D&&"documentMode"in document&&(Jn=document.documentMode);var Zn=D&&"TextEvent"in window&&!Jn,er=D&&(!Qn||Jn&&8<Jn&&11>=Jn),tr=String.fromCharCode(32),nr={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},rr=!1;function or(e,t){switch(e){case"keyup":return-1!==Xn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function ir(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var ar=!1;var sr={eventTypes:nr,extractEvents:function(e,t,n,r){var o;if(Qn)e:{switch(e){case"compositionstart":var i=nr.compositionStart;break e;case"compositionend":i=nr.compositionEnd;break e;case"compositionupdate":i=nr.compositionUpdate;break e}i=void 0}else ar?or(e,n)&&(i=nr.compositionEnd):"keydown"===e&&229===n.keyCode&&(i=nr.compositionStart);return i?(er&&"ko"!==n.locale&&(ar||i!==nr.compositionStart?i===nr.compositionEnd&&ar&&(o=Wn()):(Un="value"in(Nn=r)?Nn.value:Nn.textContent,ar=!0)),i=Yn.getPooled(i,t,n,r),o?i.data=o:null!==(o=ir(n))&&(i.data=o),Bn(i),o=i):o=null,(e=Zn?function(e,t){switch(e){case"compositionend":return ir(t);case"keypress":return 32!==t.which?null:(rr=!0,tr);case"textInput":return(e=t.data)===tr&&rr?null:e;default:return null}}(e,n):function(e,t){if(ar)return"compositionend"===e||!Qn&&or(e,t)?(e=Wn(),Fn=Un=Nn=null,ar=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return er&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))?((t=$n.getPooled(nr.beforeInput,t,n,r)).data=e,Bn(t)):t=null,null===o?t:null===t?o:[o,t]}},cr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ur(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!cr[e.type]:"textarea"===t}var lr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function dr(e,t,n){return(e=Vn.getPooled(lr.change,e,t,n)).type="change",x(n),Bn(e),e}var _r=null,pr=null;function hr(e){st(e)}function fr(e){if(Ee(kn(e)))return e}function mr(e,t){if("change"===e)return t}var gr=!1;function vr(){_r&&(_r.detachEvent("onpropertychange",br),pr=_r=null)}function br(e){if("value"===e.propertyName&&fr(pr))if(e=dr(pr,e,ct(e)),N)st(e);else{N=!0;try{M(hr,e)}finally{N=!1,F()}}}function yr(e,t,n){"focus"===e?(vr(),pr=n,(_r=t).attachEvent("onpropertychange",br)):"blur"===e&&vr()}function Er(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return fr(pr)}function wr(e,t){if("click"===e)return fr(t)}function Or(e,t){if("input"===e||"change"===e)return fr(t)}D&&(gr=ut("input")&&(!document.documentMode||9<document.documentMode));var Cr={eventTypes:lr,_isInputEventSupported:gr,extractEvents:function(e,t,n,r){var o=t?kn(t):window,i=o.nodeName&&o.nodeName.toLowerCase();if("select"===i||"input"===i&&"file"===o.type)var a=mr;else if(ur(o))if(gr)a=Or;else{a=Er;var s=yr}else(i=o.nodeName)&&"input"===i.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(a=wr);if(a&&(a=a(e,t)))return dr(a,n,r);s&&s(e,o,t),"blur"===e&&(e=o._wrapperState)&&e.controlled&&"number"===o.type&&De(o,"number",o.value)}},Tr=Vn.extend({view:null,detail:null}),Sr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sr[e])&&!!t[e]}function Pr(){return Dr}var kr=0,Ar=0,Ir=!1,xr=!1,jr=Tr.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Pr,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=kr;return kr=e.screenX,Ir?"mousemove"===e.type?e.screenX-t:0:(Ir=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Ar;return Ar=e.screenY,xr?"mousemove"===e.type?e.screenY-t:0:(xr=!0,0)}}),Mr=jr.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Lr={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Rr={eventTypes:Lr,extractEvents:function(e,t,n,r,o){var i="mouseover"===e||"pointerover"===e,a="mouseout"===e||"pointerout"===e;if(i&&0==(32&o)&&(n.relatedTarget||n.fromElement)||!a&&!i)return null;(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,a)?(a=t,null!==(t=(t=n.relatedTarget||n.toElement)?Dn(t):null)&&(t!==Ze(t)||5!==t.tag&&6!==t.tag)&&(t=null)):a=null;if(a===t)return null;if("mouseout"===e||"mouseover"===e)var s=jr,c=Lr.mouseLeave,u=Lr.mouseEnter,l="mouse";else"pointerout"!==e&&"pointerover"!==e||(s=Mr,c=Lr.pointerLeave,u=Lr.pointerEnter,l="pointer");if(e=null==a?i:kn(a),i=null==t?i:kn(t),(c=s.getPooled(c,a,n,r)).type=l+"leave",c.target=e,c.relatedTarget=i,(n=s.getPooled(u,t,n,r)).type=l+"enter",n.target=i,n.relatedTarget=e,l=t,(r=a)&&l)e:{for(u=l,a=0,e=s=r;e;e=In(e))a++;for(e=0,t=u;t;t=In(t))e++;for(;0<a-e;)s=In(s),a--;for(;0<e-a;)u=In(u),e--;for(;a--;){if(s===u||s===u.alternate)break e;s=In(s),u=In(u)}s=null}else s=null;for(u=s,s=[];r&&r!==u&&(null===(a=r.alternate)||a!==u);)s.push(r),r=In(r);for(r=[];l&&l!==u&&(null===(a=l.alternate)||a!==u);)r.push(l),l=In(l);for(l=0;l<s.length;l++)Ln(s[l],"bubbled",c);for(l=r.length;0<l--;)Ln(r[l],"captured",n);return 0==(64&o)?[c]:[c,n]}};var Br="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},Nr=Object.prototype.hasOwnProperty;function Ur(e,t){if(Br(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Nr.call(t,n[r])||!Br(e[n[r]],t[n[r]]))return!1;return!0}var Fr=D&&"documentMode"in document&&11>=document.documentMode,Wr={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Hr=null,Kr=null,Vr=null,qr=!1;function Gr(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return qr||null==Hr||Hr!==ln(n)?null:("selectionStart"in(n=Hr)&&hn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Vr&&Ur(Vr,n)?null:(Vr=n,(e=Vn.getPooled(Wr.select,Kr,e,t)).type="select",e.target=Hr,Bn(e),e))}var zr={eventTypes:Wr,extractEvents:function(e,t,n,r,o,i){if(!(i=!(o=i||(r.window===r?r.document:9===r.nodeType?r:r.ownerDocument)))){e:{o=Je(o),i=T.onSelect;for(var a=0;a<i.length;a++)if(!o.has(i[a])){o=!1;break e}o=!0}i=!o}if(i)return null;switch(o=t?kn(t):window,e){case"focus":(ur(o)||"true"===o.contentEditable)&&(Hr=o,Kr=t,Vr=null);break;case"blur":Vr=Kr=Hr=null;break;case"mousedown":qr=!0;break;case"contextmenu":case"mouseup":case"dragend":return qr=!1,Gr(n,r);case"selectionchange":if(Fr)break;case"keydown":case"keyup":return Gr(n,r)}return null}},Yr=Vn.extend({animationName:null,elapsedTime:null,pseudoElement:null}),$r=Vn.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Xr=Tr.extend({relatedTarget:null});function Qr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var Jr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eo=Tr.extend({key:function(e){if(e.key){var t=Jr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Qr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Zr[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Pr,charCode:function(e){return"keypress"===e.type?Qr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Qr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),to=jr.extend({dataTransfer:null}),no=Tr.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Pr}),ro=Vn.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),oo=jr.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),io={eventTypes:Bt,extractEvents:function(e,t,n,r){var o=Nt.get(e);if(!o)return null;switch(e){case"keypress":if(0===Qr(n))return null;case"keydown":case"keyup":e=eo;break;case"blur":case"focus":e=Xr;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=jr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=to;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=no;break;case Ge:case ze:case Ye:e=Yr;break;case $e:e=ro;break;case"scroll":e=Tr;break;case"wheel":e=oo;break;case"copy":case"cut":case"paste":e=$r;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Mr;break;default:e=Vn}return Bn(t=e.getPooled(o,t,n,r)),t}};if(v)throw Error(a(101));v=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),y(),h=An,f=Pn,m=kn,S({SimpleEventPlugin:io,EnterLeaveEventPlugin:Rr,ChangeEventPlugin:Cr,SelectEventPlugin:zr,BeforeInputEventPlugin:sr});var ao=[],so=-1;function co(e){0>so||(e.current=ao[so],ao[so]=null,so--)}function uo(e,t){so++,ao[so]=e.current,e.current=t}var lo={},_o={current:lo},po={current:!1},ho=lo;function fo(e,t){var n=e.type.contextTypes;if(!n)return lo;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o,i={};for(o in n)i[o]=t[o];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function mo(e){return null!=(e=e.childContextTypes)}function go(){co(po),co(_o)}function vo(e,t,n){if(_o.current!==lo)throw Error(a(168));uo(_o,t),uo(po,n)}function bo(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(a(108,me(t)||"Unknown",i));return o({},n,{},r)}function yo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||lo,ho=_o.current,uo(_o,e),uo(po,po.current),!0}function Eo(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=bo(e,t,ho),r.__reactInternalMemoizedMergedChildContext=e,co(po),co(_o),uo(_o,e)):co(po),uo(po,n)}var wo=i.unstable_runWithPriority,Oo=i.unstable_scheduleCallback,Co=i.unstable_cancelCallback,To=i.unstable_requestPaint,So=i.unstable_now,Do=i.unstable_getCurrentPriorityLevel,Po=i.unstable_ImmediatePriority,ko=i.unstable_UserBlockingPriority,Ao=i.unstable_NormalPriority,Io=i.unstable_LowPriority,xo=i.unstable_IdlePriority,jo={},Mo=i.unstable_shouldYield,Lo=void 0!==To?To:function(){},Ro=null,Bo=null,No=!1,Uo=So(),Fo=1e4>Uo?So:function(){return So()-Uo};function Wo(){switch(Do()){case Po:return 99;case ko:return 98;case Ao:return 97;case Io:return 96;case xo:return 95;default:throw Error(a(332))}}function Ho(e){switch(e){case 99:return Po;case 98:return ko;case 97:return Ao;case 96:return Io;case 95:return xo;default:throw Error(a(332))}}function Ko(e,t){return e=Ho(e),wo(e,t)}function Vo(e,t,n){return e=Ho(e),Oo(e,t,n)}function qo(e){return null===Ro?(Ro=[e],Bo=Oo(Po,zo)):Ro.push(e),jo}function Go(){if(null!==Bo){var e=Bo;Bo=null,Co(e)}zo()}function zo(){if(!No&&null!==Ro){No=!0;var e=0;try{var t=Ro;Ko(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Ro=null}catch(t){throw null!==Ro&&(Ro=Ro.slice(e+1)),Oo(Po,Go),t}finally{No=!1}}}function Yo(e,t,n){return 1073741821-(1+((1073741821-e+t/10)/(n/=10)|0))*n}function $o(e,t){if(e&&e.defaultProps)for(var n in t=o({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var Xo={current:null},Qo=null,Jo=null,Zo=null;function ei(){Zo=Jo=Qo=null}function ti(e){var t=Xo.current;co(Xo),e.type._context._currentValue=t}function ni(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function ri(e,t){Qo=e,Zo=Jo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(Aa=!0),e.firstContext=null)}function oi(e,t){if(Zo!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(Zo=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Jo){if(null===Qo)throw Error(a(308));Jo=t,Qo.dependencies={expirationTime:0,firstContext:t,responders:null}}else Jo=Jo.next=t;return e._currentValue}var ii=!1;function ai(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function si(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function ci(e,t){return(e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null}).next=e}function ui(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function li(e,t){var n=e.alternate;null!==n&&si(n,e),null===(n=(e=e.updateQueue).baseQueue)?(e.baseQueue=t.next=t,t.next=t):(t.next=n.next,n.next=t)}function di(e,t,n,r){var i=e.updateQueue;ii=!1;var a=i.baseQueue,s=i.shared.pending;if(null!==s){if(null!==a){var c=a.next;a.next=s.next,s.next=c}a=s,i.shared.pending=null,null!==(c=e.alternate)&&(null!==(c=c.updateQueue)&&(c.baseQueue=s))}if(null!==a){c=a.next;var u=i.baseState,l=0,d=null,_=null,p=null;if(null!==c)for(var h=c;;){if((s=h.expirationTime)<r){var f={expirationTime:h.expirationTime,suspenseConfig:h.suspenseConfig,tag:h.tag,payload:h.payload,callback:h.callback,next:null};null===p?(_=p=f,d=u):p=p.next=f,s>l&&(l=s)}else{null!==p&&(p=p.next={expirationTime:1073741823,suspenseConfig:h.suspenseConfig,tag:h.tag,payload:h.payload,callback:h.callback,next:null}),ic(s,h.suspenseConfig);e:{var m=e,g=h;switch(s=t,f=n,g.tag){case 1:if("function"==typeof(m=g.payload)){u=m.call(f,u,s);break e}u=m;break e;case 3:m.effectTag=-4097&m.effectTag|64;case 0:if(null==(s="function"==typeof(m=g.payload)?m.call(f,u,s):m))break e;u=o({},u,s);break e;case 2:ii=!0}}null!==h.callback&&(e.effectTag|=32,null===(s=i.effects)?i.effects=[h]:s.push(h))}if(null===(h=h.next)||h===c){if(null===(s=i.shared.pending))break;h=a.next=s.next,s.next=c,i.baseQueue=a=s,i.shared.pending=null}}null===p?d=u:p.next=_,i.baseState=d,i.baseQueue=p,ac(l),e.expirationTime=l,e.memoizedState=u}}function _i(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(null!==o){if(r.callback=null,r=o,o=n,"function"!=typeof r)throw Error(a(191,r));r.call(o)}}}var pi=X.ReactCurrentBatchConfig,hi=(new r.Component).refs;function fi(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:o({},t,n),e.memoizedState=n,0===e.expirationTime&&(e.updateQueue.baseState=n)}var mi={isMounted:function(e){return!!(e=e._reactInternalFiber)&&Ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=Gs(),o=pi.suspense;(o=ci(r=zs(r,e,o),o)).payload=t,null!=n&&(o.callback=n),ui(e,o),Ys(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=Gs(),o=pi.suspense;(o=ci(r=zs(r,e,o),o)).tag=1,o.payload=t,null!=n&&(o.callback=n),ui(e,o),Ys(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=Gs(),r=pi.suspense;(r=ci(n=zs(n,e,r),r)).tag=2,null!=t&&(r.callback=t),ui(e,r),Ys(e,n)}};function gi(e,t,n,r,o,i,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!Ur(n,r)||!Ur(o,i))}function vi(e,t,n){var r=!1,o=lo,i=t.contextType;return"object"==typeof i&&null!==i?i=oi(i):(o=mo(t)?ho:_o.current,i=(r=null!=(r=t.contextTypes))?fo(e,o):lo),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=mi,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function bi(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&mi.enqueueReplaceState(t,t.state,null)}function yi(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs=hi,ai(e);var i=t.contextType;"object"==typeof i&&null!==i?o.context=oi(i):(i=mo(t)?ho:_o.current,o.context=fo(e,i)),di(e,n,o,r),o.state=e.memoizedState,"function"==typeof(i=t.getDerivedStateFromProps)&&(fi(e,t,i,n),o.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof o.getSnapshotBeforeUpdate||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||(t=o.state,"function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&mi.enqueueReplaceState(o,o.state,null),di(e,n,o,r),o.state=e.memoizedState),"function"==typeof o.componentDidMount&&(e.effectTag|=4)}var Ei=Array.isArray;function wi(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var o=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===o?t.ref:((t=function(e){var t=r.refs;t===hi&&(t=r.refs={}),null===e?delete t[o]:t[o]=e})._stringRef=o,t)}if("string"!=typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Oi(e,t){if("textarea"!==e.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function Ci(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=Sc(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function s(t){return e&&null===t.alternate&&(t.effectTag=2),t}function c(e,t,n,r){return null===t||6!==t.tag?((t=kc(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function u(e,t,n,r){return null!==t&&t.elementType===n.type?((r=o(t,n.props)).ref=wi(e,t,n),r.return=e,r):((r=Dc(n.type,n.key,n.props,null,e.mode,r)).ref=wi(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ac(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Pc(n,e.mode,r,i)).return=e,t):((t=o(t,n)).return=e,t)}function _(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=kc(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case ee:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=wi(e,null,t),n.return=e,n;case te:return(t=Ac(t,e.mode,n)).return=e,t}if(Ei(t)||fe(t))return(t=Pc(t,e.mode,n,null)).return=e,t;Oi(e,t)}return null}function p(e,t,n,r){var o=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==o?null:c(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case ee:return n.key===o?n.type===ne?d(e,t,n.props.children,r,o):u(e,t,n,r):null;case te:return n.key===o?l(e,t,n,r):null}if(Ei(n)||fe(n))return null!==o?null:d(e,t,n,r,null);Oi(e,n)}return null}function h(e,t,n,r,o){if("string"==typeof r||"number"==typeof r)return c(t,e=e.get(n)||null,""+r,o);if("object"==typeof r&&null!==r){switch(r.$$typeof){case ee:return e=e.get(null===r.key?n:r.key)||null,r.type===ne?d(t,e,r.props.children,o,r.key):u(t,e,r,o);case te:return l(t,e=e.get(null===r.key?n:r.key)||null,r,o)}if(Ei(r)||fe(r))return d(t,e=e.get(n)||null,r,o,null);Oi(t,r)}return null}function f(o,a,s,c){for(var u=null,l=null,d=a,f=a=0,m=null;null!==d&&f<s.length;f++){d.index>f?(m=d,d=null):m=d.sibling;var g=p(o,d,s[f],c);if(null===g){null===d&&(d=m);break}e&&d&&null===g.alternate&&t(o,d),a=i(g,a,f),null===l?u=g:l.sibling=g,l=g,d=m}if(f===s.length)return n(o,d),u;if(null===d){for(;f<s.length;f++)null!==(d=_(o,s[f],c))&&(a=i(d,a,f),null===l?u=d:l.sibling=d,l=d);return u}for(d=r(o,d);f<s.length;f++)null!==(m=h(d,o,f,s[f],c))&&(e&&null!==m.alternate&&d.delete(null===m.key?f:m.key),a=i(m,a,f),null===l?u=m:l.sibling=m,l=m);return e&&d.forEach((function(e){return t(o,e)})),u}function m(o,s,c,u){var l=fe(c);if("function"!=typeof l)throw Error(a(150));if(null==(c=l.call(c)))throw Error(a(151));for(var d=l=null,f=s,m=s=0,g=null,v=c.next();null!==f&&!v.done;m++,v=c.next()){f.index>m?(g=f,f=null):g=f.sibling;var b=p(o,f,v.value,u);if(null===b){null===f&&(f=g);break}e&&f&&null===b.alternate&&t(o,f),s=i(b,s,m),null===d?l=b:d.sibling=b,d=b,f=g}if(v.done)return n(o,f),l;if(null===f){for(;!v.done;m++,v=c.next())null!==(v=_(o,v.value,u))&&(s=i(v,s,m),null===d?l=v:d.sibling=v,d=v);return l}for(f=r(o,f);!v.done;m++,v=c.next())null!==(v=h(f,o,m,v.value,u))&&(e&&null!==v.alternate&&f.delete(null===v.key?m:v.key),s=i(v,s,m),null===d?l=v:d.sibling=v,d=v);return e&&f.forEach((function(e){return t(o,e)})),l}return function(e,r,i,c){var u="object"==typeof i&&null!==i&&i.type===ne&&null===i.key;u&&(i=i.props.children);var l="object"==typeof i&&null!==i;if(l)switch(i.$$typeof){case ee:e:{for(l=i.key,u=r;null!==u;){if(u.key===l){switch(u.tag){case 7:if(i.type===ne){n(e,u.sibling),(r=o(u,i.props.children)).return=e,e=r;break e}break;default:if(u.elementType===i.type){n(e,u.sibling),(r=o(u,i.props)).ref=wi(e,u,i),r.return=e,e=r;break e}}n(e,u);break}t(e,u),u=u.sibling}i.type===ne?((r=Pc(i.props.children,e.mode,c,i.key)).return=e,e=r):((c=Dc(i.type,i.key,i.props,null,e.mode,c)).ref=wi(e,r,i),c.return=e,e=c)}return s(e);case te:e:{for(u=i.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===i.containerInfo&&r.stateNode.implementation===i.implementation){n(e,r.sibling),(r=o(r,i.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Ac(i,e.mode,c)).return=e,e=r}return s(e)}if("string"==typeof i||"number"==typeof i)return i=""+i,null!==r&&6===r.tag?(n(e,r.sibling),(r=o(r,i)).return=e,e=r):(n(e,r),(r=kc(i,e.mode,c)).return=e,e=r),s(e);if(Ei(i))return f(e,r,i,c);if(fe(i))return m(e,r,i,c);if(l&&Oi(e,i),void 0===i&&!u)switch(e.tag){case 1:case 0:throw e=e.type,Error(a(152,e.displayName||e.name||"Component"))}return n(e,r)}}var Ti=Ci(!0),Si=Ci(!1),Di={},Pi={current:Di},ki={current:Di},Ai={current:Di};function Ii(e){if(e===Di)throw Error(a(174));return e}function xi(e,t){switch(uo(Ai,t),uo(ki,e),uo(Pi,Di),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Be(null,"");break;default:t=Be(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}co(Pi),uo(Pi,t)}function ji(){co(Pi),co(ki),co(Ai)}function Mi(e){Ii(Ai.current);var t=Ii(Pi.current),n=Be(t,e.type);t!==n&&(uo(ki,e),uo(Pi,n))}function Li(e){ki.current===e&&(co(Pi),co(ki))}var Ri={current:0};function Bi(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Ni(e,t){return{responder:e,props:t}}var Ui=X.ReactCurrentDispatcher,Fi=X.ReactCurrentBatchConfig,Wi=0,Hi=null,Ki=null,Vi=null,qi=!1;function Gi(){throw Error(a(321))}function zi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Br(e[n],t[n]))return!1;return!0}function Yi(e,t,n,r,o,i){if(Wi=i,Hi=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,Ui.current=null===e||null===e.memoizedState?ga:va,e=n(r,o),t.expirationTime===Wi){i=0;do{if(t.expirationTime=0,!(25>i))throw Error(a(301));i+=1,Vi=Ki=null,t.updateQueue=null,Ui.current=ba,e=n(r,o)}while(t.expirationTime===Wi)}if(Ui.current=ma,t=null!==Ki&&null!==Ki.next,Wi=0,Vi=Ki=Hi=null,qi=!1,t)throw Error(a(300));return e}function $i(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Vi?Hi.memoizedState=Vi=e:Vi=Vi.next=e,Vi}function Xi(){if(null===Ki){var e=Hi.alternate;e=null!==e?e.memoizedState:null}else e=Ki.next;var t=null===Vi?Hi.memoizedState:Vi.next;if(null!==t)Vi=t,Ki=e;else{if(null===e)throw Error(a(310));e={memoizedState:(Ki=e).memoizedState,baseState:Ki.baseState,baseQueue:Ki.baseQueue,queue:Ki.queue,next:null},null===Vi?Hi.memoizedState=Vi=e:Vi=Vi.next=e}return Vi}function Qi(e,t){return"function"==typeof t?t(e):t}function Ji(e){var t=Xi(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=Ki,o=r.baseQueue,i=n.pending;if(null!==i){if(null!==o){var s=o.next;o.next=i.next,i.next=s}r.baseQueue=o=i,n.pending=null}if(null!==o){o=o.next,r=r.baseState;var c=s=i=null,u=o;do{var l=u.expirationTime;if(l<Wi){var d={expirationTime:u.expirationTime,suspenseConfig:u.suspenseConfig,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===c?(s=c=d,i=r):c=c.next=d,l>Hi.expirationTime&&(Hi.expirationTime=l,ac(l))}else null!==c&&(c=c.next={expirationTime:1073741823,suspenseConfig:u.suspenseConfig,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),ic(l,u.suspenseConfig),r=u.eagerReducer===e?u.eagerState:e(r,u.action);u=u.next}while(null!==u&&u!==o);null===c?i=r:c.next=s,Br(r,t.memoizedState)||(Aa=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=c,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function Zi(e){var t=Xi(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,i=t.memoizedState;if(null!==o){n.pending=null;var s=o=o.next;do{i=e(i,s.action),s=s.next}while(s!==o);Br(i,t.memoizedState)||(Aa=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function ea(e){var t=$i();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:e}).dispatch=fa.bind(null,Hi,e),[t.memoizedState,e]}function ta(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Hi.updateQueue)?(t={lastEffect:null},Hi.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function na(){return Xi().memoizedState}function ra(e,t,n,r){var o=$i();Hi.effectTag|=e,o.memoizedState=ta(1|t,n,void 0,void 0===r?null:r)}function oa(e,t,n,r){var o=Xi();r=void 0===r?null:r;var i=void 0;if(null!==Ki){var a=Ki.memoizedState;if(i=a.destroy,null!==r&&zi(r,a.deps))return void ta(t,n,i,r)}Hi.effectTag|=e,o.memoizedState=ta(1|t,n,i,r)}function ia(e,t){return ra(516,4,e,t)}function aa(e,t){return oa(516,4,e,t)}function sa(e,t){return oa(4,2,e,t)}function ca(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ua(e,t,n){return n=null!=n?n.concat([e]):null,oa(4,2,ca.bind(null,t,e),n)}function la(){}function da(e,t){return $i().memoizedState=[e,void 0===t?null:t],e}function _a(e,t){var n=Xi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&zi(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function pa(e,t){var n=Xi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&zi(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function ha(e,t,n){var r=Wo();Ko(98>r?98:r,(function(){e(!0)})),Ko(97<r?97:r,(function(){var r=Fi.suspense;Fi.suspense=void 0===t?null:t;try{e(!1),n()}finally{Fi.suspense=r}}))}function fa(e,t,n){var r=Gs(),o=pi.suspense;o={expirationTime:r=zs(r,e,o),suspenseConfig:o,action:n,eagerReducer:null,eagerState:null,next:null};var i=t.pending;if(null===i?o.next=o:(o.next=i.next,i.next=o),t.pending=o,i=e.alternate,e===Hi||null!==i&&i===Hi)qi=!0,o.expirationTime=Wi,Hi.expirationTime=Wi;else{if(0===e.expirationTime&&(null===i||0===i.expirationTime)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=i(a,n);if(o.eagerReducer=i,o.eagerState=s,Br(s,a))return}catch(e){}Ys(e,r)}}var ma={readContext:oi,useCallback:Gi,useContext:Gi,useEffect:Gi,useImperativeHandle:Gi,useLayoutEffect:Gi,useMemo:Gi,useReducer:Gi,useRef:Gi,useState:Gi,useDebugValue:Gi,useResponder:Gi,useDeferredValue:Gi,useTransition:Gi},ga={readContext:oi,useCallback:da,useContext:oi,useEffect:ia,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,ra(4,2,ca.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ra(4,2,e,t)},useMemo:function(e,t){var n=$i();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=$i();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=fa.bind(null,Hi,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},$i().memoizedState=e},useState:ea,useDebugValue:la,useResponder:Ni,useDeferredValue:function(e,t){var n=ea(e),r=n[0],o=n[1];return ia((function(){var n=Fi.suspense;Fi.suspense=void 0===t?null:t;try{o(e)}finally{Fi.suspense=n}}),[e,t]),r},useTransition:function(e){var t=ea(!1),n=t[0];return t=t[1],[da(ha.bind(null,t,e),[t,e]),n]}},va={readContext:oi,useCallback:_a,useContext:oi,useEffect:aa,useImperativeHandle:ua,useLayoutEffect:sa,useMemo:pa,useReducer:Ji,useRef:na,useState:function(){return Ji(Qi)},useDebugValue:la,useResponder:Ni,useDeferredValue:function(e,t){var n=Ji(Qi),r=n[0],o=n[1];return aa((function(){var n=Fi.suspense;Fi.suspense=void 0===t?null:t;try{o(e)}finally{Fi.suspense=n}}),[e,t]),r},useTransition:function(e){var t=Ji(Qi),n=t[0];return t=t[1],[_a(ha.bind(null,t,e),[t,e]),n]}},ba={readContext:oi,useCallback:_a,useContext:oi,useEffect:aa,useImperativeHandle:ua,useLayoutEffect:sa,useMemo:pa,useReducer:Zi,useRef:na,useState:function(){return Zi(Qi)},useDebugValue:la,useResponder:Ni,useDeferredValue:function(e,t){var n=Zi(Qi),r=n[0],o=n[1];return aa((function(){var n=Fi.suspense;Fi.suspense=void 0===t?null:t;try{o(e)}finally{Fi.suspense=n}}),[e,t]),r},useTransition:function(e){var t=Zi(Qi),n=t[0];return t=t[1],[_a(ha.bind(null,t,e),[t,e]),n]}},ya=null,Ea=null,wa=!1;function Oa(e,t){var n=Cc(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Ca(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function Ta(e){if(wa){var t=Ea;if(t){var n=t;if(!Ca(e,t)){if(!(t=En(n.nextSibling))||!Ca(e,t))return e.effectTag=-1025&e.effectTag|2,wa=!1,void(ya=e);Oa(ya,n)}ya=e,Ea=En(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,wa=!1,ya=e}}function Sa(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ya=e}function Da(e){if(e!==ya)return!1;if(!wa)return Sa(e),wa=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!vn(t,e.memoizedProps))for(t=Ea;t;)Oa(e,t),t=En(t.nextSibling);if(Sa(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Ea=En(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Ea=null}}else Ea=ya?En(e.stateNode.nextSibling):null;return!0}function Pa(){Ea=ya=null,wa=!1}var ka=X.ReactCurrentOwner,Aa=!1;function Ia(e,t,n,r){t.child=null===e?Si(t,null,n,r):Ti(t,e.child,n,r)}function xa(e,t,n,r,o){n=n.render;var i=t.ref;return ri(t,o),r=Yi(e,t,n,r,i,o),null===e||Aa?(t.effectTag|=1,Ia(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=o&&(e.expirationTime=0),Ya(e,t,o))}function ja(e,t,n,r,o,i){if(null===e){var a=n.type;return"function"!=typeof a||Tc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,r,null,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ma(e,t,a,r,o,i))}return a=e.child,o<i&&(o=a.memoizedProps,(n=null!==(n=n.compare)?n:Ur)(o,r)&&e.ref===t.ref)?Ya(e,t,i):(t.effectTag|=1,(e=Sc(a,r)).ref=t.ref,e.return=t,t.child=e)}function Ma(e,t,n,r,o,i){return null!==e&&Ur(e.memoizedProps,r)&&e.ref===t.ref&&(Aa=!1,o<i)?(t.expirationTime=e.expirationTime,Ya(e,t,i)):Ra(e,t,n,r,i)}function La(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function Ra(e,t,n,r,o){var i=mo(n)?ho:_o.current;return i=fo(t,i),ri(t,o),n=Yi(e,t,n,r,i,o),null===e||Aa?(t.effectTag|=1,Ia(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=o&&(e.expirationTime=0),Ya(e,t,o))}function Ba(e,t,n,r,o){if(mo(n)){var i=!0;yo(t)}else i=!1;if(ri(t,o),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),vi(t,n,r),yi(t,n,r,o),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var c=a.context,u=n.contextType;"object"==typeof u&&null!==u?u=oi(u):u=fo(t,u=mo(n)?ho:_o.current);var l=n.getDerivedStateFromProps,d="function"==typeof l||"function"==typeof a.getSnapshotBeforeUpdate;d||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||c!==u)&&bi(t,a,r,u),ii=!1;var _=t.memoizedState;a.state=_,di(t,r,a,o),c=t.memoizedState,s!==r||_!==c||po.current||ii?("function"==typeof l&&(fi(t,n,l,r),c=t.memoizedState),(s=ii||gi(t,n,s,r,_,c,u))?(d||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.effectTag|=4)):("function"==typeof a.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=u,r=s):("function"==typeof a.componentDidMount&&(t.effectTag|=4),r=!1)}else a=t.stateNode,si(e,t),s=t.memoizedProps,a.props=t.type===t.elementType?s:$o(t.type,s),c=a.context,"object"==typeof(u=n.contextType)&&null!==u?u=oi(u):u=fo(t,u=mo(n)?ho:_o.current),(d="function"==typeof(l=n.getDerivedStateFromProps)||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||c!==u)&&bi(t,a,r,u),ii=!1,c=t.memoizedState,a.state=c,di(t,r,a,o),_=t.memoizedState,s!==r||c!==_||po.current||ii?("function"==typeof l&&(fi(t,n,l,r),_=t.memoizedState),(l=ii||gi(t,n,s,r,c,_,u))?(d||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,_,u),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,_,u)),"function"==typeof a.componentDidUpdate&&(t.effectTag|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=_),a.props=r,a.state=_,a.context=u,r=l):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=256),r=!1);return Na(e,t,n,r,i,o)}function Na(e,t,n,r,o,i){La(e,t);var a=0!=(64&t.effectTag);if(!r&&!a)return o&&Eo(t,n,!1),Ya(e,t,i);r=t.stateNode,ka.current=t;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&a?(t.child=Ti(t,e.child,null,i),t.child=Ti(t,null,s,i)):Ia(e,t,s,i),t.memoizedState=r.state,o&&Eo(t,n,!0),t.child}function Ua(e){var t=e.stateNode;t.pendingContext?vo(0,t.pendingContext,t.pendingContext!==t.context):t.context&&vo(0,t.context,!1),xi(e,t.containerInfo)}var Fa,Wa,Ha,Ka={dehydrated:null,retryTime:0};function Va(e,t,n){var r,o=t.mode,i=t.pendingProps,a=Ri.current,s=!1;if((r=0!=(64&t.effectTag))||(r=0!=(2&a)&&(null===e||null!==e.memoizedState)),r?(s=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(a|=1),uo(Ri,1&a),null===e){if(void 0!==i.fallback&&Ta(t),s){if(s=i.fallback,(i=Pc(null,o,0,null)).return=t,0==(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,i.child=e;null!==e;)e.return=i,e=e.sibling;return(n=Pc(s,o,n,null)).return=t,i.sibling=n,t.memoizedState=Ka,t.child=i,n}return o=i.children,t.memoizedState=null,t.child=Si(t,null,o,n)}if(null!==e.memoizedState){if(o=(e=e.child).sibling,s){if(i=i.fallback,(n=Sc(e,e.pendingProps)).return=t,0==(2&t.mode)&&(s=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(n.child=s;null!==s;)s.return=n,s=s.sibling;return(o=Sc(o,i)).return=t,n.sibling=o,n.childExpirationTime=0,t.memoizedState=Ka,t.child=n,o}return n=Ti(t,e.child,i.children,n),t.memoizedState=null,t.child=n}if(e=e.child,s){if(s=i.fallback,(i=Pc(null,o,0,null)).return=t,i.child=e,null!==e&&(e.return=i),0==(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,i.child=e;null!==e;)e.return=i,e=e.sibling;return(n=Pc(s,o,n,null)).return=t,i.sibling=n,n.effectTag|=2,i.childExpirationTime=0,t.memoizedState=Ka,t.child=i,n}return t.memoizedState=null,t.child=Ti(t,e,i.children,n)}function qa(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t),ni(e.return,t)}function Ga(e,t,n,r,o,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:o,lastEffect:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailExpiration=0,a.tailMode=o,a.lastEffect=i)}function za(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;if(Ia(e,t,r.children,n),0!=(2&(r=Ri.current)))r=1&r|2,t.effectTag|=64;else{if(null!==e&&0!=(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&qa(e,n);else if(19===e.tag)qa(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(uo(Ri,r),0==(2&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===Bi(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Ga(t,!1,o,n,i,t.lastEffect);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===Bi(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Ga(t,!0,n,null,i,t.lastEffect);break;case"together":Ga(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Ya(e,t,n){null!==e&&(t.dependencies=e.dependencies);var r=t.expirationTime;if(0!==r&&ac(r),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Sc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Sc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function $a(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Xa(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return mo(t.type)&&go(),null;case 3:return ji(),co(po),co(_o),(n=t.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||!Da(t)||(t.effectTag|=4),null;case 5:Li(t),n=Ii(Ai.current);var i=t.type;if(null!==e&&null!=t.stateNode)Wa(e,t,i,r,n),e.ref!==t.ref&&(t.effectTag|=128);else{if(!r){if(null===t.stateNode)throw Error(a(166));return null}if(e=Ii(Pi.current),Da(t)){r=t.stateNode,i=t.type;var s=t.memoizedProps;switch(r[Cn]=t,r[Tn]=s,i){case"iframe":case"object":case"embed":zt("load",r);break;case"video":case"audio":for(e=0;e<Xe.length;e++)zt(Xe[e],r);break;case"source":zt("error",r);break;case"img":case"image":case"link":zt("error",r),zt("load",r);break;case"form":zt("reset",r),zt("submit",r);break;case"details":zt("toggle",r);break;case"input":Oe(r,s),zt("invalid",r),cn(n,"onChange");break;case"select":r._wrapperState={wasMultiple:!!s.multiple},zt("invalid",r),cn(n,"onChange");break;case"textarea":Ie(r,s),zt("invalid",r),cn(n,"onChange")}for(var c in on(i,s),e=null,s)if(s.hasOwnProperty(c)){var u=s[c];"children"===c?"string"==typeof u?r.textContent!==u&&(e=["children",u]):"number"==typeof u&&r.textContent!==""+u&&(e=["children",""+u]):C.hasOwnProperty(c)&&null!=u&&cn(n,c)}switch(i){case"input":ye(r),Se(r,s,!0);break;case"textarea":ye(r),je(r);break;case"select":case"option":break;default:"function"==typeof s.onClick&&(r.onclick=un)}n=e,t.updateQueue=n,null!==n&&(t.effectTag|=4)}else{switch(c=9===n.nodeType?n:n.ownerDocument,e===sn&&(e=Re(i)),e===sn?"script"===i?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=c.createElement(i,{is:r.is}):(e=c.createElement(i),"select"===i&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,i),e[Cn]=t,e[Tn]=r,Fa(e,t),t.stateNode=e,c=an(i,r),i){case"iframe":case"object":case"embed":zt("load",e),u=r;break;case"video":case"audio":for(u=0;u<Xe.length;u++)zt(Xe[u],e);u=r;break;case"source":zt("error",e),u=r;break;case"img":case"image":case"link":zt("error",e),zt("load",e),u=r;break;case"form":zt("reset",e),zt("submit",e),u=r;break;case"details":zt("toggle",e),u=r;break;case"input":Oe(e,r),u=we(e,r),zt("invalid",e),cn(n,"onChange");break;case"option":u=Pe(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},u=o({},r,{value:void 0}),zt("invalid",e),cn(n,"onChange");break;case"textarea":Ie(e,r),u=Ae(e,r),zt("invalid",e),cn(n,"onChange");break;default:u=r}on(i,u);var l=u;for(s in l)if(l.hasOwnProperty(s)){var d=l[s];"style"===s?nn(e,d):"dangerouslySetInnerHTML"===s?null!=(d=d?d.__html:void 0)&&Ue(e,d):"children"===s?"string"==typeof d?("textarea"!==i||""!==d)&&Fe(e,d):"number"==typeof d&&Fe(e,""+d):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(C.hasOwnProperty(s)?null!=d&&cn(n,s):null!=d&&Q(e,s,d,c))}switch(i){case"input":ye(e),Se(e,r,!1);break;case"textarea":ye(e),je(e);break;case"option":null!=r.value&&e.setAttribute("value",""+ve(r.value));break;case"select":e.multiple=!!r.multiple,null!=(n=r.value)?ke(e,!!r.multiple,n,!1):null!=r.defaultValue&&ke(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof u.onClick&&(e.onclick=un)}gn(i,r)&&(t.effectTag|=4)}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)Ha(0,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(a(166));n=Ii(Ai.current),Ii(Pi.current),Da(t)?(n=t.stateNode,r=t.memoizedProps,n[Cn]=t,n.nodeValue!==r&&(t.effectTag|=4)):((n=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Cn]=t,t.stateNode=n)}return null;case 13:return co(Ri),r=t.memoizedState,0!=(64&t.effectTag)?(t.expirationTime=n,t):(n=null!==r,r=!1,null===e?void 0!==t.memoizedProps.fallback&&Da(t):(r=null!==(i=e.memoizedState),n||null===i||null!==(i=e.child.sibling)&&(null!==(s=t.firstEffect)?(t.firstEffect=i,i.nextEffect=s):(t.firstEffect=t.lastEffect=i,i.nextEffect=null),i.effectTag=8)),n&&!r&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&Ri.current)?Ds===ys&&(Ds=Es):(Ds!==ys&&Ds!==Es||(Ds=ws),0!==xs&&null!==Cs&&(jc(Cs,Ss),Mc(Cs,xs)))),(n||r)&&(t.effectTag|=4),null);case 4:return ji(),null;case 10:return ti(t),null;case 17:return mo(t.type)&&go(),null;case 19:if(co(Ri),null===(r=t.memoizedState))return null;if(i=0!=(64&t.effectTag),null===(s=r.rendering)){if(i)$a(r,!1);else if(Ds!==ys||null!==e&&0!=(64&e.effectTag))for(s=t.child;null!==s;){if(null!==(e=Bi(s))){for(t.effectTag|=64,$a(r,!1),null!==(i=e.updateQueue)&&(t.updateQueue=i,t.effectTag|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=t.child;null!==r;)s=n,(i=r).effectTag&=2,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null,null===(e=i.alternate)?(i.childExpirationTime=0,i.expirationTime=s,i.child=null,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null):(i.childExpirationTime=e.childExpirationTime,i.expirationTime=e.expirationTime,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,s=e.dependencies,i.dependencies=null===s?null:{expirationTime:s.expirationTime,firstContext:s.firstContext,responders:s.responders}),r=r.sibling;return uo(Ri,1&Ri.current|2),t.child}s=s.sibling}}else{if(!i)if(null!==(e=Bi(s))){if(t.effectTag|=64,i=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.effectTag|=4),$a(r,!0),null===r.tail&&"hidden"===r.tailMode&&!s.alternate)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Fo()-r.renderingStartTime>r.tailExpiration&&1<n&&(t.effectTag|=64,i=!0,$a(r,!1),t.expirationTime=t.childExpirationTime=n-1);r.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=r.last)?n.sibling=s:t.child=s,r.last=s)}return null!==r.tail?(0===r.tailExpiration&&(r.tailExpiration=Fo()+500),n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Fo(),n.sibling=null,t=Ri.current,uo(Ri,i?1&t|2:1&t),n):null}throw Error(a(156,t.tag))}function Qa(e){switch(e.tag){case 1:mo(e.type)&&go();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(ji(),co(po),co(_o),0!=(64&(t=e.effectTag)))throw Error(a(285));return e.effectTag=-4097&t|64,e;case 5:return Li(e),null;case 13:return co(Ri),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return co(Ri),null;case 4:return ji(),null;case 10:return ti(e),null;default:return null}}function Ja(e,t){return{value:e,source:t,stack:ge(t)}}Fa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Wa=function(e,t,n,r,i){var a=e.memoizedProps;if(a!==r){var s,c,u=t.stateNode;switch(Ii(Pi.current),e=null,n){case"input":a=we(u,a),r=we(u,r),e=[];break;case"option":a=Pe(u,a),r=Pe(u,r),e=[];break;case"select":a=o({},a,{value:void 0}),r=o({},r,{value:void 0}),e=[];break;case"textarea":a=Ae(u,a),r=Ae(u,r),e=[];break;default:"function"!=typeof a.onClick&&"function"==typeof r.onClick&&(u.onclick=un)}for(s in on(n,r),n=null,a)if(!r.hasOwnProperty(s)&&a.hasOwnProperty(s)&&null!=a[s])if("style"===s)for(c in u=a[s])u.hasOwnProperty(c)&&(n||(n={}),n[c]="");else"dangerouslySetInnerHTML"!==s&&"children"!==s&&"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(C.hasOwnProperty(s)?e||(e=[]):(e=e||[]).push(s,null));for(s in r){var l=r[s];if(u=null!=a?a[s]:void 0,r.hasOwnProperty(s)&&l!==u&&(null!=l||null!=u))if("style"===s)if(u){for(c in u)!u.hasOwnProperty(c)||l&&l.hasOwnProperty(c)||(n||(n={}),n[c]="");for(c in l)l.hasOwnProperty(c)&&u[c]!==l[c]&&(n||(n={}),n[c]=l[c])}else n||(e||(e=[]),e.push(s,n)),n=l;else"dangerouslySetInnerHTML"===s?(l=l?l.__html:void 0,u=u?u.__html:void 0,null!=l&&u!==l&&(e=e||[]).push(s,l)):"children"===s?u===l||"string"!=typeof l&&"number"!=typeof l||(e=e||[]).push(s,""+l):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&(C.hasOwnProperty(s)?(null!=l&&cn(i,s),e||u===l||(e=[])):(e=e||[]).push(s,l))}n&&(e=e||[]).push("style",n),i=e,(t.updateQueue=i)&&(t.effectTag|=4)}},Ha=function(e,t,n,r){n!==r&&(t.effectTag|=4)};var Za="function"==typeof WeakSet?WeakSet:Set;function es(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=ge(n)),null!==n&&me(n.type),t=t.value,null!==e&&1===e.tag&&me(e.type);try{console.error(t)}catch(e){setTimeout((function(){throw e}))}}function ts(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){vc(e,t)}else t.current=null}function ns(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:$o(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(a(163))}function rs(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==t)}}function os(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function is(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:return void os(3,n);case 1:if(e=n.stateNode,4&n.effectTag)if(null===t)e.componentDidMount();else{var r=n.elementType===n.type?t.memoizedProps:$o(n.type,t.memoizedProps);e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}return void(null!==(t=n.updateQueue)&&_i(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}_i(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.effectTag&&gn(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Rt(n)))));case 19:case 17:case 20:case 21:return}throw Error(a(163))}function as(e,t,n){switch("function"==typeof wc&&wc(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e.next;Ko(97<n?97:n,(function(){var e=r;do{var n=e.destroy;if(void 0!==n){var o=t;try{n()}catch(e){vc(o,e)}}e=e.next}while(e!==r)}))}break;case 1:ts(t),"function"==typeof(n=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){vc(e,t)}}(t,n);break;case 5:ts(t);break;case 4:ls(e,t,n)}}function ss(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,null!==t&&ss(t)}function cs(e){return 5===e.tag||3===e.tag||4===e.tag}function us(e){e:{for(var t=e.return;null!==t;){if(cs(t)){var n=t;break e}t=t.return}throw Error(a(160))}switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(a(161))}16&n.effectTag&&(Fe(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||cs(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}r?function e(t,n,r){var o=t.tag,i=5===o||6===o;if(i)t=i?t.stateNode:t.stateNode.instance,n?8===r.nodeType?r.parentNode.insertBefore(t,n):r.insertBefore(t,n):(8===r.nodeType?(n=r.parentNode).insertBefore(t,r):(n=r).appendChild(t),null!==(r=r._reactRootContainer)&&void 0!==r||null!==n.onclick||(n.onclick=un));else if(4!==o&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,n,t):function e(t,n,r){var o=t.tag,i=5===o||6===o;if(i)t=i?t.stateNode:t.stateNode.instance,n?r.insertBefore(t,n):r.appendChild(t);else if(4!==o&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,n,t)}function ls(e,t,n){for(var r,o,i=t,s=!1;;){if(!s){s=i.return;e:for(;;){if(null===s)throw Error(a(160));switch(r=s.stateNode,s.tag){case 5:o=!1;break e;case 3:case 4:r=r.containerInfo,o=!0;break e}s=s.return}s=!0}if(5===i.tag||6===i.tag){e:for(var c=e,u=i,l=n,d=u;;)if(as(c,d,l),null!==d.child&&4!==d.tag)d.child.return=d,d=d.child;else{if(d===u)break e;for(;null===d.sibling;){if(null===d.return||d.return===u)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}o?(c=r,u=i.stateNode,8===c.nodeType?c.parentNode.removeChild(u):c.removeChild(u)):r.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){r=i.stateNode.containerInfo,o=!0,i.child.return=i,i=i.child;continue}}else if(as(e,i,n),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(s=!1)}i.sibling.return=i.return,i=i.sibling}}function ds(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void rs(3,t);case 1:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,o=null!==e?e.memoizedProps:r;e=t.type;var i=t.updateQueue;if(t.updateQueue=null,null!==i){for(n[Tn]=r,"input"===e&&"radio"===r.type&&null!=r.name&&Ce(n,r),an(e,o),t=an(e,r),o=0;o<i.length;o+=2){var s=i[o],c=i[o+1];"style"===s?nn(n,c):"dangerouslySetInnerHTML"===s?Ue(n,c):"children"===s?Fe(n,c):Q(n,s,c,t)}switch(e){case"input":Te(n,r);break;case"textarea":xe(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(e=r.value)?ke(n,!!r.multiple,e,!1):t!==!!r.multiple&&(null!=r.defaultValue?ke(n,!!r.multiple,r.defaultValue,!0):ke(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(a(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((t=t.stateNode).hydrate&&(t.hydrate=!1,Rt(t.containerInfo)));case 12:return;case 13:if(n=t,null===t.memoizedState?r=!1:(r=!0,n=t.child,Ms=Fo()),null!==n)e:for(e=n;;){if(5===e.tag)i=e.stateNode,r?"function"==typeof(i=i.style).setProperty?i.setProperty("display","none","important"):i.display="none":(i=e.stateNode,o=null!=(o=e.memoizedProps.style)&&o.hasOwnProperty("display")?o.display:null,i.style.display=tn("display",o));else if(6===e.tag)e.stateNode.nodeValue=r?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(i=e.child.sibling).return=e,e=i;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===n)break;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}return void _s(t);case 19:return void _s(t);case 17:return}throw Error(a(163))}function _s(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Za),t.forEach((function(t){var r=yc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}var ps="function"==typeof WeakMap?WeakMap:Map;function hs(e,t,n){(n=ci(n,null)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Rs||(Rs=!0,Bs=r),es(e,t)},n}function fs(e,t,n){(n=ci(n,null)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var o=t.value;n.payload=function(){return es(e,t),r(o)}}var i=e.stateNode;return null!==i&&"function"==typeof i.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===Ns?Ns=new Set([this]):Ns.add(this),es(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}var ms,gs=Math.ceil,vs=X.ReactCurrentDispatcher,bs=X.ReactCurrentOwner,ys=0,Es=3,ws=4,Os=0,Cs=null,Ts=null,Ss=0,Ds=ys,Ps=null,ks=1073741823,As=1073741823,Is=null,xs=0,js=!1,Ms=0,Ls=null,Rs=!1,Bs=null,Ns=null,Us=!1,Fs=null,Ws=90,Hs=null,Ks=0,Vs=null,qs=0;function Gs(){return 0!=(48&Os)?1073741821-(Fo()/10|0):0!==qs?qs:qs=1073741821-(Fo()/10|0)}function zs(e,t,n){if(0==(2&(t=t.mode)))return 1073741823;var r=Wo();if(0==(4&t))return 99===r?1073741823:1073741822;if(0!=(16&Os))return Ss;if(null!==n)e=Yo(e,0|n.timeoutMs||5e3,250);else switch(r){case 99:e=1073741823;break;case 98:e=Yo(e,150,100);break;case 97:case 96:e=Yo(e,5e3,250);break;case 95:e=2;break;default:throw Error(a(326))}return null!==Cs&&e===Ss&&--e,e}function Ys(e,t){if(50<Ks)throw Ks=0,Vs=null,Error(a(185));if(null!==(e=$s(e,t))){var n=Wo();1073741823===t?0!=(8&Os)&&0==(48&Os)?Zs(e):(Qs(e),0===Os&&Go()):Qs(e),0==(4&Os)||98!==n&&99!==n||(null===Hs?Hs=new Map([[e,t]]):(void 0===(n=Hs.get(e))||n>t)&&Hs.set(e,t))}}function $s(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,o=null;if(null===r&&3===e.tag)o=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){o=r.stateNode;break}r=r.return}return null!==o&&(Cs===o&&(ac(t),Ds===ws&&jc(o,Ss)),Mc(o,t)),o}function Xs(e){var t=e.lastExpiredTime;if(0!==t)return t;if(!xc(e,t=e.firstPendingTime))return t;var n=e.lastPingedTime;return 2>=(e=n>(e=e.nextKnownPendingLevel)?n:e)&&t!==e?0:e}function Qs(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=qo(Zs.bind(null,e));else{var t=Xs(e),n=e.callbackNode;if(0===t)null!==n&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var r=Gs();if(1073741823===t?r=99:1===t||2===t?r=95:r=0>=(r=10*(1073741821-t)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var o=e.callbackPriority;if(e.callbackExpirationTime===t&&o>=r)return;n!==jo&&Co(n)}e.callbackExpirationTime=t,e.callbackPriority=r,t=1073741823===t?qo(Zs.bind(null,e)):Vo(r,Js.bind(null,e),{timeout:10*(1073741821-t)-Fo()}),e.callbackNode=t}}}function Js(e,t){if(qs=0,t)return Lc(e,t=Gs()),Qs(e),null;var n=Xs(e);if(0!==n){if(t=e.callbackNode,0!=(48&Os))throw Error(a(327));if(fc(),e===Cs&&n===Ss||nc(e,n),null!==Ts){var r=Os;Os|=16;for(var o=oc();;)try{cc();break}catch(t){rc(e,t)}if(ei(),Os=r,vs.current=o,1===Ds)throw t=Ps,nc(e,n),jc(e,n),Qs(e),t;if(null===Ts)switch(o=e.finishedWork=e.current.alternate,e.finishedExpirationTime=n,r=Ds,Cs=null,r){case ys:case 1:throw Error(a(345));case 2:Lc(e,2<n?2:n);break;case Es:if(jc(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=dc(o)),1073741823===ks&&10<(o=Ms+500-Fo())){if(js){var i=e.lastPingedTime;if(0===i||i>=n){e.lastPingedTime=n,nc(e,n);break}}if(0!==(i=Xs(e))&&i!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}e.timeoutHandle=bn(_c.bind(null,e),o);break}_c(e);break;case ws:if(jc(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=dc(o)),js&&(0===(o=e.lastPingedTime)||o>=n)){e.lastPingedTime=n,nc(e,n);break}if(0!==(o=Xs(e))&&o!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}if(1073741823!==As?r=10*(1073741821-As)-Fo():1073741823===ks?r=0:(r=10*(1073741821-ks)-5e3,0>(r=(o=Fo())-r)&&(r=0),(n=10*(1073741821-n)-o)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*gs(r/1960))-r)&&(r=n)),10<r){e.timeoutHandle=bn(_c.bind(null,e),r);break}_c(e);break;case 5:if(1073741823!==ks&&null!==Is){i=ks;var s=Is;if(0>=(r=0|s.busyMinDurationMs)?r=0:(o=0|s.busyDelayMs,r=(i=Fo()-(10*(1073741821-i)-(0|s.timeoutMs||5e3)))<=o?0:o+r-i),10<r){jc(e,n),e.timeoutHandle=bn(_c.bind(null,e),r);break}}_c(e);break;default:throw Error(a(329))}if(Qs(e),e.callbackNode===t)return Js.bind(null,e)}}return null}function Zs(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,0!=(48&Os))throw Error(a(327));if(fc(),e===Cs&&t===Ss||nc(e,t),null!==Ts){var n=Os;Os|=16;for(var r=oc();;)try{sc();break}catch(t){rc(e,t)}if(ei(),Os=n,vs.current=r,1===Ds)throw n=Ps,nc(e,t),jc(e,t),Qs(e),n;if(null!==Ts)throw Error(a(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,Cs=null,_c(e),Qs(e)}return null}function ec(e,t){var n=Os;Os|=1;try{return e(t)}finally{0===(Os=n)&&Go()}}function tc(e,t){var n=Os;Os&=-2,Os|=8;try{return e(t)}finally{0===(Os=n)&&Go()}}function nc(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,yn(n)),null!==Ts)for(n=Ts.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&go();break;case 3:ji(),co(po),co(_o);break;case 5:Li(r);break;case 4:ji();break;case 13:case 19:co(Ri);break;case 10:ti(r)}n=n.return}Cs=e,Ts=Sc(e.current,null),Ss=t,Ds=ys,Ps=null,As=ks=1073741823,Is=null,xs=0,js=!1}function rc(e,t){for(;;){try{if(ei(),Ui.current=ma,qi)for(var n=Hi.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}if(Wi=0,Vi=Ki=Hi=null,qi=!1,null===Ts||null===Ts.return)return Ds=1,Ps=t,Ts=null;e:{var o=e,i=Ts.return,a=Ts,s=t;if(t=Ss,a.effectTag|=2048,a.firstEffect=a.lastEffect=null,null!==s&&"object"==typeof s&&"function"==typeof s.then){var c=s;if(0==(2&a.mode)){var u=a.alternate;u?(a.updateQueue=u.updateQueue,a.memoizedState=u.memoizedState,a.expirationTime=u.expirationTime):(a.updateQueue=null,a.memoizedState=null)}var l=0!=(1&Ri.current),d=i;do{var _;if(_=13===d.tag){var p=d.memoizedState;if(null!==p)_=null!==p.dehydrated;else{var h=d.memoizedProps;_=void 0!==h.fallback&&(!0!==h.unstable_avoidThisFallback||!l)}}if(_){var f=d.updateQueue;if(null===f){var m=new Set;m.add(c),d.updateQueue=m}else f.add(c);if(0==(2&d.mode)){if(d.effectTag|=64,a.effectTag&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var g=ci(1073741823,null);g.tag=2,ui(a,g)}a.expirationTime=1073741823;break e}s=void 0,a=t;var v=o.pingCache;if(null===v?(v=o.pingCache=new ps,s=new Set,v.set(c,s)):void 0===(s=v.get(c))&&(s=new Set,v.set(c,s)),!s.has(a)){s.add(a);var b=bc.bind(null,o,c,a);c.then(b,b)}d.effectTag|=4096,d.expirationTime=t;break e}d=d.return}while(null!==d);s=Error((me(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+ge(a))}5!==Ds&&(Ds=2),s=Ja(s,a),d=i;do{switch(d.tag){case 3:c=s,d.effectTag|=4096,d.expirationTime=t,li(d,hs(d,c,t));break e;case 1:c=s;var y=d.type,E=d.stateNode;if(0==(64&d.effectTag)&&("function"==typeof y.getDerivedStateFromError||null!==E&&"function"==typeof E.componentDidCatch&&(null===Ns||!Ns.has(E)))){d.effectTag|=4096,d.expirationTime=t,li(d,fs(d,c,t));break e}}d=d.return}while(null!==d)}Ts=lc(Ts)}catch(e){t=e;continue}break}}function oc(){var e=vs.current;return vs.current=ma,null===e?ma:e}function ic(e,t){e<ks&&2<e&&(ks=e),null!==t&&e<As&&2<e&&(As=e,Is=t)}function ac(e){e>xs&&(xs=e)}function sc(){for(;null!==Ts;)Ts=uc(Ts)}function cc(){for(;null!==Ts&&!Mo();)Ts=uc(Ts)}function uc(e){var t=ms(e.alternate,e,Ss);return e.memoizedProps=e.pendingProps,null===t&&(t=lc(e)),bs.current=null,t}function lc(e){Ts=e;do{var t=Ts.alternate;if(e=Ts.return,0==(2048&Ts.effectTag)){if(t=Xa(t,Ts,Ss),1===Ss||1!==Ts.childExpirationTime){for(var n=0,r=Ts.child;null!==r;){var o=r.expirationTime,i=r.childExpirationTime;o>n&&(n=o),i>n&&(n=i),r=r.sibling}Ts.childExpirationTime=n}if(null!==t)return t;null!==e&&0==(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=Ts.firstEffect),null!==Ts.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=Ts.firstEffect),e.lastEffect=Ts.lastEffect),1<Ts.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=Ts:e.firstEffect=Ts,e.lastEffect=Ts))}else{if(null!==(t=Qa(Ts)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=Ts.sibling))return t;Ts=e}while(null!==Ts);return Ds===ys&&(Ds=5),null}function dc(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function _c(e){var t=Wo();return Ko(99,pc.bind(null,e,t)),null}function pc(e,t){do{fc()}while(null!==Fs);if(0!=(48&Os))throw Error(a(327));var n=e.finishedWork,r=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var o=dc(n);if(e.firstPendingTime=o,r<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:r<=e.firstSuspendedTime&&(e.firstSuspendedTime=r-1),r<=e.lastPingedTime&&(e.lastPingedTime=0),r<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===Cs&&(Ts=Cs=null,Ss=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,o=n.firstEffect):o=n:o=n.firstEffect,null!==o){var i=Os;Os|=32,bs.current=null,fn=Gt;var s=pn();if(hn(s)){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else e:{var u=(c=(c=s.ownerDocument)&&c.defaultView||window).getSelection&&c.getSelection();if(u&&0!==u.rangeCount){c=u.anchorNode;var l=u.anchorOffset,d=u.focusNode;u=u.focusOffset;try{c.nodeType,d.nodeType}catch(e){c=null;break e}var _=0,p=-1,h=-1,f=0,m=0,g=s,v=null;t:for(;;){for(var b;g!==c||0!==l&&3!==g.nodeType||(p=_+l),g!==d||0!==u&&3!==g.nodeType||(h=_+u),3===g.nodeType&&(_+=g.nodeValue.length),null!==(b=g.firstChild);)v=g,g=b;for(;;){if(g===s)break t;if(v===c&&++f===l&&(p=_),v===d&&++m===u&&(h=_),null!==(b=g.nextSibling))break;v=(g=v).parentNode}g=b}c=-1===p||-1===h?null:{start:p,end:h}}else c=null}c=c||{start:0,end:0}}else c=null;mn={activeElementDetached:null,focusedElem:s,selectionRange:c},Gt=!1,Ls=o;do{try{hc()}catch(e){if(null===Ls)throw Error(a(330));vc(Ls,e),Ls=Ls.nextEffect}}while(null!==Ls);Ls=o;do{try{for(s=e,c=t;null!==Ls;){var y=Ls.effectTag;if(16&y&&Fe(Ls.stateNode,""),128&y){var E=Ls.alternate;if(null!==E){var w=E.ref;null!==w&&("function"==typeof w?w(null):w.current=null)}}switch(1038&y){case 2:us(Ls),Ls.effectTag&=-3;break;case 6:us(Ls),Ls.effectTag&=-3,ds(Ls.alternate,Ls);break;case 1024:Ls.effectTag&=-1025;break;case 1028:Ls.effectTag&=-1025,ds(Ls.alternate,Ls);break;case 4:ds(Ls.alternate,Ls);break;case 8:ls(s,l=Ls,c),ss(l)}Ls=Ls.nextEffect}}catch(e){if(null===Ls)throw Error(a(330));vc(Ls,e),Ls=Ls.nextEffect}}while(null!==Ls);if(w=mn,E=pn(),y=w.focusedElem,c=w.selectionRange,E!==y&&y&&y.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(y.ownerDocument.documentElement,y)){null!==c&&hn(y)&&(E=c.start,void 0===(w=c.end)&&(w=E),"selectionStart"in y?(y.selectionStart=E,y.selectionEnd=Math.min(w,y.value.length)):(w=(E=y.ownerDocument||document)&&E.defaultView||window).getSelection&&(w=w.getSelection(),l=y.textContent.length,s=Math.min(c.start,l),c=void 0===c.end?s:Math.min(c.end,l),!w.extend&&s>c&&(l=c,c=s,s=l),l=_n(y,s),d=_n(y,c),l&&d&&(1!==w.rangeCount||w.anchorNode!==l.node||w.anchorOffset!==l.offset||w.focusNode!==d.node||w.focusOffset!==d.offset)&&((E=E.createRange()).setStart(l.node,l.offset),w.removeAllRanges(),s>c?(w.addRange(E),w.extend(d.node,d.offset)):(E.setEnd(d.node,d.offset),w.addRange(E))))),E=[];for(w=y;w=w.parentNode;)1===w.nodeType&&E.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"==typeof y.focus&&y.focus(),y=0;y<E.length;y++)(w=E[y]).element.scrollLeft=w.left,w.element.scrollTop=w.top}Gt=!!fn,mn=fn=null,e.current=n,Ls=o;do{try{for(y=e;null!==Ls;){var O=Ls.effectTag;if(36&O&&is(y,Ls.alternate,Ls),128&O){E=void 0;var C=Ls.ref;if(null!==C){var T=Ls.stateNode;switch(Ls.tag){case 5:E=T;break;default:E=T}"function"==typeof C?C(E):C.current=E}}Ls=Ls.nextEffect}}catch(e){if(null===Ls)throw Error(a(330));vc(Ls,e),Ls=Ls.nextEffect}}while(null!==Ls);Ls=null,Lo(),Os=i}else e.current=n;if(Us)Us=!1,Fs=e,Ws=t;else for(Ls=o;null!==Ls;)t=Ls.nextEffect,Ls.nextEffect=null,Ls=t;if(0===(t=e.firstPendingTime)&&(Ns=null),1073741823===t?e===Vs?Ks++:(Ks=0,Vs=e):Ks=0,"function"==typeof Ec&&Ec(n.stateNode,r),Qs(e),Rs)throw Rs=!1,e=Bs,Bs=null,e;return 0!=(8&Os)||Go(),null}function hc(){for(;null!==Ls;){var e=Ls.effectTag;0!=(256&e)&&ns(Ls.alternate,Ls),0==(512&e)||Us||(Us=!0,Vo(97,(function(){return fc(),null}))),Ls=Ls.nextEffect}}function fc(){if(90!==Ws){var e=97<Ws?97:Ws;return Ws=90,Ko(e,mc)}}function mc(){if(null===Fs)return!1;var e=Fs;if(Fs=null,0!=(48&Os))throw Error(a(331));var t=Os;for(Os|=32,e=e.current.firstEffect;null!==e;){try{var n=e;if(0!=(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:rs(5,n),os(5,n)}}catch(t){if(null===e)throw Error(a(330));vc(e,t)}n=e.nextEffect,e.nextEffect=null,e=n}return Os=t,Go(),!0}function gc(e,t,n){ui(e,t=hs(e,t=Ja(n,t),1073741823)),null!==(e=$s(e,1073741823))&&Qs(e)}function vc(e,t){if(3===e.tag)gc(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){gc(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Ns||!Ns.has(r))){ui(n,e=fs(n,e=Ja(t,e),1073741823)),null!==(n=$s(n,1073741823))&&Qs(n);break}}n=n.return}}function bc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),Cs===e&&Ss===n?Ds===ws||Ds===Es&&1073741823===ks&&Fo()-Ms<500?nc(e,Ss):js=!0:xc(e,n)&&(0!==(t=e.lastPingedTime)&&t<n||(e.lastPingedTime=n,Qs(e)))}function yc(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(t=zs(t=Gs(),e,null)),null!==(e=$s(e,t))&&Qs(e)}ms=function(e,t,n){var r=t.expirationTime;if(null!==e){var o=t.pendingProps;if(e.memoizedProps!==o||po.current)Aa=!0;else{if(r<n){switch(Aa=!1,t.tag){case 3:Ua(t),Pa();break;case 5:if(Mi(t),4&t.mode&&1!==n&&o.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:mo(t.type)&&yo(t);break;case 4:xi(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value,o=t.type._context,uo(Xo,o._currentValue),o._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?Va(e,t,n):(uo(Ri,1&Ri.current),null!==(t=Ya(e,t,n))?t.sibling:null);uo(Ri,1&Ri.current);break;case 19:if(r=t.childExpirationTime>=n,0!=(64&e.effectTag)){if(r)return za(e,t,n);t.effectTag|=64}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null),uo(Ri,Ri.current),!r)return null}return Ya(e,t,n)}Aa=!1}}else Aa=!1;switch(t.expirationTime=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,o=fo(t,_o.current),ri(t,n),o=Yi(null,t,r,e,o,n),t.effectTag|=1,"object"==typeof o&&null!==o&&"function"==typeof o.render&&void 0===o.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,mo(r)){var i=!0;yo(t)}else i=!1;t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,ai(t);var s=r.getDerivedStateFromProps;"function"==typeof s&&fi(t,r,s,e),o.updater=mi,t.stateNode=o,o._reactInternalFiber=t,yi(t,r,e,n),t=Na(null,t,r,!0,i,n)}else t.tag=0,Ia(null,t,o,n),t=t.child;return t;case 16:e:{if(o=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(o),1!==o._status)throw o._result;switch(o=o._result,t.type=o,i=t.tag=function(e){if("function"==typeof e)return Tc(e)?1:0;if(null!=e){if((e=e.$$typeof)===ce)return 11;if(e===de)return 14}return 2}(o),e=$o(o,e),i){case 0:t=Ra(null,t,o,e,n);break e;case 1:t=Ba(null,t,o,e,n);break e;case 11:t=xa(null,t,o,e,n);break e;case 14:t=ja(null,t,o,$o(o.type,e),r,n);break e}throw Error(a(306,o,""))}return t;case 0:return r=t.type,o=t.pendingProps,Ra(e,t,r,o=t.elementType===r?o:$o(r,o),n);case 1:return r=t.type,o=t.pendingProps,Ba(e,t,r,o=t.elementType===r?o:$o(r,o),n);case 3:if(Ua(t),r=t.updateQueue,null===e||null===r)throw Error(a(282));if(r=t.pendingProps,o=null!==(o=t.memoizedState)?o.element:null,si(e,t),di(t,r,null,n),(r=t.memoizedState.element)===o)Pa(),t=Ya(e,t,n);else{if((o=t.stateNode.hydrate)&&(Ea=En(t.stateNode.containerInfo.firstChild),ya=t,o=wa=!0),o)for(n=Si(t,null,r,n),t.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Ia(e,t,r,n),Pa();t=t.child}return t;case 5:return Mi(t),null===e&&Ta(t),r=t.type,o=t.pendingProps,i=null!==e?e.memoizedProps:null,s=o.children,vn(r,o)?s=null:null!==i&&vn(r,i)&&(t.effectTag|=16),La(e,t),4&t.mode&&1!==n&&o.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Ia(e,t,s,n),t=t.child),t;case 6:return null===e&&Ta(t),null;case 13:return Va(e,t,n);case 4:return xi(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ti(t,null,r,n):Ia(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,xa(e,t,r,o=t.elementType===r?o:$o(r,o),n);case 7:return Ia(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ia(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,o=t.pendingProps,s=t.memoizedProps,i=o.value;var c=t.type._context;if(uo(Xo,c._currentValue),c._currentValue=i,null!==s)if(c=s.value,0===(i=Br(c,i)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(c,i):1073741823))){if(s.children===o.children&&!po.current){t=Ya(e,t,n);break e}}else for(null!==(c=t.child)&&(c.return=t);null!==c;){var u=c.dependencies;if(null!==u){s=c.child;for(var l=u.firstContext;null!==l;){if(l.context===r&&0!=(l.observedBits&i)){1===c.tag&&((l=ci(n,null)).tag=2,ui(c,l)),c.expirationTime<n&&(c.expirationTime=n),null!==(l=c.alternate)&&l.expirationTime<n&&(l.expirationTime=n),ni(c.return,n),u.expirationTime<n&&(u.expirationTime=n);break}l=l.next}}else s=10===c.tag&&c.type===t.type?null:c.child;if(null!==s)s.return=c;else for(s=c;null!==s;){if(s===t){s=null;break}if(null!==(c=s.sibling)){c.return=s.return,s=c;break}s=s.return}c=s}Ia(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=(i=t.pendingProps).children,ri(t,n),r=r(o=oi(o,i.unstable_observedBits)),t.effectTag|=1,Ia(e,t,r,n),t.child;case 14:return i=$o(o=t.type,t.pendingProps),ja(e,t,o,i=$o(o.type,i),r,n);case 15:return Ma(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:$o(r,o),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,mo(r)?(e=!0,yo(t)):e=!1,ri(t,n),vi(t,r,o),yi(t,r,o,n),Na(null,t,r,!0,e,n);case 19:return za(e,t,n)}throw Error(a(156,t.tag))};var Ec=null,wc=null;function Oc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Cc(e,t,n,r){return new Oc(e,t,n,r)}function Tc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Sc(e,t){var n=e.alternate;return null===n?((n=Cc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,r,o,i){var s=2;if(r=e,"function"==typeof e)Tc(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case ne:return Pc(n.children,o,i,t);case se:s=8,o|=7;break;case re:s=8,o|=1;break;case oe:return(e=Cc(12,n,t,8|o)).elementType=oe,e.type=oe,e.expirationTime=i,e;case ue:return(e=Cc(13,n,t,o)).type=ue,e.elementType=ue,e.expirationTime=i,e;case le:return(e=Cc(19,n,t,o)).elementType=le,e.expirationTime=i,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case ie:s=10;break e;case ae:s=9;break e;case ce:s=11;break e;case de:s=14;break e;case _e:s=16,r=null;break e;case pe:s=22;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Cc(s,n,t,o)).elementType=e,t.type=r,t.expirationTime=i,t}function Pc(e,t,n,r){return(e=Cc(7,e,r,t)).expirationTime=n,e}function kc(e,t,n){return(e=Cc(6,e,null,t)).expirationTime=n,e}function Ac(e,t,n){return(t=Cc(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ic(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function xc(e,t){var n=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==n&&n>=t&&e<=t}function jc(e,t){var n=e.firstSuspendedTime,r=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(r>t||0===n)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function Mc(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;0!==n&&(t>=n?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function Lc(e,t){var n=e.lastExpiredTime;(0===n||n>t)&&(e.lastExpiredTime=t)}function Rc(e,t,n,r){var o=t.current,i=Gs(),s=pi.suspense;i=zs(i,o,s);e:if(n){t:{if(Ze(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(a(170));var c=n;do{switch(c.tag){case 3:c=c.stateNode.context;break t;case 1:if(mo(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break t}}c=c.return}while(null!==c);throw Error(a(171))}if(1===n.tag){var u=n.type;if(mo(u)){n=bo(n,u,c);break e}}n=c}else n=lo;return null===t.context?t.context=n:t.pendingContext=n,(t=ci(i,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),ui(o,t),Ys(o,i),i}function Bc(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Nc(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function Uc(e,t){Nc(e,t),(e=e.alternate)&&Nc(e,t)}function Fc(e,t,n){var r=new Ic(e,t,n=null!=n&&!0===n.hydrate),o=Cc(3,null,null,2===t?7:1===t?3:0);r.current=o,o.stateNode=r,ai(o),e[Sn]=r.current,n&&0!==t&&function(e,t){var n=Je(t);St.forEach((function(e){ht(e,t,n)})),Dt.forEach((function(e){ht(e,t,n)}))}(0,9===e.nodeType?e:e.ownerDocument),this._internalRoot=r}function Wc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Hc(e,t,n,r,o){var i=n._reactRootContainer;if(i){var a=i._internalRoot;if("function"==typeof o){var s=o;o=function(){var e=Bc(a);s.call(e)}}Rc(t,a,e,o)}else{if(i=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Fc(e,0,t?{hydrate:!0}:void 0)}(n,r),a=i._internalRoot,"function"==typeof o){var c=o;o=function(){var e=Bc(a);c.call(e)}}tc((function(){Rc(t,a,e,o)}))}return Bc(a)}function Kc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:te,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Vc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Wc(t))throw Error(a(200));return Kc(e,t,null,n)}Fc.prototype.render=function(e){Rc(e,this._internalRoot,null,null)},Fc.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Rc(null,e,null,(function(){t[Sn]=null}))},ft=function(e){if(13===e.tag){var t=Yo(Gs(),150,100);Ys(e,t),Uc(e,t)}},mt=function(e){13===e.tag&&(Ys(e,3),Uc(e,3))},gt=function(e){if(13===e.tag){var t=Gs();Ys(e,t=zs(t,e,null)),Uc(e,t)}},P=function(e,t,n){switch(t){case"input":if(Te(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=An(r);if(!o)throw Error(a(90));Ee(r),Te(r,o)}}}break;case"textarea":xe(e,n);break;case"select":null!=(t=n.value)&&ke(e,!!n.multiple,t,!1)}},M=ec,L=function(e,t,n,r,o){var i=Os;Os|=4;try{return Ko(98,e.bind(null,t,n,r,o))}finally{0===(Os=i)&&Go()}},R=function(){0==(49&Os)&&(function(){if(null!==Hs){var e=Hs;Hs=null,e.forEach((function(e,t){Lc(t,e),Qs(t)})),Go()}}(),fc())},B=function(e,t){var n=Os;Os|=2;try{return e(t)}finally{0===(Os=n)&&Go()}};var qc,Gc,zc={Events:[Pn,kn,An,S,O,Bn,function(e){ot(e,Rn)},x,j,Qt,st,fc,{current:!1}]};Gc=(qc={findFiberByHostInstance:Dn,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"}).findFiberByHostInstance,function(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);Ec=function(e){try{t.onCommitFiberRoot(n,e,void 0,64==(64&e.current.effectTag))}catch(e){}},wc=function(e){try{t.onCommitFiberUnmount(n,e)}catch(e){}}}catch(e){}}(o({},qc,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:X.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=nt(e))?null:e.stateNode},findFiberByHostInstance:function(e){return Gc?Gc(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null})),t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zc,t.createPortal=Vc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"==typeof e.render)throw Error(a(188));throw Error(a(268,Object.keys(e)))}return e=null===(e=nt(t))?null:e.stateNode},t.flushSync=function(e,t){if(0!=(48&Os))throw Error(a(187));var n=Os;Os|=1;try{return Ko(99,e.bind(null,t))}finally{Os=n,Go()}},t.hydrate=function(e,t,n){if(!Wc(t))throw Error(a(200));return Hc(null,e,t,!0,n)},t.render=function(e,t,n){if(!Wc(t))throw Error(a(200));return Hc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Wc(e))throw Error(a(40));return!!e._reactRootContainer&&(tc((function(){Hc(null,null,e,!1,(function(){e._reactRootContainer=null,e[Sn]=null}))})),!0)},t.unstable_batchedUpdates=ec,t.unstable_createPortal=function(e,t){return Vc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Wc(n))throw Error(a(200));if(null==e||void 0===e._reactInternalFiber)throw Error(a(38));return Hc(e,t,n,!1,r)},t.version="16.14.0"},ylqs:function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},yqpO:function(e,t,n){"use strict";n.r(t),n.d(t,"emojiToHTML",(function(){return a})),n.d(t,"getEmojiHTML",(function(){return s})),n.d(t,"emojiReplace",(function(){return c}));n("rGqo"),n("Btvt"),n("pIFo");var r=n("S6+Z"),o=n("TxR4"),i=n("vkmG");function a(e,t){if(browser.ipad||browser.iphone)return e;e=(e+"").replace(/&nbsp;/g," ").replace(/<br>/g,"\n");for(var n=0;n<2;n++)Object.keys(r.EMOJI_PREFIXED_REPLACES).forEach(t=>{e.replace(r.EMOJI_PREFIXED_REPLACES[t],(e,n,r,o)=>(n||"")+s(t)+(o||""))});return Object.keys(r.EMOJI_REPLACES).forEach(t=>{e=e.replace(r.EMOJI_REPLACES[t],(e,n,r)=>s(t)+(r||""))}),e=e.replace(/\n/g,"<br>"),t&&(e=e.replace(/\uFE0F/g,"").replace(Object(r.emojiRegex)(),c)),e}function s(e,t,n,r){return!n&&t?t:r?`<i class="emoji @${e}" emoji="${e}"${t?` title="${t}"`:""}></i>`:`<img class="emoji" src="/emoji/e/${e}${window.devicePixelRatio>=2?"_2x":""}.png"${t?` alt="${t}"`:""}${browser.msie&&Number(browser.version)>8?' contenteditable="false"':""}>`}function c(e){return s(Object(o.emojiSymbolToByteHex)(e),Object(i.encodeHTMLEntities)(e),!0)}},yt8O:function(e,t,n){"use strict";var r=n("nGyu"),o=n("1TsA"),i=n("hPIQ"),a=n("aCFj");e.exports=n("Afnz")(Array,"Array",(function(e,t){this._t=a(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,o(1)):o(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},zMZw:function(e,t,n){var r=n("k76L");t.write=function(e,t){return void 0!==e&&void 0!==e.media&&Array.isArray(e.media)&&e.media.forEach((function(e){void 0!==e.sources&&0!==Object.keys(e.sources).length&&(e.ssrcs=[],Object.keys(e.sources).forEach((function(t){var n=e.sources[t];Object.keys(n).forEach((function(r){e.ssrcs.push({id:t,attribute:r,value:n[r]})}))})),delete e.sources),void 0!==e.ssrcGroups&&Array.isArray(e.ssrcGroups)&&e.ssrcGroups.forEach((function(e){void 0!==e.ssrcs&&Array.isArray(e.ssrcs)&&(e.ssrcs=e.ssrcs.join(" "))}))})),void 0!==e&&void 0!==e.groups&&Array.isArray(e.groups)&&e.groups.forEach((function(e){void 0!==e.mids&&Array.isArray(e.mids)&&(e.mids=e.mids.join(" "))})),r.write(e,t)},t.parse=function(e){var t=r.parse(e);return void 0!==t&&void 0!==t.media&&Array.isArray(t.media)&&t.media.forEach((function(e){void 0!==e.ssrcs&&Array.isArray(e.ssrcs)&&(e.sources={},e.ssrcs.forEach((function(t){e.sources[t.id]||(e.sources[t.id]={}),e.sources[t.id][t.attribute]=t.value})),delete e.ssrcs),void 0!==e.ssrcGroups&&Array.isArray(e.ssrcGroups)&&e.ssrcGroups.forEach((function(e){"string"==typeof e.ssrcs&&(e.ssrcs=e.ssrcs.split(" "))}))})),void 0!==t&&void 0!==t.groups&&Array.isArray(t.groups)&&t.groups.forEach((function(e){"string"==typeof e.mids&&(e.mids=e.mids.split(" "))})),t}},zRwo:function(e,t,n){var r=n("6FMO");e.exports=function(e,t){return new(r(e))(t)}},zhAb:function(e,t,n){var r=n("aagx"),o=n("aCFj"),i=n("w2a5")(!1),a=n("YTvA")("IE_PROTO");e.exports=function(e,t){var n,s=o(e),c=0,u=[];for(n in s)n!=a&&r(s,n)&&u.push(n);for(;t.length>c;)r(s,n=t[c++])&&(~i(u,n)||u.push(n));return u}},zvoO:function(e,t,n){var r=function(){"undefined"!=typeof document&&document.currentScript&&document.currentScript.src;return function(e){var t,n,r=void 0!==(e=e||{})?e:{};r.ready=new Promise((function(e,r){t=e,n=r}));var o,i={};for(o in r)r.hasOwnProperty(o)&&(i[o]=r[o]);var a,s=[],c="";"undefined"!=typeof document&&document.currentScript&&(c=document.currentScript.src),c=0!==c.indexOf("blob:")?c.substr(0,c.lastIndexOf("/")+1):"";var u=r.print||console.log.bind(console),l=r.printErr||console.warn.bind(console);for(o in i)i.hasOwnProperty(o)&&(r[o]=i[o]);i=null,r.arguments&&(s=r.arguments),r.thisProgram&&r.thisProgram,r.quit&&r.quit;var d,_=0;r.wasmBinary&&(d=r.wasmBinary);var p;r.noExitRuntime;"object"!=typeof WebAssembly&&K("no native wasm support detected");var h=!1;var f="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function m(e,t,n){for(var r=t+n,o=t;e[o]&&!(o>=r);)++o;if(o-t>16&&e.subarray&&f)return f.decode(e.subarray(t,o));for(var i="";t<o;){var a=e[t++];if(128&a){var s=63&e[t++];if(192!=(224&a)){var c=63&e[t++];if((a=224==(240&a)?(15&a)<<12|s<<6|c:(7&a)<<18|s<<12|c<<6|63&e[t++])<65536)i+=String.fromCharCode(a);else{var u=a-65536;i+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else i+=String.fromCharCode((31&a)<<6|s)}else i+=String.fromCharCode(a)}return i}function g(e,t){return e?m(y,e,t):""}var v,b,y,E,w,O,C,T,S,D="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0;function P(e,t){for(var n=e,r=n>>1,o=r+t/2;!(r>=o)&&w[r];)++r;if((n=r<<1)-e>32&&D)return D.decode(y.subarray(e,n));for(var i="",a=0;!(a>=t/2);++a){var s=E[e+2*a>>1];if(0==s)break;i+=String.fromCharCode(s)}return i}function k(e,t,n){if(void 0===n&&(n=2147483647),n<2)return 0;for(var r=t,o=(n-=2)<2*e.length?n/2:e.length,i=0;i<o;++i){var a=e.charCodeAt(i);E[t>>1]=a,t+=2}return E[t>>1]=0,t-r}function A(e){return 2*e.length}function I(e,t){for(var n=0,r="";!(n>=t/4);){var o=O[e+4*n>>2];if(0==o)break;if(++n,o>=65536){var i=o-65536;r+=String.fromCharCode(55296|i>>10,56320|1023&i)}else r+=String.fromCharCode(o)}return r}function x(e,t,n){if(void 0===n&&(n=2147483647),n<4)return 0;for(var r=t,o=r+n-4,i=0;i<e.length;++i){var a=e.charCodeAt(i);if(a>=55296&&a<=57343)a=65536+((1023&a)<<10)|1023&e.charCodeAt(++i);if(O[t>>2]=a,(t+=4)+4>o)break}return O[t>>2]=0,t-r}function j(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&++n,t+=4}return t}function M(e){v=e,r.HEAP8=b=new Int8Array(e),r.HEAP16=E=new Int16Array(e),r.HEAP32=O=new Int32Array(e),r.HEAPU8=y=new Uint8Array(e),r.HEAPU16=w=new Uint16Array(e),r.HEAPU32=C=new Uint32Array(e),r.HEAPF32=T=new Float32Array(e),r.HEAPF64=S=new Float64Array(e)}r.INITIAL_MEMORY;var L,R=[],B=[],N=[],U=[];B.push({func:function(){_t()}});var F=0,W=null,H=null;function K(e){r.onAbort&&r.onAbort(e),l(e+=""),h=!0,1,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw n(t),t}r.preloadedImages={},r.preloadedAudios={};function V(e){return t=e,n="data:application/octet-stream;base64,",String.prototype.startsWith?t.startsWith(n):0===t.indexOf(n);var t,n}var q,G="libvpx2.wasm";function z(e){try{if(e==G&&d)return new Uint8Array(d);if(a)return a(e);throw"both async and sync fetching of the wasm failed"}catch(e){K(e)}}function Y(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var n=t.func;"number"==typeof n?void 0===t.arg?L.get(n)():L.get(n)(t.arg):n(void 0===t.arg?null:t.arg)}else t(r)}}function $(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}V(G)||(q=G,G=r.locateFile?r.locateFile(q,c):c+q);var X=void 0;function Q(e){for(var t="",n=e;y[n];)t+=X[y[n++]];return t}var J={},Z={},ee={};function te(e){if(void 0===e)return"_unknown";var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return t>=48&&t<=57?"_"+e:e}function ne(e,t){return e=te(e),function(){return t.apply(this,arguments)}}function re(e,t){var n=ne(t,(function(e){this.name=t,this.message=e;var n=new Error(e).stack;void 0!==n&&(this.stack=this.toString()+"\n"+n.replace(/^Error(:[^\n]*)?\n/,""))}));return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},n}var oe=void 0;function ie(e){throw new oe(e)}var ae=void 0;function se(e){throw new ae(e)}function ce(e,t,n){function r(t){var r=n(t);r.length!==e.length&&se("Mismatched type converter count");for(var o=0;o<e.length;++o)ue(e[o],r[o])}e.forEach((function(e){ee[e]=t}));var o=new Array(t.length),i=[],a=0;t.forEach((function(e,t){Z.hasOwnProperty(e)?o[t]=Z[e]:(i.push(e),J.hasOwnProperty(e)||(J[e]=[]),J[e].push((function(){o[t]=Z[e],++a===i.length&&r(o)})))})),0===i.length&&r(o)}function ue(e,t,n){if(n=n||{},!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var r=t.name;if(e||ie('type "'+r+'" must have a positive integer typeid pointer'),Z.hasOwnProperty(e)){if(n.ignoreDuplicateRegistrations)return;ie("Cannot register type '"+r+"' twice")}if(Z[e]=t,delete ee[e],J.hasOwnProperty(e)){var o=J[e];delete J[e],o.forEach((function(e){e()}))}}function le(e){if(!(this instanceof Oe))return!1;if(!(e instanceof Oe))return!1;for(var t=this.$$.ptrType.registeredClass,n=this.$$.ptr,r=e.$$.ptrType.registeredClass,o=e.$$.ptr;t.baseClass;)n=t.upcast(n),t=t.baseClass;for(;r.baseClass;)o=r.upcast(o),r=r.baseClass;return t===r&&n===o}function de(e){ie(e.$$.ptrType.registeredClass.name+" instance already deleted")}var _e=!1;function pe(e){}function he(e){e.count.value-=1,0===e.count.value&&function(e){e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)}(e)}function fe(e){return"undefined"==typeof FinalizationGroup?(fe=function(e){return e},e):(_e=new FinalizationGroup((function(e){for(var t=e.next();!t.done;t=e.next()){var n=t.value;n.ptr?he(n):console.warn("object already deleted: "+n.ptr)}})),pe=function(e){_e.unregister(e.$$)},(fe=function(e){return _e.register(e,e.$$,e.$$),e})(e))}function me(){if(this.$$.ptr||de(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e,t=fe(Object.create(Object.getPrototypeOf(this),{$$:{value:(e=this.$$,{count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType})}}));return t.$$.count.value+=1,t.$$.deleteScheduled=!1,t}function ge(){this.$$.ptr||de(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ie("Object already scheduled for deletion"),pe(this),he(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function ve(){return!this.$$.ptr}var be=void 0,ye=[];function Ee(){for(;ye.length;){var e=ye.pop();e.$$.deleteScheduled=!1,e.delete()}}function we(){return this.$$.ptr||de(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ie("Object already scheduled for deletion"),ye.push(this),1===ye.length&&be&&be(Ee),this.$$.deleteScheduled=!0,this}function Oe(){}var Ce={};function Te(e,t,n){if(void 0===e[t].overloadTable){var r=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||ie("Function '"+n+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[t].overloadTable+")!"),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[r.argCount]=r}}function Se(e,t,n){r.hasOwnProperty(e)?((void 0===n||void 0!==r[e].overloadTable&&void 0!==r[e].overloadTable[n])&&ie("Cannot register public name '"+e+"' twice"),Te(r,e,e),r.hasOwnProperty(n)&&ie("Cannot register multiple overloads of a function with the same number of arguments ("+n+")!"),r[e].overloadTable[n]=t):(r[e]=t,void 0!==n&&(r[e].numArguments=n))}function De(e,t,n,r,o,i,a,s){this.name=e,this.constructor=t,this.instancePrototype=n,this.rawDestructor=r,this.baseClass=o,this.getActualType=i,this.upcast=a,this.downcast=s,this.pureVirtualFunctions=[]}function Pe(e,t,n){for(;t!==n;)t.upcast||ie("Expected null or instance of "+n.name+", got an instance of "+t.name),e=t.upcast(e),t=t.baseClass;return e}function ke(e,t){if(null===t)return this.isReference&&ie("null is not a valid "+this.name),0;t.$$||ie('Cannot pass "'+it(t)+'" as a '+this.name),t.$$.ptr||ie("Cannot pass deleted object as a pointer of type "+this.name);var n=t.$$.ptrType.registeredClass;return Pe(t.$$.ptr,n,this.registeredClass)}function Ae(e,t){var n;if(null===t)return this.isReference&&ie("null is not a valid "+this.name),this.isSmartPointer?(n=this.rawConstructor(),null!==e&&e.push(this.rawDestructor,n),n):0;t.$$||ie('Cannot pass "'+it(t)+'" as a '+this.name),t.$$.ptr||ie("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&t.$$.ptrType.isConst&&ie("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);var r=t.$$.ptrType.registeredClass;if(n=Pe(t.$$.ptr,r,this.registeredClass),this.isSmartPointer)switch(void 0===t.$$.smartPtr&&ie("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?n=t.$$.smartPtr:ie("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:n=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)n=t.$$.smartPtr;else{var o=t.clone();n=this.rawShare(n,nt((function(){o.delete()}))),null!==e&&e.push(this.rawDestructor,n)}break;default:ie("Unsupporting sharing policy")}return n}function Ie(e,t){if(null===t)return this.isReference&&ie("null is not a valid "+this.name),0;t.$$||ie('Cannot pass "'+it(t)+'" as a '+this.name),t.$$.ptr||ie("Cannot pass deleted object as a pointer of type "+this.name),t.$$.ptrType.isConst&&ie("Cannot convert argument of type "+t.$$.ptrType.name+" to parameter type "+this.name);var n=t.$$.ptrType.registeredClass;return Pe(t.$$.ptr,n,this.registeredClass)}function xe(e){return this.fromWireType(C[e>>2])}function je(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e}function Me(e){this.rawDestructor&&this.rawDestructor(e)}function Le(e){null!==e&&e.delete()}function Re(){return Object.keys(Ue).length}function Be(){var e=[];for(var t in Ue)Ue.hasOwnProperty(t)&&e.push(Ue[t]);return e}function Ne(e){be=e,ye.length&&be&&be(Ee)}var Ue={};function Fe(e,t){return t=function(e,t){for(void 0===t&&ie("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t}(e,t),Ue[t]}function We(e,t){return t.ptrType&&t.ptr||se("makeClassHandle requires ptr and ptrType"),!!t.smartPtrType!==!!t.smartPtr&&se("Both smartPtrType and smartPtr must be specified"),t.count={value:1},fe(Object.create(e,{$$:{value:t}}))}function He(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var n=Fe(this.registeredClass,t);if(void 0!==n){if(0===n.$$.count.value)return n.$$.ptr=t,n.$$.smartPtr=e,n.clone();var r=n.clone();return this.destructor(e),r}function o(){return this.isSmartPointer?We(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):We(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var i,a=this.registeredClass.getActualType(t),s=Ce[a];if(!s)return o.call(this);i=this.isConst?s.constPointerType:s.pointerType;var c=function e(t,n,r){if(n===r)return t;if(void 0===r.baseClass)return null;var o=e(t,n,r.baseClass);return null===o?null:r.downcast(o)}(t,this.registeredClass,i.registeredClass);return null===c?o.call(this):this.isSmartPointer?We(i.registeredClass.instancePrototype,{ptrType:i,ptr:c,smartPtrType:this,smartPtr:e}):We(i.registeredClass.instancePrototype,{ptrType:i,ptr:c})}function Ke(e,t,n,r,o,i,a,s,c,u,l){this.name=e,this.registeredClass=t,this.isReference=n,this.isConst=r,this.isSmartPointer=o,this.pointeeType=i,this.sharingPolicy=a,this.rawGetPointee=s,this.rawConstructor=c,this.rawShare=u,this.rawDestructor=l,o||void 0!==t.baseClass?this.toWireType=Ae:r?(this.toWireType=ke,this.destructorFunction=null):(this.toWireType=Ie,this.destructorFunction=null)}function Ve(e,t,n){return-1!=e.indexOf("j")?function(e,t,n){var o=r["dynCall_"+e];return n&&n.length?o.apply(null,[t].concat(n)):o.call(null,t)}(e,t,n):L.get(t).apply(null,n)}function qe(e,t){var n,r,o,i=-1!=(e=Q(e)).indexOf("j")?(n=e,r=t,o=[],function(){o.length=arguments.length;for(var e=0;e<arguments.length;e++)o[e]=arguments[e];return Ve(n,r,o)}):L.get(t);return"function"!=typeof i&&ie("unknown function pointer with signature "+e+": "+t),i}var Ge=void 0;function ze(e){var t=ft(e),n=Q(t);return pt(t),n}function Ye(e,t){var n=[],r={};throw t.forEach((function e(t){r[t]||Z[t]||(ee[t]?ee[t].forEach(e):(n.push(t),r[t]=!0))})),new Ge(e+": "+n.map(ze).join([", "]))}function $e(e,t){for(var n=[],r=0;r<e;r++)n.push(O[(t>>2)+r]);return n}function Xe(e){for(;e.length;){var t=e.pop();e.pop()(t)}}var Qe=[],Je=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function Ze(e){e>4&&0==--Je[e].refcount&&(Je[e]=void 0,Qe.push(e))}function et(){for(var e=0,t=5;t<Je.length;++t)void 0!==Je[t]&&++e;return e}function tt(){for(var e=5;e<Je.length;++e)if(void 0!==Je[e])return Je[e];return null}function nt(e){switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var t=Qe.length?Qe.pop():Je.length;return Je[t]={refcount:1,value:e},t}}function rt(e,t,n){switch(t){case 0:return function(e){var t=n?b:y;return this.fromWireType(t[e])};case 1:return function(e){var t=n?E:w;return this.fromWireType(t[e>>1])};case 2:return function(e){var t=n?O:C;return this.fromWireType(t[e>>2])};default:throw new TypeError("Unknown integer type: "+e)}}function ot(e,t){var n=Z[e];return void 0===n&&ie(t+" has unknown type "+ze(e)),n}function it(e){if(null===e)return"null";var t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():""+e}function at(e,t){switch(t){case 2:return function(e){return this.fromWireType(T[e>>2])};case 3:return function(e){return this.fromWireType(S[e>>3])};default:throw new TypeError("Unknown float type: "+e)}}function st(e,t,n){switch(t){case 0:return n?function(e){return b[e]}:function(e){return y[e]};case 1:return n?function(e){return E[e>>1]}:function(e){return w[e>>1]};case 2:return n?function(e){return O[e>>2]}:function(e){return C[e>>2]};default:throw new TypeError("Unknown integer type: "+e)}}function ct(e){try{return p.grow(e-v.byteLength+65535>>>16),M(p.buffer),1}catch(e){}}var ut={mappings:{},buffers:[null,[],[]],printChar:function(e,t){var n=ut.buffers[e];0===t||10===t?((1===e?u:l)(m(n,0)),n.length=0):n.push(t)},varargs:void 0,get:function(){return ut.varargs+=4,O[ut.varargs-4>>2]},getStr:function(e){return g(e)},get64:function(e,t){return e}};!function(){for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);X=e}(),oe=r.BindingError=re(Error,"BindingError"),ae=r.InternalError=re(Error,"InternalError"),Oe.prototype.isAliasOf=le,Oe.prototype.clone=me,Oe.prototype.delete=ge,Oe.prototype.isDeleted=ve,Oe.prototype.deleteLater=we,Ke.prototype.getPointee=je,Ke.prototype.destructor=Me,Ke.prototype.argPackAdvance=8,Ke.prototype.readValueFromPointer=xe,Ke.prototype.deleteObject=Le,Ke.prototype.fromWireType=He,r.getInheritedInstanceCount=Re,r.getLiveInheritedInstances=Be,r.flushPendingDeletes=Ee,r.setDelayFunction=Ne,Ge=r.UnboundTypeError=re(Error,"UnboundTypeError"),r.count_emval_handles=et,r.get_first_emval=tt;var lt,dt={G:function(e,t,n,r,o){var i=$(n);ue(e,{name:t=Q(t),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?r:o},argPackAdvance:8,readValueFromPointer:function(e){var r;if(1===n)r=b;else if(2===n)r=E;else{if(4!==n)throw new TypeError("Unknown boolean type size: "+t);r=O}return this.fromWireType(r[e>>i])},destructorFunction:null})},v:function(e,t,n,o,i,a,s,c,u,l,d,_,p){d=Q(d),a=qe(i,a),c&&(c=qe(s,c)),l&&(l=qe(u,l)),p=qe(_,p);var h=te(d);Se(h,(function(){Ye("Cannot construct "+d+" due to unbound types",[o])})),ce([e,t,n],o?[o]:[],(function(t){var n,i;t=t[0],i=o?(n=t.registeredClass).instancePrototype:Oe.prototype;var s=ne(h,(function(){if(Object.getPrototypeOf(this)!==u)throw new oe("Use 'new' to construct "+d);if(void 0===_.constructor_body)throw new oe(d+" has no accessible constructor");var e=_.constructor_body[arguments.length];if(void 0===e)throw new oe("Tried to invoke ctor of "+d+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(_.constructor_body).toString()+") parameters instead!");return e.apply(this,arguments)})),u=Object.create(i,{constructor:{value:s}});s.prototype=u;var _=new De(d,s,u,p,n,a,c,l),f=new Ke(d,_,!0,!1,!1),m=new Ke(d+"*",_,!1,!1,!1),g=new Ke(d+" const*",_,!1,!0,!1);return Ce[e]={pointerType:m,constPointerType:g},function(e,t,n){r.hasOwnProperty(e)||se("Replacing nonexistant public symbol"),void 0!==r[e].overloadTable&&void 0!==n?r[e].overloadTable[n]=t:(r[e]=t,r[e].argCount=n)}(h,s),[f,m,g]}))},r:function(e,t,n,r,o,i){var a;t>0||K("Assertion failed: "+a);var s=$e(t,n);o=qe(r,o);var c=[i],u=[];ce([],[e],(function(e){var n="constructor "+(e=e[0]).name;if(void 0===e.registeredClass.constructor_body&&(e.registeredClass.constructor_body=[]),void 0!==e.registeredClass.constructor_body[t-1])throw new oe("Cannot register multiple constructors with identical number of parameters ("+(t-1)+") for class '"+e.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return e.registeredClass.constructor_body[t-1]=function(){Ye("Cannot construct "+e.name+" due to unbound types",s)},ce([],s,(function(r){return e.registeredClass.constructor_body[t-1]=function(){arguments.length!==t-1&&ie(n+" called with "+arguments.length+" arguments, expected "+(t-1)),u.length=0,c.length=t;for(var e=1;e<t;++e)c[e]=r[e].toWireType(u,arguments[e-1]);var i=o.apply(null,c);return Xe(u),r[0].fromWireType(i)},[]})),[]}))},f:function(e,t,n,r,o,i,a,s){var c=$e(n,r);t=Q(t),i=qe(o,i),ce([],[e],(function(e){var r=(e=e[0]).name+"."+t;function o(){Ye("Cannot call "+r+" due to unbound types",c)}s&&e.registeredClass.pureVirtualFunctions.push(t);var u=e.registeredClass.instancePrototype,l=u[t];return void 0===l||void 0===l.overloadTable&&l.className!==e.name&&l.argCount===n-2?(o.argCount=n-2,o.className=e.name,u[t]=o):(Te(u,t,r),u[t].overloadTable[n-2]=o),ce([],c,(function(o){var s=function(e,t,n,r,o){var i=t.length;i<2&&ie("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var a=null!==t[1]&&null!==n,s=!1,c=1;c<t.length;++c)if(null!==t[c]&&void 0===t[c].destructorFunction){s=!0;break}var u="void"!==t[0].name,l=i-2,d=new Array(l),_=[],p=[];return function(){var n;arguments.length!==l&&ie("function "+e+" called with "+arguments.length+" arguments, expected "+l+" args!"),p.length=0,_.length=a?2:1,_[0]=o,a&&(n=t[1].toWireType(p,this),_[1]=n);for(var i=0;i<l;++i)d[i]=t[i+2].toWireType(p,arguments[i]),_.push(d[i]);var c=r.apply(null,_);if(s)Xe(p);else for(i=a?1:2;i<t.length;i++){var h=1===i?n:d[i-2];null!==t[i].destructorFunction&&t[i].destructorFunction(h)}if(u)return t[0].fromWireType(c)}}(r,o,e,i,a);return void 0===u[t].overloadTable?(s.argCount=n-2,u[t]=s):u[t].overloadTable[n-2]=s,[]})),[]}))},F:function(e,t){ue(e,{name:t=Q(t),fromWireType:function(e){var t=Je[e].value;return Ze(e),t},toWireType:function(e,t){return nt(t)},argPackAdvance:8,readValueFromPointer:xe,destructorFunction:null})},K:function(e,t,n,r){var o=$(n);function i(){}t=Q(t),i.values={},ue(e,{name:t,constructor:i,fromWireType:function(e){return this.constructor.values[e]},toWireType:function(e,t){return t.value},argPackAdvance:8,readValueFromPointer:rt(t,o,r),destructorFunction:null}),Se(t,i)},y:function(e,t,n){var r=ot(e,"enum");t=Q(t);var o=r.constructor,i=Object.create(r.constructor.prototype,{value:{value:n},constructor:{value:ne(r.name+"_"+t,(function(){}))}});o.values[n]=i,o[t]=i},s:function(e,t,n){var r=$(n);ue(e,{name:t=Q(t),fromWireType:function(e){return e},toWireType:function(e,t){if("number"!=typeof t&&"boolean"!=typeof t)throw new TypeError('Cannot convert "'+it(t)+'" to '+this.name);return t},argPackAdvance:8,readValueFromPointer:at(t,r),destructorFunction:null})},i:function(e,t,n,r,o){t=Q(t),-1===o&&(o=4294967295);var i=$(n),a=function(e){return e};if(0===r){var s=32-8*n;a=function(e){return e<<s>>>s}}var c=-1!=t.indexOf("unsigned");ue(e,{name:t,fromWireType:a,toWireType:function(e,n){if("number"!=typeof n&&"boolean"!=typeof n)throw new TypeError('Cannot convert "'+it(n)+'" to '+this.name);if(n<r||n>o)throw new TypeError('Passing a number "'+it(n)+'" from JS side to C/C++ side to an argument of type "'+t+'", which is outside the valid range ['+r+", "+o+"]!");return c?n>>>0:0|n},argPackAdvance:8,readValueFromPointer:st(t,i,0!==r),destructorFunction:null})},h:function(e,t,n){var r=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];function o(e){var t=C,n=t[e>>=2],o=t[e+1];return new r(v,o,n)}ue(e,{name:n=Q(n),fromWireType:o,argPackAdvance:8,readValueFromPointer:o},{ignoreDuplicateRegistrations:!0})},t:function(e,t){var n="std::string"===(t=Q(t));ue(e,{name:t,fromWireType:function(e){var t,r=C[e>>2];if(n)for(var o=e+4,i=0;i<=r;++i){var a=e+4+i;if(i==r||0==y[a]){var s=g(o,a-o);void 0===t?t=s:(t+=String.fromCharCode(0),t+=s),o=a+1}}else{var c=new Array(r);for(i=0;i<r;++i)c[i]=String.fromCharCode(y[e+4+i]);t=c.join("")}return pt(e),t},toWireType:function(e,t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));var r="string"==typeof t;r||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||ie("Cannot pass non-string to std::string");var o=(n&&r?function(){return function(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++n)),r<=127?++t:t+=r<=2047?2:r<=65535?3:4}return t}(t)}:function(){return t.length})(),i=ht(4+o+1);if(C[i>>2]=o,n&&r)(function(e,t,n,r){if(!(r>0))return 0;for(var o=n,i=n+r-1,a=0;a<e.length;++a){var s=e.charCodeAt(a);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++a)),s<=127){if(n>=i)break;t[n++]=s}else if(s<=2047){if(n+1>=i)break;t[n++]=192|s>>6,t[n++]=128|63&s}else if(s<=65535){if(n+2>=i)break;t[n++]=224|s>>12,t[n++]=128|s>>6&63,t[n++]=128|63&s}else{if(n+3>=i)break;t[n++]=240|s>>18,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|63&s}}t[n]=0})(t,y,i+4,o+1);else if(r)for(var a=0;a<o;++a){var s=t.charCodeAt(a);s>255&&(pt(i),ie("String has UTF-16 code units that do not fit in 8 bits")),y[i+4+a]=s}else for(a=0;a<o;++a)y[i+4+a]=t[a];return null!==e&&e.push(pt,i),i},argPackAdvance:8,readValueFromPointer:xe,destructorFunction:function(e){pt(e)}})},n:function(e,t,n){var r,o,i,a,s;n=Q(n),2===t?(r=P,o=k,a=A,i=function(){return w},s=1):4===t&&(r=I,o=x,a=j,i=function(){return C},s=2),ue(e,{name:n,fromWireType:function(e){for(var n,o=C[e>>2],a=i(),c=e+4,u=0;u<=o;++u){var l=e+4+u*t;if(u==o||0==a[l>>s]){var d=r(c,l-c);void 0===n?n=d:(n+=String.fromCharCode(0),n+=d),c=l+t}}return pt(e),n},toWireType:function(e,r){"string"!=typeof r&&ie("Cannot pass non-string to C++ string type "+n);var i=a(r),c=ht(4+i+t);return C[c>>2]=i>>s,o(r,c+4,i+t),null!==e&&e.push(pt,c),c},argPackAdvance:8,readValueFromPointer:xe,destructorFunction:function(e){pt(e)}})},H:function(e,t){ue(e,{isVoid:!0,name:t=Q(t),argPackAdvance:0,fromWireType:function(){},toWireType:function(e,t){}})},l:Ze,m:function(e){e>4&&(Je[e].refcount+=1)},k:function(e,t){return nt((e=ot(e,"_emval_take_value")).readValueFromPointer(t))},E:function(){K()},c:function(e,t){return function(e,t){throw vt(e,t||1),"longjmp"}(e,t)},C:function(e,t,n){y.copyWithin(e,t,t+n)},D:function(e){var t,n,r=y.length;if(e>2147483648)return!1;for(var o=1;o<=4;o*=2){var i=r*(1+.2/o);if(i=Math.min(i,e+100663296),ct(Math.min(2147483648,((t=Math.max(e,i))%(n=65536)>0&&(t+=n-t%n),t))))return!0}return!1},q:function(e,t,n,r){for(var o=0,i=0;i<n;i++){for(var a=O[t+8*i>>2],s=O[t+(8*i+4)>>2],c=0;c<s;c++)ut.printChar(e,y[a+c]);o+=s}return O[r>>2]=o,0},a:function(){return 0|_},g:function(e){var t=Date.now();return O[e>>2]=t/1e3|0,O[e+4>>2]=t%1e3*1e3|0,0},e:function(e,t,n){var r=mt();try{return L.get(e)(t,n)}catch(e){if(gt(r),e!==e+0&&"longjmp"!==e)throw e;vt(1,0)}},o:function(e,t,n,r){var o=mt();try{return L.get(e)(t,n,r)}catch(e){if(gt(o),e!==e+0&&"longjmp"!==e)throw e;vt(1,0)}},p:function(e,t,n,r,o){var i=mt();try{return L.get(e)(t,n,r,o)}catch(e){if(gt(i),e!==e+0&&"longjmp"!==e)throw e;vt(1,0)}},u:function(e,t,n,r,o,i){var a=mt();try{return L.get(e)(t,n,r,o,i)}catch(e){if(gt(a),e!==e+0&&"longjmp"!==e)throw e;vt(1,0)}},J:function(e,t,n,r,o,i,a,s,c){var u=mt();try{return L.get(e)(t,n,r,o,i,a,s,c)}catch(e){if(gt(u),e!==e+0&&"longjmp"!==e)throw e;vt(1,0)}},B:function(e,t,n,r,o,i,a,s){var c=mt();try{return bt(e,t,n,r,o,i,a,s)}catch(e){if(gt(c),e!==e+0&&"longjmp"!==e)throw e;vt(1,0)}},z:function(e,t,n,r){var o=mt();try{return Et(e,t,n,r)}catch(e){if(gt(o),e!==e+0&&"longjmp"!==e)throw e;vt(1,0)}},j:function(e,t){var n=mt();try{L.get(e)(t)}catch(e){if(gt(n),e!==e+0&&"longjmp"!==e)throw e;vt(1,0)}},x:function(e,t,n){var r=mt();try{L.get(e)(t,n)}catch(e){if(gt(r),e!==e+0&&"longjmp"!==e)throw e;vt(1,0)}},d:function(e,t,n,r,o){var i=mt();try{L.get(e)(t,n,r,o)}catch(e){if(gt(i),e!==e+0&&"longjmp"!==e)throw e;vt(1,0)}},I:function(e,t,n,r,o,i,a){var s=mt();try{L.get(e)(t,n,r,o,i,a)}catch(e){if(gt(s),e!==e+0&&"longjmp"!==e)throw e;vt(1,0)}},w:function(e,t,n,r,o,i,a,s,c){var u=mt();try{L.get(e)(t,n,r,o,i,a,s,c)}catch(e){if(gt(u),e!==e+0&&"longjmp"!==e)throw e;vt(1,0)}},A:function(e,t,n,r,o,i,a,s,c,u){var l=mt();try{yt(e,t,n,r,o,i,a,s,c,u)}catch(e){if(gt(l),e!==e+0&&"longjmp"!==e)throw e;vt(1,0)}},b:function(e){_=0|e}},_t=(function(){var e={a:dt};function t(e,t){var n=e.exports;r.asm=n,M((p=r.asm.L).buffer),L=r.asm.P,function(e){if(F--,r.monitorRunDependencies&&r.monitorRunDependencies(F),0==F&&(null!==W&&(clearInterval(W),W=null),H)){var t=H;H=null,t()}}()}function o(e){t(e.instance)}function i(t){return(d||"function"!=typeof fetch?Promise.resolve().then((function(){return z(G)})):fetch(G,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+G+"'";return e.arrayBuffer()})).catch((function(){return z(G)}))).then((function(t){return WebAssembly.instantiate(t,e)})).then(t,(function(e){l("failed to asynchronously prepare wasm: "+e),K(e)}))}if(F++,r.monitorRunDependencies&&r.monitorRunDependencies(F),r.instantiateWasm)try{return r.instantiateWasm(e,t)}catch(e){return l("Module.instantiateWasm callback failed with error: "+e),!1}(d||"function"!=typeof WebAssembly.instantiateStreaming||V(G)||"function"!=typeof fetch?i(o):fetch(G,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(o,(function(e){return l("wasm streaming compile failed: "+e),l("falling back to ArrayBuffer instantiation"),i(o)}))}))).catch(n)}(),r.___wasm_call_ctors=function(){return(_t=r.___wasm_call_ctors=r.asm.M).apply(null,arguments)}),pt=r._free=function(){return(pt=r._free=r.asm.N).apply(null,arguments)},ht=r._malloc=function(){return(ht=r._malloc=r.asm.O).apply(null,arguments)},ft=r.___getTypeName=function(){return(ft=r.___getTypeName=r.asm.Q).apply(null,arguments)},mt=(r.___embind_register_native_and_builtin_types=function(){return(r.___embind_register_native_and_builtin_types=r.asm.R).apply(null,arguments)},r.stackSave=function(){return(mt=r.stackSave=r.asm.S).apply(null,arguments)}),gt=r.stackRestore=function(){return(gt=r.stackRestore=r.asm.T).apply(null,arguments)},vt=r._setThrew=function(){return(vt=r._setThrew=r.asm.U).apply(null,arguments)},bt=r.dynCall_iiiijj=function(){return(bt=r.dynCall_iiiijj=r.asm.V).apply(null,arguments)},yt=(r.dynCall_iiijiii=function(){return(r.dynCall_iiijiii=r.asm.W).apply(null,arguments)},r.dynCall_vijjjid=function(){return(yt=r.dynCall_vijjjid=r.asm.X).apply(null,arguments)}),Et=r.dynCall_iij=function(){return(Et=r.dynCall_iij=r.asm.Y).apply(null,arguments)};r.dynCall_jiji=function(){return(r.dynCall_jiji=r.asm.Z).apply(null,arguments)};function wt(e){function n(){lt||(lt=!0,r.calledRun=!0,h||(!0,Y(B),Y(N),t(r),r.onRuntimeInitialized&&r.onRuntimeInitialized(),function(){if(r.postRun)for("function"==typeof r.postRun&&(r.postRun=[r.postRun]);r.postRun.length;)e=r.postRun.shift(),U.unshift(e);var e;Y(U)}()))}e=e||s,F>0||(!function(){if(r.preRun)for("function"==typeof r.preRun&&(r.preRun=[r.preRun]);r.preRun.length;)e=r.preRun.shift(),R.unshift(e);var e;Y(R)}(),F>0||(r.setStatus?(r.setStatus("Running..."),setTimeout((function(){setTimeout((function(){r.setStatus("")}),1),n()}),1)):n()))}if(H=function e(){lt||wt(),lt||(H=e)},r.run=wt,r.preInit)for("function"==typeof r.preInit&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.pop()();return wt(),e.ready}}();e.exports=r},zxIV:function(e,t,n){"use strict";n.r(t),n.d(t,"geById",(function(){return s})),n.d(t,"$",(function(){return c})),n.d(t,"$$",(function(){return u})),n.d(t,"setInnerText",(function(){return l})),n.d(t,"emptyNode",(function(){return d})),n.d(t,"ge",(function(){return _})),n.d(t,"geByTag",(function(){return p})),n.d(t,"geByTag1",(function(){return h})),n.d(t,"geByClass",(function(){return f})),n.d(t,"geByClass1",(function(){return m})),n.d(t,"gpeByClass",(function(){return g})),n.d(t,"domQuery",(function(){return v})),n.d(t,"domQuery1",(function(){return b})),n.d(t,"domClosest",(function(){return y})),n.d(t,"domClosestByTag",(function(){return E})),n.d(t,"gpeByTag",(function(){return w})),n.d(t,"ce",(function(){return O})),n.d(t,"cf",(function(){return P})),n.d(t,"re",(function(){return k})),n.d(t,"se",(function(){return A})),n.d(t,"sech",(function(){return I})),n.d(t,"rs",(function(){return x})),n.d(t,"psr",(function(){return j})),n.d(t,"domReplaceEl",(function(){return M})),n.d(t,"domEL",(function(){return L})),n.d(t,"domNS",(function(){return R})),n.d(t,"domPS",(function(){return B})),n.d(t,"domFC",(function(){return N})),n.d(t,"domLC",(function(){return U})),n.d(t,"domPN",(function(){return F})),n.d(t,"domChildren",(function(){return W})),n.d(t,"domInsertBefore",(function(){return H})),n.d(t,"domInsertAfter",(function(){return K})),n.d(t,"domByClass",(function(){return V})),n.d(t,"domData",(function(){return q})),n.d(t,"domChildIndex",(function(){return G})),n.d(t,"domCA",(function(){return z})),n.d(t,"domClosestSibling",(function(){return Y})),n.d(t,"matchesSelector",(function(){return $})),n.d(t,"isHover",(function(){return X})),n.d(t,"isAncestor",(function(){return Q})),n.d(t,"getScroll",(function(){return J})),n.d(t,"domClosestPositioned",(function(){return Z})),n.d(t,"domClosestOverflowHidden",(function(){return ee})),n.d(t,"show",(function(){return te})),n.d(t,"hide",(function(){return ne})),n.d(t,"isVisible",(function(){return re})),n.d(t,"clientHeight",(function(){return oe})),n.d(t,"getClientRectOffsetY",(function(){return ie})),n.d(t,"toggle",(function(){return ae})),n.d(t,"boundingRectEnabled",(function(){return se})),n.d(t,"getXYRect",(function(){return ce})),n.d(t,"getXY",(function(){return ue})),n.d(t,"isWindow",(function(){return le})),n.d(t,"getSize",(function(){return de})),n.d(t,"getW",(function(){return _e})),n.d(t,"getH",(function(){return pe})),n.d(t,"hasClass",(function(){return he})),n.d(t,"addClass",(function(){return fe})),n.d(t,"addClassDelayed",(function(){return me})),n.d(t,"removeClass",(function(){return ge})),n.d(t,"removeClassDelayed",(function(){return ve})),n.d(t,"toggleClass",(function(){return be})),n.d(t,"toggleClassDelayed",(function(){return ye})),n.d(t,"replaceClass",(function(){return Ee})),n.d(t,"getStyle",(function(){return we})),n.d(t,"setStyle",(function(){return Oe})),n.d(t,"data",(function(){return Ce})),n.d(t,"attr",(function(){return Te})),n.d(t,"removeAttr",(function(){return Se})),n.d(t,"removeData",(function(){return De})),n.d(t,"cleanElems",(function(){return Pe})),n.d(t,"setTitle",(function(){return ke})),n.d(t,"getZoom",(function(){return Ae})),n.d(t,"val",(function(){return Ie})),n.d(t,"elfocus",(function(){return xe})),n.d(t,"traverseParent",(function(){return je})),n.d(t,"setDocumentTitle",(function(){return Le})),n.d(t,"lockDocumentTitle",(function(){return Re})),n.d(t,"initDomScripts",(function(){return Be})),n.d(t,"createElement",(function(){return Ne}));n("KKXr"),n("SRfc"),n("a1Th"),n("Btvt"),n("Oyvg"),n("pIFo");var r=n("t7n3"),o=n("Egk5"),i=n("gdug"),a=n("98sY");function s(e){return document.getElementById(e)}function c(e,t){return(t||document).querySelector(e)}function u(e,t){return(t||document).querySelectorAll(e)}function l(e,t){e&&(e.innerText=t)}function d(e){if(e)for(;e.firstChild;)e.removeChild(e.firstChild)}var _=e=>"string"==typeof e||"number"==typeof e?document.getElementById(e):e;function p(e,t){return(t=_(t)||document).getElementsByTagName(e)}function h(e,t){return(t=_(t)||document).querySelector&&t.querySelector(e)||p(e,t)[0]}function f(e,t,n){return t=_(t)||document,n=n||"*",e=("."+e).replace(/\s+/gm,"."),Array.prototype.slice.call(t.querySelectorAll(n+e))}function m(e,t,n){return n=n||"*",(t=_(t)||document).querySelector&&t.querySelector(n+("."+e).replace(/\s+/gm,"."))||f(e,t,n)[0]}function g(e,t,n){if(!(t=_(t)))return null;for(;n!==t&&(t=t.parentNode);)if(he(t,e))return t;return null}function v(e,t){return(t||document).querySelectorAll(e)}function b(e,t){return(t||document).querySelector(e)}function y(e,t){return he(t,e)?t:g(e,t)}function E(e,t){return e=e.toUpperCase(),t.nodeType===Node.ELEMENT_NODE&&t.tagName.toUpperCase()===e?t:w(e,t)}function w(e,t){if(!(t=_(t)))return null;for(e=e.toUpperCase();t=t.parentNode;)if(t.tagName&&t.tagName.toUpperCase()===e)return t;return null}function O(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=document.createElement(e);return t&&Object(r.extend)(o,t),n&&Oe(o,n),o}var C,T,S,D,P=(C=document,T=C.createDocumentFragment(),S=C.createElement("div"),D=C.createRange&&C.createRange(),T.appendChild(S),D&&D.selectNodeContents(S),D&&D.createContextualFragment?e=>e?D.createContextualFragment(e):C.createDocumentFragment():e=>{if(!e)return C.createDocumentFragment();S.innerHTML=e;for(var t=C.createDocumentFragment();S.firstChild;)t.appendChild(S.firstChild);return t});function k(e){return(e=_(e))&&e.parentNode&&e.parentNode.removeChild(e),e}var A=e=>N(O("div",{innerHTML:e})),I=e=>W(O("div",{innerHTML:e}));function x(e,t){return Object(r.each)(t,(function(t,n){e=e.replace(new RegExp("%"+t+"%","g"),(void 0===n?"":n).toString().replace(/\$/g,"&#036;"))})),e}function j(e){return"https:"!==locProtocol?e:e=(e=(e=(e=(e=e.replace(/http:\/\/(cs(\d+)\.vk\.me\/c(\d+)\/)/gi,"https://$1")).replace(/http:\/\/cs(\d+)\.(userapi\.com|vk\.com|vk\.me|vkontakte\.ru)\/c(\d+)\/(v\d+\/|[a-z0-9\/_:\-]+\.jpg)/gi,"https://pp.vk.me/c$3/$4")).replace(/http:\/\/cs(\d+)\.(userapi\.com|vk\.com|vk\.me|vkontakte\.ru)\/([a-z0-9\/_:\-]+\.jpg)/gi,"https://pp.vk.me/c$1/$3")).replace(/http:\/\/cs(\d+)\.(userapi\.com|vk\.com|vk\.me|vkontakte\.ru)\//gi,"https://ps.vk.me/c$1/")).replace(/http:\/\/video(\d+)\.vkadre\.ru\//gi,"https://ps.vk.me/v$1/")}function M(e,t){return Object(r.isString)(t)&&(t=A(t)),F(e).replaceChild(t,e),t}function L(e,t){for(t=t?"previousSibling":"nextSibling";e&&!e.tagName;)e=e[t];return e}var R=e=>L((e||{}).nextSibling),B=e=>L((e||{}).previousSibling,1),N=e=>L((e||{}).firstChild),U=e=>L((e||{}).lastChild,1),F=e=>(e||{}).parentNode;function W(e){for(var t=[],n=e.childNodes,r=0;r<n.length;r++)n[r].tagName&&t.push(n[r]);return t}function H(e,t){var n=F(t);return n&&n.insertBefore(e,t)}function K(e,t){var n=F(t);return n&&n.insertBefore(e,R(t))}function V(e,t){return e?m(t,e):e}function q(e,t,n){return e?void 0!==n?(null===n?e.removeAttribute("data-"+t):e.setAttribute("data-"+t,n),n):e.getAttribute("data-"+t):null}function G(e){for(var t=0;null!=(e=B(e));)t++;return t}function z(e,t){do{e=F(e)}while(e&&!$(e,t));return e}function Y(e,t,n){for(var r=null;null===r&&e;)(e=-1===n?B(e):R(e))&&$(e,t)&&(r=e);return r}function $(e,t){return!(!(e=_(e))||e===document)&&(e.matches||e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;--n>=0&&t.item(n)!==this;);return n>-1}).call(e,t)}function X(e){return $(e,":hover")}function Q(e,t){var n=_(e);if(t=_(t),!e||!t)return!1;for(;n=n.parentNode;)if(n===t)return!0;return!1}function J(){var e=i.browser.msie6?_("PageContainer"):document.body,t=document.documentElement;return[e.scrollLeft||t.scrollLeft||window.pageXOffset||0,e.scrollTop||t.scrollTop||window.pageYOffset||0,t.clientWidth||e.clientWidth||0,t.clientHeight||e.clientHeight||0]}function Z(e,t){for(var n=(t=t||{}).fromEl||F(e),o=t.positions||["relative","absolute","fixed"];n&&n!==bodyNode;){var i=we(n,"position");if(Object(r.inArray)(i,o)&&(!t.noOverflow||"hidden"!==we(n,"overflow")))break;n=F(n)}return n}function ee(e,t){for(var n,r,o,a=e=_(e),s=!1;a&&a.tagName&&a!==bodyNode;){if(n=we(a,"position"),r=we(a,"overflow"),o=we(a,"transform"),t&&i.browser.mozilla){if("page_wrap"!=a.id&&a!==e&&"visible"!==r&&("static"===n?!s||"relative"===s:"fixed"!==s))break}else if(a!==e&&"visible"!==r&&("static"===n?!s||"relative"===s:"fixed"!==s))break;"none"!==o?s=void 0:"static"!==n&&"fixed"!==s&&(s=n),a=F(a)}return a}function te(e){var t=arguments.length;if(t>1)for(var n=0;n<t;n++)te(arguments[n]);else if((e=_(e))&&e.style){var r=e.olddisplay,o=e.tagName.toLowerCase(),a="block";e.style.display=r||"","none"===we(e,"display")&&(a=he(e,"inline")||he(e,"_inline")?"inline":he(e,"_inline_block")?"inline-block":"tr"!==o||i.browser.msie?"table"!==o||i.browser.msie?"block":"table":"table-row",e.style.display=e.olddisplay=a)}}function ne(e){var t=arguments.length;if(t>1)for(var n=0;n<t;n++)ne(arguments[n]);else if((e=_(e))&&e.style){var r=we(e,"display");e.olddisplay="none"!==r?r:"",e.style.display="none"}}function re(e){return!(!(e=_(e))||!e.style)&&"none"!==we(e,"display")}function oe(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}function ie(e,t,n){n=n||0;var o=ue(e=_(e))[1],i=de(e)[1],a=window,s=document.documentElement,c=Math.max(Object(r.intval)(a.innerHeight),Object(r.intval)(s.clientHeight)),u=_("page_header_cont"),l=s.scrollTop||bodyNode.scrollTop||window.scrollY||0,d=vk.staticheader?Math.max(0,de(u)[1]-l):de(u)[1];if(t){if(o+i<l+d+n)return o+i-l-d-n;if(o>l+c-n)return o-l-c+n}else{if(o<l+d+n)return o-l-d-n;if(o+i>l+c-n)return o+i-l-c+n}return 0}function ae(e,t){return void 0===t&&(t=!re(e)),t?te(e):ne(e),t}function se(e){return void 0!==e.getBoundingClientRect}function ce(e,t){var n;if(t&&"inline"===we(e,"display")){var r=e.getClientRects();n=r&&r[0]||e.getBoundingClientRect()}else n=e.getBoundingClientRect();return n}function ue(e,t){if(!(e=_(e)))return[0,0];var n=e.ownerDocument,r={top:0,left:0};if(!n)return[0,0];var o=n.documentElement;se(e)&&(r=ce(e,!0));var i=n===n.window?n:9===n.nodeType&&(n.defaultView||n.parentWindow);return[r.left+(t?0:i.pageXOffset||o.scrollLeft)-(o.clientLeft||0),r.top+(t?0:i.pageYOffset||o.scrollTop)-(o.clientTop||0)]}function le(e){return null!=e&&e===e.window}function de(e,t,n){e=_(e);var o,i=document.documentElement,a=[0,0];if(t&&"border-box"===we(e,"boxSizing")&&(t=!1),e===document)a=[Math.max(i.clientWidth,bodyNode.scrollWidth,i.scrollWidth,bodyNode.offsetWidth,i.offsetWidth),Math.max(i.clientHeight,bodyNode.scrollHeight,i.scrollHeight,bodyNode.offsetHeight,i.offsetHeight)];else if(e){function s(){a=se(e)&&(o=ce(e,n))&&void 0!==o.width?[o.width,o.height]:[e.offsetWidth,e.offsetHeight],t&&Object(r.each)(a,(function(t,n){var o=t?["Top","Bottom"]:["Left","Right"];Object(r.each)(o,(function(){a[t]-=parseFloat(we(e,"padding"+this))||0,a[t]-=parseFloat(we(e,"border"+this+"Width"))||0}))}))}if(re(e))s();else{var c={position:"absolute",visibility:"hidden",display:"block"},u={},l=!1;e.style.cssText.indexOf("!important")>-1&&(l=e.style.cssText),Object(r.each)(c,(function(t,n){u[t]=e.style[t],e.style[t]=n})),s(),Object(r.each)(c,(function(t,n){e.style[t]=u[t]})),l&&(e.style.cssText=l)}}return a}function _e(e){return de(e)[0]}function pe(e){return de(e)[1]}function he(e,t){var n=_(e);return n&&n.classList&&n.classList.contains(t)}function fe(e,t){var n=_(e);n&&n.classList&&(t.includes(" ")?` ${n.className} `.includes(` ${t} `)||(n.className=(n.className?n.className+" ":"")+t):t.length&&!n.classList.contains(t)&&n.classList.add(t))}var me=(e,t,n)=>{n=Object(r.positive)(n),setTimeout(fe.pbind(e,t),n)};function ge(e,t){var n=_(e);t.length&&n&&n.classList&&n.classList.contains(t)&&n.classList.remove(t)}var ve=(e,t,n)=>{n=Object(r.positive)(n),setTimeout(ge.pbind(e,t),n)};function be(e,t,n){var r=_(e);if(!t.length||!r||!r.classList)return!1;if(void 0===n)return r.classList.toggle(t);var o=r.classList.contains(t);return n&&!o?r.classList.add(t):!n&&o&&r.classList.remove(t),n}function ye(e,t,n,o){return o=Object(r.positive)(o),void 0===n&&(n=!he(e,t)),(n?me:ve)(e,t,o),n}function Ee(e,t,n){ge(e,t),fe(e,n)}function we(e,t,n){if(e=_(e),Object(r.isArray)(t)){var o={};return Object(r.each)(t,(t,n)=>o[n]=we(e,n)),o}if(!e)return"";if(void 0===n&&(n=!0),!n&&"opacity"===t&&i.browser.msie){var a=e.style.filter;return a?a.indexOf("opacity=")>=0?parseFloat(a.match(/opacity=([^)]*)/)[1])/100+"":"1":""}if(!n&&e.style&&(e.style[t]||"height"===t))return e.style[t];var s,c=document.defaultView||window;if(c.getComputedStyle){t=t.replace(/([A-Z])/g,"-$1").toLowerCase();var u=c.getComputedStyle(e,null);u&&(s=u.getPropertyValue(t))}else if(e.currentStyle){if("opacity"===t&&i.browser.msie){var l=e.currentStyle.filter;return l&&l.indexOf("opacity=")>=0?parseFloat(l.match(/opacity=([^)]*)/)[1])/100+"":"1"}var d=t.replace(/\-(\w)/g,(function(e,t){return t.toUpperCase()}));"auto"===(s=e.currentStyle[t]||e.currentStyle[d])&&(s=0),s=(s+"").split(" "),Object(r.each)(s,(function(t,n){if(!/^\d+(px)?$/i.test(n)&&/^\d/.test(n)){var r=e.style,o=r.left,i=e.runtimeStyle.left;e.runtimeStyle.left=e.currentStyle.left,r.left=n||0,s[t]=r.pixelLeft+"px",r.left=o,e.runtimeStyle.left=i}})),s=s.join(" ")}if(n&&("width"===t||"height"===t)){var p=de(e,!0)[{width:0,height:1}[t]];s=(Object(r.intval)(s)?Math.max(Object(r.floatval)(s),p):p)+"px"}return s}function Oe(e,t,n){if(e=_(e))if(Object(r.isObject)(t))Object(r.each)(t,(t,n)=>Oe(e,t,n));else if("opacity"===t)i.browser.msie&&((n+"").length?e.style.filter=1!==n?"alpha(opacity="+100*n+")":"":e.style.cssText=e.style.cssText.replace(/filter\s*:[^;]*/gi,""),e.style.zoom=1),e.style.opacity!==n&&(e.style.opacity=n);else try{var o="number"==typeof n;o&&/height|width/i.test(t)&&(n=Math.abs(n)),n=o&&!/z-?index|font-?weight|opacity|zoom|line-?height/i.test(t)?n+"px":n,e.style[t]!==n&&(e.style[t]=n)}catch(e){Object(a.debugLog)("setStyle error: ",[t,n],e)}}function Ce(e,t,n){if(!e)return!1;var r=e[vkExpand];return r||(r=e[vkExpand]=++vkUUID),void 0!==n&&(vkCache[r]||(vkCache[r]={},window.__debugMode&&(vkCache[r].__elem=e)),vkCache[r][t]=n),t?vkCache[r]&&vkCache[r][t]:r}function Te(e,t,n){return e=_(e),void 0===n?e.getAttribute(t):(e.setAttribute(t,n),n)}function Se(e){for(var t=0,n=arguments.length;t<n;++t){var r=arguments[t];if(void 0!==e[r])try{delete e[r]}catch(t){try{e.removeAttribute(r)}catch(e){}}}}function De(e,t){var n=!!e&&e[vkExpand];if(n)if(t){if(vkCache[n]){delete vkCache[n][t],t="";var r=0;for(var i in vkCache[n])if("__elem"!==i){r++;break}r||De(e)}}else Object(o.removeEvent)(e),Se(e,vkExpand),delete vkCache[n]}function Pe(){for(var e=arguments,t=0;t<e.length;++t){var n=_(e[t]);n&&(De(n),Se(n,"btnevents"))}}function ke(e,t,n){if((e=_(e))&&!e.titleSet){if(t||(t=e),t.scrollWidth>t.clientWidth||t.scrollHeight>t.clientHeight)e.setAttribute("title",n||e.innerText||e.textContent);else{var r=h("b",e);r&&(r.scrollWidth>r.clientWidth||r.scrollHeight>r.clientHeight)?e.setAttribute("title",n||e.innerText||e.textContent):e.removeAttribute("title")}e.titleSet=1}}function Ae(){var e=_("zoom_test_1")||document.body.appendChild(O("div",{id:"zoom_test_1"},{left:"10%",position:"absolute",visibility:"hidden"}));return(_("zoom_test_2")||document.body.appendChild(O("div",{id:"zoom_test_2"},{left:e.offsetLeft+"px",position:"absolute",visibility:"hidden"}))).offsetLeft/e.offsetLeft}function Ie(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(e=_(e))return void 0!==t&&(e.setValue?(e.setValue(t),!n&&e.phonblur&&e.phonblur()):"INPUT"===e.tagName||"TEXTAREA"===e.tagName?e.value=t:void 0!==e.emojiId&&window.Emoji?Emoji.val(e,t):e.innerHTML=t,!n&&Object(o.triggerEvent)(e,"valueChanged")),e.getValue?e.getValue():("INPUT"===e.tagName||"TEXTAREA"===e.tagName?e.value:e.innerHTML)||""}function xe(e,t,n){e=_(e);try{if(e.focus(),void 0!==t&&!1!==t||(t=e.value.length),void 0!==n&&!1!==n||(n=t),e.setSelectionRange)e.setSelectionRange(t,n);else if(window.getSelection&&document.createRange){var r=document.createRange();r.selectNodeContents(e),r.collapse(!1);var o=window.getSelection();o.removeAllRanges(),o.addRange(r)}}catch(e){}}function je(e,t,n){for(e=_(e),n=n||999;e&&!t(e);){if(0===--n)return!1;try{if((e=F(e))===document)return!1}catch(t){e=!1}}return e}window.cssTransformProp=function(){var e=document.createElement("div");if(null==e.style.transform){var t=["Webkit","Moz","ms"];for(var n in t)if(void 0!==e.style[t[n]+"Transform"])return t[n]+"Transform"}return"transform"}();var Me=!1;function Le(e){if(!Me)return window.document.title=Object(r.replaceEntities)(e)}function Re(e){Me=e,e&&window.cur&&window.cur.destroy.push(()=>{Re(!1)})}function Be(){window.vkExpand=window.vkExpand||"VK"+Object(r.vkNow)(),window.vkUUID=window.vkUUID||0,window.vkCache=window.vkCache||{}}var Ne=O}}]);try{stManager.done("cmodules/bundles/common.6c79dd220e7f5f67941c.js")}catch(e){}