!function(t){function e(){this.regional=[],this.regional[""]={labels:["Years","Months","Weeks","Days","Hours","Minutes","Seconds"],labels1:["Year","Month","Week","Day","Hour","Minute","Second"],compactLabels:["y","m","w","d"],whichLabels:null,timeSeparator:":",isRTL:!1},this._defaults={until:null,since:null,timezone:null,serverSync:null,format:"dHMS",layout:"",compact:!1,significant:0,description:"",expiryUrl:"",expiryText:"",alwaysExpire:!1,onExpiry:null,onTick:null,tickInterval:1},t.extend(this._defaults,this.regional[""]),this._serverSyncs=[]}function n(e,n){t.extend(e,n);for(var s in n)null==n[s]&&(e[s]=null);return e}var s="countdown",i=0,o=1,a=2,r=3,_=4,l=5,d=6;t.extend(e.prototype,{markerClassName:"hasCountdown",_timer:setInterval(function(){t.countdown._updateTargets()},980),_timerTargets:[],setDefaults:function(t){this._resetExtraLabels(this._defaults,t),n(this._defaults,t||{})},UTCDate:function(t,e,n,s,i,o,a,r){"object"==typeof e&&e.constructor==Date&&(r=e.getMilliseconds(),a=e.getSeconds(),o=e.getMinutes(),i=e.getHours(),s=e.getDate(),n=e.getMonth(),e=e.getFullYear());var _=new Date;return _.setUTCFullYear(e),_.setUTCDate(1),_.setUTCMonth(n||0),_.setUTCDate(s||1),_.setUTCHours(i||0),_.setUTCMinutes((o||0)-(Math.abs(t)<30?60*t:t)),_.setUTCSeconds(a||0),_.setUTCMilliseconds(r||0),_},periodsToSeconds:function(t){return 31557600*t[0]+2629800*t[1]+604800*t[2]+86400*t[3]+3600*t[4]+60*t[5]+t[6]},_settingsCountdown:function(e,n){if(!n)return t.countdown._defaults;var i=t.data(e,s);return"all"==n?i.options:i.options[n]},_attachCountdown:function(e,n){var i=t(e);if(!i.hasClass(this.markerClassName)){i.addClass(this.markerClassName);var o={options:t.extend({},n),_periods:[0,0,0,0,0,0,0]};t.data(e,s,o),this._changeCountdown(e)}},_addTarget:function(t){this._hasTarget(t)||this._timerTargets.push(t)},_hasTarget:function(e){return t.inArray(e,this._timerTargets)>-1},_removeTarget:function(e){this._timerTargets=t.map(this._timerTargets,function(t){return t==e?null:t})},_updateTargets:function(){for(var t=this._timerTargets.length-1;t>=0;t--)this._updateCountdown(this._timerTargets[t])},_updateCountdown:function(e,n){var i=t(e);if(n=n||t.data(e,s)){i.html(this._generateHTML(n)),i[(this._get(n,"isRTL")?"add":"remove")+"Class"]("countdown_rtl");var o=this._get(n,"onTick");if(o){var a="lap"!=n._hold?n._periods:this._calculatePeriods(n,n._show,this._get(n,"significant"),new Date),r=this._get(n,"tickInterval");(1==r||this.periodsToSeconds(a)%r==0)&&o.apply(e,[a])}var _="pause"!=n._hold&&(n._since?n._now.getTime()<n._since.getTime():n._now.getTime()>=n._until.getTime());if(_&&!n._expiring){if(n._expiring=!0,this._hasTarget(e)||this._get(n,"alwaysExpire")){this._removeTarget(e);var l=this._get(n,"onExpiry");l&&l.apply(e,[]);var d=this._get(n,"expiryText");if(d){var u=this._get(n,"layout");n.options.layout=d,this._updateCountdown(e,n),n.options.layout=u}var h=this._get(n,"expiryUrl");h&&(window.location=h)}n._expiring=!1}else"pause"==n._hold&&this._removeTarget(e);t.data(e,s,n)}},_changeCountdown:function(e,i,o){if(i=i||{},"string"==typeof i){var a=i;i={},i[a]=o}var r=t.data(e,s);if(r){this._resetExtraLabels(r.options,i),n(r.options,i),this._adjustSettings(e,r),t.data(e,s,r);var _=new Date;(r._since&&r._since<_||r._until&&r._until>_)&&this._addTarget(e),this._updateCountdown(e,r)}},_resetExtraLabels:function(t,e){var n=!1;for(var s in e)if("whichLabels"!=s&&s.match(/[Ll]abels/)){n=!0;break}if(n)for(var s in t)s.match(/[Ll]abels[0-9]/)&&(t[s]=null)},_adjustSettings:function(t,e){for(var n,s=this._get(e,"serverSync"),i=0,o=null,a=0;a<this._serverSyncs.length;a++)if(this._serverSyncs[a][0]==s){o=this._serverSyncs[a][1];break}if(null!=o)i=s?o:0,n=new Date;else{var r=s?s.apply(t,[]):null;n=new Date,i=r?n.getTime()-r.getTime():0,this._serverSyncs.push([s,i])}var _=this._get(e,"timezone");_=null==_?-n.getTimezoneOffset():_,e._since=this._get(e,"since"),null!=e._since&&(e._since=this.UTCDate(_,this._determineTime(e._since,null)),e._since&&i&&e._since.setMilliseconds(e._since.getMilliseconds()+i)),e._until=this.UTCDate(_,this._determineTime(this._get(e,"until"),n)),i&&e._until.setMilliseconds(e._until.getMilliseconds()+i),e._show=this._determineShow(e)},_destroyCountdown:function(e){var n=t(e);n.hasClass(this.markerClassName)&&(this._removeTarget(e),n.removeClass(this.markerClassName).empty(),t.removeData(e,s))},_pauseCountdown:function(t){this._hold(t,"pause")},_lapCountdown:function(t){this._hold(t,"lap")},_resumeCountdown:function(t){this._hold(t,null)},_hold:function(e,n){var i=t.data(e,s);if(i){if("pause"==i._hold&&!n){i._periods=i._savePeriods;var o=i._since?"-":"+";i[i._since?"_since":"_until"]=this._determineTime(o+i._periods[0]+"y"+o+i._periods[1]+"o"+o+i._periods[2]+"w"+o+i._periods[3]+"d"+o+i._periods[4]+"h"+o+i._periods[5]+"m"+o+i._periods[6]+"s"),this._addTarget(e)}i._hold=n,i._savePeriods="pause"==n?i._periods:null,t.data(e,s,i),this._updateCountdown(e,i)}},_getTimesCountdown:function(e){var n=t.data(e,s);return n?n._hold?this._calculatePeriods(n,n._show,this._get(n,"significant"),new Date):n._periods:null},_get:function(e,n){return null!=e.options[n]?e.options[n]:t.countdown._defaults[n]},_determineTime:function(e,n){var s=function(t){var e=new Date;return e.setTime(e.getTime()+1e3*t),e},i=function(e){e=e.toLowerCase();for(var n=new Date,s=n.getFullYear(),i=n.getMonth(),o=n.getDate(),a=n.getHours(),r=n.getMinutes(),_=n.getSeconds(),l=/([+-]?[0-9]+)\s*(s|m|h|d|w|o|y)?/g,d=l.exec(e);d;){switch(d[2]||"s"){case"s":_+=parseInt(d[1],10);break;case"m":r+=parseInt(d[1],10);break;case"h":a+=parseInt(d[1],10);break;case"d":o+=parseInt(d[1],10);break;case"w":o+=7*parseInt(d[1],10);break;case"o":i+=parseInt(d[1],10),o=Math.min(o,t.countdown._getDaysInMonth(s,i));break;case"y":s+=parseInt(d[1],10),o=Math.min(o,t.countdown._getDaysInMonth(s,i))}d=l.exec(e)}return new Date(s,i,o,a,r,_,0)},o=null==e?n:"string"==typeof e?i(e):"number"==typeof e?s(e):e;return o&&o.setMilliseconds(0),o},_getDaysInMonth:function(t,e){return 32-new Date(t,e,32).getDate()},_normalLabels:function(t){return t},_generateHTML:function(e){var n=this._get(e,"significant");e._periods=e._hold?e._periods:this._calculatePeriods(e,e._show,n,new Date);for(var s=!1,u=0,h=n,c=t.extend({},e._show),p=i;d>=p;p++)s|="?"==e._show[p]&&e._periods[p]>0,c[p]="?"!=e._show[p]||s?e._show[p]:null,u+=c[p]?1:0,h-=e._periods[p]>0?1:0;for(var g=[!1,!1,!1,!1,!1,!1,!1],p=d;p>=i;p--)e._show[p]&&(e._periods[p]?g[p]=!0:(g[p]=h>0,h--));var m=this._get(e,"compact"),w=this._get(e,"layout"),f=m?this._get(e,"compactLabels"):this._get(e,"labels"),v=this._get(e,"whichLabels")||this._normalLabels,T=this._get(e,"timeSeparator"),y=this._get(e,"description")||"",D=function(n){var s=t.countdown._get(e,"compactLabels"+v(e._periods[n]));return c[n]?e._periods[n]+(s?s[n]:f[n])+" ":""},M=function(s){var i=t.countdown._get(e,"labels"+v(e._periods[s]));return!n&&c[s]||n&&g[s]?'<span class="countdown_section"><span class="countdown_amount">'+e._periods[s]+"</span><br/>"+(i?i[s]:f[s])+"</span>":""};return w?this._buildLayout(e,c,w,m,n,g):(m?'<span class="countdown_row countdown_amount'+(e._hold?" countdown_holding":"")+'">'+D(i)+D(o)+D(a)+D(r)+(c[_]?this._minDigits(e._periods[_],2):"")+(c[l]?(c[_]?T:"")+this._minDigits(e._periods[l],2):"")+(c[d]?(c[_]||c[l]?T:"")+this._minDigits(e._periods[d],2):""):'<span class="countdown_row countdown_show'+(n||u)+(e._hold?" countdown_holding":"")+'">'+M(i)+M(o)+M(a)+M(r)+M(_)+M(l)+M(d))+"</span>"+(y?'<span class="countdown_row countdown_descr">'+y+"</span>":"")},_buildLayout:function(e,n,s,u,h,c){for(var p=this._get(e,u?"compactLabels":"labels"),g=this._get(e,"whichLabels")||this._normalLabels,m=function(n){return(t.countdown._get(e,(u?"compactLabels":"labels")+g(e._periods[n]))||p)[n]},w=function(t,e){return Math.floor(t/e)%10},f={desc:this._get(e,"description"),sep:this._get(e,"timeSeparator"),yl:m(i),yn:e._periods[i],ynn:this._minDigits(e._periods[i],2),ynnn:this._minDigits(e._periods[i],3),y1:w(e._periods[i],1),y10:w(e._periods[i],10),y100:w(e._periods[i],100),y1000:w(e._periods[i],1e3),ol:m(o),on:e._periods[o],onn:this._minDigits(e._periods[o],2),onnn:this._minDigits(e._periods[o],3),o1:w(e._periods[o],1),o10:w(e._periods[o],10),o100:w(e._periods[o],100),o1000:w(e._periods[o],1e3),wl:m(a),wn:e._periods[a],wnn:this._minDigits(e._periods[a],2),wnnn:this._minDigits(e._periods[a],3),w1:w(e._periods[a],1),w10:w(e._periods[a],10),w100:w(e._periods[a],100),w1000:w(e._periods[a],1e3),dl:m(r),dn:e._periods[r],dnn:this._minDigits(e._periods[r],2),dnnn:this._minDigits(e._periods[r],3),d1:w(e._periods[r],1),d10:w(e._periods[r],10),d100:w(e._periods[r],100),d1000:w(e._periods[r],1e3),hl:m(_),hn:e._periods[_],hnn:this._minDigits(e._periods[_],2),hnnn:this._minDigits(e._periods[_],3),h1:w(e._periods[_],1),h10:w(e._periods[_],10),h100:w(e._periods[_],100),h1000:w(e._periods[_],1e3),ml:m(l),mn:e._periods[l],mnn:this._minDigits(e._periods[l],2),mnnn:this._minDigits(e._periods[l],3),m1:w(e._periods[l],1),m10:w(e._periods[l],10),m100:w(e._periods[l],100),m1000:w(e._periods[l],1e3),sl:m(d),sn:e._periods[d],snn:this._minDigits(e._periods[d],2),snnn:this._minDigits(e._periods[d],3),s1:w(e._periods[d],1),s10:w(e._periods[d],10),s100:w(e._periods[d],100),s1000:w(e._periods[d],1e3)},v=s,T=i;d>=T;T++){var y="yowdhms".charAt(T),D=new RegExp("\\{"+y+"<\\}(.*)\\{"+y+">\\}","g");v=v.replace(D,!h&&n[T]||h&&c[T]?"$1":"")}return t.each(f,function(t,e){var n=new RegExp("\\{"+t+"\\}","g");v=v.replace(n,e)}),v},_minDigits:function(t,e){return t=""+t,t.length>=e?t:(t="0000000000"+t,t.substr(t.length-e))},_determineShow:function(t){var e=this._get(t,"format"),n=[];return n[i]=e.match("y")?"?":e.match("Y")?"!":null,n[o]=e.match("o")?"?":e.match("O")?"!":null,n[a]=e.match("w")?"?":e.match("W")?"!":null,n[r]=e.match("d")?"?":e.match("D")?"!":null,n[_]=e.match("h")?"?":e.match("H")?"!":null,n[l]=e.match("m")?"?":e.match("M")?"!":null,n[d]=e.match("s")?"?":e.match("S")?"!":null,n},_calculatePeriods:function(e,n,s,u){e._now=u,e._now.setMilliseconds(0);var h=new Date(e._now.getTime());e._since?u.getTime()<e._since.getTime()?e._now=u=h:u=e._since:(h.setTime(e._until.getTime()),u.getTime()>e._until.getTime()&&(e._now=u=h));var c=[0,0,0,0,0,0,0];if(n[i]||n[o]){var p=t.countdown._getDaysInMonth(u.getFullYear(),u.getMonth()),g=t.countdown._getDaysInMonth(h.getFullYear(),h.getMonth()),m=h.getDate()==u.getDate()||h.getDate()>=Math.min(p,g)&&u.getDate()>=Math.min(p,g),w=function(t){return 60*(60*t.getHours()+t.getMinutes())+t.getSeconds()},f=Math.max(0,12*(h.getFullYear()-u.getFullYear())+h.getMonth()-u.getMonth()+(h.getDate()<u.getDate()&&!m||m&&w(h)<w(u)?-1:0));c[i]=n[i]?Math.floor(f/12):0,c[o]=n[o]?f-12*c[i]:0,u=new Date(u.getTime());var v=u.getDate()==p,T=t.countdown._getDaysInMonth(u.getFullYear()+c[i],u.getMonth()+c[o]);u.getDate()>T&&u.setDate(T),u.setFullYear(u.getFullYear()+c[i]),u.setMonth(u.getMonth()+c[o]),v&&u.setDate(T)}var y=Math.floor((h.getTime()-u.getTime())/1e3),D=function(t,e){c[t]=n[t]?Math.floor(y/e):0,y-=c[t]*e};if(D(a,604800),D(r,86400),D(_,3600),D(l,60),D(d,1),y>0&&!e._since)for(var M=[1,12,4.3482,7,24,60,60],C=d,b=1,x=d;x>=i;x--)n[x]&&(c[C]>=b&&(c[C]=0,y=1),y>0&&(c[x]++,y=0,C=x,b=1)),b*=M[x];if(s)for(var x=i;d>=x;x++)s&&c[x]?s--:s||(c[x]=0);return c}}),t.fn.countdown=function(e){var n=Array.prototype.slice.call(arguments,1);return"getTimes"==e||"settings"==e?t.countdown["_"+e+"Countdown"].apply(t.countdown,[this[0]].concat(n)):this.each(function(){"string"==typeof e?t.countdown["_"+e+"Countdown"].apply(t.countdown,[this].concat(n)):t.countdown._attachCountdown(this,e)})},t.countdown=new e}(jQuery);